import{a as rt,b as st,f as w}from"./chunk-YYD2Q6U2.js";var it=()=>{};var ct=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},pn=function(t){let e=[],n=0,r=0;for(;n<t.length;){let s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){let i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){let i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},lt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){let i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4,l=(a&15)<<2|u>>6,d=u&63;c||(d=64,o||(l=64)),r.push(n[h],n[f],n[l],n[d])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ct(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):pn(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){let i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;let u=s<t.length?n[t.charAt(s)]:64;++s;let f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||f==null)throw new Ce;let l=i<<2|a>>4;if(r.push(l),u!==64){let d=a<<4&240|u>>2;if(r.push(d),f!==64){let p=u<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Ce=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},_n=function(t){let e=ct(t);return lt.encodeByteArray(e,!0)},Z=function(t){return _n(t).replace(/\./g,"")},ut=function(t){try{return lt.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function mn(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var gn=()=>mn().__FIREBASE_DEFAULTS__,bn=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},yn=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&ut(t[1]);return e&&JSON.parse(e)},he=()=>{try{return it()||gn()||bn()||yn()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},wn=t=>{var e,n;return(n=(e=he())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ht=t=>{let e=wn(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ae=()=>{var t;return(t=he())===null||t===void 0?void 0:t.config},Ks=t=>{var e;return(e=he())===null||e===void 0?void 0:e[`_${t}`]};var ue=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function de(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function dt(t){return w(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function ft(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Z(JSON.stringify(n)),Z(JSON.stringify(o)),""].join(".")}var J={};function En(){let t={prod:[],emulator:[]};for(let e of Object.keys(J))J[e]?t.emulator.push(e):t.prod.push(e);return t}function Tn(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var ot=!1;function pt(t,e){if(typeof window>"u"||typeof document>"u"||!de(window.location.host)||J[t]===e||J[t]||ot)return;J[t]=e;function n(l){return`__firebase__banner__${l}`}let r="__firebase__banner",i=En().prod.length>0;function o(){let l=document.getElementById(r);l&&l.remove()}function a(l){l.style.display="flex",l.style.background="#7faaf0",l.style.position="fixed",l.style.bottom="5px",l.style.left="5px",l.style.padding=".5em",l.style.borderRadius="5px",l.style.alignItems="center"}function c(l,d){l.setAttribute("width","24"),l.setAttribute("id",d),l.setAttribute("height","24"),l.setAttribute("viewBox","0 0 24 24"),l.setAttribute("fill","none"),l.style.marginLeft="-6px"}function u(){let l=document.createElement("span");return l.style.cursor="pointer",l.style.marginLeft="16px",l.style.fontSize="24px",l.innerHTML=" &times;",l.onclick=()=>{ot=!0,o()},l}function h(l,d){l.setAttribute("id",d),l.innerText="Learn more",l.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",l.setAttribute("target","__blank"),l.style.paddingLeft="5px",l.style.textDecoration="underline"}function f(){let l=Tn(r),d=n("text"),p=document.getElementById(d)||document.createElement("span"),T=n("learnmore"),g=document.getElementById(T)||document.createElement("a"),S=n("preprendIcon"),C=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(l.created){let y=l.element;a(y),h(g,T);let E=u();c(C,S),y.append(C,p,g,E),document.body.appendChild(y)}i?(p.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",d)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function _t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Xs(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function vn(){var t;let e=(t=he())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Js(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Zs(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ys(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Qs(){let t=_t();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ei(){return!vn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mt(){try{return typeof indexedDB=="object"}catch{return!1}}function gt(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}var Cn="FirebaseError",P=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Cn,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Y.prototype.create)}},Y=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Rn(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new P(s,a,r)}};function Rn(t,e){return t.replace(An,(n,r)=>{let s=e[r];return s!=null?String(s):`<${r}?>`})}var An=/\{\$([^}]+)}/g;function ti(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function fe(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let s of n){if(!r.includes(s))return!1;let i=t[s],o=e[s];if(at(i)&&at(o)){if(!fe(i,o))return!1}else if(i!==o)return!1}for(let s of r)if(!n.includes(s))return!1;return!0}function at(t){return t!==null&&typeof t=="object"}function ni(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ri(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function si(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function ii(t,e){let n=new Re(t,e);return n.subscribe.bind(n)}var Re=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");In(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ve),s.error===void 0&&(s.error=ve),s.complete===void 0&&(s.complete=ve);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function In(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ve(){}var oi=14400*1e3;function R(t){return t&&t._delegate?t._delegate:t}var U=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var F="[DEFAULT]";var Ie=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new ue;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),s=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(On(e))try{this.getOrInitializeService({instanceIdentifier:F})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let s=this.normalizeInstanceIdentifier(n);try{let i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=F){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return w(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=F){return this.instances.has(e)}getOptions(e=F){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[i,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;let s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);let o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Sn(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=F){return this.component?this.component.multipleInstances?e:F:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Sn(t){return t===F?void 0:t}function On(t){return t.instantiationMode==="EAGER"}var pe=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Ie(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var kn=[],_=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(_||{}),Dn={debug:_.DEBUG,verbose:_.VERBOSE,info:_.INFO,warn:_.WARN,error:_.ERROR,silent:_.SILENT},xn=_.INFO,Nn={[_.DEBUG]:"log",[_.VERBOSE]:"log",[_.INFO]:"info",[_.WARN]:"warn",[_.ERROR]:"error"},Pn=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),s=Nn[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},_e=class{constructor(e){this.name=e,this._logLevel=xn,this._logHandler=Pn,this._userLogHandler=null,kn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Dn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_.DEBUG,...e),this._logHandler(this,_.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_.VERBOSE,...e),this._logHandler(this,_.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_.INFO,...e),this._logHandler(this,_.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_.WARN,...e),this._logHandler(this,_.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_.ERROR,...e),this._logHandler(this,_.ERROR,...e)}};var Un=(t,e)=>e.some(n=>t instanceof n),bt,yt;function Bn(){return bt||(bt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ln(){return yt||(yt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var wt=new WeakMap,Oe=new WeakMap,Et=new WeakMap,Se=new WeakMap,De=new WeakMap;function Mn(t){let e=new Promise((n,r)=>{let s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(x(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&wt.set(n,t)}).catch(()=>{}),De.set(e,t),e}function Fn(t){if(Oe.has(t))return;let e=new Promise((n,r)=>{let s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Oe.set(t,e)}var ke={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Oe.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Et.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return x(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Tt(t){ke=t(ke)}function Hn(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(me(this),e,...n);return Et.set(r,e.sort?e.sort():[e]),x(r)}:Ln().includes(t)?function(...e){return t.apply(me(this),e),x(wt.get(this))}:function(...e){return x(t.apply(me(this),e))}}function $n(t){return typeof t=="function"?Hn(t):(t instanceof IDBTransaction&&Fn(t),Un(t,Bn())?new Proxy(t,ke):t)}function x(t){if(t instanceof IDBRequest)return Mn(t);if(Se.has(t))return Se.get(t);let e=$n(t);return e!==t&&(Se.set(t,e),De.set(e,t)),e}var me=t=>De.get(t);function Ct(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){let o=indexedDB.open(t,e),a=x(o);return r&&o.addEventListener("upgradeneeded",c=>{r(x(o.result),c.oldVersion,c.newVersion,x(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var jn=["get","getKey","getAll","getAllKeys","count"],zn=["put","add","delete","clear"],xe=new Map;function vt(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xe.get(e))return xe.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,s=zn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||jn.includes(n)))return;let i=function(o,...a){return w(this,null,function*(){let c=this.transaction(o,s?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[n](...a),s&&c.done]))[0]})};return xe.set(e,i),i}Tt(t=>st(rt({},t),{get:(e,n,r)=>vt(e,n)||t.get(e,n,r),has:(e,n)=>!!vt(e,n)||t.has(e,n)}));var Pe=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Wn(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function Wn(t){let e=t.getComponent();return e?.type==="VERSION"}var Ue="@firebase/app",Rt="0.13.2";var B=new _e("@firebase/app"),Vn="@firebase/app-compat",qn="@firebase/analytics-compat",Gn="@firebase/analytics",Kn="@firebase/app-check-compat",Xn="@firebase/app-check",Jn="@firebase/auth",Zn="@firebase/auth-compat",Yn="@firebase/database",Qn="@firebase/data-connect",er="@firebase/database-compat",tr="@firebase/functions",nr="@firebase/functions-compat",rr="@firebase/installations",sr="@firebase/installations-compat",ir="@firebase/messaging",or="@firebase/messaging-compat",ar="@firebase/performance",cr="@firebase/performance-compat",lr="@firebase/remote-config",ur="@firebase/remote-config-compat",hr="@firebase/storage",dr="@firebase/storage-compat",fr="@firebase/firestore",pr="@firebase/ai",_r="@firebase/firestore-compat",mr="firebase",gr="11.10.0";var Be="[DEFAULT]",br={[Ue]:"fire-core",[Vn]:"fire-core-compat",[Gn]:"fire-analytics",[qn]:"fire-analytics-compat",[Xn]:"fire-app-check",[Kn]:"fire-app-check-compat",[Jn]:"fire-auth",[Zn]:"fire-auth-compat",[Yn]:"fire-rtdb",[Qn]:"fire-data-connect",[er]:"fire-rtdb-compat",[tr]:"fire-fn",[nr]:"fire-fn-compat",[rr]:"fire-iid",[sr]:"fire-iid-compat",[ir]:"fire-fcm",[or]:"fire-fcm-compat",[ar]:"fire-perf",[cr]:"fire-perf-compat",[lr]:"fire-rc",[ur]:"fire-rc-compat",[hr]:"fire-gcs",[dr]:"fire-gcs-compat",[fr]:"fire-fst",[_r]:"fire-fst-compat",[pr]:"fire-vertex","fire-js":"fire-js",[mr]:"fire-js-all"};var Q=new Map,yr=new Map,Le=new Map;function At(t,e){try{t.container.addComponent(e)}catch(n){B.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ee(t){let e=t.name;if(Le.has(e))return B.debug(`There were multiple attempts to register component ${e}.`),!1;Le.set(e,t);for(let n of Q.values())At(n,t);for(let n of yr.values())At(n,t);return!0}function kt(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Dt(t){return t==null?!1:t.settings!==void 0}var wr={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},M=new Y("app","Firebase",wr);var Me=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new U("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw M.create("app-deleted",{appName:this._name})}};var xt=gr;function Er(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Be,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw M.create("bad-app-name",{appName:String(s)});if(n||(n=Ae()),!n)throw M.create("no-options");let i=Q.get(s);if(i){if(fe(n,i.options)&&fe(r,i.config))return i;throw M.create("duplicate-app",{appName:s})}let o=new pe(s);for(let c of Le.values())o.addComponent(c);let a=new Me(n,r,o);return Q.set(s,a),a}function Nt(t=Be){let e=Q.get(t);if(!e&&t===Be&&Ae())return Er();if(!e)throw M.create("no-app",{appName:t});return e}function Ai(){return Array.from(Q.values())}function j(t,e,n){var r;let s=(r=br[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);let i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),B.warn(a.join(" "));return}ee(new U(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}var Tr="firebase-heartbeat-database",vr=1,te="firebase-heartbeat-store",Ne=null;function Pt(){return Ne||(Ne=Ct(Tr,vr,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(te)}catch(n){console.warn(n)}}}}).catch(t=>{throw M.create("idb-open",{originalErrorMessage:t.message})})),Ne}function Cr(t){return w(this,null,function*(){try{let n=(yield Pt()).transaction(te),r=yield n.objectStore(te).get(Ut(t));return yield n.done,r}catch(e){if(e instanceof P)B.warn(e.message);else{let n=M.create("idb-get",{originalErrorMessage:e?.message});B.warn(n.message)}}})}function It(t,e){return w(this,null,function*(){try{let r=(yield Pt()).transaction(te,"readwrite");yield r.objectStore(te).put(e,Ut(t)),yield r.done}catch(n){if(n instanceof P)B.warn(n.message);else{let r=M.create("idb-set",{originalErrorMessage:n?.message});B.warn(r.message)}}})}function Ut(t){return`${t.name}!${t.options.appId}`}var Rr=1024,Ar=30,Fe=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new He(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return w(this,null,function*(){var e,n;try{let s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=St();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>Ar){let o=Sr(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){B.warn(r)}})}getHeartbeatsHeader(){return w(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=St(),{heartbeatsToSend:r,unsentEntries:s}=Ir(this._heartbeatsCache.heartbeats),i=Z(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return B.warn(n),""}})}};function St(){return new Date().toISOString().substring(0,10)}function Ir(t,e=Rr){let n=[],r=t.slice();for(let s of t){let i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Ot(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ot(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var He=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return w(this,null,function*(){return mt()?gt().then(()=>!0).catch(()=>!1):!1})}read(){return w(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield Cr(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let s=yield this.read();return It(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let s=yield this.read();return It(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return})}};function Ot(t){return Z(JSON.stringify({version:2,heartbeats:t})).length}function Sr(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function Or(t){ee(new U("platform-logger",e=>new Pe(e),"PRIVATE")),ee(new U("heartbeat",e=>new Fe(e),"PRIVATE")),j(Ue,Rt,t),j(Ue,Rt,"esm2017"),j("fire-js","")}Or("");var Wt="firebasestorage.googleapis.com",Vt="storageBucket",kr=120*1e3,Dr=600*1e3,xr=1e3;var b=class t extends P{constructor(e,n,r=0){super($e(e),`Firebase Storage: ${n} (${$e(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return $e(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},m=(function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t})(m||{});function $e(t){return"storage/"+t}function Ye(){let t="An unknown error occurred, please check the error payload for server response.";return new b(m.UNKNOWN,t)}function Nr(t){return new b(m.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Pr(t){return new b(m.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Ur(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new b(m.UNAUTHENTICATED,t)}function Br(){return new b(m.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Lr(t){return new b(m.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function qt(){return new b(m.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Gt(){return new b(m.CANCELED,"User canceled the upload/download.")}function Mr(t){return new b(m.INVALID_URL,"Invalid URL '"+t+"'.")}function Fr(t){return new b(m.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Hr(){return new b(m.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Vt+"' property when initializing the app?")}function Kt(){return new b(m.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function $r(){return new b(m.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function jr(){return new b(m.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function zr(t){return new b(m.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ze(t){return new b(m.INVALID_ARGUMENT,t)}function Xt(){return new b(m.APP_DELETED,"The Firebase app was deleted.")}function Wr(t){return new b(m.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function re(t,e){return new b(m.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ne(t){throw new b(m.INTERNAL_ERROR,"Internal error: "+t)}var I=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw Fr(e)}static makeFromUrl(e,n){let r=null,s="([A-Za-z0-9.\\-_]+)";function i(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(E){E.path_=decodeURIComponent(E.path)}let h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),l="(/([^?#]*).*)?$",d=new RegExp(`^https?://${f}/${h}/b/${s}/o${l}`,"i"),p={bucket:1,path:3},T=n===Wt?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",S=new RegExp(`^https?://${T}/${s}/${g}`,"i"),y=[{regex:a,indices:c,postModify:i},{regex:d,indices:p,postModify:u},{regex:S,indices:{bucket:1,path:2},postModify:u}];for(let E=0;E<y.length;E++){let H=y[E],$=H.regex.exec(e);if($){let Ee=$[H.indices.bucket],X=$[H.indices.path];X||(X=""),r=new t(Ee,X),H.postModify(r);break}}if(r==null)throw Mr(e);return r}},We=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function Vr(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function c(){return a===2}let u=!1;function h(...g){u||(u=!0,e.apply(null,g))}function f(g){s=setTimeout(()=>{s=null,t(d,c())},g)}function l(){i&&clearTimeout(i)}function d(g,...S){if(u){l();return}if(g){l(),h.call(null,g,...S);return}if(c()||o){l(),h.call(null,g,...S);return}r<64&&(r*=2);let y;a===1?(a=2,y=0):y=(r+Math.random())*1e3,f(y)}let p=!1;function T(g){p||(p=!0,l(),!u&&(s!==null?(g||(a=2),clearTimeout(s),f(0)):g||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,T(!0)},n),T}function qr(t){t(!1)}function Gr(t){return t!==void 0}function Kr(t){return typeof t=="function"}function Xr(t){return typeof t=="object"&&!Array.isArray(t)}function ye(t){return typeof t=="string"||t instanceof String}function Bt(t){return Qe()&&t instanceof Blob}function Qe(){return typeof Blob<"u"}function Ve(t,e,n,r){if(r<e)throw ze(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw ze(`Invalid value for '${t}'. Expected ${n} or less.`)}function L(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Jt(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var V=(function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t})(V||{});function Zt(t,e){let n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}var qe=class{constructor(e,n,r,s,i,o,a,c,u,h,f,l=!0,d=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=l,this.isUsingEmulator=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,T)=>{this.resolve_=p,this.reject_=T,this.start_()})}start_(){let e=(r,s)=>{if(s){r(!1,new W(!1,null,!0));return}let i=this.connectionFactory_();this.pendingConnection_=i;let o=a=>{let c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;let a=i.getErrorCode()===V.NO_ERROR,c=i.getStatus();if(!a||Zt(c,this.additionalRetryCodes_)&&this.retry){let h=i.getErrorCode()===V.ABORT;r(!1,new W(!1,null,h));return}let u=this.successCodes_.indexOf(c)!==-1;r(!0,new W(u,i))})},n=(r,s)=>{let i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());Gr(c)?i(c):i()}catch(c){o(c)}else if(a!==null){let c=Ye();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(s.canceled){let c=this.appDelete_?Xt():Gt();o(c)}else{let c=qt();o(c)}};this.canceled_?n(!1,new W(!1,null,!0)):this.backoffId_=Vr(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&qr(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},W=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function Jr(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Zr(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Yr(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Qr(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function es(t,e,n,r,s,i,o=!0,a=!1){let c=Jt(t.urlParams),u=t.url+c,h=Object.assign({},t.headers);return Yr(h,e),Jr(h,n),Zr(h,i),Qr(h,r),new qe(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}function ts(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function ns(...t){let e=ts();if(e!==void 0){let n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Qe())return new Blob(t);throw new b(m.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function rs(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function ss(t){if(typeof atob>"u")throw zr("base-64");return atob(t)}var D={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},se=class{constructor(e,n){this.data=e,this.contentType=n||null}};function Yt(t,e){switch(t){case D.RAW:return new se(Qt(e));case D.BASE64:case D.BASE64URL:return new se(en(t,e));case D.DATA_URL:return new se(os(e),as(e))}throw Ye()}function Qt(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function is(t){let e;try{e=decodeURIComponent(t)}catch{throw re(D.DATA_URL,"Malformed data URL.")}return Qt(e)}function en(t,e){switch(t){case D.BASE64:{let s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw re(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case D.BASE64URL:{let s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw re(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=ss(e)}catch(s){throw s.message.includes("polyfill")?s:re(t,"Invalid character found")}let r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}var be=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw re(D.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=n[1]||null;r!=null&&(this.base64=cs(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function os(t){let e=new be(t);return e.base64?en(D.BASE64,e.rest):is(e.rest)}function as(t){return new be(t).contentType}function cs(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var ie=class t{constructor(e,n){let r=0,s="";Bt(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Bt(this.data_)){let r=this.data_,s=rs(r,e,n);return s===null?null:new t(s)}else{let r=new Uint8Array(this.data_.buffer,e,n-e);return new t(r,!0)}}static getBlob(...e){if(Qe()){let n=e.map(r=>r instanceof t?r.data_:r);return new t(ns.apply(null,n))}else{let n=e.map(o=>ye(o)?Yt(D.RAW,o).data:o.data_),r=0;n.forEach(o=>{r+=o.byteLength});let s=new Uint8Array(r),i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new t(s,!0)}}uploadData(){return this.data_}};function et(t){let e;try{e=JSON.parse(t)}catch{return null}return Xr(e)?e:null}function ls(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function us(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function tn(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function hs(t,e){return e}var v=class{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||hs}},ge=null;function ds(t){return!ye(t)||t.length<2?t:tn(t)}function ce(){if(ge)return ge;let t=[];t.push(new v("bucket")),t.push(new v("generation")),t.push(new v("metageneration")),t.push(new v("name","fullPath",!0));function e(i,o){return ds(o)}let n=new v("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}let s=new v("size");return s.xform=r,t.push(s),t.push(new v("timeCreated")),t.push(new v("updated")),t.push(new v("md5Hash",null,!0)),t.push(new v("cacheControl",null,!0)),t.push(new v("contentDisposition",null,!0)),t.push(new v("contentEncoding",null,!0)),t.push(new v("contentLanguage",null,!0)),t.push(new v("contentType",null,!0)),t.push(new v("metadata","customMetadata",!0)),ge=t,ge}function fs(t,e){function n(){let r=t.bucket,s=t.fullPath,i=new I(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function ps(t,e,n){let r={};r.type="file";let s=n.length;for(let i=0;i<s;i++){let o=n[i];r[o.local]=o.xform(r,e[o.server])}return fs(r,t),r}function nn(t,e,n){let r=et(e);return r===null?null:ps(t,r,n)}function _s(t,e,n,r){let s=et(e);if(s===null||!ye(s.downloadTokens))return null;let i=s.downloadTokens;if(i.length===0)return null;let o=encodeURIComponent;return i.split(",").map(u=>{let h=t.bucket,f=t.fullPath,l="/b/"+o(h)+"/o/"+o(f),d=L(l,n,r),p=Jt({alt:"media",token:u});return d+p})[0]}function tt(t,e){let n={},r=e.length;for(let s=0;s<r;s++){let i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}var Lt="prefixes",Mt="items";function ms(t,e,n){let r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Lt])for(let s of n[Lt]){let i=s.replace(/\/$/,""),o=t._makeStorageReference(new I(e,i));r.prefixes.push(o)}if(n[Mt])for(let s of n[Mt]){let i=t._makeStorageReference(new I(e,s.name));r.items.push(i)}return r}function gs(t,e,n){let r=et(n);return r===null?null:ms(t,e,r)}var O=class{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function N(t){if(!t)throw Ye()}function we(t,e){function n(r,s){let i=nn(t,s,e);return N(i!==null),i}return n}function bs(t,e){function n(r,s){let i=gs(t,e,s);return N(i!==null),i}return n}function ys(t,e){function n(r,s){let i=nn(t,s,e);return N(i!==null),_s(i,s,t.host,t._protocol)}return n}function K(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=Br():s=Ur():n.getStatus()===402?s=Pr(t.bucket):n.getStatus()===403?s=Lr(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function le(t){let e=K(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=Nr(t.path)),i.serverResponse=s.serverResponse,i}return n}function rn(t,e,n){let r=e.fullServerUrl(),s=L(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new O(s,i,we(t,n),o);return a.errorHandler=le(e),a}function ws(t,e,n,r,s){let i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",n&&n.length>0&&(i.delimiter=n),r&&(i.pageToken=r),s&&(i.maxResults=s);let o=e.bucketOnlyServerUrl(),a=L(o,t.host,t._protocol),c="GET",u=t.maxOperationRetryTime,h=new O(a,c,bs(t,e.bucket),u);return h.urlParams=i,h.errorHandler=K(e),h}function sn(t,e,n){let r=e.fullServerUrl(),s=L(r,t.host,t._protocol)+"?alt=media",i="GET",o=t.maxOperationRetryTime,a=new O(s,i,(c,u)=>u,o);return a.errorHandler=le(e),n!==void 0&&(a.headers.Range=`bytes=0-${n}`,a.successCodes=[200,206]),a}function Es(t,e,n){let r=e.fullServerUrl(),s=L(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new O(s,i,ys(t,n),o);return a.errorHandler=le(e),a}function Ts(t,e,n,r){let s=e.fullServerUrl(),i=L(s,t.host,t._protocol),o="PATCH",a=tt(n,r),c={"Content-Type":"application/json; charset=utf-8"},u=t.maxOperationRetryTime,h=new O(i,o,we(t,r),u);return h.headers=c,h.body=a,h.errorHandler=le(e),h}function vs(t,e){let n=e.fullServerUrl(),r=L(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(c,u){}let a=new O(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=le(e),a}function Cs(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function on(t,e,n){let r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Cs(null,e)),r}function an(t,e,n,r,s){let i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let y="";for(let E=0;E<2;E++)y=y+Math.random().toString().slice(2);return y}let c=a();o["Content-Type"]="multipart/related; boundary="+c;let u=on(e,r,s),h=tt(u,n),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,l=`\r
--`+c+"--",d=ie.getBlob(f,r,l);if(d===null)throw Kt();let p={name:u.fullPath},T=L(i,t.host,t._protocol),g="POST",S=t.maxUploadRetryTime,C=new O(T,g,we(t,n),S);return C.urlParams=p,C.headers=o,C.body=d.uploadData(),C.errorHandler=K(e),C}var q=class{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}};function nt(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{N(!1)}return N(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Rs(t,e,n,r,s){let i=e.bucketOnlyServerUrl(),o=on(e,r,s),a={name:o.fullPath},c=L(i,t.host,t._protocol),u="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},f=tt(o,n),l=t.maxUploadRetryTime;function d(T){nt(T);let g;try{g=T.getResponseHeader("X-Goog-Upload-URL")}catch{N(!1)}return N(ye(g)),g}let p=new O(c,u,d,l);return p.urlParams=a,p.headers=h,p.body=f,p.errorHandler=K(e),p}function As(t,e,n,r){let s={"X-Goog-Upload-Command":"query"};function i(u){let h=nt(u,["active","final"]),f=null;try{f=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{N(!1)}f||N(!1);let l=Number(f);return N(!isNaN(l)),new q(l,r.size(),h==="final")}let o="POST",a=t.maxUploadRetryTime,c=new O(n,o,i,a);return c.headers=s,c.errorHandler=K(e),c}var Ft=256*1024;function Is(t,e,n,r,s,i,o,a){let c=new q(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw $r();let u=c.total-c.current,h=u;s>0&&(h=Math.min(h,s));let f=c.current,l=f+h,d="";h===0?d="finalize":u===h?d="upload, finalize":d="upload";let p={"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":`${c.current}`},T=r.slice(f,l);if(T===null)throw Kt();function g(E,H){let $=nt(E,["active","final"]),Ee=c.current+h,X=r.size(),Te;return $==="final"?Te=we(e,i)(E,H):Te=null,new q(Ee,X,$==="final",Te)}let S="POST",C=e.maxUploadRetryTime,y=new O(n,S,g,C);return y.headers=p,y.body=T.uploadData(),y.progressCallback=a||null,y.errorHandler=K(t),y}var Ni={STATE_CHANGED:"state_changed"},A={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function je(t){switch(t){case"running":case"pausing":case"canceling":return A.RUNNING;case"paused":return A.PAUSED;case"success":return A.SUCCESS;case"canceled":return A.CANCELED;case"error":return A.ERROR;default:return A.ERROR}}var Ge=class{constructor(e,n,r){if(Kr(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{let i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}};function z(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}var Ht=null,oe=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=V.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=V.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=V.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw ne("cannot .send() more than once");if(de(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(let o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ne("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ne("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ne("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ne("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},Ke=class extends oe{initXhr(){this.xhr_.responseType="text"}};function k(){return Ht?Ht():new Ke}var Xe=class extends oe{initXhr(){this.xhr_.responseType="arraybuffer"}};function Ss(){return new Xe}var Je=class extends oe{initXhr(){this.xhr_.responseType="blob"}};function Os(){return new Je}var Ze=class{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=ce(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(m.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let i=this.isExponentialBackoffExpired();if(Zt(s.status,[]))if(i)s=qt();else{this.sleepTime=Math.max(this.sleepTime*2,xr),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(m.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){let e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{let r=Rs(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,k,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((n,r)=>{let s=As(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,k,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=Ft*this._chunkMultiplier,n=new q(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=Is(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}let a=this._ref.storage._makeRequest(o,k,s,i,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Ft*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{let r=rn(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,k,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{let r=an(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,k,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Gt(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=je(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){let i=new Ge(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(je(this._state)){case A.SUCCESS:z(this._resolve.bind(null,this.snapshot))();break;case A.CANCELED:case A.ERROR:let n=this._reject;z(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(je(this._state)){case A.RUNNING:case A.PAUSED:e.next&&z(e.next.bind(e,this.snapshot))();break;case A.SUCCESS:e.complete&&z(e.complete.bind(e))();break;case A.CANCELED:case A.ERROR:e.error&&z(e.error.bind(e,this._error))();break;default:e.error&&z(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var G=class t{constructor(e,n){this._service=e,n instanceof I?this._location=n:this._location=I.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new I(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return tn(this._location.path)}get storage(){return this._service}get parent(){let e=ls(this._location.path);if(e===null)return null;let n=new I(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Wr(e)}};function ks(t,e){t._throwIfRoot("getBytes");let n=sn(t.storage,t._location,e);return t.storage.makeRequestWithTokens(n,Ss).then(r=>e!==void 0?r.slice(0,e):r)}function Ds(t,e){t._throwIfRoot("getBlob");let n=sn(t.storage,t._location,e);return t.storage.makeRequestWithTokens(n,Os).then(r=>e!==void 0?r.slice(0,e):r)}function cn(t,e,n){t._throwIfRoot("uploadBytes");let r=an(t.storage,t._location,ce(),new ie(e,!0),n);return t.storage.makeRequestWithTokens(r,k).then(s=>({metadata:s,ref:t}))}function xs(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Ze(t,new ie(e),n)}function Ns(t,e,n=D.RAW,r){t._throwIfRoot("uploadString");let s=Yt(n,e),i=Object.assign({},r);return i.contentType==null&&s.contentType!=null&&(i.contentType=s.contentType),cn(t,s.data,i)}function Ps(t){let e={prefixes:[],items:[]};return ln(t,e).then(()=>e)}function ln(t,e,n){return w(this,null,function*(){let s=yield un(t,{pageToken:n});e.prefixes.push(...s.prefixes),e.items.push(...s.items),s.nextPageToken!=null&&(yield ln(t,e,s.nextPageToken))})}function un(t,e){e!=null&&typeof e.maxResults=="number"&&Ve("options.maxResults",1,1e3,e.maxResults);let n=e||{},r=ws(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,k)}function Us(t){t._throwIfRoot("getMetadata");let e=rn(t.storage,t._location,ce());return t.storage.makeRequestWithTokens(e,k)}function Bs(t,e){t._throwIfRoot("updateMetadata");let n=Ts(t.storage,t._location,e,ce());return t.storage.makeRequestWithTokens(n,k)}function Ls(t){t._throwIfRoot("getDownloadURL");let e=Es(t.storage,t._location,ce());return t.storage.makeRequestWithTokens(e,k).then(n=>{if(n===null)throw jr();return n})}function Ms(t){t._throwIfRoot("deleteObject");let e=vs(t.storage,t._location);return t.storage.makeRequestWithTokens(e,k)}function hn(t,e){let n=us(t._location.path,e),r=new I(t._location.bucket,n);return new G(t.storage,r)}function Fs(t){return/^[A-Za-z]+:\/\//.test(t)}function Hs(t,e){return new G(t,e)}function dn(t,e){if(t instanceof ae){let n=t;if(n._bucket==null)throw Hr();let r=new G(n,n._bucket);return e!=null?dn(r,e):r}else return e!==void 0?hn(t,e):t}function $s(t,e){if(e&&Fs(e)){if(t instanceof ae)return Hs(t,e);throw ze("To use ref(service, url), the first argument must be a Storage instance.")}else return dn(t,e)}function $t(t,e){let n=e?.[Vt];return n==null?null:I.makeFromBucketSpec(n,t)}function js(t,e,n,r={}){t.host=`${e}:${n}`;let s=de(e);s&&(dt(`https://${t.host}/b`),pt("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:ft(i,t.app.options.projectId))}var ae=class{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=Wt,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=kr,this._maxUploadRetryTime=Dr,this._requests=new Set,s!=null?this._bucket=I.makeFromBucketSpec(s,this._host):this._bucket=$t(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=I.makeFromBucketSpec(this._url,e):this._bucket=$t(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ve("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ve("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return w(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return w(this,null,function*(){if(Dt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new G(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new We(Xt());{let o=es(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return w(this,null,function*(){let[r,s]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()})}},jt="@firebase/storage",zt="0.13.14";var fn="storage";function Pi(t,e){return t=R(t),ks(t,e)}function Ui(t,e,n){return t=R(t),cn(t,e,n)}function Bi(t,e,n,r){return t=R(t),Ns(t,e,n,r)}function Li(t,e,n){return t=R(t),xs(t,e,n)}function Mi(t){return t=R(t),Us(t)}function Fi(t,e){return t=R(t),Bs(t,e)}function Hi(t,e){return t=R(t),un(t,e)}function $i(t){return t=R(t),Ps(t)}function ji(t){return t=R(t),Ls(t)}function zi(t){return t=R(t),Ms(t)}function Wi(t,e){return t=R(t),$s(t,e)}function Vi(t,e){return hn(t,e)}function qi(t=Nt(),e){t=R(t);let r=kt(t,fn).getImmediate({identifier:e}),s=ht("storage");return s&&zs(r,...s),r}function zs(t,e,n,r={}){js(t,e,n,r)}function Gi(t,e){return t=R(t),Ds(t,e)}function Ki(t,e){throw new Error("getStream() is only supported by NodeJS builds")}function Ws(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new ae(n,r,s,e,xt)}function Vs(){ee(new U(fn,Ws,"PUBLIC").setMultipleInstances(!0)),j(jt,zt,""),j(jt,zt,"esm2017")}Vs();export{lt as a,ut as b,wn as c,ht as d,Ks as e,ue as f,de as g,dt as h,ft as i,pt as j,_t as k,Xs as l,Js as m,Zs as n,Ys as o,Qs as p,ei as q,mt as r,P as s,Y as t,ti as u,fe as v,ni as w,ri as x,si as y,ii as z,R as A,U as B,_ as C,_e as D,ee as E,kt as F,Dt as G,xt as H,Er as I,Nt as J,Ai as K,j as L,b as M,m as N,ze as O,Wr as P,I as Q,D as R,Yt as S,ie as T,Ni as U,A as V,Ze as W,Pi as X,Ui as Y,Bi as Z,Li as _,Mi as $,Fi as aa,Hi as ba,$i as ca,ji as da,zi as ea,Wi as fa,Vi as ga,qi as ha,zs as ia,Gi as ja,Ki as ka};
