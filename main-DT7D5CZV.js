import{a as vx}from"./chunk-LDR7KYEJ.js";import{A as rt,B as Ir,C as pi,D as Yc,E as Cr,F as ls,G as kn,H as us,I as yx,J as Sr,K as Zf,L as ht,Y as _x,_ as ud,a as ox,b as sx,c as ax,d as Xf,da as Qc,e as e0,f as t0,fa as bx,g as go,h as zc,ha as wx,i as cx,j as qc,k as Rn,l as lx,m as ux,n as dx,o as hx,p as fx,q as px,r as n0,s as as,t as Wc,u as mx,v as cs,w as ld,x as Gc,y as Kc,z as gx}from"./chunk-BB5GUZUX.js";import{a as Z,b as fe,d as rx,e as ss,f as C}from"./chunk-YYD2Q6U2.js";var i0;function Jf(){return i0}function Tr(n){let e=i0;return i0=n,e}var Ex=Symbol("NotFound");function Xc(n){return n===Ex||n?.name==="\u0275NotFound"}var Nn=null,ep=!1,r0=1,Bj=null,On=Symbol("SIGNAL");function Ce(n){let e=Nn;return Nn=n,e}function rp(){return Nn}var Ea={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Zc(n){if(ep)throw new Error("");if(Nn===null)return;Nn.consumerOnSignalRead(n);let e=Nn.producersTail;if(e!==void 0&&e.producer===n)return;let t,i=Nn.recomputing;if(i&&(t=e!==void 0?e.nextProducer:Nn.producers,t!==void 0&&t.producer===n)){Nn.producersTail=t,t.lastReadVersion=n.version;return}let r=n.consumersTail;if(r!==void 0&&r.consumer===Nn&&(!i||Uj(r,Nn)))return;let o=tl(Nn),s={producer:n,consumer:Nn,nextProducer:t,prevConsumer:r,lastReadVersion:n.version,nextConsumer:void 0};Nn.producersTail=s,e!==void 0?e.nextProducer=s:Nn.producers=s,o&&Tx(n,s)}function Ix(){r0++}function op(n){if(!(tl(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===r0)){if(!n.producerMustRecompute(n)&&!el(n)){ip(n);return}n.producerRecomputeValue(n),ip(n)}}function o0(n){if(n.consumers===void 0)return;let e=ep;ep=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let i=t.consumer;i.dirty||jj(i)}}finally{ep=e}}function s0(){return Nn?.consumerAllowSignalWrites!==!1}function jj(n){n.dirty=!0,o0(n),n.consumerMarkedDirty?.(n)}function ip(n){n.dirty=!1,n.lastCleanEpoch=r0}function Ia(n){return n&&Cx(n),Ce(n)}function Cx(n){n.producersTail=void 0,n.recomputing=!0}function Jc(n,e){Ce(e),n&&Sx(n)}function Sx(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(tl(n))do t=a0(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function el(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,i=e.lastReadVersion;if(i!==t.version||(op(t),i!==t.version))return!0}return!1}function Ca(n){if(tl(n)){let e=n.producers;for(;e!==void 0;)e=a0(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function Tx(n,e){let t=n.consumersTail,i=tl(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!i)for(let r=n.producers;r!==void 0;r=r.nextProducer)Tx(r.producer,r)}function a0(n){let e=n.producer,t=n.nextProducer,i=n.nextConsumer,r=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,i!==void 0?i.prevConsumer=r:e.consumersTail=r,r!==void 0)r.nextConsumer=i;else if(e.consumers=i,!tl(e)){let o=e.producers;for(;o!==void 0;)o=a0(o)}return t}function tl(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function sp(n){Bj?.(n)}function Uj(n,e){let t=e.producersTail;if(t!==void 0){let i=e.producers;do{if(i===n)return!0;if(i===t)break;i=i.nextProducer}while(i!==void 0)}return!1}function ap(n,e){return Object.is(n,e)}function cp(n,e){let t=Object.create($j);t.computation=n,e!==void 0&&(t.equal=e);let i=()=>{if(op(t),Zc(t),t.value===dd)throw t.error;return t.value};return i[On]=t,sp(t),i}var tp=Symbol("UNSET"),np=Symbol("COMPUTING"),dd=Symbol("ERRORED"),$j=fe(Z({},Ea),{value:tp,dirty:!0,error:null,equal:ap,kind:"computed",producerMustRecompute(n){return n.value===tp||n.value===np},producerRecomputeValue(n){if(n.value===np)throw new Error("");let e=n.value;n.value=np;let t=Ia(n),i,r=!1;try{i=n.computation(),Ce(null),r=e!==tp&&e!==dd&&i!==dd&&n.equal(e,i)}catch(o){i=dd,n.error=o}finally{Jc(n,t)}if(r){n.value=e;return}n.value=i,n.version++}});function Hj(){throw new Error}var Dx=Hj;function xx(n){Dx(n)}function c0(n){Dx=n}var zj=null;function l0(n,e){let t=Object.create(lp);t.value=n,e!==void 0&&(t.equal=e);let i=()=>Ax(t);return i[On]=t,sp(t),[i,s=>nl(t,s),s=>u0(t,s)]}function Ax(n){return Zc(n),n.value}function nl(n,e){s0()||xx(n),n.equal(n.value,e)||(n.value=e,qj(n))}function u0(n,e){s0()||xx(n),nl(n,e(n.value))}var lp=fe(Z({},Ea),{equal:ap,value:void 0,kind:"signal"});function qj(n){n.version++,Ix(),o0(n),zj?.(n)}function Ae(n){return typeof n=="function"}function il(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var up=il(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Sa(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ot=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(Ae(i))try{i()}catch(o){e=o instanceof up?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{Mx(o)}catch(s){e=e??[],s instanceof up?e=[...e,...s.errors]:e.push(s)}}if(e)throw new up(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Mx(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Sa(t,e)}remove(e){let{_finalizers:t}=this;t&&Sa(t,e),e instanceof n&&e._removeParent(this)}};Ot.EMPTY=(()=>{let n=new Ot;return n.closed=!0,n})();var d0=Ot.EMPTY;function dp(n){return n instanceof Ot||n&&"closed"in n&&Ae(n.remove)&&Ae(n.add)&&Ae(n.unsubscribe)}function Mx(n){Ae(n)?n():n.unsubscribe()}var rr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var rl={setTimeout(n,e,...t){let{delegate:i}=rl;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=rl;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function hp(n){rl.setTimeout(()=>{let{onUnhandledError:e}=rr;if(e)e(n);else throw n})}function hd(){}var Px=h0("C",void 0,void 0);function Rx(n){return h0("E",void 0,n)}function kx(n){return h0("N",n,void 0)}function h0(n,e,t){return{kind:n,value:e,error:t}}var Ta=null;function ol(n){if(rr.useDeprecatedSynchronousErrorHandling){let e=!Ta;if(e&&(Ta={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=Ta;if(Ta=null,t)throw i}}else n()}function Nx(n){rr.useDeprecatedSynchronousErrorHandling&&Ta&&(Ta.errorThrown=!0,Ta.error=n)}var Da=class extends Ot{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,dp(e)&&e.add(this)):this.destination=Kj}static create(e,t,i){return new ds(e,t,i)}next(e){this.isStopped?p0(kx(e),this):this._next(e)}error(e){this.isStopped?p0(Rx(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?p0(Px,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Wj=Function.prototype.bind;function f0(n,e){return Wj.call(n,e)}var m0=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){fp(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){fp(i)}else fp(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){fp(t)}}},ds=class extends Da{constructor(e,t,i){super();let r;if(Ae(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&rr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&f0(e.next,o),error:e.error&&f0(e.error,o),complete:e.complete&&f0(e.complete,o)}):r=e}this.destination=new m0(r)}};function fp(n){rr.useDeprecatedSynchronousErrorHandling?Nx(n):hp(n)}function Gj(n){throw n}function p0(n,e){let{onStoppedNotification:t}=rr;t&&rl.setTimeout(()=>t(n,e))}var Kj={closed:!0,next:hd,error:Gj,complete:hd};var sl=typeof Symbol=="function"&&Symbol.observable||"@@observable";function mi(n){return n}function pp(...n){return g0(n)}function g0(n){return n.length===0?mi:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var ye=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let o=Qj(t)?t:new ds(t,i,r);return ol(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=Ox(i),new i((r,o)=>{let s=new ds({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[sl](){return this}pipe(...t){return g0(t)(this)}toPromise(t){return t=Ox(t),new t((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function Ox(n){var e;return(e=n??rr.Promise)!==null&&e!==void 0?e:Promise}function Yj(n){return n&&Ae(n.next)&&Ae(n.error)&&Ae(n.complete)}function Qj(n){return n&&n instanceof Da||Yj(n)&&dp(n)}function y0(n){return Ae(n?.lift)}function $e(n){return e=>{if(y0(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Fe(n,e,t,i,r){return new v0(n,e,t,i,r)}var v0=class extends Da{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function al(){return $e((n,e)=>{let t=null;n._refCount++;let i=Fe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var cl=class extends ye{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,y0(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ot;let t=this.getSubject();e.add(this.source.subscribe(Fe(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ot.EMPTY)}return e}refCount(){return al()(this)}};var Fx=il(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ut=(()=>{class n extends ye{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new mp(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new Fx}next(t){ol(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){ol(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){ol(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:o}=this;return i||r?d0:(this.currentObservers=null,o.push(t),new Ot(()=>{this.currentObservers=null,Sa(o,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){let t=new ye;return t.source=this,t}}return n.create=(e,t)=>new mp(e,t),n})(),mp=class extends Ut{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:d0}};var yn=class extends Ut{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var _0={now(){return(_0.delegate||Date).now()},delegate:void 0};var gp=class extends Ot{constructor(e,t){super()}schedule(e,t=0){return this}};var fd={setInterval(n,e,...t){let{delegate:i}=fd;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=fd;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ll=class extends gp{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return fd.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&fd.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Sa(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ul=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};ul.now=_0.now;var dl=class extends ul{constructor(e,t=ul.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var b0=new dl(ll);var yp=class extends ll{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}};var vp=class extends dl{};var w0=new vp(yp);var oi=new ye(n=>n.complete());function Lx(n){return n&&Ae(n.schedule)}function Vx(n){return n[n.length-1]}function _p(n){return Ae(Vx(n))?n.pop():void 0}function hs(n){return Lx(Vx(n))?n.pop():void 0}function E0(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function jx(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{l(i.next(u))}catch(h){s(h)}}function c(u){try{l(i.throw(u))}catch(h){s(h)}}function l(u){u.done?o(u.value):r(u.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}function Bx(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xa(n){return this instanceof xa?(this.v=n,this):new xa(n)}function Ux(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(y){return function(b){return Promise.resolve(b).then(y,h)}}function a(y,b){i[y]&&(r[y]=function(E){return new Promise(function(I,R){o.push([y,E,I,R])>1||c(y,E)})},b&&(r[y]=b(r[y])))}function c(y,b){try{l(i[y](b))}catch(E){f(o[0][3],E)}}function l(y){y.value instanceof xa?Promise.resolve(y.value.v).then(u,h):f(o[0][2],y)}function u(y){c("next",y)}function h(y){c("throw",y)}function f(y,b){y(b),o.shift(),o.length&&c(o[0][0],o[0][1])}}function $x(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Bx=="function"?Bx(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),r(a,c,s.done,s.value)})}}function r(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var bp=n=>n&&typeof n.length=="number"&&typeof n!="function";function wp(n){return Ae(n?.then)}function Ep(n){return Ae(n[sl])}function Ip(n){return Symbol.asyncIterator&&Ae(n?.[Symbol.asyncIterator])}function Cp(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Xj(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Sp=Xj();function Tp(n){return Ae(n?.[Sp])}function Dp(n){return Ux(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield xa(t.read());if(r)return yield xa(void 0);yield yield xa(i)}}finally{t.releaseLock()}})}function xp(n){return Ae(n?.getReader)}function Wt(n){if(n instanceof ye)return n;if(n!=null){if(Ep(n))return Zj(n);if(bp(n))return Jj(n);if(wp(n))return e3(n);if(Ip(n))return Hx(n);if(Tp(n))return t3(n);if(xp(n))return n3(n)}throw Cp(n)}function Zj(n){return new ye(e=>{let t=n[sl]();if(Ae(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Jj(n){return new ye(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function e3(n){return new ye(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,hp)})}function t3(n){return new ye(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Hx(n){return new ye(e=>{i3(n,e).catch(t=>e.error(t))})}function n3(n){return Hx(Dp(n))}function i3(n,e){var t,i,r,o;return jx(this,void 0,void 0,function*(){try{for(t=$x(n);i=yield t.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})}function si(n,e,t,i=0,r=!1){let o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function fs(n,e=0){return $e((t,i)=>{t.subscribe(Fe(i,r=>si(i,n,()=>i.next(r),e),()=>si(i,n,()=>i.complete(),e),r=>si(i,n,()=>i.error(r),e)))})}function ps(n,e=0){return $e((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function zx(n,e){return Wt(n).pipe(ps(e),fs(e))}function qx(n,e){return Wt(n).pipe(ps(e),fs(e))}function Wx(n,e){return new ye(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function Gx(n,e){return new ye(t=>{let i;return si(t,e,()=>{i=n[Sp](),si(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){t.error(s);return}o?t.complete():t.next(r)},0,!0)}),()=>Ae(i?.return)&&i.return()})}function Ap(n,e){if(!n)throw new Error("Iterable cannot be null");return new ye(t=>{si(t,e,()=>{let i=n[Symbol.asyncIterator]();si(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Kx(n,e){return Ap(Dp(n),e)}function Yx(n,e){if(n!=null){if(Ep(n))return zx(n,e);if(bp(n))return Wx(n,e);if(wp(n))return qx(n,e);if(Ip(n))return Ap(n,e);if(Tp(n))return Gx(n,e);if(xp(n))return Kx(n,e)}throw Cp(n)}function Tt(n,e){return e?Yx(n,e):Wt(n)}function ce(...n){let e=hs(n);return Tt(n,e)}function hl(n,e){let t=Ae(n)?n:()=>n,i=r=>r.error(t());return new ye(e?r=>e.schedule(i,0,r):i)}function I0(n){return!!n&&(n instanceof ye||Ae(n.lift)&&Ae(n.subscribe))}var or=il(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function vn(n,e){let t=typeof e=="object";return new Promise((i,r)=>{let o=new ds({next:s=>{i(s),o.unsubscribe()},error:r,complete:()=>{t?i(e.defaultValue):r(new or)}});n.subscribe(o)})}function se(n,e){return $e((t,i)=>{let r=0;t.subscribe(Fe(i,o=>{i.next(n.call(e,o,r++))}))})}var{isArray:r3}=Array;function o3(n,e){return r3(e)?n(...e):n(e)}function Mp(n){return se(e=>o3(n,e))}var{isArray:s3}=Array,{getPrototypeOf:a3,prototype:c3,keys:l3}=Object;function Pp(n){if(n.length===1){let e=n[0];if(s3(e))return{args:e,keys:null};if(u3(e)){let t=l3(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function u3(n){return n&&typeof n=="object"&&a3(n)===c3}function Rp(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function kp(...n){let e=hs(n),t=_p(n),{args:i,keys:r}=Pp(n);if(i.length===0)return Tt([],e);let o=new ye(d3(i,e,r?s=>Rp(r,s):mi));return t?o.pipe(Mp(t)):o}function d3(n,e,t=mi){return i=>{Qx(e,()=>{let{length:r}=n,o=new Array(r),s=r,a=r;for(let c=0;c<r;c++)Qx(e,()=>{let l=Tt(n[c],e),u=!1;l.subscribe(Fe(i,h=>{o[c]=h,u||(u=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function Qx(n,e,t){n?si(t,n,e):e()}function Xx(n,e,t,i,r,o,s,a){let c=[],l=0,u=0,h=!1,f=()=>{h&&!c.length&&!l&&e.complete()},y=E=>l<i?b(E):c.push(E),b=E=>{o&&e.next(E),l++;let I=!1;Wt(t(E,u++)).subscribe(Fe(e,R=>{r?.(R),o?y(R):e.next(R)},()=>{I=!0},void 0,()=>{if(I)try{for(l--;c.length&&l<i;){let R=c.shift();s?si(e,s,()=>b(R)):b(R)}f()}catch(R){e.error(R)}}))};return n.subscribe(Fe(e,y,()=>{h=!0,f()})),()=>{a?.()}}function rn(n,e,t=1/0){return Ae(e)?rn((i,r)=>se((o,s)=>e(i,o,r,s))(Wt(n(i,r))),t):(typeof e=="number"&&(t=e),$e((i,r)=>Xx(i,r,n,t)))}function Zx(n=1/0){return rn(mi,n)}function Jx(){return Zx(1)}function fl(...n){return Jx()(Tt(n,hs(n)))}function pd(n){return new ye(e=>{Wt(n()).subscribe(e)})}function C0(...n){let e=_p(n),{args:t,keys:i}=Pp(n),r=new ye(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let h=!1;Wt(t[u]).subscribe(Fe(o,f=>{h||(h=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!h)&&(l||o.next(i?Rp(i,a):a),o.complete())}))}});return e?r.pipe(Mp(e)):r}function gi(n,e){return $e((t,i)=>{let r=0;t.subscribe(Fe(i,o=>n.call(e,o,r++)&&i.next(o)))})}function ms(n){return $e((e,t)=>{let i=null,r=!1,o;i=e.subscribe(Fe(t,void 0,void 0,s=>{o=Wt(n(s,ms(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function eA(n,e,t,i,r){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(Fe(s,u=>{let h=l++;c=a?n(c,u,h):(a=!0,u),i&&s.next(c)},r&&(()=>{a&&s.next(c),s.complete()})))}}function pl(n,e){return Ae(e)?rn(n,e,1):rn(n,1)}function gs(n){return $e((e,t)=>{let i=!1;e.subscribe(Fe(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Qe(n){return n<=0?()=>oi:$e((e,t)=>{let i=0;e.subscribe(Fe(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Np(n=h3){return $e((e,t)=>{let i=!1;e.subscribe(Fe(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function h3(){return new or}function md(n){return $e((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function yo(n,e){let t=arguments.length>=2;return i=>i.pipe(n?gi((r,o)=>n(r,o,i)):mi,Qe(1),t?gs(e):Np(()=>new or))}function ml(n){return n<=0?()=>oi:$e((e,t)=>{let i=[];e.subscribe(Fe(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function S0(n,e){let t=arguments.length>=2;return i=>i.pipe(n?gi((r,o)=>n(r,o,i)):mi,ml(1),t?gs(e):Np(()=>new or))}function Op(n,e){return $e(eA(n,e,arguments.length>=2,!0))}function Fp(...n){let e=hs(n);return $e((t,i)=>{(e?fl(n,t,e):fl(n,t)).subscribe(i)})}function Ke(n,e){return $e((t,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();t.subscribe(Fe(i,c=>{r?.unsubscribe();let l=0,u=o++;Wt(n(c,u)).subscribe(r=Fe(i,h=>i.next(e?e(c,h,u,l++):h),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Lp(n){return $e((e,t)=>{Wt(n).subscribe(Fe(t,()=>t.complete(),hd)),!t.closed&&e.subscribe(t)})}function cn(n,e,t){let i=Ae(n)||e||t?{next:n,error:e,complete:t}:n;return i?$e((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(Fe(o,c=>{var l;(l=i.next)===null||l===void 0||l.call(i,c),o.next(c)},()=>{var c;a=!1,(c=i.complete)===null||c===void 0||c.call(i),o.complete()},c=>{var l;a=!1,(l=i.error)===null||l===void 0||l.call(i,c),o.error(c)},()=>{var c,l;a&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(l=i.finalize)===null||l===void 0||l.call(i)}))}):mi}function tA(n){let e=Ce(null);try{return n()}finally{Ce(e)}}var nA=fe(Z({},Ea),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function iA(n){if(n.dirty=!1,n.version>0&&!el(n))return;n.version++;let e=Ia(n);try{n.cleanup(),n.fn()}finally{Jc(n,e)}}var Ma=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},L0=new Ma("20.3.14");var Up="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",te=class extends Error{code;constructor(e,t){super(Na(e,t)),this.code=e}};function f3(n){return`NG0${Math.abs(n)}`}function Na(n,e){return`${f3(n)}${e?": "+e:""}`}var bo=globalThis;function Ze(n){for(let e in n)if(n[e]===Ze)return e;throw Error("")}function sA(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function _o(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(_o).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i>=0?t.slice(0,i):t}function $p(n,e){return n?e?`${n} ${e}`:n:e||""}var p3=Ze({__forward_ref__:Ze});function Jn(n){return n.__forward_ref__=Jn,n.toString=function(){return _o(this())},n}function _n(n){return V0(n)?n():n}function V0(n){return typeof n=="function"&&n.hasOwnProperty(p3)&&n.__forward_ref__===Jn}function ie(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Dr(n){return{providers:n.providers||[],imports:n.imports||[]}}function bd(n){return m3(n,Hp)}function B0(n){return bd(n)!==null}function m3(n,e){return n.hasOwnProperty(e)&&n[e]||null}function g3(n){let e=n?.[Hp]??null;return e||null}function D0(n){return n&&n.hasOwnProperty(Bp)?n[Bp]:null}var Hp=Ze({\u0275prov:Ze}),Bp=Ze({\u0275inj:Ze}),ae=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ie({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function j0(n){return n&&!!n.\u0275providers}var U0=Ze({\u0275cmp:Ze}),$0=Ze({\u0275dir:Ze}),H0=Ze({\u0275pipe:Ze}),z0=Ze({\u0275mod:Ze}),yd=Ze({\u0275fac:Ze}),Oa=Ze({__NG_ELEMENT_ID__:Ze}),rA=Ze({__NG_ENV_ID__:Ze});function Fa(n){return typeof n=="string"?n:n==null?"":String(n)}function aA(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Fa(n)}var cA=Ze({ngErrorCode:Ze}),y3=Ze({ngErrorMessage:Ze}),v3=Ze({ngTokenPath:Ze});function q0(n,e){return lA("",-200,e)}function zp(n,e){throw new te(-201,!1)}function lA(n,e,t){let i=new te(e,n);return i[cA]=e,i[y3]=n,t&&(i[v3]=t),i}function _3(n){return n[cA]}var x0;function uA(){return x0}function Xn(n){let e=x0;return x0=n,e}function W0(n,e,t){let i=bd(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&8)return null;if(e!==void 0)return e;zp(n,"Injector")}var b3={},Aa=b3,A0="__NG_DI_FLAG__",M0=class{injector;constructor(e){this.injector=e}retrieve(e,t){let i=Pa(t)||0;try{return this.injector.get(e,i&8?null:Aa,i)}catch(r){if(Xc(r))return r;throw r}}};function w3(n,e=0){let t=Jf();if(t===void 0)throw new te(-203,!1);if(t===null)return W0(n,void 0,e);{let i=E3(e),r=t.retrieve(n,i);if(Xc(r)){if(i.optional)return null;throw r}return r}}function le(n,e=0){return(uA()||w3)(_n(n),e)}function q(n,e){return le(n,Pa(e))}function Pa(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function E3(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function P0(n){let e=[];for(let t=0;t<n.length;t++){let i=_n(n[t]);if(Array.isArray(i)){if(i.length===0)throw new te(900,!1);let r,o=0;for(let s=0;s<i.length;s++){let a=i[s],c=I3(a);typeof c=="number"?c===-1?r=a.token:o|=c:r=a}e.push(le(r,o))}else e.push(le(i))}return e}function dA(n,e){return n[A0]=e,n.prototype[A0]=e,n}function I3(n){return n[A0]}function ys(n,e){let t=n.hasOwnProperty(yd);return t?n[yd]:null}function hA(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}function fA(n){return n.flat(Number.POSITIVE_INFINITY)}function qp(n,e){n.forEach(t=>Array.isArray(t)?qp(t,e):e(t))}function G0(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function wd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function pA(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let o=r-2;n[r]=n[o],r--}n[e]=t,n[e+1]=i}}function Wp(n,e,t){let i=yl(n,e);return i>=0?n[i|1]=t:(i=~i,pA(n,i,e,t)),i}function Gp(n,e){let t=yl(n,e);if(t>=0)return n[t|1]}function yl(n,e){return C3(n,e,1)}function C3(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}var _s={},Zn=[],wo=new ae(""),K0=new ae("",-1),Y0=new ae(""),vd=class{get(e,t=Aa){if(t===Aa){let r=lA("",-201);throw r.name="\u0275NotFound",r}return t}};function Q0(n){return n[z0]||null}function bs(n){return n[U0]||null}function X0(n){return n[$0]||null}function mA(n){return n[H0]||null}function bn(n){return{\u0275providers:n}}function gA(n){return bn([{provide:wo,multi:!0,useValue:n}])}function yA(...n){return{\u0275providers:Z0(!0,n),\u0275fromNgModule:!0}}function Z0(n,...e){let t=[],i=new Set,r,o=s=>{t.push(s)};return qp(e,s=>{let a=s;jp(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&vA(r,o),t}function vA(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];J0(r,o=>{e(o,i)})}}function jp(n,e,t,i){if(n=_n(n),!n)return!1;let r=null,o=D0(n),s=!o&&bs(n);if(!o&&!s){let c=n.ngModule;if(o=D0(c),o)r=c;else return!1}else{if(s&&!s.standalone)return!1;r=n}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)jp(l,e,t,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let l;try{qp(o.imports,u=>{jp(u,e,t,i)&&(l||=[],l.push(u))})}finally{}l!==void 0&&vA(l,e)}if(!a){let l=ys(r)||(()=>new r);e({provide:r,useFactory:l,deps:Zn},r),e({provide:Y0,useValue:r,multi:!0},r),e({provide:wo,useValue:()=>le(r),multi:!0},r)}let c=o.providers;if(c!=null&&!a){let l=n;J0(c,u=>{e(u,l)})}}else return!1;return r!==n&&n.providers!==void 0}function J0(n,e){for(let t of n)j0(t)&&(t=t.\u0275providers),Array.isArray(t)?J0(t,e):e(t)}var S3=Ze({provide:String,useValue:Ze});function _A(n){return n!==null&&typeof n=="object"&&S3 in n}function T3(n){return!!(n&&n.useExisting)}function D3(n){return!!(n&&n.useFactory)}function Ra(n){return typeof n=="function"}function bA(n){return!!n.useClass}var Ed=new ae(""),Vp={},oA={},T0;function Id(){return T0===void 0&&(T0=new vd),T0}var Gt=class{},ka=class extends Gt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,k0(e,s=>this.processProvider(s)),this.records.set(K0,gl(void 0,this)),r.has("environment")&&this.records.set(Gt,gl(void 0,this));let o=this.records.get(Ed);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Y0,Zn,{self:!0}))}retrieve(e,t){let i=Pa(t)||0;try{return this.get(e,Aa,i)}catch(r){if(Xc(r))return r;throw r}}destroy(){gd(this),this._destroyed=!0;let e=Ce(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ce(e)}}onDestroy(e){return gd(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){gd(this);let t=Tr(this),i=Xn(void 0),r;try{return e()}finally{Tr(t),Xn(i)}}get(e,t=Aa,i){if(gd(this),e.hasOwnProperty(rA))return e[rA](this);let r=Pa(i),o,s=Tr(this),a=Xn(void 0);try{if(!(r&4)){let l=this.records.get(e);if(l===void 0){let u=R3(e)&&bd(e);u&&this.injectableDefInScope(u)?l=gl(R0(e),Vp):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,r)}let c=r&2?Id():this.parent;return t=r&8&&t===Aa?null:t,c.get(e,t)}catch(c){let l=_3(c);throw l===-200||l===-201?new te(l,null):c}finally{Xn(a),Tr(s)}}resolveInjectorInitializers(){let e=Ce(null),t=Tr(this),i=Xn(void 0),r;try{let o=this.get(wo,Zn,{self:!0});for(let s of o)s()}finally{Tr(t),Xn(i),Ce(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(_o(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=_n(e);let t=Ra(e)?e:_n(e&&e.provide),i=A3(e);if(!Ra(e)&&e.multi===!0){let r=this.records.get(t);r||(r=gl(void 0,Vp,!0),r.factory=()=>P0(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t,i){let r=Ce(null);try{if(t.value===oA)throw q0(_o(e));return t.value===Vp&&(t.value=oA,t.value=t.factory(void 0,i)),typeof t.value=="object"&&t.value&&P3(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ce(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=_n(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function R0(n){let e=bd(n),t=e!==null?e.factory:ys(n);if(t!==null)return t;if(n instanceof ae)throw new te(204,!1);if(n instanceof Function)return x3(n);throw new te(204,!1)}function x3(n){if(n.length>0)throw new te(204,!1);let t=g3(n);return t!==null?()=>t.factory(n):()=>new n}function A3(n){if(_A(n))return gl(void 0,n.useValue);{let e=eb(n);return gl(e,Vp)}}function eb(n,e,t){let i;if(Ra(n)){let r=_n(n);return ys(r)||R0(r)}else if(_A(n))i=()=>_n(n.useValue);else if(D3(n))i=()=>n.useFactory(...P0(n.deps||[]));else if(T3(n))i=(r,o)=>le(_n(n.useExisting),o!==void 0&&o&8?8:void 0);else{let r=_n(n&&(n.useClass||n.provide));if(M3(n))i=()=>new r(...P0(n.deps));else return ys(r)||R0(r)}return i}function gd(n){if(n.destroyed)throw new te(205,!1)}function gl(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function M3(n){return!!n.deps}function P3(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function R3(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function k0(n,e){for(let t of n)Array.isArray(t)?k0(t,e):t&&j0(t)?k0(t.\u0275providers,e):e(t)}function on(n,e){let t;n instanceof ka?(gd(n),t=n):t=new M0(n);let i,r=Tr(t),o=Xn(void 0);try{return e()}finally{Tr(r),Xn(o)}}function wA(){return uA()!==void 0||Jf()!=null}var ar=0,ge=1,be=2,ln=3,Ni=4,Oi=5,Cd=6,vl=7,wn=8,ws=9,xr=10,It=11,_l=12,tb=13,La=14,Fi=15,Es=16,Va=17,Ar=18,Sd=19,nb=20,vo=21,Kp=22,Eo=23,yi=24,Ba=25,Td=26,Ft=27,EA=1;var Is=7,Dd=8,ja=9,Fn=10;function Mr(n){return Array.isArray(n)&&typeof n[EA]=="object"}function cr(n){return Array.isArray(n)&&n[EA]===!0}function ib(n){return(n.flags&4)!==0}function Cs(n){return n.componentOffset>-1}function bl(n){return(n.flags&1)===1}function Pr(n){return!!n.template}function wl(n){return(n[be]&512)!==0}function Ua(n){return(n[be]&256)===256}var IA="svg",CA="math";function Li(n){for(;Array.isArray(n);)n=n[ar];return n}function rb(n,e){return Li(e[n])}function lr(n,e){return Li(e[n.index])}function xd(n,e){return n.data[e]}function Yp(n,e){return n[e]}function ob(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function Vi(n,e){let t=e[n];return Mr(t)?t:t[ar]}function SA(n){return(n[be]&4)===4}function Qp(n){return(n[be]&128)===128}function TA(n){return cr(n[ln])}function Rr(n,e){return e==null?null:n[e]}function sb(n){n[Va]=0}function ab(n){n[be]&1024||(n[be]|=1024,Qp(n)&&Ss(n))}function DA(n,e){for(;n>0;)e=e[La],n--;return e}function Ad(n){return!!(n[be]&9216||n[yi]?.dirty)}function Xp(n){n[xr].changeDetectionScheduler?.notify(8),n[be]&64&&(n[be]|=1024),Ad(n)&&Ss(n)}function Ss(n){n[xr].changeDetectionScheduler?.notify(0);let e=vs(n);for(;e!==null&&!(e[be]&8192||(e[be]|=8192,!Qp(e)));)e=vs(e)}function cb(n,e){if(Ua(n))throw new te(911,!1);n[vo]===null&&(n[vo]=[]),n[vo].push(e)}function xA(n,e){if(n[vo]===null)return;let t=n[vo].indexOf(e);t!==-1&&n[vo].splice(t,1)}function vs(n){let e=n[ln];return cr(e)?e[ln]:e}function lb(n){return n[vl]??=[]}function ub(n){return n.cleanup??=[]}function AA(n,e,t,i){let r=lb(e);r.push(t),n.firstCreatePass&&ub(n).push(i,r.length-1)}var Pe={lFrame:HA(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var N0=!1;function MA(){return Pe.lFrame.elementDepthCount}function PA(){Pe.lFrame.elementDepthCount++}function db(){Pe.lFrame.elementDepthCount--}function Zp(){return Pe.bindingsEnabled}function RA(){return Pe.skipHydrationRootTNode!==null}function hb(n){return Pe.skipHydrationRootTNode===n}function fb(){Pe.skipHydrationRootTNode=null}function we(){return Pe.lFrame.lView}function $t(){return Pe.lFrame.tView}function Y(n){return Pe.lFrame.contextLView=n,n[wn]}function Q(n){return Pe.lFrame.contextLView=null,n}function sn(){let n=pb();for(;n!==null&&n.type===64;)n=n.parent;return n}function pb(){return Pe.lFrame.currentTNode}function kA(){let n=Pe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function El(n,e){let t=Pe.lFrame;t.currentTNode=n,t.isParent=e}function mb(){return Pe.lFrame.isParent}function NA(){Pe.lFrame.isParent=!1}function OA(){return Pe.lFrame.contextLView}function gb(){return N0}function Il(n){let e=N0;return N0=n,e}function $a(){let n=Pe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function FA(){return Pe.lFrame.bindingIndex}function LA(n){return Pe.lFrame.bindingIndex=n}function Cl(){return Pe.lFrame.bindingIndex++}function Jp(n){let e=Pe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function VA(){return Pe.lFrame.inI18n}function BA(n,e){let t=Pe.lFrame;t.bindingIndex=t.bindingRootIndex=n,em(e)}function jA(){return Pe.lFrame.currentDirectiveIndex}function em(n){Pe.lFrame.currentDirectiveIndex=n}function UA(n){let e=Pe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function yb(){return Pe.lFrame.currentQueryIndex}function tm(n){Pe.lFrame.currentQueryIndex=n}function k3(n){let e=n[ge];return e.type===2?e.declTNode:e.type===1?n[Oi]:null}function vb(n,e,t){if(t&4){let r=e,o=n;for(;r=r.parent,r===null&&!(t&1);)if(r=k3(o),r===null||(o=o[La],r.type&10))break;if(r===null)return!1;e=r,n=o}let i=Pe.lFrame=$A();return i.currentTNode=e,i.lView=n,!0}function nm(n){let e=$A(),t=n[ge];Pe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function $A(){let n=Pe.lFrame,e=n===null?null:n.child;return e===null?HA(n):e}function HA(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function zA(){let n=Pe.lFrame;return Pe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var _b=zA;function im(){let n=zA();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function qA(n){return(Pe.lFrame.contextLView=DA(n,Pe.lFrame.contextLView))[wn]}function Io(){return Pe.lFrame.selectedIndex}function Ts(n){Pe.lFrame.selectedIndex=n}function rm(){let n=Pe.lFrame;return xd(n.tView,n.selectedIndex)}function WA(){return Pe.lFrame.currentNamespace}var GA=!0;function om(){return GA}function Md(n){GA=n}function O0(n,e=null,t=null,i){let r=bb(n,e,t,i);return r.resolveInjectorInitializers(),r}function bb(n,e=null,t=null,i,r=new Set){let o=[t||Zn,yA(n)];return i=i||(typeof n=="object"?void 0:_o(n)),new ka(o,e||Id(),i||null,r)}var ft=class n{static THROW_IF_NOT_FOUND=Aa;static NULL=new vd;static create(e,t){if(Array.isArray(e))return O0({name:""},t,e,"");{let i=e.name??"";return O0({name:i},e.parent,e.providers,i)}}static \u0275prov=ie({token:n,providedIn:"any",factory:()=>le(K0)});static __NG_ELEMENT_ID__=-1},un=new ae(""),ei=(()=>{class n{static __NG_ELEMENT_ID__=N3;static __NG_ENV_ID__=t=>t}return n})(),_d=class extends ei{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Ua(this._lView)}onDestroy(e){let t=this._lView;return cb(t,e),()=>xA(t,e)}};function N3(){return new _d(we())}var ki=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Ln=new ae("",{providedIn:"root",factory:()=>{let n=q(Gt),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(ki),e.handleError(t))}}}),KA={provide:wo,useValue:()=>void q(ki),multi:!0},O3=new ae("",{providedIn:"root",factory:()=>{let n=q(un).defaultView;if(!n)return;let e=q(Ln),t=o=>{e(o.reason),o.preventDefault()},i=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},r=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",i)};typeof Zone<"u"?Zone.root.run(r):r(),q(ei).onDestroy(()=>{n.removeEventListener("error",i),n.removeEventListener("unhandledrejection",t)})}});function wb(){return bn([gA(()=>void q(O3))])}function Eb(n){return typeof n=="function"&&n[On]!==void 0}function Ct(n,e){let[t,i,r]=l0(n,e?.equal),o=t,s=o[On];return o.set=i,o.update=r,o.asReadonly=Ib.bind(o),o}function Ib(){let n=this[On];if(n.readonlyFn===void 0){let e=()=>this();e[On]=n,n.readonlyFn=e}return n.readonlyFn}function Cb(n){return Eb(n)&&typeof n.set=="function"}var Sl=(()=>{class n{view;node;constructor(t,i){this.view=t,this.node=i}static __NG_ELEMENT_ID__=F3}return n})();function F3(){return new Sl(we(),sn())}var sr=class{},Pd=new ae("",{providedIn:"root",factory:()=>!1});var Sb=new ae(""),Tb=new ae(""),kr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new yn(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ye(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new n})}return n})(),Ha=(()=>{class n{internalPendingTasks=q(kr);scheduler=q(sr);errorHandler=q(Ln);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let i=this.add();t().catch(this.errorHandler).finally(i)}static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new n})}return n})();function za(...n){}var Rd=(()=>{class n{static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new F0})}return n})(),F0=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,i=this.queues.get(t);i.has(e)&&(i.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||i.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,i]of this.queues)t===null?e||=this.flushQueue(i):e||=t.run(()=>this.flushQueue(i));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let i of e)i.dirty&&(this.dirtyEffectCount--,t=!0,i.run());return t}};function kl(n){return{toString:n}.toString()}var sm="__parameters__";function z3(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function q3(n,e,t){return kl(()=>{let i=z3(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(c,l,u){let h=c.hasOwnProperty(sm)?c[sm]:Object.defineProperty(c,sm,{value:[]})[sm];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(s),c}}return r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var Mt=dA(q3("Optional"),8);function W3(n){return typeof n=="function"}var mm=class{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function SM(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}var So=(()=>{let n=()=>TM;return n.ngInherit=!0,n})();function TM(n){return n.type.prototype.ngOnChanges&&(n.setInput=K3),G3}function G3(){let n=xM(this),e=n?.current;if(e){let t=n.previous;if(t===_s)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function K3(n,e,t,i,r){let o=this.declaredInputs[i],s=xM(n)||Y3(n,{previous:_s,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new mm(l&&l.currentValue,t,c===_s),SM(n,e,r,t)}var DM="__ngSimpleChanges__";function xM(n){return n[DM]||null}function Y3(n,e){return n[DM]=e}var YA=[];var nt=function(n,e=null,t){for(let i=0;i<YA.length;i++){let r=YA[i];r(n,e,t)}};function Q3(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=TM(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function AM(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function um(n,e,t){MM(n,e,3,t)}function dm(n,e,t,i){(n[be]&3)===t&&MM(n,e,t,i)}function Db(n,e){let t=n[be];(t&3)===e&&(t&=16383,t+=1,n[be]=t)}function MM(n,e,t,i){let r=i!==void 0?n[Va]&65535:0,o=i??-1,s=e.length-1,a=0;for(let c=r;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],i!=null&&a>=i)break}else e[c]<0&&(n[Va]+=65536),(a<o||o==-1)&&(X3(n,t,e,c),n[Va]=(n[Va]&4294901760)+c+2),c++}function QA(n,e){nt(4,n,e);let t=Ce(null);try{e.call(n)}finally{Ce(t),nt(5,n,e)}}function X3(n,e,t,i){let r=t[i]<0,o=t[i+1],s=r?-t[i]:t[i],a=n[s];r?n[be]>>14<n[Va]>>16&&(n[be]&3)===e&&(n[be]+=16384,QA(a,o)):QA(a,o)}var Dl=-1,Wa=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i,r){this.factory=e,this.name=r,this.canSeeViewProviders=t,this.injectImpl=i}};function Z3(n){return(n.flags&8)!==0}function J3(n){return(n.flags&16)!==0}function eU(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let o=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,o)}else{let o=r,s=t[++i];tU(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function PM(n){return n===3||n===4||n===6}function tU(n){return n.charCodeAt(0)===64}function xl(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?XA(n,t,r,null,e[++i]):XA(n,t,r,null,null))}}return n}function XA(n,e,t,i,r){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){r!==null&&(n[o+1]=r);return}o++,r!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r)}function RM(n){return n!==Dl}function gm(n){return n&32767}function nU(n){return n>>16}function ym(n,e){let t=nU(n),i=e;for(;t>0;)i=i[La],t--;return i}var Lb=!0;function vm(n){let e=Lb;return Lb=n,e}var iU=256,kM=iU-1,NM=5,rU=0,Nr={};function oU(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(Oa)&&(i=t[Oa]),i==null&&(i=t[Oa]=rU++);let r=i&kM,o=1<<r;e.data[n+(r>>NM)]|=o}function _m(n,e){let t=OM(n,e);if(t!==-1)return t;let i=e[ge];i.firstCreatePass&&(n.injectorIndex=e.length,xb(i.data,n),xb(e,null),xb(i.blueprint,null));let r=lw(n,e),o=n.injectorIndex;if(RM(r)){let s=gm(r),a=ym(r,e),c=a[ge].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=r,o}function xb(n,e){n.push(0,0,0,0,0,0,0,0,e)}function OM(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function lw(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=jM(r),i===null)return Dl;if(t++,r=r[La],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return Dl}function Vb(n,e,t){oU(n,e,t)}function sU(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let i=t.length,r=0;for(;r<i;){let o=t[r];if(PM(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof t[r]=="string";)r++;else{if(o===e)return t[r+1];r=r+2}}}return null}function FM(n,e,t){if(t&8||n!==void 0)return n;zp(e,"NodeInjector")}function LM(n,e,t,i){if(t&8&&i===void 0&&(i=null),(t&3)===0){let r=n[ws],o=Xn(void 0);try{return r?r.get(e,i,t&8):W0(e,i,t&8)}finally{Xn(o)}}return FM(i,e,t)}function VM(n,e,t,i=0,r){if(n!==null){if(e[be]&2048&&!(i&2)){let s=uU(n,e,t,i,Nr);if(s!==Nr)return s}let o=BM(n,e,t,i,Nr);if(o!==Nr)return o}return LM(e,t,i,r)}function BM(n,e,t,i,r){let o=cU(t);if(typeof o=="function"){if(!vb(e,n,i))return i&1?FM(r,t,i):LM(e,t,i,r);try{let s;if(s=o(i),s==null&&!(i&8))zp(t);else return s}finally{_b()}}else if(typeof o=="number"){let s=null,a=OM(n,e),c=Dl,l=i&1?e[Fi][Oi]:null;for((a===-1||i&4)&&(c=a===-1?lw(n,e):e[a+8],c===Dl||!JA(i,!1)?a=-1:(s=e[ge],a=gm(c),e=ym(c,e)));a!==-1;){let u=e[ge];if(ZA(o,a,u.data)){let h=aU(a,e,t,s,i,l);if(h!==Nr)return h}c=e[a+8],c!==Dl&&JA(i,e[ge].data[a+8]===l)&&ZA(o,a,e)?(s=u,a=gm(c),e=ym(c,e)):a=-1}}return r}function aU(n,e,t,i,r,o){let s=e[ge],a=s.data[n+8],c=i==null?Cs(a)&&Lb:i!=s&&(a.type&3)!==0,l=r&1&&o===a,u=hm(a,s,t,c,l);return u!==null?Od(e,s,u,a,r):Nr}function hm(n,e,t,i,r){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,u=o>>20,h=i?a:a+u,f=r?a+u:l;for(let y=h;y<f;y++){let b=s[y];if(y<c&&t===b||y>=c&&b.type===t)return y}if(r){let y=s[c];if(y&&Pr(y)&&y.type===t)return c}return null}function Od(n,e,t,i,r){let o=n[t],s=e.data;if(o instanceof Wa){let a=o;if(a.resolving){let y=aA(s[t]);throw q0(y)}let c=vm(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],u,h=a.injectImpl?Xn(a.injectImpl):null,f=vb(n,i,0);try{o=n[t]=a.factory(void 0,r,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&Q3(t,s[t],e)}finally{h!==null&&Xn(h),vm(c),a.resolving=!1,_b()}}return o}function cU(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Oa)?n[Oa]:void 0;return typeof e=="number"?e>=0?e&kM:lU:e}function ZA(n,e,t){let i=1<<n;return!!(t[e+(n>>NM)]&i)}function JA(n,e){return!(n&2)&&!(n&1&&e)}var qa=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return VM(this._tNode,this._lView,e,Pa(i),t)}};function lU(){return new qa(sn(),we())}function vi(n){return kl(()=>{let e=n.prototype.constructor,t=e[yd]||Bb(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[yd]||Bb(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Bb(n){return V0(n)?()=>{let e=Bb(_n(n));return e&&e()}:ys(n)}function uU(n,e,t,i,r){let o=n,s=e;for(;o!==null&&s!==null&&s[be]&2048&&!wl(s);){let a=BM(o,s,t,i|2,Nr);if(a!==Nr)return a;let c=o.parent;if(!c){let l=s[nb];if(l){let u=l.get(t,Nr,i);if(u!==Nr)return u}c=jM(s),s=s[La]}o=c}return r}function jM(n){let e=n[ge],t=e.type;return t===2?e.declTNode:t===1?n[Oi]:null}function Bd(n){return sU(sn(),n)}function dU(){return Nl(sn(),we())}function Nl(n,e){return new ai(lr(n,e))}var ai=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=dU}return n})();function hU(n){return n instanceof ai?n.nativeElement:n}function fU(){return this._results[Symbol.iterator]()}var bm=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ut}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=fA(e);(this._changesDetected=!hA(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=fU};function UM(n){return(n.flags&128)===128}var uw=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(uw||{}),$M=new Map,pU=0;function mU(){return pU++}function gU(n){$M.set(n[Sd],n)}function jb(n){$M.delete(n[Sd])}var eM="__ngContext__";function Al(n,e){Mr(e)?(n[eM]=e[Sd],gU(e)):n[eM]=e}function HM(n){return qM(n[_l])}function zM(n){return qM(n[Ni])}function qM(n){for(;n!==null&&!cr(n);)n=n[Ni];return n}var Ub;function dw(n){Ub=n}function WM(){if(Ub!==void 0)return Ub;if(typeof document<"u")return document;throw new te(210,!1)}var Nm=new ae("",{providedIn:"root",factory:()=>yU}),yU="ng",Om=new ae(""),Qa=new ae("",{providedIn:"platform",factory:()=>"unknown"});var Fm=new ae("",{providedIn:"root",factory:()=>WM().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var vU="h",_U="b";var GM=!1,KM=new ae("",{providedIn:"root",factory:()=>GM});var bU=(n,e,t,i)=>{};function wU(n,e,t,i){bU(n,e,t,i)}function hw(n){return(n.flags&32)===32}var EU=()=>null;function YM(n,e,t=!1){return EU(n,e,t)}function QM(n,e){let t=n.contentQueries;if(t!==null){let i=Ce(null);try{for(let r=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s!==-1){let a=n.data[s];tm(o),a.contentQueries(2,e[s],s)}}}finally{Ce(i)}}}function $b(n,e,t){tm(0);let i=Ce(null);try{e(n,t)}finally{Ce(i)}}function fw(n,e,t){if(ib(e)){let i=Ce(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Ce(i)}}}var Co=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(Co||{});var am;function IU(){if(am===void 0&&(am=null,bo.trustedTypes))try{am=bo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return am}function tM(n){return IU()?.createScriptURL(n)||n}var wm=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Up})`}};function jd(n){return n instanceof wm?n.changingThisBreaksApplicationSecurity:n}function pw(n,e){let t=XM(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Up})`)}return t===e}function XM(n){return n instanceof wm&&n.getTypeName()||null}var CU=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ZM(n){return n=String(n),n.match(CU)?n:"unsafe:"+n}var Lm=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Lm||{});function pt(n){let e=eP();return e?e.sanitize(Lm.URL,n)||"":pw(n,"URL")?jd(n):ZM(Fa(n))}function JM(n){let e=eP();if(e)return tM(e.sanitize(Lm.RESOURCE_URL,n)||"");if(pw(n,"ResourceURL"))return tM(jd(n));throw new te(904,!1)}function SU(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?JM:pt}function mw(n,e,t){return SU(e,t)(n)}function eP(){let n=we();return n&&n[xr].sanitizer}var TU=/^>|^->|<!--|-->|--!>|<!-$/g,DU=/(<|>)/g,xU="\u200B$1\u200B";function AU(n){return n.replace(TU,e=>e.replace(DU,xU))}function tP(n){return n instanceof Function?n():n}function MU(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}var nP="ng-template";function PU(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&MU(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(gw(n))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===t)return!0}return!1}function gw(n){return n.type===4&&n.value!==nP}function RU(n,e,t){let i=n.type===4&&!t?nP:n.value;return e===i}function kU(n,e,t){let i=4,r=n.attrs,o=r!==null?FU(r):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!ur(i)&&!ur(c))return!1;if(s&&ur(c))continue;s=!1,i=c|i&1;continue}if(!s)if(i&4){if(i=2|i&1,c!==""&&!RU(n,c,t)||c===""&&e.length===1){if(ur(i))return!1;s=!0}}else if(i&8){if(r===null||!PU(n,r,c,t)){if(ur(i))return!1;s=!0}}else{let l=e[++a],u=NU(c,r,gw(n),t);if(u===-1){if(ur(i))return!1;s=!0;continue}if(l!==""){let h;if(u>o?h="":h=r[u+1].toLowerCase(),i&2&&l!==h){if(ur(i))return!1;s=!0}}}}return ur(i)||s}function ur(n){return(n&1)===0}function NU(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){let s=e[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return LU(e,n)}function OU(n,e,t=!1){for(let i=0;i<e.length;i++)if(kU(n,e[i],t))return!0;return!1}function FU(n){for(let e=0;e<n.length;e++){let t=n[e];if(PM(t))return e}return n.length}function LU(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function nM(n,e){return n?":not("+e.trim()+")":e}function VU(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(i&2){let a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!ur(s)&&(e+=nM(o,r),r=""),i=s,o=o||!ur(i);t++}return r!==""&&(e+=nM(o,r)),e}function BU(n){return n.map(VU).join(",")}function jU(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&e.push(o,n[++i]):r===8&&t.push(o);else{if(!ur(r))break;r=o}i++}return t.length&&e.push(1,...t),e}var ti={};function UU(n,e){return n.createText(e)}function $U(n,e,t){n.setValue(e,t)}function HU(n,e){return n.createComment(AU(e))}function iP(n,e,t){return n.createElement(e,t)}function Em(n,e,t,i,r){n.insertBefore(e,t,i,r)}function rP(n,e,t){n.appendChild(e,t)}function iM(n,e,t,i,r){i!==null?Em(n,e,t,i,r):rP(n,e,t)}function zU(n,e,t,i){n.removeChild(null,e,t,i)}function qU(n,e,t){n.setAttribute(e,"style",t)}function WU(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function oP(n,e,t){let{mergedAttrs:i,classes:r,styles:o}=t;i!==null&&eU(n,e,i),r!==null&&WU(n,e,r),o!==null&&qU(n,e,o)}function yw(n,e,t,i,r,o,s,a,c,l,u){let h=Ft+i,f=h+r,y=GU(h,f),b=typeof l=="function"?l():l;return y[ge]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:b,incompleteFirstPass:!1,ssrId:u}}function GU(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:ti);return t}function KU(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=yw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function vw(n,e,t,i,r,o,s,a,c,l,u){let h=e.blueprint.slice();return h[ar]=r,h[be]=i|4|128|8|64|1024,(l!==null||n&&n[be]&2048)&&(h[be]|=2048),sb(h),h[ln]=h[La]=n,h[wn]=t,h[xr]=s||n&&n[xr],h[It]=a||n&&n[It],h[ws]=c||n&&n[ws]||null,h[Oi]=o,h[Sd]=mU(),h[Cd]=u,h[nb]=l,h[Fi]=e.type==2?n[Fi]:h,h}function YU(n,e,t){let i=lr(e,n),r=KU(t),o=n[xr].rendererFactory,s=_w(n,vw(n,r,null,sP(t),i,e,null,o.createRenderer(i,t),null,null,null));return n[e.index]=s}function sP(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function aP(n,e,t,i){if(t===0)return-1;let r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function _w(n,e){return n[_l]?n[tb][Ni]=e:n[_l]=e,n[tb]=e,e}function w(n=1){cP($t(),we(),Io()+n,!1)}function cP(n,e,t,i){if(!i)if((e[be]&3)===3){let o=n.preOrderCheckHooks;o!==null&&um(e,o,t)}else{let o=n.preOrderHooks;o!==null&&dm(e,o,0,t)}Ts(t)}var Vm=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Vm||{});function Hb(n,e,t,i){let r=Ce(null);try{let[o,s,a]=n.inputs[t],c=null;(s&Vm.SignalBased)!==0&&(c=e[o][On]),c!==null&&c.transformFn!==void 0?i=c.transformFn(i):a!==null&&(i=a.call(e,i)),n.setInput!==null?n.setInput(e,c,i,t,o):SM(e,c,o,i)}finally{Ce(r)}}var Or=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Or||{}),QU;function bw(n,e){return QU(n,e)}var Ml=new Set,Bm=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Bm||{}),Xa=new ae(""),rM=new Set;function As(n){rM.has(n)||(rM.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var lP=!1,zb=class extends Ut{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,wA()&&(this.destroyRef=q(ei,{optional:!0})??void 0,this.pendingTasks=q(kr,{optional:!0})??void 0)}emit(e){let t=Ce(null);try{super.next(e)}finally{Ce(t)}}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof Ot&&e.add(a),a}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},Kt=zb;function uP(n){let e,t;function i(){n=za;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function oM(n){return queueMicrotask(()=>n()),()=>{n=za}}var ww="isAngularZone",Im=ww+"_ID",XU=0,He=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Kt(!1);onMicrotaskEmpty=new Kt(!1);onStable=new Kt(!1);onError=new Kt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=lP}=e;if(typeof Zone>"u")throw new te(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,e4(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ww)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new te(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new te(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,ZU,za,za);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},ZU={};function Ew(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function JU(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){uP(()=>{n.callbackScheduled=!1,qb(n),n.isCheckStableRunning=!0,Ew(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),qb(n)}function e4(n){let e=()=>{JU(n)},t=XU++;n._inner=n._inner.fork({name:"angular",properties:{[ww]:!0,[Im]:t,[Im+t]:!0},onInvokeTask:(i,r,o,s,a,c)=>{if(t4(c))return i.invokeTask(o,s,a,c);try{return sM(n),i.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),aM(n)}},onInvoke:(i,r,o,s,a,c,l)=>{try{return sM(n),i.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!n4(c)&&e(),aM(n)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,qb(n),Ew(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function qb(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function sM(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function aM(n){n._nesting--,Ew(n)}var Cm=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Kt;onMicrotaskEmpty=new Kt;onStable=new Kt;onError=new Kt;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function t4(n){return dP(n,"__ignore_ng_zone__")}function n4(n){return dP(n,"__scheduler_tick__")}function dP(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Iw=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new n})}return n})(),hP=[0,1,2,3],fP=(()=>{class n{ngZone=q(He);scheduler=q(sr);errorHandler=q(ki,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){q(Xa,{optional:!0})}execute(){let t=this.sequences.size>0;t&&nt(16),this.executing=!0;for(let i of hP)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=r.hooks[i];return o(r.pipelinedValue)},r.snapshot))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&nt(17)}register(t){let{view:i}=t;i!==void 0?((i[Ba]??=[]).push(t),Ss(i),i[be]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,i){return i?i.run(Bm.AFTER_NEXT_RENDER,t):t()}static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new n})}return n})(),Sm=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,i,r,o,s=null){this.impl=e,this.hooks=t,this.view=i,this.once=r,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Ba];e&&(this.view[Ba]=e.filter(t=>t!==this))}};function jm(n,e){let t=e?.injector??q(ft);return As("NgAfterNextRender"),r4(n,t,e,!0)}function i4(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function r4(n,e,t,i){let r=e.get(Iw);r.impl??=e.get(fP);let o=e.get(Xa,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(ei):null,a=e.get(Sl,null,{optional:!0}),c=new Sm(r.impl,i4(n),a?.view,i,s,o?.snapshot(null));return r.impl.register(c),c}var o4=new ae("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function pP(n,e,t){let i=n.get(o4);if(Array.isArray(e))for(let r of e)i.queue.add(r),t?.detachedLeaveAnimationFns?.push(r);else i.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);i.scheduler&&i.scheduler(n)}function s4(n,e){for(let[t,i]of e)pP(n,i.animateFns)}function cM(n,e,t,i){let r=n?.[Td]?.enter;e!==null&&r&&r.has(t.index)&&s4(i,r)}function Tl(n,e,t,i,r,o,s,a){if(r!=null){let c,l=!1;cr(r)?c=r:Mr(r)&&(l=!0,r=r[ar]);let u=Li(r);n===0&&i!==null?(cM(a,i,o,t),s==null?rP(e,i,u):Em(e,i,u,s||null,!0)):n===1&&i!==null?(cM(a,i,o,t),Em(e,i,u,s||null,!0)):n===2?lM(a,o,t,h=>{zU(e,u,l,h)}):n===3&&lM(a,o,t,()=>{e.destroyNode(u)}),c!=null&&_4(e,n,t,c,o,i,s)}}function a4(n,e){mP(n,e),e[ar]=null,e[Oi]=null}function c4(n,e,t,i,r,o){i[ar]=r,i[Oi]=e,Um(n,i,t,1,r,o)}function mP(n,e){e[xr].changeDetectionScheduler?.notify(9),Um(n,e,e[It],2,null,null)}function l4(n){let e=n[_l];if(!e)return Ab(n[ge],n);for(;e;){let t=null;if(Mr(e))t=e[_l];else{let i=e[Fn];i&&(t=i)}if(!t){for(;e&&!e[Ni]&&e!==n;)Mr(e)&&Ab(e[ge],e),e=e[ln];e===null&&(e=n),Mr(e)&&Ab(e[ge],e),t=e&&e[Ni]}e=t}}function Cw(n,e){let t=n[ja],i=t.indexOf(e);t.splice(i,1)}function Sw(n,e){if(Ua(e))return;let t=e[It];t.destroyNode&&Um(n,e,t,3,null,null),l4(e)}function Ab(n,e){if(Ua(e))return;let t=Ce(null);try{e[be]&=-129,e[be]|=256,e[yi]&&Ca(e[yi]),h4(n,e),d4(n,e),e[ge].type===1&&e[It].destroy();let i=e[Es];if(i!==null&&cr(e[ln])){i!==e[ln]&&Cw(i,e);let r=e[Ar];r!==null&&r.detachView(n)}jb(e)}finally{Ce(t)}}function lM(n,e,t,i){let r=n?.[Td];if(r==null||r.leave==null||!r.leave.has(e.index))return i(!1);n&&Ml.add(n),pP(t,()=>{if(r.leave&&r.leave.has(e.index)){let s=r.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let l=s.animateFns[c],{promise:u}=l();a.push(u)}r.detachedLeaveAnimationFns=void 0}r.running=Promise.allSettled(a),u4(n,i)}else n&&Ml.delete(n),i(!1)},r)}function u4(n,e){let t=n[Td]?.running;if(t){t.then(()=>{n[Td].running=void 0,Ml.delete(n),e(!0)});return}e(!1)}function d4(n,e){let t=n.cleanup,i=e[vl];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?i[a]():i[-a].unsubscribe(),s+=2}else{let a=i[t[s+1]];t[s].call(a)}i!==null&&(e[vl]=null);let r=e[vo];if(r!==null){e[vo]=null;for(let s=0;s<r.length;s++){let a=r[s];a()}}let o=e[Eo];if(o!==null){e[Eo]=null;for(let s of o)s.destroy()}}function h4(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof Wa)){let o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],c=o[s+1];nt(4,a,c);try{c.call(a)}finally{nt(5,a,c)}}else{nt(4,r,o);try{o.call(r)}finally{nt(5,r,o)}}}}}function f4(n,e,t){return p4(n,e.parent,t)}function p4(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[ar];if(Cs(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===Co.None||r===Co.Emulated)return null}return lr(i,t)}function m4(n,e,t){return y4(n,e,t)}function g4(n,e,t){return n.type&40?lr(n,t):null}var y4=g4,uM;function Tw(n,e,t,i){let r=f4(n,i,e),o=e[It],s=i.parent||e[Oi],a=m4(s,i,e);if(r!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)iM(o,r,t[c],a,!1);else iM(o,r,t,a,!1);uM!==void 0&&uM(o,i,e,t,r)}function kd(n,e){if(e!==null){let t=e.type;if(t&3)return lr(e,n);if(t&4)return Wb(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return kd(n,i);{let r=n[e.index];return cr(r)?Wb(-1,r):Li(r)}}else{if(t&128)return kd(n,e.next);if(t&32)return bw(e,n)()||Li(n[e.index]);{let i=gP(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=vs(n[Fi]);return kd(r,i)}else return kd(n,e.next)}}}return null}function gP(n,e){if(e!==null){let i=n[Fi][Oi],r=e.projection;return i.projection[r]}return null}function Wb(n,e){let t=Fn+n+1;if(t<e.length){let i=e[t],r=i[ge].firstChild;if(r!==null)return kd(i,r)}return e[Is]}function Dw(n,e,t,i,r,o,s){for(;t!=null;){let a=i[ws];if(t.type===128){t=t.next;continue}let c=i[t.index],l=t.type;if(s&&e===0&&(c&&Al(Li(c),i),t.flags|=2),!hw(t))if(l&8)Dw(n,e,t.child,i,r,o,!1),Tl(e,n,a,r,c,t,o,i);else if(l&32){let u=bw(t,i),h;for(;h=u();)Tl(e,n,a,r,h,t,o,i);Tl(e,n,a,r,c,t,o,i)}else l&16?v4(n,e,i,t,r,o):Tl(e,n,a,r,c,t,o,i);t=s?t.projectionNext:t.next}}function Um(n,e,t,i,r,o){Dw(t,i,n.firstChild,e,r,o,!1)}function v4(n,e,t,i,r,o){let s=t[Fi],c=s[Oi].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Tl(e,n,t[ws],r,u,i,o,t)}else{let l=c,u=s[ln];UM(i)&&(l.flags|=128),Dw(n,e,l,u,r,o,!0)}}function _4(n,e,t,i,r,o,s){let a=i[Is],c=Li(i);a!==c&&Tl(e,n,t,o,a,r,s);for(let l=Fn;l<i.length;l++){let u=i[l];Um(u[ge],u,n,e,o,a)}}function b4(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=i.indexOf("-")===-1?void 0:Or.DashCase;r==null?n.removeStyle(t,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Or.Important),n.setStyle(t,i,r,o))}}function yP(n,e,t,i,r){let o=Io(),s=i&2;try{Ts(-1),s&&e.length>Ft&&cP(n,e,Ft,!1),nt(s?2:0,r,t),t(i,r)}finally{Ts(o),nt(s?3:1,r,t)}}function $m(n,e,t){D4(n,e,t),(t.flags&64)===64&&x4(n,e,t)}function Ud(n,e,t=lr){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?t(e,n):n[s];n[r++]=a}}}function w4(n,e,t,i){let o=i.get(KM,GM)||t===Co.ShadowDom,s=n.selectRootElement(e,o);return E4(s),s}function E4(n){I4(n)}var I4=()=>null;function C4(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function vP(n,e,t,i,r,o){let s=e[ge];if(Pw(n,s,e,t,i)){Cs(n)&&T4(e,n.index);return}n.type&3&&(t=C4(t)),S4(n,e,t,i,r,o)}function S4(n,e,t,i,r,o){if(n.type&3){let s=lr(n,e);i=o!=null?o(i,n.value||"",t):i,r.setProperty(s,t,i)}else n.type&12}function T4(n,e){let t=Vi(e,n);t[be]&16||(t[be]|=64)}function D4(n,e,t){let i=t.directiveStart,r=t.directiveEnd;Cs(t)&&YU(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||_m(t,e);let o=t.initialInputs;for(let s=i;s<r;s++){let a=n.data[s],c=Od(e,n,s,t);if(Al(c,e),o!==null&&R4(e,s-i,c,a,t,o),Pr(a)){let l=Vi(t.index,e);l[wn]=Od(e,n,s,t)}}}function x4(n,e,t){let i=t.directiveStart,r=t.directiveEnd,o=t.index,s=jA();try{Ts(o);for(let a=i;a<r;a++){let c=n.data[a],l=e[a];em(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&A4(c,l)}}finally{Ts(-1),em(s)}}function A4(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function xw(n,e){let t=n.directiveRegistry,i=null;if(t)for(let r=0;r<t.length;r++){let o=t[r];OU(e,o.selectors,!1)&&(i??=[],Pr(o)?i.unshift(o):i.push(o))}return i}function M4(n,e,t,i,r,o){let s=lr(n,e);P4(e[It],s,o,n.value,t,i,r)}function P4(n,e,t,i,r,o,s){if(o==null)n.removeAttribute(e,r,t);else{let a=s==null?Fa(o):s(o,i||"",r);n.setAttribute(e,r,a,t)}}function R4(n,e,t,i,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];Hb(i,t,c,l)}}function Aw(n,e,t,i,r){let o=Ft+t,s=e[ge],a=r(s,e,n,i,t);e[o]=a,El(n,!0);let c=n.type===2;return c?(oP(e[It],a,n),(MA()===0||bl(n))&&Al(a,e),PA()):Al(a,e),om()&&(!c||!hw(n))&&Tw(s,e,a,n),n}function Mw(n){let e=n;return mb()?NA():(e=e.parent,El(e,!1)),e}function k4(n,e){let t=n[ws];if(!t)return;let i;try{i=t.get(Ln,null)}catch{i=null}i?.(e)}function Pw(n,e,t,i,r){let o=n.inputs?.[i],s=n.hostDirectiveInputs?.[i],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],h=e.data[l];Hb(h,t[l],u,r),a=!0}if(o)for(let c of o){let l=t[c],u=e.data[c];Hb(u,l,i,r),a=!0}return a}function N4(n,e){let t=Vi(e,n),i=t[ge];O4(i,t);let r=t[ar];r!==null&&t[Cd]===null&&(t[Cd]=YM(r,t[ws])),nt(18),Rw(i,t,t[wn]),nt(19,t[wn])}function O4(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Rw(n,e,t){nm(e);try{let i=n.viewQuery;i!==null&&$b(1,i,t);let r=n.template;r!==null&&yP(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ar]?.finishViewCreation(n),n.staticContentQueries&&QM(n,e),n.staticViewQueries&&$b(2,n.viewQuery,t);let o=n.components;o!==null&&F4(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[be]&=-5,im()}}function F4(n,e){for(let t=0;t<e.length;t++)N4(n,e[t])}function _P(n,e,t,i){let r=Ce(null);try{let o=e.tView,a=n[be]&4096?4096:16,c=vw(n,o,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),l=n[e.index];c[Es]=l;let u=n[Ar];return u!==null&&(c[Ar]=u.createEmbeddedView(o)),Rw(o,c,t),c}finally{Ce(r)}}function Gb(n,e){return!e||e.firstChild===null||UM(n)}function Fd(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&i.push(Li(o)),cr(o)&&bP(o,i);let s=t.type;if(s&8)Fd(n,e,t.child,i);else if(s&32){let a=bw(t,e),c;for(;c=a();)i.push(c)}else if(s&16){let a=gP(e,t);if(Array.isArray(a))i.push(...a);else{let c=vs(e[Fi]);Fd(c[ge],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function bP(n,e){for(let t=Fn;t<n.length;t++){let i=n[t],r=i[ge].firstChild;r!==null&&Fd(i[ge],i,r,e)}n[Is]!==n[ar]&&e.push(n[Is])}function wP(n){if(n[Ba]!==null){for(let e of n[Ba])e.impl.addSequence(e);n[Ba].length=0}}var EP=[];function L4(n){return n[yi]??V4(n)}function V4(n){let e=EP.pop()??Object.create(j4);return e.lView=n,e}function B4(n){n.lView[yi]!==n&&(n.lView=null,EP.push(n))}var j4=fe(Z({},Ea),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Ss(n.lView)},consumerOnSignalRead(){this.lView[yi]=this}});function U4(n){let e=n[yi]??Object.create($4);return e.lView=n,e}var $4=fe(Z({},Ea),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=vs(n.lView);for(;e&&!IP(e[ge]);)e=vs(e);e&&ab(e)},consumerOnSignalRead(){this.lView[yi]=this}});function IP(n){return n.type!==2}function CP(n){if(n[Eo]===null)return;let e=!0;for(;e;){let t=!1;for(let i of n[Eo])i.dirty&&(t=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(n[be]&8192)}}var H4=100;function SP(n,e=0){let i=n[xr].rendererFactory,r=!1;r||i.begin?.();try{z4(n,e)}finally{r||i.end?.()}}function z4(n,e){let t=gb();try{Il(!0),Kb(n,e);let i=0;for(;Ad(n);){if(i===H4)throw new te(103,!1);i++,Kb(n,1)}}finally{Il(t)}}function q4(n,e,t,i){if(Ua(e))return;let r=e[be],o=!1,s=!1;nm(e);let a=!0,c=null,l=null;o||(IP(n)?(l=L4(e),c=Ia(l)):rp()===null?(a=!1,l=U4(e),c=Ia(l)):e[yi]&&(Ca(e[yi]),e[yi]=null));try{sb(e),LA(n.bindingStartIndex),t!==null&&yP(n,e,t,2,i);let u=(r&3)===3;if(!o)if(u){let y=n.preOrderCheckHooks;y!==null&&um(e,y,null)}else{let y=n.preOrderHooks;y!==null&&dm(e,y,0,null),Db(e,0)}if(s||W4(e),CP(e),TP(e,0),n.contentQueries!==null&&QM(n,e),!o)if(u){let y=n.contentCheckHooks;y!==null&&um(e,y)}else{let y=n.contentHooks;y!==null&&dm(e,y,1),Db(e,1)}K4(n,e);let h=n.components;h!==null&&xP(e,h,0);let f=n.viewQuery;if(f!==null&&$b(2,f,i),!o)if(u){let y=n.viewCheckHooks;y!==null&&um(e,y)}else{let y=n.viewHooks;y!==null&&dm(e,y,2),Db(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Kp]){for(let y of e[Kp])y();e[Kp]=null}o||(wP(e),e[be]&=-73)}catch(u){throw o||Ss(e),u}finally{l!==null&&(Jc(l,c),a&&B4(l)),im()}}function TP(n,e){for(let t=HM(n);t!==null;t=zM(t))for(let i=Fn;i<t.length;i++){let r=t[i];DP(r,e)}}function W4(n){for(let e=HM(n);e!==null;e=zM(e)){if(!(e[be]&2))continue;let t=e[ja];for(let i=0;i<t.length;i++){let r=t[i];ab(r)}}}function G4(n,e,t){nt(18);let i=Vi(e,n);DP(i,t),nt(19,i[wn])}function DP(n,e){Qp(n)&&Kb(n,e)}function Kb(n,e){let i=n[ge],r=n[be],o=n[yi],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&el(o)),s||=!1,o&&(o.dirty=!1),n[be]&=-9217,s)q4(i,n,i.template,n[wn]);else if(r&8192){let a=Ce(null);try{CP(n),TP(n,1);let c=i.components;c!==null&&xP(n,c,1),wP(n)}finally{Ce(a)}}}function xP(n,e,t){for(let i=0;i<e.length;i++)G4(n,e[i],t)}function K4(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)Ts(~r);else{let o=r,s=t[++i],a=t[++i];BA(s,o);let c=e[o];nt(24,c),a(2,c),nt(25,c)}}}finally{Ts(-1)}}function kw(n,e){let t=gb()?64:1088;for(n[xr].changeDetectionScheduler?.notify(e);n;){n[be]|=t;let i=vs(n);if(wl(n)&&!i)return n;n=i}return null}function AP(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function Y4(n,e){let t=Fn+e;if(t<n.length)return n[t]}function MP(n,e,t,i=!0){let r=e[ge];if(X4(r,e,n,t),i){let s=Wb(t,n),a=e[It],c=a.parentNode(n[Is]);c!==null&&c4(r,n[Oi],a,e,c,s)}let o=e[Cd];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Q4(n,e){let t=Tm(n,e);return t!==void 0&&Sw(t[ge],t),t}function Tm(n,e){if(n.length<=Fn)return;let t=Fn+e,i=n[t];if(i){let r=i[Es];r!==null&&r!==n&&Cw(r,i),e>0&&(n[t-1][Ni]=i[Ni]);let o=wd(n,Fn+e);a4(i[ge],i);let s=o[Ar];s!==null&&s.detachView(o[ge]),i[ln]=null,i[Ni]=null,i[be]&=-129}return i}function X4(n,e,t,i){let r=Fn+i,o=t.length;i>0&&(t[r-1][Ni]=e),i<o-Fn?(e[Ni]=t[r],G0(t,Fn+i,e)):(t.push(e),e[Ni]=null),e[ln]=t;let s=e[Es];s!==null&&t!==s&&PP(s,e);let a=e[Ar];a!==null&&a.insertView(n),Xp(e),e[be]|=128}function PP(n,e){let t=n[ja],i=e[ln];if(Mr(i))n[be]|=2;else{let r=i[ln][Fi];e[Fi]!==r&&(n[be]|=2)}t===null?n[ja]=[e]:t.push(e)}var Ds=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[ge];return Fd(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[wn]}set context(e){this._lView[wn]=e}get destroyed(){return Ua(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ln];if(cr(e)){let t=e[Dd],i=t?t.indexOf(this):-1;i>-1&&(Tm(e,i),wd(t,i))}this._attachedToViewContainer=!1}Sw(this._lView[ge],this._lView)}onDestroy(e){cb(this._lView,e)}markForCheck(){kw(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[be]&=-129}reattach(){Xp(this._lView),this._lView[be]|=128}detectChanges(){this._lView[be]|=1024,SP(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=wl(this._lView),t=this._lView[Es];t!==null&&!e&&Cw(t,this._lView),mP(this._lView[ge],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new te(902,!1);this._appRef=e;let t=wl(this._lView),i=this._lView[Es];i!==null&&!t&&PP(i,this._lView),Xp(this._lView)}};var xs=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=Z4;constructor(t,i,r){this._declarationLView=t,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,i){return this.createEmbeddedViewImpl(t,i)}createEmbeddedViewImpl(t,i,r){let o=_P(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:i,dehydratedView:r});return new Ds(o)}}return n})();function Z4(){return Hm(sn(),we())}function Hm(n,e){return n.type&4?new xs(e,n,Nl(n,e)):null}function $d(n,e,t,i,r){let o=n.data[e];if(o===null)o=J4(n,e,t,i,r),VA()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=i,o.attrs=r;let s=kA();o.injectorIndex=s===null?-1:s.injectorIndex}return El(o,!0),o}function J4(n,e,t,i,r){let o=pb(),s=mb(),a=s?o:o&&o.parent,c=n.data[e]=t5(n,a,t,e,i,r);return e5(n,c,o,s),c}function e5(n,e,t,i){n.firstChild===null&&(n.firstChild=e),t!==null&&(i?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function t5(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,a=0;return RA()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var pue=new RegExp(`^(\\d+)*(${_U}|${vU})*(.*)`);var n5=()=>null,i5=()=>null;function dM(n,e){return n5(n,e)}function r5(n,e,t){return i5(n,e,t)}var RP=class{},zm=class{},Yb=class{resolveComponentFactory(e){throw new te(917,!1)}},Hd=class{static NULL=new Yb},Ga=class{},Fr=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>o5()}return n})();function o5(){let n=we(),e=sn(),t=Vi(e.index,n);return(Mr(t)?t:n)[It]}var kP=(()=>{class n{static \u0275prov=ie({token:n,providedIn:"root",factory:()=>null})}return n})();var fm={},Qb=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){let r=this.injector.get(e,fm,i);return r!==fm||t===fm?r:this.parentInjector.get(e,t,i)}};function Dm(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=$p(r,a);else if(o==2){let c=a,l=e[++s];i=$p(i,c+": "+l+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function K(n,e=0){let t=we();if(t===null)return le(n,e);let i=sn();return VM(i,t,_n(n),e)}function NP(n,e,t,i,r){let o=i===null?null:{"":-1},s=r(n,t);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}c5(n,e,t,a,o,c,l)}o!==null&&i!==null&&s5(t,i,o)}function s5(n,e,t){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let o=t[e[r+1]];if(o==null)throw new te(-301,!1);i.push(e[r],o)}}function a5(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function c5(n,e,t,i,r,o,s){let a=i.length,c=!1;for(let f=0;f<a;f++){let y=i[f];!c&&Pr(y)&&(c=!0,a5(n,t,f)),Vb(_m(t,e),n,y.type)}p5(t,n.data.length,a);for(let f=0;f<a;f++){let y=i[f];y.providersResolver&&y.providersResolver(y)}let l=!1,u=!1,h=aP(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let f=0;f<a;f++){let y=i[f];if(t.mergedAttrs=xl(t.mergedAttrs,y.hostAttrs),u5(n,t,e,h,y),f5(h,y,r),s!==null&&s.has(y)){let[E,I]=s.get(y);t.directiveToIndex.set(y.type,[h,E+t.directiveStart,I+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,h);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let b=y.type.prototype;!l&&(b.ngOnChanges||b.ngOnInit||b.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!u&&(b.ngOnChanges||b.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),h++}l5(n,t,o)}function l5(n,e,t){for(let i=e.directiveStart;i<e.directiveEnd;i++){let r=n.data[i];if(t===null||!t.has(r))hM(0,e,r,i),hM(1,e,r,i),pM(e,i,!1);else{let o=t.get(r);fM(0,e,o,i),fM(1,e,o,i),pM(e,i,!0)}}}function hM(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(i),OP(e,o)}}function fM(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s=r[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(i,o),OP(e,s)}}function OP(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function pM(n,e,t){let{attrs:i,inputs:r,hostDirectiveInputs:o}=n;if(i===null||!t&&r===null||t&&o===null||gw(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<i.length;){let c=i[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&r.hasOwnProperty(c)){let l=r[c];for(let u of l)if(u===e){s??=[],s.push(c,i[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){s??=[],s.push(l[u+1],i[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function u5(n,e,t,i,r){n.data[i]=r;let o=r.factory||(r.factory=ys(r.type,!0)),s=new Wa(o,Pr(r),K,null);n.blueprint[i]=s,t[i]=s,d5(n,e,i,aP(n,t,r.hostVars,ti),r)}function d5(n,e,t,i,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;h5(s)!=a&&s.push(a),s.push(t,i,o)}}function h5(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function f5(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Pr(e)&&(t[""]=n)}}function p5(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Nw(n,e,t,i,r,o,s,a){let c=e[ge],l=c.consts,u=Rr(l,s),h=$d(c,n,t,i,u);return o&&NP(c,e,h,Rr(l,a),r),h.mergedAttrs=xl(h.mergedAttrs,h.attrs),h.attrs!==null&&Dm(h,h.attrs,!1),h.mergedAttrs!==null&&Dm(h,h.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,h),h}function Ow(n,e){AM(n,e),ib(e)&&n.queries.elementEnd(e)}function m5(n,e,t,i,r,o){let s=e.consts,a=Rr(s,r),c=$d(e,n,t,i,a);if(c.mergedAttrs=xl(c.mergedAttrs,c.attrs),o!=null){let l=Rr(s,o);c.localNames=[];for(let u=0;u<l.length;u+=2)c.localNames.push(l[u],-1)}return c.attrs!==null&&Dm(c,c.attrs,!1),c.mergedAttrs!==null&&Dm(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function Fw(n){return LP(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function FP(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function LP(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function qm(n,e,t){return n[e]=t}function g5(n,e){return n[e]}function hr(n,e,t){if(t===ti)return!1;let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function Lw(n,e,t,i){let r=hr(n,e,t);return hr(n,e+1,i)||r}function y5(n,e,t,i,r){let o=Lw(n,e,t,i);return hr(n,e+2,r)||o}function pm(n,e,t){return function i(r){let o=Cs(n)?Vi(n.index,e):e;kw(o,5);let s=e[wn],a=mM(e,s,t,r),c=i.__ngNextListenerFn__;for(;c;)a=mM(e,s,c,r)&&a,c=c.__ngNextListenerFn__;return a}}function mM(n,e,t,i){let r=Ce(null);try{return nt(6,e,t),t(i)!==!1}catch(o){return k4(n,o),!1}finally{nt(7,e,t),Ce(r)}}function VP(n,e,t,i,r,o,s,a){let c=bl(n),l=!1,u=null;if(!i&&c&&(u=_5(e,t,o,n.index)),u!==null){let h=u.__ngLastListenerFn__||u;h.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let h=lr(n,t),f=i?i(h):h;wU(t,f,o,a);let y=r.listen(f,o,a);if(!v5(o)){let b=i?E=>i(Li(E[n.index])):n.index;BP(b,e,t,o,a,y,!1)}}return l}function v5(n){return n.startsWith("animation")||n.startsWith("transition")}function _5(n,e,t,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===t&&r[o+1]===i){let a=e[vl],c=r[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function BP(n,e,t,i,r,o,s){let a=e.firstCreatePass?ub(e):null,c=lb(t),l=c.length;c.push(r,o),a&&a.push(i,n,l,(l+1)*(s?-1:1))}function gM(n,e,t,i,r,o){let s=e[t],a=e[ge],l=a.data[t].outputs[i],h=s[l].subscribe(o);BP(n.index,a,e,r,o,h,!0)}var Xb=Symbol("BINDING");var xm=class extends Hd{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=bs(e);return new Pl(t,this.ngModule)}};function b5(n){return Object.keys(n).map(e=>{let[t,i,r]=n[e],o={propName:t,templateName:e,isSignal:(i&Vm.SignalBased)!==0};return r&&(o.transform=r),o})}function w5(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function E5(n,e,t){let i=e instanceof Gt?e:e?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new Qb(t,i):t}function I5(n){let e=n.get(Ga,null);if(e===null)throw new te(407,!1);let t=n.get(kP,null),i=n.get(sr,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:i,ngReflect:!1}}function C5(n,e){let t=jP(n);return iP(e,t,t==="svg"?IA:t==="math"?CA:null)}function jP(n){return(n.selectors[0][0]||"div").toLowerCase()}var Pl=class extends zm{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=b5(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=w5(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=BU(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,i,r,o,s){nt(22);let a=Ce(null);try{let c=this.componentDef,l=S5(i,c,s,o),u=E5(c,r||this.ngModule,e),h=I5(u),f=h.rendererFactory.createRenderer(null,c),y=i?w4(f,i,c.encapsulation,u):C5(c,f),b=s?.some(yM)||o?.some(R=>typeof R!="function"&&R.bindings.some(yM)),E=vw(null,l,null,512|sP(c),null,null,h,f,u,null,YM(y,u,!0));E[Ft]=y,nm(E);let I=null;try{let R=Nw(Ft,E,2,"#host",()=>l.directiveRegistry,!0,0);oP(f,y,R),Al(y,E),$m(l,E,R),fw(l,R,E),Ow(l,R),t!==void 0&&D5(R,this.ngContentSelectors,t),I=Vi(R.index,E),E[wn]=I[wn],Rw(l,E,null)}catch(R){throw I!==null&&jb(I),jb(E),R}finally{nt(23),im()}return new Am(this.componentType,E,!!b)}finally{Ce(a)}}};function S5(n,e,t,i){let r=n?["ng-version","20.3.14"]:jU(e.selectors[0]),o=null,s=null,a=0;if(t)for(let u of t)a+=u[Xb].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(i)for(let u=0;u<i.length;u++){let h=i[u];if(typeof h!="function")for(let f of h.bindings){a+=f[Xb].requiredVars;let y=u+1;f.create&&(f.targetIdx=y,(o??=[]).push(f)),f.update&&(f.targetIdx=y,(s??=[]).push(f))}}let c=[e];if(i)for(let u of i){let h=typeof u=="function"?u:u.type,f=X0(h);c.push(f)}return yw(0,null,T5(o,s),1,a,c,null,null,null,[r],null)}function T5(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let i of n)i.create();if(t&2&&e)for(let i of e)i.update()}}function yM(n){let e=n[Xb].kind;return e==="input"||e==="twoWay"}var Am=class extends RP{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,i){super(),this._rootLView=t,this._hasInputBindings=i,this._tNode=xd(t[ge],Ft),this.location=Nl(this._tNode,t),this.instance=Vi(this._tNode.index,t)[wn],this.hostView=this.changeDetectorRef=new Ds(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let r=this._rootLView,o=Pw(i,r[ge],r,e,t);this.previousInputValues.set(e,t);let s=Vi(i.index,r);kw(s,1)}get injector(){return new qa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function D5(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let o=t[r];i.push(o!=null&&o.length?Array.from(o):null)}}var To=(()=>{class n{static __NG_ELEMENT_ID__=x5}return n})();function x5(){let n=sn();return $P(n,we())}var A5=To,UP=class extends A5{_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Nl(this._hostTNode,this._hostLView)}get injector(){return new qa(this._hostTNode,this._hostLView)}get parentInjector(){let e=lw(this._hostTNode,this._hostLView);if(RM(e)){let t=ym(e,this._hostLView),i=gm(e),r=t[ge].data[i+8];return new qa(r,t)}else return new qa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=vM(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Fn}createEmbeddedView(e,t,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=dM(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,r,Gb(this._hostTNode,s)),a}createComponent(e,t,i,r,o,s,a){let c=e&&!W3(e),l;if(c)l=t;else{let I=t||{};l=I.index,i=I.injector,r=I.projectableNodes,o=I.environmentInjector||I.ngModuleRef,s=I.directives,a=I.bindings}let u=c?e:new Pl(bs(e)),h=i||this.parentInjector;if(!o&&u.ngModule==null){let R=(c?h:this.parentInjector).get(Gt,null);R&&(o=R)}let f=bs(u.componentType??{}),y=dM(this._lContainer,f?.id??null),b=y?.firstChild??null,E=u.create(h,r,b,o,s,a);return this.insertImpl(E.hostView,l,Gb(this._hostTNode,y)),E}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(TA(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=r[ln],l=new UP(c,c[Oi],c[ln]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return MP(s,r,o,i),e.attachToViewContainerRef(),G0(Mb(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=vM(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=Tm(this._lContainer,t);i&&(wd(Mb(this._lContainer),t),Sw(i[ge],i))}detach(e){let t=this._adjustIndex(e,-1),i=Tm(this._lContainer,t);return i&&wd(Mb(this._lContainer),t)!=null?new Ds(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function vM(n){return n[Dd]}function Mb(n){return n[Dd]||(n[Dd]=[])}function $P(n,e){let t,i=e[n.index];return cr(i)?t=i:(t=AP(i,e,null,n),e[n.index]=t,_w(e,t)),P5(t,e,n,i),new UP(t,n,e)}function M5(n,e){let t=n[It],i=t.createComment(""),r=lr(e,n),o=t.parentNode(r);return Em(t,o,i,t.nextSibling(r),!1),i}var P5=N5,R5=()=>!1;function k5(n,e,t){return R5(n,e,t)}function N5(n,e,t,i){if(n[Is])return;let r;t.type&8?r=Li(i):r=M5(e,t),n[Is]=r}var Zb=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Jb=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Vw(e,t).matches!==null&&this.queries[t].setDirty()}},ew=class{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=$5(e):this.predicate=e}},tw=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},nw=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,t,O5(t,o)),this.matchTNodeWithReadOption(e,t,hm(t,e,o,!1,!1))}else i===xs?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,hm(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===ai||r===To||r===xs&&t.type&4)this.addMatch(t.index,-2);else{let o=hm(t,e,r,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function O5(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function F5(n,e){return n.type&11?Nl(n,e):n.type&4?Hm(n,e):null}function L5(n,e,t,i){return t===-1?F5(e,n):t===-2?V5(n,e,i):Od(n,n[ge],t,e)}function V5(n,e,t){if(t===ai)return Nl(e,n);if(t===xs)return Hm(e,n);if(t===To)return $P(e,n)}function HP(n,e,t,i){let r=e[Ar].queries[i];if(r.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=o[l];a.push(L5(e,u,s[c+1],t.metadata.read))}}r.matches=a}return r.matches}function iw(n,e,t,i){let r=n.queries.getByIndex(t),o=r.matches;if(o!==null){let s=HP(n,e,r,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)i.push(s[a/2]);else{let l=o[a+1],u=e[-c];for(let h=Fn;h<u.length;h++){let f=u[h];f[Es]===f[ln]&&iw(f[ge],f,l,i)}if(u[ja]!==null){let h=u[ja];for(let f=0;f<h.length;f++){let y=h[f];iw(y[ge],y,l,i)}}}}}return i}function B5(n,e){return n[Ar].queries[e].queryList}function j5(n,e,t){let i=new bm((t&4)===4);return AA(n,e,i,i.destroy),(e[Ar]??=new Jb).queries.push(new Zb(i))-1}function U5(n,e,t){let i=$t();return i.firstCreatePass&&(H5(i,new ew(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),j5(i,we(),e)}function $5(n){return n.split(",").map(e=>e.trim())}function H5(n,e,t){n.queries===null&&(n.queries=new tw),n.queries.track(new nw(e,t))}function Vw(n,e){return n.queries.getByIndex(e)}function z5(n,e){let t=n[ge],i=Vw(t,e);return i.crossesNgTemplate?iw(t,n,e,[]):HP(t,n,i,e)}var Ka=class{},Wm=class{};var Mm=class extends Ka{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new xm(this);constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t;let o=Q0(e);this._bootstrapComponents=tP(o.bootstrap),this._r3Injector=bb(e,t,[{provide:Ka,useValue:this},{provide:Hd,useValue:this.componentFactoryResolver},...i],_o(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Pm=class extends Wm{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Mm(this.moduleType,e,[])}};var Ld=class extends Ka{injector;componentFactoryResolver=new xm(this);instance=null;constructor(e){super();let t=new ka([...e.providers,{provide:Ka,useValue:this},{provide:Hd,useValue:this.componentFactoryResolver}],e.parent||Id(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function zd(n,e,t=null){return new Ld({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var q5=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=Z0(!1,t.type),r=i.length>0?zd([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ie({token:n,providedIn:"environment",factory:()=>new n(le(Gt))})}return n})();function it(n){return kl(()=>{let e=zP(n),t=fe(Z({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===uw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(q5).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Co.Emulated,styles:n.styles||Zn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&As("NgStandalone"),qP(t);let i=n.dependencies;return t.directiveDefs=_M(i,W5),t.pipeDefs=_M(i,mA),t.id=Y5(t),t})}function W5(n){return bs(n)||X0(n)}function Do(n){return kl(()=>({type:n.type,bootstrap:n.bootstrap||Zn,declarations:n.declarations||Zn,imports:n.imports||Zn,exports:n.exports||Zn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function G5(n,e){if(n==null)return _s;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,s,a,c;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o,c=r[3]||null):(o=r,s=r,a=Vm.None,c=null),t[o]=[i,a,c],e[o]=s}return t}function K5(n){if(n==null)return _s;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function ot(n){return kl(()=>{let e=zP(n);return qP(e),e})}function Za(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function zP(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||_s,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Zn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:G5(n.inputs,e),outputs:K5(n.outputs),debugInfo:null}}function qP(n){n.features?.forEach(e=>e(n))}function _M(n,e){return n?()=>{let t=typeof n=="function"?n():n,i=[];for(let r of t){let o=e(r);o!==null&&i.push(o)}return i}:null}function Y5(n){let e=0,t=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of i.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Q5(n){return Object.getPrototypeOf(n.prototype).constructor}function Vn(n){let e=Q5(n.type),t=!0,i=[n];for(;e;){let r;if(Pr(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new te(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let s=n;s.inputs=Pb(n.inputs),s.declaredInputs=Pb(n.declaredInputs),s.outputs=Pb(n.outputs);let a=r.hostBindings;a&&t$(n,a);let c=r.viewQuery,l=r.contentQueries;if(c&&J5(n,c),l&&e$(n,l),X5(n,r),sA(n.outputs,r.outputs),Pr(r)&&r.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Vn&&(t=!1)}}e=Object.getPrototypeOf(e)}Z5(i)}function X5(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t])}}function Z5(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=xl(r.hostAttrs,t=xl(t,r.hostAttrs))}}function Pb(n){return n===_s?{}:n===Zn?[]:n}function J5(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function e$(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,o)=>{e(i,r,o),t(i,r,o)}:n.contentQueries=e}function t$(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function WP(n,e,t,i,r,o,s,a){if(t.firstCreatePass){n.mergedAttrs=xl(n.mergedAttrs,n.attrs);let u=n.tView=yw(2,n,r,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),u.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),El(n,!1);let c=i$(t,e,n,i);om()&&Tw(t,e,c,n),Al(c,e);let l=AP(c,e,c,n);e[i+Ft]=l,_w(e,l),k5(l,n,e)}function n$(n,e,t,i,r,o,s,a,c,l,u){let h=t+Ft,f;return e.firstCreatePass?(f=$d(e,h,4,s||null,a||null),Zp()&&NP(e,n,f,Rr(e.consts,l),xw),AM(e,f)):f=e.data[h],WP(f,n,e,t,i,r,o,c),bl(f)&&$m(e,n,f),l!=null&&Ud(n,f,u),f}function GP(n,e,t,i,r,o,s,a,c,l,u){let h=t+Ft,f;if(e.firstCreatePass){if(f=$d(e,h,4,s||null,a||null),l!=null){let y=Rr(e.consts,l);f.localNames=[];for(let b=0;b<y.length;b+=2)f.localNames.push(y[b],-1)}}else f=e.data[h];return WP(f,n,e,t,i,r,o,c),l!=null&&Ud(n,f,u),f}function W(n,e,t,i,r,o,s,a){let c=we(),l=$t(),u=Rr(l.consts,o);return n$(c,l,n,e,t,i,r,u,void 0,s,a),W}var i$=r$;function r$(n,e,t,i){return Md(!0),e[It].createComment("")}var Bw=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var jw=new ae("");function xo(n){return!!n&&typeof n.then=="function"}function Gm(n){return!!n&&typeof n.subscribe=="function"}var Km=new ae("");var Uw=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=q(Km,{optional:!0})??[];injector=q(ft);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let o=on(this.injector,r);if(xo(o))t.push(o);else if(Gm(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ym=new ae("");function KP(){c0(()=>{let n="";throw new te(600,n)})}function YP(n){return n.isBoundToModule}var o$=10;var Ao=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=q(Ln);afterRenderManager=q(Iw);zonelessEnabled=q(Pd);rootEffectScheduler=q(Rd);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ut;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=q(kr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(se(t=>!t))}constructor(){q(Xa,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=q(Gt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,i){return this.bootstrapImpl(t,i)}bootstrapImpl(t,i,r=ft.NULL){return this._injector.get(He).run(()=>{nt(10);let s=t instanceof zm;if(!this._injector.get(Uw).done){let b="";throw new te(405,b)}let c;s?c=t:c=this._injector.get(Hd).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=YP(c)?void 0:this._injector.get(Ka),u=i||c.selector,h=c.create(r,[],u,l),f=h.location.nativeElement,y=h.injector.get(jw,null);return y?.registerApplication(f),h.onDestroy(()=>{this.detachView(h.hostView),Nd(this.components,h),y?.unregisterApplication(f)}),this._loadComponent(h),nt(11,h),h})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){nt(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Bm.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new te(101,!1);let t=Ce(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Ce(t),this.afterTick.next(),nt(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ga,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<o$;)nt(14),this.synchronizeOnce(),nt(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!Ad(r))continue;let o=i&&!this.zonelessEnabled?0:1;SP(r,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Ad(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;Nd(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(t),this._injector.get(Ym,[]).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Nd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new te(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Nd(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Ms(n,e,t,i){let r=we(),o=Cl();if(hr(r,o,e)){let s=$t(),a=rm();M4(a,r,n,e,t,i)}return Ms}var wue=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function mt(n,e,t,i,r,o,s,a){As("NgControlFlow");let c=we(),l=$t(),u=Rr(l.consts,o);return GP(c,l,n,e,t,i,r,u,256,s,a),$w}function $w(n,e,t,i,r,o,s,a){As("NgControlFlow");let c=we(),l=$t(),u=Rr(l.consts,o);return GP(c,l,n,e,t,i,r,u,512,s,a),$w}function gt(n,e){As("NgControlFlow");let t=we(),i=Cl(),r=t[i]!==ti?t[i]:-1,o=r!==-1?bM(t,Ft+r):void 0,s=0;if(hr(t,i,n)){let a=Ce(null);try{if(o!==void 0&&Q4(o,s),n!==-1){let c=Ft+n,l=bM(t,c),u=s$(t[ge],c),h=r5(l,u,t),f=_P(t,u,e,{dehydratedView:h});MP(l,f,s,Gb(u,h))}}finally{Ce(a)}}else if(o!==void 0){let a=Y4(o,s);a!==void 0&&(a[wn]=e)}}function bM(n,e){return n[e]}function s$(n,e){return xd(n,e)}function k(n,e,t){let i=we(),r=Cl();if(hr(i,r,e)){let o=$t(),s=rm();vP(s,i,n,e,i[It],t)}return k}function rw(n,e,t,i,r){Pw(e,n,t,r?"class":"style",i)}function p(n,e,t,i){let r=we(),o=r[ge],s=n+Ft,a=o.firstCreatePass?Nw(s,r,2,e,xw,Zp(),t,i):o.data[s];if(Aw(a,r,n,e,QP),bl(a)){let c=r[ge];$m(c,r,a),fw(c,a,r)}return i!=null&&Ud(r,a),p}function m(){let n=$t(),e=sn(),t=Mw(e);return n.firstCreatePass&&Ow(n,t),hb(t)&&fb(),db(),t.classesWithoutHost!=null&&Z3(t)&&rw(n,t,we(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&J3(t)&&rw(n,t,we(),t.stylesWithoutHost,!1),m}function A(n,e,t,i){return p(n,e,t,i),m(),A}function Ol(n,e,t,i){let r=we(),o=r[ge],s=n+Ft,a=o.firstCreatePass?m5(s,o,2,e,t,i):o.data[s];return Aw(a,r,n,e,QP),i!=null&&Ud(r,a),Ol}function Fl(){let n=sn(),e=Mw(n);return hb(e)&&fb(),db(),Fl}var QP=(n,e,t,i,r)=>(Md(!0),iP(e[It],i,WA()));function Ja(n,e,t){let i=we(),r=i[ge],o=n+Ft,s=r.firstCreatePass?Nw(o,i,8,"ng-container",xw,Zp(),e,t):r.data[o];if(Aw(s,i,n,"ng-container",a$),bl(s)){let a=i[ge];$m(a,i,s),fw(a,s,i)}return t!=null&&Ud(i,s),Ja}function ec(){let n=$t(),e=sn(),t=Mw(e);return n.firstCreatePass&&Ow(n,t),ec}var a$=(n,e,t,i,r)=>(Md(!0),HU(e[It],""));function he(){return we()}var cm=void 0;function c$(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var l$=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],cm,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],cm,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",cm,"{1} 'at' {0}",cm],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",c$],Rb={};function _i(n){let e=u$(n),t=wM(e);if(t)return t;let i=e.split("-")[0];if(t=wM(i),t)return t;if(i==="en")return l$;throw new te(701,!1)}function wM(n){return n in Rb||(Rb[n]=bo.ng&&bo.ng.common&&bo.ng.common.locales&&bo.ng.common.locales[n]),Rb[n]}var Ht=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Ht||{});function u$(n){return n.toLowerCase().replace(/_/g,"-")}var qd="en-US";var d$=qd;function XP(n){typeof n=="string"&&(d$=n.toLowerCase().replace(/_/g,"-"))}function H(n,e,t){let i=we(),r=$t(),o=sn();return ZP(r,i,i[It],o,n,e,t),H}function Qm(n,e,t){let i=we(),r=$t(),o=sn();return(o.type&3||t)&&VP(o,r,i,t,i[It],n,e,pm(o,i,e)),Qm}function ZP(n,e,t,i,r,o,s){let a=!0,c=null;if((i.type&3||s)&&(c??=pm(i,e,o),VP(i,n,e,s,t,r,o,c)&&(a=!1)),a){let l=i.outputs?.[r],u=i.hostDirectiveOutputs?.[r];if(u&&u.length)for(let h=0;h<u.length;h+=2){let f=u[h],y=u[h+1];c??=pm(i,e,o),gM(i,e,f,y,r,c)}if(l&&l.length)for(let h of l)c??=pm(i,e,o),gM(i,e,h,r,r,c)}}function L(n=1){return qA(n)}function Xm(n,e,t){U5(n,e,t)}function Wd(n){let e=we(),t=$t(),i=yb();tm(i+1);let r=Vw(t,i);if(n.dirty&&SA(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=z5(e,i);n.reset(o,hU),n.notifyOnChanges()}return!0}return!1}function Gd(){return B5(we(),yb())}function ze(n){let e=OA();return Yp(e,Ft+n)}function lm(n,e){return n<<17|e<<2}function Ya(n){return n>>17&32767}function h$(n){return(n&2)==2}function f$(n,e){return n&131071|e<<17}function ow(n){return n|2}function Rl(n){return(n&131068)>>2}function kb(n,e){return n&-131069|e<<2}function p$(n){return(n&1)===1}function sw(n){return n|1}function m$(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=Ya(s),c=Rl(s);n[i]=t;let l=!1,u;if(Array.isArray(t)){let h=t;u=h[1],(u===null||yl(h,u)>0)&&(l=!0)}else u=t;if(r)if(c!==0){let f=Ya(n[a+1]);n[i+1]=lm(f,a),f!==0&&(n[f+1]=kb(n[f+1],i)),n[a+1]=f$(n[a+1],i)}else n[i+1]=lm(a,0),a!==0&&(n[a+1]=kb(n[a+1],i)),a=i;else n[i+1]=lm(c,0),a===0?a=i:n[c+1]=kb(n[c+1],i),c=i;l&&(n[i+1]=ow(n[i+1])),EM(n,u,i,!0),EM(n,u,i,!1),g$(e,u,n,i,o),s=lm(a,c),o?e.classBindings=s:e.styleBindings=s}function g$(n,e,t,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&yl(o,e)>=0&&(t[i+1]=sw(t[i+1]))}function EM(n,e,t,i){let r=n[t+1],o=e===null,s=i?Ya(r):Rl(r),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];y$(c,e)&&(a=!0,n[s+1]=i?sw(l):ow(l)),s=i?Ya(l):Rl(l)}a&&(n[t+1]=i?ow(r):sw(r))}function y$(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?yl(n,e)>=0:!1}var dr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function v$(n){return n.substring(dr.key,dr.keyEnd)}function _$(n){return b$(n),JP(n,eR(n,0,dr.textEnd))}function JP(n,e){let t=dr.textEnd;return t===e?-1:(e=dr.keyEnd=w$(n,dr.key=e,t),eR(n,e,t))}function b$(n){dr.key=0,dr.keyEnd=0,dr.value=0,dr.valueEnd=0,dr.textEnd=n.length}function eR(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function w$(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Mo(n,e,t){return tR(n,e,t,!1),Mo}function Re(n,e){return tR(n,e,null,!0),Re}function Ps(n){I$(A$,E$,n,!0)}function E$(n,e){for(let t=_$(e);t>=0;t=JP(e,t))Wp(n,v$(e),!0)}function tR(n,e,t,i){let r=we(),o=$t(),s=Jp(2);if(o.firstUpdatePass&&iR(o,n,s,i),e!==ti&&hr(r,s,e)){let a=o.data[Io()];rR(o,a,r,r[It],n,r[s+1]=P$(e,t),i,s)}}function I$(n,e,t,i){let r=$t(),o=Jp(2);r.firstUpdatePass&&iR(r,null,o,i);let s=we();if(t!==ti&&hr(s,o,t)){let a=r.data[Io()];if(oR(a,i)&&!nR(r,o)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=$p(c,t||"")),rw(r,a,s,t,i)}else M$(r,a,s,s[It],s[o+1],s[o+1]=x$(n,e,t),i,o)}}function nR(n,e){return e>=n.expandoStartIndex}function iR(n,e,t,i){let r=n.data;if(r[t+1]===null){let o=r[Io()],s=nR(n,t);oR(o,i)&&e===null&&!s&&(e=!1),e=C$(r,o,e,i),m$(r,o,e,t,s,i)}}function C$(n,e,t,i){let r=UA(n),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=Nb(null,n,e,t,i),t=Vd(t,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==r)if(t=Nb(r,n,e,t,i),o===null){let c=S$(n,e,i);c!==void 0&&Array.isArray(c)&&(c=Nb(null,n,e,c[1],i),c=Vd(c,e.attrs,i),T$(n,e,i,c))}else o=D$(n,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),t}function S$(n,e,t){let i=t?e.classBindings:e.styleBindings;if(Rl(i)!==0)return n[Ya(i)]}function T$(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[Ya(r)]=i}function D$(n,e,t){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;i=Vd(i,s,t)}return Vd(i,e.attrs,t)}function Nb(n,e,t,i,r){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],i=Vd(i,o.hostAttrs,r),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function Vd(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Wp(n,s,t?!0:e[++o]))}return n===void 0?null:n}function x$(n,e,t){if(t==null||t==="")return Zn;let i=[],r=jd(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function A$(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&Wp(n,i,t)}function M$(n,e,t,i,r,o,s,a){r===ti&&(r=Zn);let c=0,l=0,u=0<r.length?r[0]:null,h=0<o.length?o[0]:null;for(;u!==null||h!==null;){let f=c<r.length?r[c+1]:void 0,y=l<o.length?o[l+1]:void 0,b=null,E;u===h?(c+=2,l+=2,f!==y&&(b=h,E=y)):h===null||u!==null&&u<h?(c+=2,b=u):(l+=2,b=h,E=y),b!==null&&rR(n,e,t,i,b,E,s,a),u=c<r.length?r[c]:null,h=l<o.length?o[l]:null}}function rR(n,e,t,i,r,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=p$(l)?IM(c,e,t,r,Rl(l),s):void 0;if(!Rm(u)){Rm(o)||h$(l)&&(o=IM(c,null,t,r,a,s));let h=rb(Io(),t);b4(i,s,h,r,o)}}function IM(n,e,t,i,r,o){let s=e===null,a;for(;r>0;){let c=n[r],l=Array.isArray(c),u=l?c[1]:c,h=u===null,f=t[r+1];f===ti&&(f=h?Zn:void 0);let y=h?Gp(f,i):u===i?f:void 0;if(l&&!Rm(y)&&(y=Gp(c,i)),Rm(y)&&(a=y,s))return a;let b=n[r+1];r=s?Ya(b):Rl(b)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Gp(c,i))}return a}function Rm(n){return n!==void 0}function P$(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=_o(jd(n)))),n}function oR(n,e){return(n.flags&(e?8:16))!==0}function v(n,e=""){let t=we(),i=$t(),r=n+Ft,o=i.firstCreatePass?$d(i,r,1,e,null):i.data[r],s=R$(i,t,o,e,n);t[r]=s,om()&&Tw(i,t,s,o),El(o,!1)}var R$=(n,e,t,i,r)=>(Md(!0),UU(e[It],i));function sR(n,e,t,i=""){return hr(n,Cl(),t)?e+Fa(t)+i:ti}function k$(n,e,t,i,r,o=""){let s=FA(),a=Lw(n,s,t,r);return Jp(2),a?e+Fa(t)+i+Fa(r)+o:ti}function J(n){return ue("",n),J}function ue(n,e,t){let i=we(),r=sR(i,n,e,t);return r!==ti&&aR(i,Io(),r),ue}function En(n,e,t,i,r){let o=we(),s=k$(o,n,e,t,i,r);return s!==ti&&aR(o,Io(),s),En}function aR(n,e,t){let i=rb(e,n);$U(n[It],i,t)}function Ee(n,e,t){Cb(e)&&(e=e());let i=we(),r=Cl();if(hr(i,r,e)){let o=$t(),s=rm();vP(s,i,n,e,i[It],t)}return Ee}function Se(n,e){let t=Cb(n);return t&&n.set(e),t}function Ie(n,e){let t=we(),i=$t(),r=sn();return ZP(i,t,t[It],r,n,e),Ie}function Rs(n,e,t=""){return sR(we(),n,e,t)}function N$(n,e,t){let i=$t();if(i.firstCreatePass){let r=Pr(n);aw(t,i.data,i.blueprint,r,!0),aw(e,i.data,i.blueprint,r,!1)}}function aw(n,e,t,i,r){if(n=_n(n),Array.isArray(n))for(let o=0;o<n.length;o++)aw(n[o],e,t,i,r);else{let o=$t(),s=we(),a=sn(),c=Ra(n)?n:_n(n.provide),l=eb(n),u=a.providerIndexes&1048575,h=a.directiveStart,f=a.providerIndexes>>20;if(Ra(n)||!n.multi){let y=new Wa(l,r,K,null),b=Fb(c,e,r?u:u+f,h);b===-1?(Vb(_m(a,s),o,c),Ob(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[b]=y,s[b]=y)}else{let y=Fb(c,e,u+f,h),b=Fb(c,e,u,u+f),E=y>=0&&t[y],I=b>=0&&t[b];if(r&&!I||!r&&!E){Vb(_m(a,s),o,c);let R=L$(r?F$:O$,t.length,r,i,l,n);!r&&I&&(t[b].providerFactory=R),Ob(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(R),s.push(R)}else{let R=cR(t[r?b:y],l,!r&&i);Ob(o,n,y>-1?y:b,R)}!r&&i&&I&&t[b].componentProviders++}}}function Ob(n,e,t,i){let r=Ra(e),o=bA(e);if(r||o){let c=(o?_n(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[i,c]):l[u+1].push(i,c)}else l.push(t,c)}}}function cR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Fb(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function O$(n,e,t,i,r){return cw(this.multi,[])}function F$(n,e,t,i,r){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Od(i,i[ge],this.providerFactory.index,r);s=c.slice(0,a),cw(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],cw(o,s);return s}function cw(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function L$(n,e,t,i,r,o){let s=new Wa(n,t,K,null);return s.multi=[],s.index=e,s.componentProviders=0,cR(s,r,i&&!t),s}function Bi(n,e=[]){return t=>{t.providersResolver=(i,r)=>N$(i,r?r(n):n,e)}}function Lr(n,e,t){let i=$a()+n,r=we();return r[i]===ti?qm(r,i,t?e.call(t):e()):g5(r,i)}function Ll(n,e,t,i){return lR(we(),$a(),n,e,t,i)}function Zm(n,e,t,i,r){return uR(we(),$a(),n,e,t,i,r)}function Jm(n,e,t,i,r,o){return V$(we(),$a(),n,e,t,i,r,o)}function Hw(n,e){let t=n[e];return t===ti?void 0:t}function lR(n,e,t,i,r,o){let s=e+t;return hr(n,s,r)?qm(n,s+1,o?i.call(o,r):i(r)):Hw(n,s+1)}function uR(n,e,t,i,r,o,s){let a=e+t;return Lw(n,a,r,o)?qm(n,a+2,s?i.call(s,r,o):i(r,o)):Hw(n,a+2)}function V$(n,e,t,i,r,o,s,a){let c=e+t;return y5(n,c,r,o,s)?qm(n,c+3,a?i.call(a,r,o,s):i(r,o,s)):Hw(n,c+3)}function re(n,e){let t=$t(),i,r=n+Ft;t.firstCreatePass?(i=B$(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let o=i.factory||(i.factory=ys(i.type,!0)),s,a=Xn(K);try{let c=vm(!1),l=o();return vm(c),ob(t,we(),r,l),l}finally{Xn(a)}}function B$(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function de(n,e,t){let i=n+Ft,r=we(),o=Yp(r,i);return dR(r,i)?lR(r,$a(),e,o.transform,t,o):o.transform(t)}function In(n,e,t,i){let r=n+Ft,o=we(),s=Yp(o,r);return dR(o,r)?uR(o,$a(),e,s.transform,t,i,s):s.transform(t,i)}function dR(n,e){return n[ge].data[e].pure}function Lt(n,e){return Hm(n,e)}var km=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},zw=(()=>{class n{compileModuleSync(t){return new Pm(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=Q0(t),o=tP(r.declarations).reduce((s,a)=>{let c=bs(a);return c&&s.push(new Pl(c)),s},[]);return new km(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var j$=(()=>{class n{zone=q(He);changeDetectionScheduler=q(sr);applicationRef=q(Ao);applicationErrorHandler=q(Ln);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hR=new ae("",{factory:()=>!1});function qw({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new He(fe(Z({},Gw()),{scheduleInRootZone:t})),[{provide:He,useFactory:n},{provide:wo,multi:!0,useFactory:()=>{let i=q(j$,{optional:!0});return()=>i.initialize()}},{provide:wo,multi:!0,useFactory:()=>{let i=q(U$);return()=>{i.initialize()}}},e===!0?{provide:Sb,useValue:!0}:[],{provide:Tb,useValue:t??lP},{provide:Ln,useFactory:()=>{let i=q(He),r=q(Gt),o;return s=>{i.runOutsideAngular(()=>{r.destroyed&&!o?setTimeout(()=>{throw s}):(o??=r.get(ki),o.handleError(s))})}}}]}function Ww(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,i=qw({ngZoneFactory:()=>{let r=Gw(n);return r.scheduleInRootZone=t,r.shouldCoalesceEventChangeDetection&&As("NgZone_CoalesceEvent"),new He(r)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return bn([{provide:hR,useValue:!0},{provide:Pd,useValue:!1},i])}function Gw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var U$=(()=>{class n{subscription=new Ot;initialized=!1;zone=q(He);pendingTasks=q(kr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{He.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{He.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var fR=(()=>{class n{applicationErrorHandler=q(Ln);appRef=q(Ao);taskService=q(kr);ngZone=q(He);zonelessEnabled=q(Pd);tracing=q(Xa,{optional:!0});disableScheduling=q(Sb,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ot;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Im):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(q(Tb,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Cm||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let i=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?oM:uP;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Im+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(t),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,oM(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $$(){return typeof $localize<"u"&&$localize.locale||qd}var Kd=new ae("",{providedIn:"root",factory:()=>q(Kd,{optional:!0,skipSelf:!0})||$$()});function zt(n){return tA(n)}function ni(n,e){return cp(n,e?.equal)}var Kw=class{[On];constructor(e){this[On]=e}destroy(){this[On].destroy()}};function eg(n,e){let t=e?.injector??q(ft),i=e?.manualCleanup!==!0?t.get(ei):null,r,o=t.get(Sl,null,{optional:!0}),s=t.get(sr);return o!==null?(r=q$(o.view,s,n),i instanceof _d&&i._lView===o.view&&(i=null)):r=W$(n,t.get(Rd),s),r.injector=t,i!==null&&(r.onDestroyFn=i.onDestroy(()=>r.destroy())),new Kw(r)}var pR=fe(Z({},nA),{cleanupFns:void 0,zone:null,onDestroyFn:za,run(){let n=Il(!1);try{iA(this)}finally{Il(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=Ce(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],Ce(n)}}}),H$=fe(Z({},pR),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Ca(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}}),z$=fe(Z({},pR),{consumerMarkedDirty(){this.view[be]|=8192,Ss(this.view),this.notifier.notify(13)},destroy(){Ca(this),this.onDestroyFn(),this.cleanup(),this.view[Eo]?.delete(this)}});function q$(n,e,t){let i=Object.create(z$);return i.view=n,i.zone=typeof Zone<"u"?Zone.current:null,i.notifier=e,i.fn=mR(i,t),n[Eo]??=new Set,n[Eo].add(i),i.consumerMarkedDirty(i),i}function W$(n,e,t){let i=Object.create(H$);return i.fn=mR(i,n),i.scheduler=e,i.notifier=t,i.zone=typeof Zone<"u"?Zone.current:null,i.scheduler.add(i),i.notifier.notify(12),i}function mR(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}var _R=Symbol("InputSignalNode#UNSET"),uH=fe(Z({},lp),{transformFn:void 0,applyValueToInputSignal(n,e){nl(n,e)}});function bR(n,e){let t=Object.create(uH);t.value=n,t.transformFn=e?.transform;function i(){if(Zc(t),t.value===_R){let r=null;throw new te(-950,r)}return t.value}return i[On]=t,i}var ng=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Bd(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},dH=new ae("");dH.__NG_ELEMENT_ID__=n=>{let e=sn();if(e===null)throw new te(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new te(204,!1)};function gR(n,e){return bR(n,e)}function hH(n){return bR(_R,n)}var wR=(gR.required=hH,gR);var Yw=new ae(""),fH=new ae("");function Yd(n){return!n.moduleRef}function pH(n){let e=Yd(n)?n.r3Injector:n.moduleRef.injector,t=e.get(He);return t.run(()=>{Yd(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(Ln),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:i})}),Yd(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Yw);s.add(o),e.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Yw);s.add(o),n.moduleRef.onDestroy(()=>{Nd(n.allPlatformModules,n.moduleRef),r.unsubscribe(),s.delete(o)})}return gH(i,t,()=>{let o=e.get(kr),s=o.add(),a=e.get(Uw);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Kd,qd);if(XP(c||qd),!e.get(fH,!0))return Yd(n)?e.get(Ao):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Yd(n)){let u=e.get(Ao);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return mH?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var mH;function gH(n,e,t){try{let i=t();return xo(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n(i)),i}}var tg=null;function yH(n=[],e){return ft.create({name:e,providers:[{provide:Ed,useValue:"platform"},{provide:Yw,useValue:new Set([()=>tg=null])},...n]})}function vH(n=[]){if(tg)return tg;let e=yH(n);return tg=e,KP(),_H(e),e}function _H(n){let e=n.get(Om,null);on(n,()=>{e?.forEach(t=>t())})}function eE(){return!1}var ks=(()=>{class n{static __NG_ELEMENT_ID__=bH}return n})();function bH(n){return wH(sn(),we(),(n&16)===16)}function wH(n,e,t){if(Cs(n)&&!t){let i=Vi(n.index,e);return new Ds(i,i)}else if(n.type&175){let i=e[Fi];return new Ds(i,e)}return null}var Qw=class{constructor(){}supports(e){return Fw(e)}create(e){return new Xw(e)}},EH=(n,e)=>e,Xw=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||EH}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){let s=!i||t&&t.currentIndex<yR(i,r,o)?t:i,a=yR(s,r,o),c=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(t=t._next,s.previousIndex==null)r++;else{o||(o=[]);let l=a-r,u=c-r;if(l!=u){for(let f=0;f<l;f++){let y=f<o.length?o[f]:o[f]=0,b=y+f;u<=b&&b<l&&(o[f]=y+1)}let h=s.previousIndex;o[h]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Fw(e))throw new te(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),i=!0):(i&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else r=0,FP(e,a=>{s=this._trackByFn(r,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,r),i=!0):(i&&(t=this._verifyReinsertion(t,a,s,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new Zw(t,i),o,r)),e}_verifyReinsertion(e,t,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new ig),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ig),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Zw=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Jw=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},ig=class{map=new Map;put(e){let t=e.trackById,i=this.map.get(t);i||(i=new Jw,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function yR(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function vR(){return new tE([new Qw])}var tE=(()=>{class n{factories;static \u0275prov=ie({token:n,providedIn:"root",factory:vR});constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let i=q(n,{optional:!0,skipSelf:!0});return n.create(t,i||vR())}}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new te(901,!1)}}return n})();function ER(n){let{rootComponent:e,appProviders:t,platformProviders:i,platformRef:r}=n;nt(8);try{let o=r?.injector??vH(i),s=[qw({}),{provide:sr,useExisting:fR},KA,...t||[]],a=new Ld({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return pH({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{nt(9)}}function tc(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var SR=null;function ji(){return SR}function nE(n){SR??=n}var Qd=class{},iE=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ie({token:n,factory:()=>q(TR),providedIn:"platform"})}return n})();var TR=(()=>{class n extends iE{_location;_history;_doc=q(un);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ji().getBaseHref(this._doc)}onPopState(t){let i=ji().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=ji().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ie({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function DR(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function IR(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Ns(n){return n&&n[0]!=="?"?`?${n}`:n}var Vl=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ie({token:n,factory:()=>q(AR),providedIn:"root"})}return n})(),xR=new ae(""),AR=(()=>{class n extends Vl{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??q(un).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return DR(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+Ns(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+Ns(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+Ns(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(le(iE),le(xR,8))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bl=(()=>{class n{_subject=new Ut;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=SH(IR(CR(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Ns(i))}normalize(t){return n.stripTrailingSlash(CH(this._basePath,CR(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ns(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ns(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=Ns;static joinWithSlash=DR;static stripTrailingSlash=IR;static \u0275fac=function(i){return new(i||n)(le(Vl))};static \u0275prov=ie({token:n,factory:()=>IH(),providedIn:"root"})}return n})();function IH(){return new Bl(le(Vl))}function CH(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function CR(n){return n.replace(/\/index.html$/,"")}function SH(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Bn=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(Bn||{}),st=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(st||{}),ci=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(ci||{}),Ro={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function NR(n){return _i(n)[Ht.LocaleId]}function OR(n,e,t){let i=_i(n),r=[i[Ht.DayPeriodsFormat],i[Ht.DayPeriodsStandalone]],o=Ui(r,e);return Ui(o,t)}function FR(n,e,t){let i=_i(n),r=[i[Ht.DaysFormat],i[Ht.DaysStandalone]],o=Ui(r,e);return Ui(o,t)}function LR(n,e,t){let i=_i(n),r=[i[Ht.MonthsFormat],i[Ht.MonthsStandalone]],o=Ui(r,e);return Ui(o,t)}function VR(n,e){let i=_i(n)[Ht.Eras];return Ui(i,e)}function Xd(n,e){let t=_i(n);return Ui(t[Ht.DateFormat],e)}function Zd(n,e){let t=_i(n);return Ui(t[Ht.TimeFormat],e)}function Jd(n,e){let i=_i(n)[Ht.DateTimeFormat];return Ui(i,e)}function eh(n,e){let t=_i(n),i=t[Ht.NumberSymbols][e];if(typeof i>"u"){if(e===Ro.CurrencyDecimal)return t[Ht.NumberSymbols][Ro.Decimal];if(e===Ro.CurrencyGroup)return t[Ht.NumberSymbols][Ro.Group]}return i}function BR(n){if(!n[Ht.ExtraData])throw new te(2303,!1)}function jR(n){let e=_i(n);return BR(e),(e[Ht.ExtraData][2]||[]).map(i=>typeof i=="string"?rE(i):[rE(i[0]),rE(i[1])])}function UR(n,e,t){let i=_i(n);BR(i);let r=[i[Ht.ExtraData][0],i[Ht.ExtraData][1]],o=Ui(r,e)||[];return Ui(o,t)||[]}function Ui(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new te(2304,!1)}function rE(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var TH=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,rg={},DH=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function $R(n,e,t,i){let r=FH(n);e=Po(t,e)||e;let s=[],a;for(;e;)if(a=DH.exec(e),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;e=u}else{s.push(e);break}let c=r.getTimezoneOffset();i&&(c=zR(i,c),r=OH(r,i));let l="";return s.forEach(u=>{let h=kH(u);l+=h?h(r,t,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function lg(n,e,t){let i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function Po(n,e){let t=NR(n);if(rg[t]??={},rg[t][e])return rg[t][e];let i="";switch(e){case"shortDate":i=Xd(n,ci.Short);break;case"mediumDate":i=Xd(n,ci.Medium);break;case"longDate":i=Xd(n,ci.Long);break;case"fullDate":i=Xd(n,ci.Full);break;case"shortTime":i=Zd(n,ci.Short);break;case"mediumTime":i=Zd(n,ci.Medium);break;case"longTime":i=Zd(n,ci.Long);break;case"fullTime":i=Zd(n,ci.Full);break;case"short":let r=Po(n,"shortTime"),o=Po(n,"shortDate");i=og(Jd(n,ci.Short),[r,o]);break;case"medium":let s=Po(n,"mediumTime"),a=Po(n,"mediumDate");i=og(Jd(n,ci.Medium),[s,a]);break;case"long":let c=Po(n,"longTime"),l=Po(n,"longDate");i=og(Jd(n,ci.Long),[c,l]);break;case"full":let u=Po(n,"fullTime"),h=Po(n,"fullDate");i=og(Jd(n,ci.Full),[u,h]);break}return i&&(rg[t][e]=i),i}function og(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return e!=null&&i in e?e[i]:t})),n}function fr(n,e,t="-",i,r){let o="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return i&&(s=s.slice(s.length-e)),o+s}function xH(n,e){return fr(n,3).substring(0,e)}function Yt(n,e,t=0,i=!1,r=!1){return function(o,s){let a=AH(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return xH(a,e);let c=eh(s,Ro.MinusSign);return fr(a,e,c,i,r)}}function AH(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new te(2301,!1)}}function yt(n,e,t=Bn.Format,i=!1){return function(r,o){return MH(r,o,n,e,t,i)}}function MH(n,e,t,i,r,o){switch(t){case 2:return LR(e,r,i)[n.getMonth()];case 1:return FR(e,r,i)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let l=jR(e),u=UR(e,r,i),h=l.findIndex(f=>{if(Array.isArray(f)){let[y,b]=f,E=s>=y.hours&&a>=y.minutes,I=s<b.hours||s===b.hours&&a<b.minutes;if(y.hours<b.hours){if(E&&I)return!0}else if(E||I)return!0}else if(f.hours===s&&f.minutes===a)return!0;return!1});if(h!==-1)return u[h]}return OR(e,r,i)[s<12?0:1];case 3:return VR(e,i)[n.getFullYear()<=0?0:1];default:let c=t;throw new te(2302,!1)}}function sg(n){return function(e,t,i){let r=-1*i,o=eh(t,Ro.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case 0:return(r>=0?"+":"")+fr(s,2,o)+fr(Math.abs(r%60),2,o);case 1:return"GMT"+(r>=0?"+":"")+fr(s,1,o);case 2:return"GMT"+(r>=0?"+":"")+fr(s,2,o)+":"+fr(Math.abs(r%60),2,o);case 3:return i===0?"Z":(r>=0?"+":"")+fr(s,2,o)+":"+fr(Math.abs(r%60),2,o);default:throw new te(2310,!1)}}}var PH=0,cg=4;function RH(n){let e=lg(n,PH,1).getDay();return lg(n,0,1+(e<=cg?cg:cg+7)-e)}function HR(n){let e=n.getDay(),t=e===0?-3:cg-e;return lg(n.getFullYear(),n.getMonth(),n.getDate()+t)}function oE(n,e=!1){return function(t,i){let r;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();r=1+Math.floor((s+o)/7)}else{let o=HR(t),s=RH(o.getFullYear()),a=o.getTime()-s.getTime();r=1+Math.round(a/6048e5)}return fr(r,n,eh(i,Ro.MinusSign))}}function ag(n,e=!1){return function(t,i){let o=HR(t).getFullYear();return fr(o,n,eh(i,Ro.MinusSign),e)}}var sE={};function kH(n){if(sE[n])return sE[n];let e;switch(n){case"G":case"GG":case"GGG":e=yt(3,st.Abbreviated);break;case"GGGG":e=yt(3,st.Wide);break;case"GGGGG":e=yt(3,st.Narrow);break;case"y":e=Yt(0,1,0,!1,!0);break;case"yy":e=Yt(0,2,0,!0,!0);break;case"yyy":e=Yt(0,3,0,!1,!0);break;case"yyyy":e=Yt(0,4,0,!1,!0);break;case"Y":e=ag(1);break;case"YY":e=ag(2,!0);break;case"YYY":e=ag(3);break;case"YYYY":e=ag(4);break;case"M":case"L":e=Yt(1,1,1);break;case"MM":case"LL":e=Yt(1,2,1);break;case"MMM":e=yt(2,st.Abbreviated);break;case"MMMM":e=yt(2,st.Wide);break;case"MMMMM":e=yt(2,st.Narrow);break;case"LLL":e=yt(2,st.Abbreviated,Bn.Standalone);break;case"LLLL":e=yt(2,st.Wide,Bn.Standalone);break;case"LLLLL":e=yt(2,st.Narrow,Bn.Standalone);break;case"w":e=oE(1);break;case"ww":e=oE(2);break;case"W":e=oE(1,!0);break;case"d":e=Yt(2,1);break;case"dd":e=Yt(2,2);break;case"c":case"cc":e=Yt(7,1);break;case"ccc":e=yt(1,st.Abbreviated,Bn.Standalone);break;case"cccc":e=yt(1,st.Wide,Bn.Standalone);break;case"ccccc":e=yt(1,st.Narrow,Bn.Standalone);break;case"cccccc":e=yt(1,st.Short,Bn.Standalone);break;case"E":case"EE":case"EEE":e=yt(1,st.Abbreviated);break;case"EEEE":e=yt(1,st.Wide);break;case"EEEEE":e=yt(1,st.Narrow);break;case"EEEEEE":e=yt(1,st.Short);break;case"a":case"aa":case"aaa":e=yt(0,st.Abbreviated);break;case"aaaa":e=yt(0,st.Wide);break;case"aaaaa":e=yt(0,st.Narrow);break;case"b":case"bb":case"bbb":e=yt(0,st.Abbreviated,Bn.Standalone,!0);break;case"bbbb":e=yt(0,st.Wide,Bn.Standalone,!0);break;case"bbbbb":e=yt(0,st.Narrow,Bn.Standalone,!0);break;case"B":case"BB":case"BBB":e=yt(0,st.Abbreviated,Bn.Format,!0);break;case"BBBB":e=yt(0,st.Wide,Bn.Format,!0);break;case"BBBBB":e=yt(0,st.Narrow,Bn.Format,!0);break;case"h":e=Yt(3,1,-12);break;case"hh":e=Yt(3,2,-12);break;case"H":e=Yt(3,1);break;case"HH":e=Yt(3,2);break;case"m":e=Yt(4,1);break;case"mm":e=Yt(4,2);break;case"s":e=Yt(5,1);break;case"ss":e=Yt(5,2);break;case"S":e=Yt(6,1);break;case"SS":e=Yt(6,2);break;case"SSS":e=Yt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=sg(0);break;case"ZZZZZ":e=sg(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=sg(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=sg(2);break;default:return null}return sE[n]=e,e}function zR(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function NH(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function OH(n,e,t){let r=n.getTimezoneOffset(),o=zR(e,r);return NH(n,-1*(o-r))}function FH(n){if(MR(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,o=1,s=1]=n.split("-").map(a=>+a);return lg(r,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(TH))return LH(i)}let e=new Date(n);if(!MR(e))throw new te(2311,!1);return e}function LH(n){let e=new Date(0),t=0,i=0,r=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-i,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,l),e}function MR(n){return n instanceof Date&&!isNaN(n.valueOf())}var aE=/\s+/,PR=[],nc=(()=>{class n{_ngEl;_renderer;initialClasses=PR;rawClass;stateMap=new Map;constructor(t,i){this._ngEl=t,this._renderer=i}set klass(t){this.initialClasses=t!=null?t.trim().split(aE):PR}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(aE):t}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let i of t)this._updateState(i,!0);else if(t!=null)for(let i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){let r=this.stateMap.get(t);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){t=t.trim(),t.length>0&&t.split(aE).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(K(ai),K(Fr))};static \u0275dir=ot({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var ug=class{$implicit;ngForOf;index;count;constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},jn=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,o,s)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new ug(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(o===null?void 0:o);else if(o!==null){let a=i.get(o);i.move(a,s),RR(a,r)}});for(let r=0,o=i.length;r<o;r++){let a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);RR(o,r)})}static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(K(To),K(xs),K(tE))};static \u0275dir=ot({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function RR(n,e){n.context.$implicit=e.item}var Pt=(()=>{class n{_viewContainer;_context=new dg;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,i){this._viewContainer=t,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){kR(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){kR(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(K(To),K(xs))};static \u0275dir=ot({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),dg=class{$implicit=null;ngIf=null};function kR(n,e){if(n&&!n.createEmbeddedView)throw new te(2020,!1)}function uE(n,e){return new te(2100,!1)}var cE=class{createSubscription(e,t,i){return zt(()=>e.subscribe({next:t,error:i}))}dispose(e){zt(()=>e.unsubscribe())}},lE=class{createSubscription(e,t,i){return e.then(r=>t?.(r),r=>i?.(r)),{unsubscribe:()=>{t=null,i=null}}}dispose(e){e.unsubscribe()}},VH=new lE,BH=new cE,Cn=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=q(Ln);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i),i=>this.applicationErrorHandler(i))}_selectStrategy(t){if(xo(t))return VH;if(Gm(t))return BH;throw uE(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(i){return new(i||n)(K(ks,16))};static \u0275pipe=Za({name:"async",type:n,pure:!1})}return n})();var jH=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,ko=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw uE(n,t);return t.replace(jH,i=>i[0].toUpperCase()+i.slice(1).toLowerCase())}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=Za({name:"titlecase",type:n,pure:!0})}return n})();var UH="mediumDate",qR=new ae(""),WR=new ae(""),ic=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,i,r){this.locale=t,this.defaultTimezone=i,this.defaultOptions=r}transform(t,i,r,o){if(t==null||t===""||t!==t)return null;try{let s=i??this.defaultOptions?.dateFormat??UH,a=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return $R(t,s,o||this.locale,a)}catch(s){throw uE(n,s.message)}}static \u0275fac=function(i){return new(i||n)(K(Kd,16),K(qR,24),K(WR,24))};static \u0275pipe=Za({name:"date",type:n,pure:!0})}return n})();var vt=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Do({type:n});static \u0275inj=Dr({})}return n})();function dE(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,o]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var th=class{};var GR="browser";var nh=class{_doc;constructor(e){this._doc=e}manager},hg=(()=>{class n extends nh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r,o){return t.addEventListener(i,r,o),()=>this.removeEventListener(t,i,r,o)}removeEventListener(t,i,r,o){return t.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||n)(le(un))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),pg=new ae(""),gE=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(s=>{s.manager=this});let r=t.filter(s=>!(s instanceof hg));this._plugins=r.slice().reverse();let o=t.find(s=>s instanceof hg);o&&this._plugins.push(o)}addEventListener(t,i,r,o){return this._findPluginFor(i).addEventListener(t,i,r,o)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new te(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(le(pg),le(He))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),hE="ng-app-id";function KR(n){for(let e of n)e.remove()}function YR(n,e){let t=e.createElement("style");return t.textContent=n,t}function $H(n,e,t,i){let r=n.head?.querySelectorAll(`style[${hE}="${e}"],link[${hE}="${e}"]`);if(r)for(let o of r)o.removeAttribute(hE),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function pE(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var yE=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,$H(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(let r of t)this.addUsage(r,this.inline,YR);i?.forEach(r=>this.addUsage(r,this.external,pE))}removeStyles(t,i){for(let r of t)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,i,r){let o=i.get(t);o?o.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(t,this.doc)))})}removeUsage(t,i){let r=i.get(t);r&&(r.usage--,r.usage<=0&&(KR(r.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])KR(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(t,YR(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(t,pE(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(le(un),le(Nm),le(Fm,8),le(Qa))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),fE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},vE=/%COMP%/g;var XR="%COMP%",HH=`_nghost-${XR}`,zH=`_ngcontent-${XR}`,qH=!0,WH=new ae("",{providedIn:"root",factory:()=>qH});function GH(n){return zH.replace(vE,n)}function KH(n){return HH.replace(vE,n)}function ZR(n,e){return e.map(t=>t.replace(vE,n))}var _E=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,r,o,s,a,c=null,l=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new ih(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(t,i);return r instanceof fg?r.applyToHost(t):r instanceof rh&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer,f=this.tracingService;switch(i.encapsulation){case Co.Emulated:o=new fg(c,l,i,this.appId,u,s,a,h,f);break;case Co.ShadowDom:return new mE(c,l,t,i,s,a,this.nonce,h,f);default:o=new rh(c,l,i,u,s,a,h,f);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(le(gE),le(yE),le(Nm),le(WH),le(un),le(He),le(Fm),le(Xa,8))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),ih=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,r,o){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(fE[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(QR(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(QR(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new te(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let o=fE[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=fE[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Or.DashCase|Or.Important)?e.style.setProperty(t,i,r&Or.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Or.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,r){if(typeof e=="string"&&(e=ji().getGlobalEventTarget(this.doc,e),!e))throw new te(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,r)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function QR(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var mE=class extends ih{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,i,r,o,s,a,c,l){super(e,o,s,c,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=r.styles;u=ZR(r.id,u);for(let f of u){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=f,this.shadowRoot.appendChild(y)}let h=r.getExternalStyles?.();if(h)for(let f of h){let y=pE(f,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},rh=class extends ih{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,r,o,s,a,c,l){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r;let u=i.styles;this.styles=l?ZR(l,u):u,this.styleUrls=i.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Ml.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},fg=class extends rh{contentAttr;hostAttr;constructor(e,t,i,r,o,s,a,c,l){let u=r+"-"+i.id;super(e,t,i,o,s,a,c,l,u),this.contentAttr=GH(u),this.hostAttr=KH(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}};var mg=class n extends Qd{supportsDOMEvents=!0;static makeCurrent(){nE(new n)}onAndCancel(e,t,i,r){return e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=YH();return t==null?null:QH(t)}resetBaseElement(){oh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return dE(document.cookie,e)}},oh=null;function YH(){return oh=oh||document.head.querySelector("base"),oh?oh.getAttribute("href"):null}function QH(n){return new URL(n,document.baseURI).pathname}var XH=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),JR=["alt","control","meta","shift"],ZH={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},JH={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},ek=(()=>{class n extends nh{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r,o){let s=n.parseEventName(i),a=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ji().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),JR.forEach(l=>{let u=i.indexOf(l);u>-1&&(i.splice(u,1),s+=l+".")}),s+=o,i.length!=0||o.length===0)return null;let c={};return c.domEventName=r,c.fullKey=s,c}static matchEventFullKeyCode(t,i){let r=ZH[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),JR.forEach(s=>{if(s!==r){let a=JH[s];a(t)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(le(un))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})();function bE(n,e,t){let i=Z({rootComponent:n,platformRef:t?.platformRef},e6(e));return ER(i)}function e6(n){return{appProviders:[...o6,...n?.providers??[]],platformProviders:r6}}function t6(){mg.makeCurrent()}function n6(){return new ki}function i6(){return dw(document),document}var r6=[{provide:Qa,useValue:GR},{provide:Om,useValue:t6,multi:!0},{provide:un,useFactory:i6}];var o6=[{provide:Ed,useValue:"root"},{provide:ki,useFactory:n6},{provide:pg,useClass:hg,multi:!0,deps:[un]},{provide:pg,useClass:ek,multi:!0,deps:[un]},_E,yE,gE,{provide:Ga,useExisting:_E},{provide:th,useClass:XH},[]];var tk=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(i){return new(i||n)(le(un))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var De="primary",bh=Symbol("RouteTitle"),SE=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function sc(n){return new SE(n)}function lk(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=n[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function a6(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Vr(n[t],e[t]))return!1;return!0}function Vr(n,e){let t=n?TE(n):void 0,i=e?TE(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!uk(n[r],e[r]))return!1;return!0}function TE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function uk(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}else return n===e}function dk(n){return n.length>0?n[n.length-1]:null}function Oo(n){return I0(n)?n:xo(n)?Tt(Promise.resolve(n)):ce(n)}var c6={exact:fk,subset:pk},hk={exact:l6,subset:u6,ignored:()=>!0};function nk(n,e,t){return c6[t.paths](n.root,e.root,t.matrixParams)&&hk[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function l6(n,e){return Vr(n,e)}function fk(n,e,t){if(!rc(n.segments,e.segments)||!vg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!fk(n.children[i],e.children[i],t))return!1;return!0}function u6(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>uk(n[t],e[t]))}function pk(n,e,t){return mk(n,e,e.segments,t)}function mk(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!rc(r,t)||e.hasChildren()||!vg(r,t,i))}else if(n.segments.length===t.length){if(!rc(n.segments,t)||!vg(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!pk(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!rc(n.segments,r)||!vg(n.segments,r,i)||!n.children[De]?!1:mk(n.children[De],e,o,i)}}function vg(n,e,t){return e.every((i,r)=>hk[t](n[r].parameters,i.parameters))}var jr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Xe([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=sc(this.queryParams),this._queryParamMap}toString(){return f6.serialize(this)}},Xe=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _g(this)}},Os=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=sc(this.parameters),this._parameterMap}toString(){return yk(this)}};function d6(n,e){return rc(n,e)&&n.every((t,i)=>Vr(t.parameters,e[i].parameters))}function rc(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function h6(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===De&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==De&&(t=t.concat(e(r,i)))}),t}var wh=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ie({token:n,factory:()=>new ac,providedIn:"root"})}return n})(),ac=class{parse(e){let t=new xE(e);return new jr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${sh(e.root,!0)}`,i=g6(e.queryParams),r=typeof e.fragment=="string"?`#${p6(e.fragment)}`:"";return`${t}${i}${r}`}},f6=new ac;function _g(n){return n.segments.map(e=>yk(e)).join("/")}function sh(n,e){if(!n.hasChildren())return _g(n);if(e){let t=n.children[De]?sh(n.children[De],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==De&&i.push(`${r}:${sh(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=h6(n,(i,r)=>r===De?[sh(n.children[De],!1)]:[`${r}:${sh(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[De]!=null?`${_g(n)}/${t[0]}`:`${_g(n)}/(${t.join("//")})`}}function gk(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gg(n){return gk(n).replace(/%3B/gi,";")}function p6(n){return encodeURI(n)}function DE(n){return gk(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bg(n){return decodeURIComponent(n)}function ik(n){return bg(n.replace(/\+/g,"%20"))}function yk(n){return`${DE(n.path)}${m6(n.parameters)}`}function m6(n){return Object.entries(n).map(([e,t])=>`;${DE(e)}=${DE(t)}`).join("")}function g6(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${gg(t)}=${gg(r)}`).join("&"):`${gg(t)}=${gg(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var y6=/^[^\/()?;#]+/;function wE(n){let e=n.match(y6);return e?e[0]:""}var v6=/^[^\/()?;=#]+/;function _6(n){let e=n.match(v6);return e?e[0]:""}var b6=/^[^=?&#]+/;function w6(n){let e=n.match(b6);return e?e[0]:""}var E6=/^[^&#]+/;function I6(n){let e=n.match(E6);return e?e[0]:""}var xE=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xe([],{}):new Xe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[De]=new Xe(e,t)),i}parseSegment(){let e=wE(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new te(4009,!1);return this.capture(e),new Os(bg(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=_6(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=wE(this.remaining);r&&(i=r,this.capture(i))}e[bg(t)]=bg(i)}parseQueryParam(e){let t=w6(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let s=I6(this.remaining);s&&(i=s,this.capture(i))}let r=ik(t),o=ik(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=wE(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new te(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=De);let s=this.parseChildren();t[o??De]=Object.keys(s).length===1&&s[De]?s[De]:new Xe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new te(4011,!1)}};function vk(n){return n.segments.length>0?new Xe([],{[De]:n}):n}function _k(n){let e={};for(let[i,r]of Object.entries(n.children)){let o=_k(r);if(i===De&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new Xe(n.segments,e);return C6(t)}function C6(n){if(n.numberOfChildren===1&&n.children[De]){let e=n.children[De];return new Xe(n.segments.concat(e.segments),e.children)}return n}function Fs(n){return n instanceof jr}function bk(n,e,t=null,i=null){let r=wk(n);return Ek(r,e,t,i)}function wk(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new Xe(o.url,s);return o===n&&(e=a),a}let i=t(n.root),r=vk(i);return e??r}function Ek(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return EE(r,r,r,t,i);let o=S6(e);if(o.toRoot())return EE(r,r,new Xe([],{}),t,i);let s=T6(o,r,n),a=s.processChildren?ch(s.segmentGroup,s.index,o.commands):Ck(s.segmentGroup,s.index,o.commands);return EE(r,s.segmentGroup,a,t,i)}function wg(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function dh(n){return typeof n=="object"&&n!=null&&n.outlets}function EE(n,e,t,i,r){let o={};i&&Object.entries(i).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;n===e?s=t:s=Ik(n,e,t);let a=vk(_k(s));return new jr(a,o,r)}function Ik(n,e,t){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===e?i[r]=t:i[r]=Ik(o,e,t)}),new Xe(n.segments,i)}var Eg=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&wg(i[0]))throw new te(4003,!1);let r=i.find(dh);if(r&&r!==dk(i))throw new te(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function S6(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Eg(!0,0,n);let e=0,t=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new Eg(t,e,i)}var $l=class{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function T6(n,e,t){if(n.isAbsolute)return new $l(e,!0,0);if(!t)return new $l(e,!1,NaN);if(t.parent===null)return new $l(t,!0,0);let i=wg(n.commands[0])?0:1,r=t.segments.length-1+i;return D6(t,r,n.numberOfDoubleDots)}function D6(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new te(4005,!1);r=i.segments.length}return new $l(i,!1,r-o)}function x6(n){return dh(n[0])?n[0].outlets:{[De]:n}}function Ck(n,e,t){if(n??=new Xe([],{}),n.segments.length===0&&n.hasChildren())return ch(n,e,t);let i=A6(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new Xe(n.segments.slice(0,i.pathIndex),{});return o.children[De]=new Xe(n.segments.slice(i.pathIndex),n.children),ch(o,0,r)}else return i.match&&r.length===0?new Xe(n.segments,{}):i.match&&!n.hasChildren()?AE(n,e,t):i.match?ch(n,0,r):AE(n,e,t)}function ch(n,e,t){if(t.length===0)return new Xe(n.segments,{});{let i=x6(t),r={};if(Object.keys(i).some(o=>o!==De)&&n.children[De]&&n.numberOfChildren===1&&n.children[De].segments.length===0){let o=ch(n.children[De],e,t);return new Xe(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=Ck(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new Xe(n.segments,r)}}function A6(n,e,t){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;let s=n.segments[r],a=t[i];if(dh(a))break;let c=`${a}`,l=i<t.length-1?t[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!ok(c,l,s))return o;i+=2}else{if(!ok(c,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function AE(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let o=t[r];if(dh(o)){let c=M6(o.outlets);return new Xe(i,c)}if(r===0&&wg(t[0])){let c=n.segments[e];i.push(new Os(c.path,rk(t[0]))),r++;continue}let s=dh(o)?o.outlets[De]:`${o}`,a=r<t.length-1?t[r+1]:null;s&&a&&wg(a)?(i.push(new Os(s,rk(a))),r+=2):(i.push(new Os(s,{})),r++)}return new Xe(i,{})}function M6(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=AE(new Xe([],{}),0,i))}),e}function rk(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function ok(n,e,t){return n==t.path&&Vr(e,t.parameters)}var lh="imperative",dn=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(dn||{}),Ei=class{id;url;constructor(e,t){this.id=e,this.url=t}},cc=class extends Ei{type=dn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ur=class extends Ei{urlAfterRedirects;type=dn.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ii=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(ii||{}),hh=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(hh||{}),Br=class extends Ei{reason;code;type=dn.NavigationCancel;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},No=class extends Ei{reason;code;type=dn.NavigationSkipped;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}},zl=class extends Ei{error;target;type=dn.NavigationError;constructor(e,t,i,r){super(e,t),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},fh=class extends Ei{urlAfterRedirects;state;type=dn.RoutesRecognized;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ig=class extends Ei{urlAfterRedirects;state;type=dn.GuardsCheckStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cg=class extends Ei{urlAfterRedirects;state;shouldActivate;type=dn.GuardsCheckEnd;constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Sg=class extends Ei{urlAfterRedirects;state;type=dn.ResolveStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tg=class extends Ei{urlAfterRedirects;state;type=dn.ResolveEnd;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dg=class{route;type=dn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},xg=class{route;type=dn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ag=class{snapshot;type=dn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mg=class{snapshot;type=dn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pg=class{snapshot;type=dn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rg=class{snapshot;type=dn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ph=class{},ql=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function P6(n){return!(n instanceof ph)&&!(n instanceof ql)}function R6(n,e){return n.providers&&!n._injector&&(n._injector=zd(n.providers,e,`Route: ${n.path}`)),n._injector??e}function pr(n){return n.outlet||De}function k6(n,e){let t=n.filter(i=>pr(i)===e);return t.push(...n.filter(i=>pr(i)!==e)),t}function Kl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var kg=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Kl(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Yl(this.rootInjector)}},Yl=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new kg(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||n)(le(Gt))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ng=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=ME(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=ME(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=PE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return PE(e,this._root).map(t=>t.value)}};function ME(n,e){if(n===e.value)return e;for(let t of e.children){let i=ME(n,t);if(i)return i}return null}function PE(n,e){if(n===e.value)return[e];for(let t of e.children){let i=PE(n,t);if(i.length)return i.unshift(e),i}return[]}var wi=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ul(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var mh=class extends Ng{snapshot;constructor(e,t){super(e),this.snapshot=t,BE(this,e)}toString(){return this.snapshot.toString()}};function Sk(n){let e=N6(n),t=new yn([new Os("",{})]),i=new yn({}),r=new yn({}),o=new yn({}),s=new yn(""),a=new Ii(t,i,o,s,r,De,n,e.root);return a.snapshot=e.root,new mh(new wi(a,[]),e)}function N6(n){let e={},t={},i={},o=new oc([],e,i,"",t,De,n,null,{});return new gh("",new wi(o,[]))}var Ii=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,r,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(se(l=>l[bh]))??ce(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(se(e=>sc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(se(e=>sc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Og(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:Z(Z({},e.params),n.params),data:Z(Z({},e.data),n.data),resolve:Z(Z(Z(Z({},n.data),e.data),r?.data),n._resolvedData)}:i={params:Z({},n.params),data:Z({},n.data),resolve:Z(Z({},n.data),n._resolvedData??{})},r&&Dk(r)&&(i.resolve[bh]=r.title),i}var oc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[bh]}constructor(e,t,i,r,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=sc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=sc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},gh=class extends Ng{url;constructor(e,t){super(t),this.url=e,BE(this,t)}toString(){return Tk(this._root)}};function BE(n,e){e.value._routerState=n,e.children.forEach(t=>BE(n,t))}function Tk(n){let e=n.children.length>0?` { ${n.children.map(Tk).join(", ")} } `:"";return`${n.value}${e}`}function IE(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Vr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Vr(e.params,t.params)||n.paramsSubject.next(t.params),a6(e.url,t.url)||n.urlSubject.next(t.url),Vr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function RE(n,e){let t=Vr(n.params,e.params)&&d6(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||RE(n.parent,e.parent))}function Dk(n){return typeof n.title=="string"||n.title===null}var xk=new ae(""),Eh=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=De;activateEvents=new Kt;deactivateEvents=new Kt;attachEvents=new Kt;detachEvents=new Kt;routerOutletData=wR();parentContexts=q(Yl);location=q(To);changeDetector=q(ks);inputBinder=q(Bg,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new te(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new te(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new te(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new te(4013,!1);this._activatedRoute=t;let r=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new kE(t,a,r.injector,this.routerOutletData);this.activated=r.createComponent(s,{index:r.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ot({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[So]})}return n})(),kE=class{route;childContexts;parent;outletData;constructor(e,t,i,r){this.route=e,this.childContexts=t,this.parent=i,this.outletData=r}get(e,t){return e===Ii?this.route:e===Yl?this.childContexts:e===xk?this.outletData:this.parent.get(e,t)}},Bg=new ae("");var jE=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=it({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&A(0,"router-outlet")},dependencies:[Eh],encapsulation:2})}return n})();function UE(n){let e=n.children&&n.children.map(UE),t=e?fe(Z({},n),{children:e}):Z({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==De&&(t.component=jE),t}function O6(n,e,t){let i=yh(n,e._root,t?t._root:void 0);return new mh(i,e)}function yh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=F6(n,e,t);return new wi(i,r)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>yh(n,a)),s}}let i=L6(e.value),r=e.children.map(o=>yh(n,o));return new wi(i,r)}}function F6(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return yh(n,i,r);return yh(n,i)})}function L6(n){return new Ii(new yn(n.url),new yn(n.params),new yn(n.queryParams),new yn(n.fragment),new yn(n.data),n.outlet,n.component,n)}var Wl=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Ak="ngNavigationCancelingError";function Fg(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Fs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Mk(!1,ii.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function Mk(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Ak]=!0,t.cancellationCode=e,t}function V6(n){return Pk(n)&&Fs(n.url)}function Pk(n){return!!n&&n[Ak]}var B6=(n,e,t,i)=>se(r=>(new NE(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),NE=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),IE(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=Ul(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Ul(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Ul(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=Ul(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Rg(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Mg(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(IE(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),IE(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,i)}},Lg=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Hl=class{component;route;constructor(e,t){this.component=e,this.route=t}};function j6(n,e,t){let i=n._root,r=e?e._root:null;return ah(i,r,t,[i.value])}function U6(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ql(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!B0(n)?n:e.get(n):i}function ah(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ul(e);return n.children.forEach(s=>{$6(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>uh(a,t.getContext(s),r)),r}function $6(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=H6(s,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new Lg(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ah(n,e,a?a.children:null,i,r):ah(n,e,t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Hl(a.outlet.component,s))}else s&&uh(e,a,r),r.canActivateChecks.push(new Lg(i)),o.component?ah(n,null,a?a.children:null,i,r):ah(n,null,t,i,r);return r}function H6(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!rc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!rc(n.url,e.url)||!Vr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!RE(n,e)||!Vr(n.queryParams,e.queryParams);case"paramsChange":default:return!RE(n,e)}}function uh(n,e,t){let i=Ul(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?e?uh(s,e.children.getContext(o),t):uh(s,null,t):uh(s,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Hl(e.outlet.component,r)):t.canDeactivateChecks.push(new Hl(null,r)):t.canDeactivateChecks.push(new Hl(null,r))}function Ih(n){return typeof n=="function"}function z6(n){return typeof n=="boolean"}function q6(n){return n&&Ih(n.canLoad)}function W6(n){return n&&Ih(n.canActivate)}function G6(n){return n&&Ih(n.canActivateChild)}function K6(n){return n&&Ih(n.canDeactivate)}function Y6(n){return n&&Ih(n.canMatch)}function Rk(n){return n instanceof or||n?.name==="EmptyError"}var yg=Symbol("INITIAL_VALUE");function Gl(){return Ke(n=>kp(n.map(e=>e.pipe(Qe(1),Fp(yg)))).pipe(se(e=>{for(let t of e)if(t!==!0){if(t===yg)return yg;if(t===!1||Q6(t))return t}return!0}),gi(e=>e!==yg),Qe(1)))}function Q6(n){return Fs(n)||n instanceof Wl}function X6(n,e){return rn(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ce(fe(Z({},t),{guardsResult:!0})):Z6(s,i,r,n).pipe(rn(a=>a&&z6(a)?J6(i,o,n,e):ce(a)),se(a=>fe(Z({},t),{guardsResult:a})))})}function Z6(n,e,t,i){return Tt(n).pipe(rn(r=>r8(r.component,r.route,t,e,i)),yo(r=>r!==!0,!0))}function J6(n,e,t,i){return Tt(e).pipe(pl(r=>fl(t8(r.route.parent,i),e8(r.route,i),i8(n,r.path,t),n8(n,r.route,t))),yo(r=>r!==!0,!0))}function e8(n,e){return n!==null&&e&&e(new Pg(n)),ce(!0)}function t8(n,e){return n!==null&&e&&e(new Ag(n)),ce(!0)}function n8(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return ce(!0);let r=i.map(o=>pd(()=>{let s=Kl(e)??t,a=Ql(o,s),c=W6(a)?a.canActivate(e,n):on(s,()=>a(e,n));return Oo(c).pipe(yo())}));return ce(r).pipe(Gl())}function i8(n,e,t){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>U6(s)).filter(s=>s!==null).map(s=>pd(()=>{let a=s.guards.map(c=>{let l=Kl(s.node)??t,u=Ql(c,l),h=G6(u)?u.canActivateChild(i,n):on(l,()=>u(i,n));return Oo(h).pipe(yo())});return ce(a).pipe(Gl())}));return ce(o).pipe(Gl())}function r8(n,e,t,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ce(!0);let s=o.map(a=>{let c=Kl(e)??r,l=Ql(a,c),u=K6(l)?l.canDeactivate(n,e,t,i):on(c,()=>l(n,e,t,i));return Oo(u).pipe(yo())});return ce(s).pipe(Gl())}function o8(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return ce(!0);let o=r.map(s=>{let a=Ql(s,n),c=q6(a)?a.canLoad(e,t):on(n,()=>a(e,t));return Oo(c)});return ce(o).pipe(Gl(),kk(i))}function kk(n){return pp(cn(e=>{if(typeof e!="boolean")throw Fg(n,e)}),se(e=>e===!0))}function s8(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return ce(!0);let o=r.map(s=>{let a=Ql(s,n),c=Y6(a)?a.canMatch(e,t):on(n,()=>a(e,t));return Oo(c)});return ce(o).pipe(Gl(),kk(i))}var vh=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},_h=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function jl(n){return hl(new vh(n))}function a8(n){return hl(new te(4e3,!1))}function c8(n){return hl(Mk(!1,ii.GuardRejected))}var OE=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return ce(i);if(r.numberOfChildren>1||!r.children[De])return a8(`${e.redirectTo}`);r=r.children[De]}}applyRedirectCommands(e,t,i,r,o){return l8(t,r,o).pipe(se(s=>{if(s instanceof jr)throw new _h(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,i);if(s[0]==="/")throw new _h(a);return a}))}applyRedirectCreateUrlTree(e,t,i,r){let o=this.createSegmentGroup(e,t.root,i,r);return new jr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=t[a]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){let o=this.createSegments(e,t.segments,i,r),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,i,r)}),new Xe(o,s)}createSegments(e,t,i,r){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new te(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}};function l8(n,e,t){if(typeof n=="string")return ce(n);let i=n,{queryParams:r,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:u,title:h}=e;return Oo(on(t,()=>i({params:l,data:u,queryParams:r,fragment:o,routeConfig:s,url:a,outlet:c,title:h})))}var FE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function u8(n,e,t,i,r){let o=Nk(n,e,t);return o.matched?(i=R6(e,i),s8(i,e,t,r).pipe(se(s=>s===!0?o:Z({},FE)))):ce(o)}function Nk(n,e,t){if(e.path==="**")return d8(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?Z({},FE):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||lk)(t,n,e);if(!r)return Z({},FE);let o={};Object.entries(r.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=r.consumed.length>0?Z(Z({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function d8(n){return{matched:!0,parameters:n.length>0?dk(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function sk(n,e,t,i){return t.length>0&&p8(n,t,i)?{segmentGroup:new Xe(e,f8(i,new Xe(t,n.children))),slicedSegments:[]}:t.length===0&&m8(n,t,i)?{segmentGroup:new Xe(n.segments,h8(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Xe(n.segments,n.children),slicedSegments:t}}function h8(n,e,t,i){let r={};for(let o of t)if(jg(n,e,o)&&!i[pr(o)]){let s=new Xe([],{});r[pr(o)]=s}return Z(Z({},i),r)}function f8(n,e){let t={};t[De]=e;for(let i of n)if(i.path===""&&pr(i)!==De){let r=new Xe([],{});t[pr(i)]=r}return t}function p8(n,e,t){return t.some(i=>jg(n,e,i)&&pr(i)!==De)}function m8(n,e,t){return t.some(i=>jg(n,e,i))}function jg(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function g8(n,e,t){return e.length===0&&!n.children[t]}var LE=class{};function y8(n,e,t,i,r,o,s="emptyOnly"){return new VE(n,e,t,i,r,s,o).recognize()}var v8=31,VE=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,r,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new OE(this.urlSerializer,this.urlTree)}noMatchError(e){return new te(4002,`'${e.segmentGroup}'`)}recognize(){let e=sk(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(se(({children:t,rootSnapshot:i})=>{let r=new wi(i,t),o=new gh("",r),s=bk(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new oc([],Object.freeze({}),Object.freeze(Z({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),De,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,De,t).pipe(se(i=>({children:i,rootSnapshot:t})),ms(i=>{if(i instanceof _h)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof vh?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,o):this.processSegment(e,t,i,i.segments,r,!0,o).pipe(se(s=>s instanceof wi?[s]:[]))}processChildren(e,t,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return Tt(o).pipe(pl(s=>{let a=i.children[s],c=k6(t,s);return this.processSegmentGroup(e,c,a,s,r)}),Op((s,a)=>(s.push(...a),s)),gs(null),S0(),rn(s=>{if(s===null)return jl(i);let a=Ok(s);return _8(a),ce(a)}))}processSegment(e,t,i,r,o,s,a){return Tt(t).pipe(pl(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,i,r,o,s,a).pipe(ms(l=>{if(l instanceof vh)return ce(null);throw l}))),yo(c=>!!c),ms(c=>{if(Rk(c))return g8(i,r,o)?ce(new LE):jl(i);throw c}))}processSegmentAgainstRoute(e,t,i,r,o,s,a,c){return pr(i)!==s&&(s===De||!jg(r,o,i))?jl(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,s,c):jl(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:h,remainingSegments:f}=Nk(t,r,o);if(!c)return jl(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>v8&&(this.allowRedirects=!1));let y=new oc(o,l,Object.freeze(Z({},this.urlTree.queryParams)),this.urlTree.fragment,ak(r),pr(r),r.component??r._loadedComponent??null,r,ck(r)),b=Og(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(b.params),y.data=Object.freeze(b.data),this.applyRedirects.applyRedirectCommands(u,r.redirectTo,h,y,e).pipe(Ke(I=>this.applyRedirects.lineralizeSegments(r,I)),rn(I=>this.processSegment(e,i,t,I.concat(f),s,!1,a)))}matchSegmentAgainstRoute(e,t,i,r,o,s){let a=u8(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),a.pipe(Ke(c=>c.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Ke(({routes:l})=>{let u=i._loadedInjector??e,{parameters:h,consumedSegments:f,remainingSegments:y}=c,b=new oc(f,h,Object.freeze(Z({},this.urlTree.queryParams)),this.urlTree.fragment,ak(i),pr(i),i.component??i._loadedComponent??null,i,ck(i)),E=Og(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(E.params),b.data=Object.freeze(E.data);let{segmentGroup:I,slicedSegments:R}=sk(t,f,y,l);if(R.length===0&&I.hasChildren())return this.processChildren(u,l,I,b).pipe(se(B=>new wi(b,B)));if(l.length===0&&R.length===0)return ce(new wi(b,[]));let F=pr(i)===o;return this.processSegment(u,l,I,R,F?De:o,!0,b).pipe(se(B=>new wi(b,B instanceof wi?[B]:[])))}))):jl(t)))}getChildConfig(e,t,i){return t.children?ce({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ce({routes:t._loadedRoutes,injector:t._loadedInjector}):o8(e,t,i,this.urlSerializer).pipe(rn(r=>r?this.configLoader.loadChildren(e,t).pipe(cn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):c8(t))):ce({routes:[],injector:e})}};function _8(n){n.sort((e,t)=>e.value.outlet===De?-1:t.value.outlet===De?1:e.value.outlet.localeCompare(t.value.outlet))}function b8(n){let e=n.value.routeConfig;return e&&e.path===""}function Ok(n){let e=[],t=new Set;for(let i of n){if(!b8(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=Ok(i.children);e.push(new wi(i.value,r))}return e.filter(i=>!t.has(i))}function ak(n){return n.data||{}}function ck(n){return n.resolve||{}}function w8(n,e,t,i,r,o){return rn(s=>y8(n,e,t,i,s.extractedUrl,r,o).pipe(se(({state:a,tree:c})=>fe(Z({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function E8(n,e){return rn(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return ce(t);let o=new Set(r.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of Fk(c))s.add(l);let a=0;return Tt(s).pipe(pl(c=>o.has(c)?I8(c,i,n,e):(c.data=Og(c,c.parent,n).resolve,ce(void 0))),cn(()=>a++),ml(1),rn(c=>a===s.size?ce(t):oi))})}function Fk(n){let e=n.children.map(t=>Fk(t)).flat();return[n,...e]}function I8(n,e,t,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!Dk(r)&&(o[bh]=r.title),pd(()=>(n.data=Og(n,n.parent,t).resolve,C8(o,n,e,i).pipe(se(s=>(n._resolvedData=s,n.data=Z(Z({},n.data),s),null)))))}function C8(n,e,t,i){let r=TE(n);if(r.length===0)return ce({});let o={};return Tt(r).pipe(rn(s=>S8(n[s],e,t,i).pipe(yo(),cn(a=>{if(a instanceof Wl)throw Fg(new ac,a);o[s]=a}))),ml(1),se(()=>o),ms(s=>Rk(s)?oi:hl(s)))}function S8(n,e,t,i){let r=Kl(e)??i,o=Ql(n,r),s=o.resolve?o.resolve(e,t):on(r,()=>o(e,t));return Oo(s)}function CE(n){return Ke(e=>{let t=n(e);return t?Tt(t).pipe(se(()=>e)):ce(e)})}var $E=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===De);return i}getResolvedTitleForRoute(t){return t.data[bh]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ie({token:n,factory:()=>q(Lk),providedIn:"root"})}return n})(),Lk=(()=>{class n extends $E{title;constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(le(tk))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Xl=new ae("",{providedIn:"root",factory:()=>({})}),Ch=new ae(""),Vk=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=q(zw);loadComponent(t,i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return ce(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Oo(on(t,()=>i.loadComponent())).pipe(se(jk),Ke(Uk),cn(s=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=s}),md(()=>{this.componentLoaders.delete(i)})),o=new cl(r,()=>new Ut).pipe(al());return this.componentLoaders.set(i,o),o}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ce({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=Bk(i,this.compiler,t,this.onLoadEndListener).pipe(md(()=>{this.childrenLoaders.delete(i)})),s=new cl(o,()=>new Ut).pipe(al());return this.childrenLoaders.set(i,s),s}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Bk(n,e,t,i){return Oo(on(t,()=>n.loadChildren())).pipe(se(jk),Ke(Uk),rn(r=>r instanceof Wm||Array.isArray(r)?ce(r):Tt(e.compileModuleAsync(r))),se(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(t).injector,s=o.get(Ch,[],{optional:!0,self:!0}).flat()),{routes:s.map(UE),injector:o}}))}function T8(n){return n&&typeof n=="object"&&"default"in n}function jk(n){return T8(n)?n.default:n}function Uk(n){return ce(n)}var Ug=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ie({token:n,factory:()=>q(D8),providedIn:"root"})}return n})(),D8=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$k=new ae("");var Hk=new ae(""),zk=(()=>{class n{currentNavigation=Ct(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Ut;transitionAbortWithErrorSubject=new Ut;configLoader=q(Vk);environmentInjector=q(Gt);destroyRef=q(ei);urlSerializer=q(wh);rootContexts=q(Yl);location=q(Bl);inputBindingEnabled=q(Bg,{optional:!0})!==null;titleStrategy=q($E);options=q(Xl,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=q(Ug);createViewTransition=q($k,{optional:!0});navigationErrorHandler=q(Hk,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ce(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=r=>this.events.next(new Dg(r)),i=r=>this.events.next(new xg(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;zt(()=>{this.transitions?.next(fe(Z({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:i}))})}setupNavigations(t){return this.transitions=new yn(null),this.transitions.pipe(gi(i=>i!==null),Ke(i=>{let r=!1;return ce(i).pipe(Ke(o=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",ii.SupersededByNewNavigation),oi;this.currentTransition=i,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?fe(Z({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new No(o.id,this.urlSerializer.serialize(o.rawUrl),"",hh.IgnoredSameUrlNavigation)),o.resolve(!1),oi;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return ce(o).pipe(Ke(c=>(this.events.next(new cc(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?oi:Promise.resolve(c))),w8(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),cn(c=>{i.targetSnapshot=c.targetSnapshot,i.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(u=>(u.finalUrl=c.urlAfterRedirects,u));let l=new fh(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:l,source:u,restoredState:h,extras:f}=o,y=new cc(c,this.urlSerializer.serialize(l),u,h);this.events.next(y);let b=Sk(this.rootComponentType).snapshot;return this.currentTransition=i=fe(Z({},o),{targetSnapshot:b,urlAfterRedirects:l,extras:fe(Z({},f),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(E=>(E.finalUrl=l,E)),ce(i)}else return this.events.next(new No(o.id,this.urlSerializer.serialize(o.extractedUrl),"",hh.IgnoredByUrlHandlingStrategy)),o.resolve(!1),oi}),cn(o=>{let s=new Ig(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),se(o=>(this.currentTransition=i=fe(Z({},o),{guards:j6(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),i)),X6(this.environmentInjector,o=>this.events.next(o)),cn(o=>{if(i.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Fg(this.urlSerializer,o.guardsResult);let s=new Cg(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),gi(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",ii.GuardRejected),!1)),CE(o=>{if(o.guards.canActivateChecks.length!==0)return ce(o).pipe(cn(s=>{let a=new Sg(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Ke(s=>{let a=!1;return ce(s).pipe(E8(this.paramsInheritanceStrategy,this.environmentInjector),cn({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",ii.NoDataFromResolver)}}))}),cn(s=>{let a=new Tg(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),CE(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent){let l=Kl(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(cn(u=>{a.component=u}),se(()=>{})))}for(let l of a.children)c.push(...s(l));return c};return kp(s(o.targetSnapshot.root)).pipe(gs(null),Qe(1))}),CE(()=>this.afterPreactivation()),Ke(()=>{let{currentSnapshot:o,targetSnapshot:s}=i,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Tt(a).pipe(se(()=>i)):ce(i)}),se(o=>{let s=O6(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=i=fe(Z({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),i}),cn(()=>{this.events.next(new ph)}),B6(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Qe(1),Lp(new ye(o=>{let s=i.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(gi(()=>!r&&!i.targetRouterState),cn(()=>{this.cancelNavigationTransition(i,i.abortController.signal.reason+"",ii.Aborted)}))),cn({next:o=>{r=!0,this.lastSuccessfulNavigation=zt(this.currentNavigation),this.events.next(new Ur(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),Lp(this.transitionAbortWithErrorSubject.pipe(cn(o=>{throw o}))),md(()=>{r||this.cancelNavigationTransition(i,"",ii.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),ms(o=>{if(this.destroyed)return i.resolve(!1),oi;if(r=!0,Pk(o))this.events.next(new Br(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode)),V6(o)?this.events.next(new ql(o.url,o.navigationBehaviorOptions)):i.resolve(!1);else{let s=new zl(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);try{let a=on(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Wl){let{message:c,cancellationCode:l}=Fg(this.urlSerializer,a);this.events.next(new Br(i.id,this.urlSerializer.serialize(i.extractedUrl),c,l)),this.events.next(new ql(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(a)}}return oi}))}))}cancelNavigationTransition(t,i,r){let o=new Br(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=zt(this.currentNavigation),r=i?.targetBrowserUrl??i?.extractedUrl;return t.toString()!==r?.toString()&&!i?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function x8(n){return n!==lh}var qk=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=ie({token:n,factory:()=>q(A8),providedIn:"root"})}return n})(),Vg=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},A8=(()=>{class n extends Vg{static \u0275fac=(()=>{let t;return function(r){return(t||(t=vi(n)))(r||n)}})();static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wk=(()=>{class n{urlSerializer=q(wh);options=q(Xl,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=q(Bl);urlHandlingStrategy=q(Ug);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new jr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:i,targetBrowserUrl:r}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,i):i,s=r??o;return s instanceof jr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:i,initialUrl:r}){i&&t?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=t):this.rawUrlTree=r}routerState=Sk(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ie({token:n,factory:()=>q(M8),providedIn:"root"})}return n})(),M8=(()=>{class n extends Wk{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{t(i.url,i.state,"popstate")})})}handleRouterEvent(t,i){t instanceof cc?this.updateStateMemento():t instanceof No?this.commitTransition(i):t instanceof fh?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof ph?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof Br&&t.code!==ii.SupersededByNewNavigation&&t.code!==ii.Redirect?this.restoreHistory(i):t instanceof zl?this.restoreHistory(i,!0):t instanceof Ur&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:i,id:r}){let{replaceUrl:o,state:s}=i;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=Z(Z({},s),this.generateNgRouterState(r,a));this.location.replaceState(t,"",c)}else{let a=Z(Z({},s),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=vi(n)))(r||n)}})();static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function HE(n,e){n.events.pipe(gi(t=>t instanceof Ur||t instanceof Br||t instanceof zl||t instanceof No),se(t=>t instanceof Ur||t instanceof No?0:(t instanceof Br?t.code===ii.Redirect||t.code===ii.SupersededByNewNavigation:!1)?2:1),gi(t=>t!==2),Qe(1)).subscribe(()=>{e()})}var P8={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},R8={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},je=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=q(Bw);stateManager=q(Wk);options=q(Xl,{optional:!0})||{};pendingTasks=q(kr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=q(zk);urlSerializer=q(wh);location=q(Bl);urlHandlingStrategy=q(Ug);injector=q(Gt);_events=new Ut;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=q(qk);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=q(Ch,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!q(Bg,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ot;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=zt(this.navigationTransitions.currentNavigation);if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Br&&i.code!==ii.Redirect&&i.code!==ii.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Ur)this.navigated=!0;else if(i instanceof ql){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),c=Z({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||x8(r.source)},s);this.scheduleNavigation(a,lh,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}P6(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortWithErrorSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),lh,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i,r)=>{this.navigateToSyncWithBrowser(t,r,i)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let c=Z({},r);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,i,s,o).catch(c=>{this.disposed||this.injector.get(Ln)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return zt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(UE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=Z(Z({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let h;try{let f=r?r.snapshot:this.routerState.snapshot.root;h=wk(f)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),h=this.currentUrlTree.root}return Ek(h,t,u,l??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=Fs(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,lh,null,i)}navigate(t,i={skipLocationChange:!1}){return k8(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Na(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=Z({},P8):i===!1?r=Z({},R8):r=i,Fs(t))return nk(this.currentUrlTree,t,r);let o=this.parseUrl(t);return nk(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((h,f)=>{a=h,c=f});let u=this.pendingTasks.add();return HE(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function k8(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new te(4008,!1)}var Qt=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ct(null);get href(){return zt(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ut;applicationErrorHandler=q(Ln);options=q(Xl,{optional:!0});constructor(t,i,r,o,s,a){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(q(new ng("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,i=r=>r==="merge"||r==="preserve";t||=i(this.queryParamsHandling),t||=!this.queryParamsHandling&&!i(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(r=>{r instanceof Ur&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Fs(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||i||r||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,t,i):r.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Fs(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(K(je),K(Ii),Bd("tabindex"),K(Fr),K(ai),K(Vl))};static \u0275dir=ot({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(i,r){i&1&&H("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),i&2&&Ms("href",r.reactiveHref(),mw)("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",tc],skipLocationChange:[2,"skipLocationChange","skipLocationChange",tc],replaceUrl:[2,"replaceUrl","replaceUrl",tc],routerLink:"routerLink"},features:[So]})}return n})();var O8=new ae("");function zE(n,...e){return bn([{provide:Ch,multi:!0,useValue:n},[],{provide:Ii,useFactory:F8,deps:[je]},{provide:Ym,multi:!0,useFactory:L8},e.map(t=>t.\u0275providers)])}function F8(n){return n.routerState.root}function L8(){let n=q(ft);return e=>{let t=n.get(Ao);if(e!==t.components[0])return;let i=n.get(je),r=n.get(V8);n.get(B8)===1&&i.initialNavigation(),n.get(j8,null,{optional:!0})?.setUpPreloading(),n.get(O8,null,{optional:!0})?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var V8=new ae("",{factory:()=>new Ut}),B8=new ae("",{providedIn:"root",factory:()=>1});var j8=new ae("");var tN=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(K(Fr),K(ai))};static \u0275dir=ot({type:n})}return n})(),Ph=(()=>{class n extends tN{static \u0275fac=(()=>{let t;return function(r){return(t||(t=vi(n)))(r||n)}})();static \u0275dir=ot({type:n,features:[Vn]})}return n})(),tu=new ae(""),U8={provide:tu,useExisting:Jn(()=>KE),multi:!0},KE=(()=>{class n extends Ph{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(r){return(t||(t=vi(n)))(r||n)}})();static \u0275dir=ot({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&H("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Bi([U8]),Vn]})}return n})(),$8={provide:tu,useExisting:Jn(()=>Un),multi:!0};function H8(){let n=ji()?ji().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var z8=new ae(""),Un=(()=>{class n extends tN{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!H8())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(K(Fr),K(ai),K(z8,8))};static \u0275dir=ot({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&H("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},standalone:!1,features:[Bi([$8]),Vn]})}return n})();function nN(n){return n==null||iN(n)===0}function iN(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Rh=new ae(""),rN=new ae("");function q8(n){return nN(n.value)?{required:!0}:null}function W8(n){return e=>{let t=e.value?.length??iN(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function G8(n){if(!n)return qE;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(nN(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function qE(n){return null}function oN(n){return n!=null}function sN(n){return xo(n)?Tt(n):n}function aN(n){let e={};return n.forEach(t=>{e=t!=null?Z(Z({},e),t):e}),Object.keys(e).length===0?null:e}function cN(n,e){return e.map(t=>t(n))}function K8(n){return!n.validate}function lN(n){return n.map(e=>K8(e)?e:t=>e.validate(t))}function Y8(n){if(!n)return null;let e=n.filter(oN);return e.length==0?null:function(t){return aN(cN(t,e))}}function YE(n){return n!=null?Y8(lN(n)):null}function Q8(n){if(!n)return null;let e=n.filter(oN);return e.length==0?null:function(t){let i=cN(t,e).map(sN);return C0(i).pipe(se(aN))}}function QE(n){return n!=null?Q8(lN(n)):null}function Gk(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function X8(n){return n._rawValidators}function Z8(n){return n._rawAsyncValidators}function WE(n){return n?Array.isArray(n)?n:[n]:[]}function Hg(n,e){return Array.isArray(n)?n.includes(e):n===e}function Kk(n,e){let t=WE(e);return WE(n).forEach(r=>{Hg(t,r)||t.push(r)}),t}function Yk(n,e){return WE(e).filter(t=>!Hg(n,t))}var zg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=YE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=QE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},eu=class extends zg{name;get formDirective(){return null}get path(){return null}},Mh=class extends zg{_parent=null;name=null;valueAccessor=null},qg=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},J8={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},A_e=fe(Z({},J8),{"[class.ng-submitted]":"isSubmitted"}),$n=(()=>{class n extends qg{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(K(Mh,2))};static \u0275dir=ot({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Re("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[Vn]})}return n})(),zi=(()=>{class n extends qg{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(K(eu,10))};static \u0275dir=ot({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&Re("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[Vn]})}return n})();var Sh="VALID",$g="INVALID",Zl="PENDING",Th="DISABLED",Ls=class{},Wg=class extends Ls{value;source;constructor(e,t){super(),this.value=e,this.source=t}},xh=class extends Ls{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Ah=class extends Ls{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Jl=class extends Ls{status;source;constructor(e,t){super(),this.status=e,this.source=t}},GE=class extends Ls{source;constructor(e){super(),this.source=e}},Gg=class extends Ls{source;constructor(e){super(),this.source=e}};function uN(n){return(Qg(n)?n.validators:n)||null}function e9(n){return Array.isArray(n)?YE(n):n||null}function dN(n,e){return(Qg(e)?e.asyncValidators:n)||null}function t9(n){return Array.isArray(n)?QE(n):n||null}function Qg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function n9(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new te(1e3,"");if(!i[t])throw new te(1001,"")}function i9(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new te(1002,"")})}var Kg=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return zt(this.statusReactive)}set status(e){zt(()=>this.statusReactive.set(e))}_status=ni(()=>this.statusReactive());statusReactive=Ct(void 0);get valid(){return this.status===Sh}get invalid(){return this.status===$g}get pending(){return this.status==Zl}get disabled(){return this.status===Th}get enabled(){return this.status!==Th}errors;get pristine(){return zt(this.pristineReactive)}set pristine(e){zt(()=>this.pristineReactive.set(e))}_pristine=ni(()=>this.pristineReactive());pristineReactive=Ct(!0);get dirty(){return!this.pristine}get touched(){return zt(this.touchedReactive)}set touched(e){zt(()=>this.touchedReactive.set(e))}_touched=ni(()=>this.touchedReactive());touchedReactive=Ct(!1);get untouched(){return!this.touched}_events=new Ut;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Kk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Kk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Yk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Yk(e,this._rawAsyncValidators))}hasValidator(e){return Hg(this._rawValidators,e)}hasAsyncValidator(e){return Hg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(fe(Z({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Ah(!0,i))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Ah(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(fe(Z({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new xh(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new xh(!0,i))}markAsPending(e={}){this.status=Zl;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Jl(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(fe(Z({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Th,this.errors=null,this._forEachChild(r=>{r.disable(fe(Z({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Wg(this.value,i)),this._events.next(new Jl(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(fe(Z({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Sh,this._forEachChild(i=>{i.enable(fe(Z({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(fe(Z({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Sh||this.status===Zl)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Wg(this.value,t)),this._events.next(new Jl(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(fe(Z({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Th:Sh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Zl,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let i=sN(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new Jl(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new Kt,this.statusChanges=new Kt}_calculateStatus(){return this._allControlsDisabled()?Th:this.errors?$g:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Zl)?Zl:this._anyControlsHaveStatus($g)?$g:Sh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new xh(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ah(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Qg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=e9(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=t9(this._rawAsyncValidators)}},Yg=class extends Kg{constructor(e,t,i){super(uN(t),dN(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){i9(this,!0,e),Object.keys(e).forEach(i=>{n9(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Gg(this))}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var XE=new ae("",{providedIn:"root",factory:()=>ZE}),ZE="always";function r9(n,e){return[...e.path,n]}function hN(n,e,t=ZE){fN(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),s9(n,e),c9(n,e),a9(n,e),o9(n,e)}function Qk(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function o9(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function fN(n,e){let t=X8(n);e.validator!==null?n.setValidators(Gk(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=Z8(n);e.asyncValidator!==null?n.setAsyncValidators(Gk(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();Qk(e._rawValidators,r),Qk(e._rawAsyncValidators,r)}function s9(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&pN(n,e)})}function a9(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&pN(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function pN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function c9(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function l9(n,e){n==null,fN(n,e)}function u9(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function d9(n){return Object.getPrototypeOf(n.constructor)===Ph}function h9(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function f9(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===Un?t=o:d9(o)?i=o:r=o}),r||i||t||null}var p9={provide:eu,useExisting:Jn(()=>Ci)},Dh=Promise.resolve(),Ci=(()=>{class n extends eu{callSetDisabledState;get submitted(){return zt(this.submittedReactive)}_submitted=ni(()=>this.submittedReactive());submittedReactive=Ct(!1);_directives=new Set;form;ngSubmit=new Kt;options;constructor(t,i,r){super(),this.callSetDisabledState=r,this.form=new Yg({},YE(t),QE(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Dh.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),hN(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Dh.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Dh.then(()=>{let i=this._findContainer(t.path),r=new Yg({});l9(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Dh.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Dh.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),h9(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new GE(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(i){return new(i||n)(K(Rh,10),K(rN,10),K(XE,8))};static \u0275dir=ot({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&H("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Bi([p9]),Vn]})}return n})();function Xk(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Zk(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var m9=class extends Kg{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(uN(t),dN(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Qg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Zk(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Gg(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Xk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Xk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Zk(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var g9={provide:Mh,useExisting:Jn(()=>Sn)},Jk=Promise.resolve(),Sn=(()=>{class n extends Mh{_changeDetectorRef;callSetDisabledState;control=new m9;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Kt;constructor(t,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=f9(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),u9(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){hN(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Jk.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&tc(i);Jk.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?r9(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(K(eu,9),K(Rh,10),K(rN,10),K(tu,10),K(ks,8),K(XE,8))};static \u0275dir=ot({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Bi([g9]),Vn,So]})}return n})();var qi=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=ot({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),y9={provide:tu,useExisting:Jn(()=>JE),multi:!0},JE=(()=>{class n extends Ph{writeValue(t){let i=t??"";this.setProperty("value",i)}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=vi(n)))(r||n)}})();static \u0275dir=ot({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&H("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Bi([y9]),Vn]})}return n})();var v9={provide:tu,useExisting:Jn(()=>Wi),multi:!0};function mN(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function _9(n){return n.split(":")[0]}var Wi=(()=>{class n extends Ph{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=q(Ao).injector;destroyRef=q(ei);cdr=q(ks);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,jm({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let i=this._getOptionId(t),r=mN(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=_9(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=vi(n)))(r||n)}})();static \u0275dir=ot({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&H("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Bi([v9]),Vn]})}return n})(),$r=(()=>{class n{_element;_renderer;_select;id;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(mN(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||n)(K(ai),K(Fr),K(Wi,9))};static \u0275dir=ot({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),b9={provide:tu,useExisting:Jn(()=>gN),multi:!0};function eN(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function w9(n){return n.split(":")[0]}var gN=(()=>{class n extends Ph{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);r.push(l)}}else{let s=i.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);r.push(l)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=w9(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=vi(n)))(r||n)}})();static \u0275dir=ot({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&H("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Bi([b9]),Vn]})}return n})(),Hr=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(eN(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(eN(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(K(ai),K(Fr),K(gN,9))};static \u0275dir=ot({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function E9(n){return typeof n=="number"?n:parseInt(n,10)}var eI=(()=>{class n{_validator=qE;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):qE,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=ot({type:n,features:[So]})}return n})();var I9={provide:Rh,useExisting:Jn(()=>Si),multi:!0};var Si=(()=>{class n extends eI{required;inputName="required";normalizeInput=tc;createValidator=t=>q8;enabled(t){return t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=vi(n)))(r||n)}})();static \u0275dir=ot({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&Ms("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Bi([I9]),Vn]})}return n})();var C9={provide:Rh,useExisting:Jn(()=>tI),multi:!0},tI=(()=>{class n extends eI{minlength;inputName="minlength";normalizeInput=t=>E9(t);createValidator=t=>W8(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=vi(n)))(r||n)}})();static \u0275dir=ot({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Ms("minlength",r._enabled?r.minlength:null)},inputs:{minlength:"minlength"},standalone:!1,features:[Bi([C9]),Vn]})}return n})();var S9={provide:Rh,useExisting:Jn(()=>nI),multi:!0},nI=(()=>{class n extends eI{pattern;inputName="pattern";normalizeInput=t=>t;createValidator=t=>G8(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=vi(n)))(r||n)}})();static \u0275dir=ot({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Ms("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},standalone:!1,features:[Bi([S9]),Vn]})}return n})();var T9=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Do({type:n});static \u0275inj=Dr({})}return n})();var Xt=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:XE,useValue:t.callSetDisabledState??ZE}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Do({type:n});static \u0275inj=Dr({imports:[T9]})}return n})();var D9="firebase",x9="11.10.0";ht(D9,x9,"app");function iI(n,e){let i=!e?.manualCleanup?e?.injector?.get(ei)??q(ei):null,r=A9(e?.equal),o;e?.requireSync?o=Ct({kind:0},{equal:r}):o=Ct({kind:1,value:e?.initialValue},{equal:r});let s,a=n.subscribe({next:c=>o.set({kind:1,value:c}),error:c=>{o.set({kind:2,error:c}),s?.()},complete:()=>{s?.()}});if(e?.requireSync&&o().kind===0)throw new te(601,!1);return s=i?.onDestroy(a.unsubscribe.bind(a)),ni(()=>{let c=o();switch(c.kind){case 1:return c.value;case 2:throw c.error;case 0:throw new te(601,!1)}},{equal:e?.equal})}function A9(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}function yN(n){n===void 0&&(n=q(ft));let e=n.get(Ha);return t=>new ye(i=>{let r=e.add(),o=!1;function s(){o||(r(),o=!0)}let a=t.subscribe({next:c=>{i.next(c),s()},complete:()=>{i.complete(),s()},error:c=>{i.error(c),s()}});return a.add(()=>{i.unsubscribe(),s()}),a})}var Gi=new Ma("ANGULARFIRE2_VERSION");function Fo(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var zr=(n,e)=>{let t=e?[e]:Zf(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(s=>{i.includes(s)||i.push(s)})}),i},nu=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(nu||{}),vN=eE()&&typeof Zone<"u"?nu.WARN:nu.SILENT;var Xg=class{zone;delegate;constructor(e,t=w0){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,o=function(s){r?r.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,i)}},Ki=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=q(He);this.outsideAngular=t.runOutsideAngular(()=>new Xg(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Xg(typeof Zone>"u"?void 0:Zone.current,b0))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_N=!1;function M9(n,e){!_N&&(vN>nu.SILENT||eE())&&(_N=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),vN>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function P9(n){let e=q(He,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function lc(n){let e=q(He,{optional:!0});return e?e.run(()=>n()):n()}var R9=(n,e,t)=>(...i)=>(e&&setTimeout(e,0),on(t,()=>lc(()=>n.apply(void 0,i)))),Le=(n,e,t)=>(t||=e?nu.WARN:nu.VERBOSE,function(){let i,r=arguments,o,s,a;try{o=q(Ki),s=q(Ha),a=q(Gt)}catch{return M9(n,t),n.apply(this,r)}for(let l=0;l<arguments.length;l++)typeof r[l]=="function"&&(e&&(i||=lc(()=>s.add())),r[l]=R9(r[l],i,a));let c=P9(()=>n.apply(this,r));return e?c instanceof ye?c.pipe(ps(o.outsideAngular),fs(o.insideAngular),yN(a)):c instanceof Promise?lc(()=>{let l=s.add();return new Promise((u,h)=>{c.then(f=>on(a,()=>lc(()=>u(f))),f=>on(a,()=>lc(()=>h(f)))).finally(l)})}):typeof c=="function"&&i?function(){return setTimeout(i,0),c.apply(this,arguments)}:lc(()=>c):c instanceof ye?c.pipe(ps(o.outsideAngular),fs(o.insideAngular)):lc(()=>c)});var Ti=class{constructor(e){return e}},mr=class{constructor(){return Zf()}};function k9(n){return n&&n.length===1?n[0]:new Ti(Sr())}var rI=new ae("angularfire2._apps"),N9={provide:Ti,useFactory:k9,deps:[[new Mt,rI]]},O9={provide:mr,deps:[[new Mt,rI]]};function F9(n){return(e,t)=>{let i=t.get(Qa);ht("angularfire",Gi.full,"core"),ht("angularfire",Gi.full,"app"),ht("angular",L0.full,i.toString());let r=e.runOutsideAngular(()=>n(t));return new Ti(r)}}function bN(n,...e){return bn([N9,O9,{provide:rI,useFactory:F9(n),multi:!0,deps:[He,ft,Ki,...e]}])}var wN=Le(Sr,!0);var EN=Le(yx,!0);var V9=new Map,B9={activated:!1,tokenObservers:[]},j9={initialized:!1,enabled:!1};function gr(n){return V9.get(n)||Object.assign({},B9)}function TN(){return j9}var U9="https://content-firebaseappcheck.googleapis.com/v1";var $9="exchangeDebugToken",IN={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},f0e=1440*60*1e3;var aI=class{constructor(e,t,i,r,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return C(this,null,function*(){this.stop();try{this.pending=new t0,this.pending.promise.catch(t=>{}),yield H9(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new t0,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function H9(n){return new Promise(e=>{setTimeout(e,n)})}var z9={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Bs=new Wc("appCheck","AppCheck",z9);function DN(n){if(!gr(n).activated)throw Bs.create("use-before-activation",{appName:n.name})}function xN(i,r){return C(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(y){throw Bs.create("fetch-network-error",{originalErrorMessage:y?.message})}if(c.status!==200)throw Bs.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(y){throw Bs.create("fetch-parse-error",{originalErrorMessage:y?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Bs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let h=Number(u[1])*1e3,f=Date.now();return{token:l.token,expireTimeMillis:f+h,issuedAtTimeMillis:f}})}function AN(n,e){let{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${U9}/projects/${t}/apps/${i}:${$9}?key=${r}`,body:{debug_token:e}}}var q9="firebase-app-check-database",W9=1,cI="firebase-app-check-store";var Zg=null;function G9(){return Zg||(Zg=new Promise((n,e)=>{try{let t=indexedDB.open(q9,W9);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(Bs.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},t.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(cI,{keyPath:"compositeKey"})}}}catch(t){e(Bs.create("storage-open",{originalErrorMessage:t?.message}))}}),Zg)}function K9(n,e){return Y9(Q9(n),e)}function Y9(n,e){return C(this,null,function*(){let i=(yield G9()).transaction(cI,"readwrite"),o=i.objectStore(cI).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},i.onerror=c=>{var l;a(Bs.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function Q9(n){return`${n.options.appId}-${n.name}`}var kh=new Yc("@firebase/app-check");function oI(n,e){return n0()?K9(n,e).catch(t=>{kh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function MN(){return TN().enabled}function PN(){return C(this,null,function*(){let n=TN();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var X9={error:"UNKNOWN_ERROR"};function Z9(n){return ox.encodeString(JSON.stringify(n),!1)}function lI(n,e=!1,t=!1){return C(this,null,function*(){let i=n.app;DN(i);let r=gr(i),o=r.token,s;if(o&&!Nh(o)&&(r.token=void 0,o=void 0),!o){let l=yield r.cachedTokenPromise;l&&(Nh(l)?o=l:yield oI(i,void 0))}if(!e&&o&&Nh(o))return{token:o.token};let a=!1;if(MN())try{r.exchangeTokenPromise||(r.exchangeTokenPromise=xN(AN(i,yield PN()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),a=!0);let l=yield r.exchangeTokenPromise;return yield oI(i,l),r.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?kh.warn(l.message):t&&kh.error(l),sI(l)}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),a=!0),o=yield gr(i).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?kh.warn(l.message):t&&kh.error(l),s=l}let c;return o?s?Nh(o)?c={token:o.token,internalError:s}:c=sI(s):(c={token:o.token},r.token=o,yield oI(i,o)):c=sI(s),a&&nz(i,c),c})}function J9(n){return C(this,null,function*(){let e=n.app;DN(e);let{provider:t}=gr(e);if(MN()){let i=yield PN(),{token:r}=yield xN(AN(e,i),n.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield t.getToken();return{token:i}}})}function ez(n,e,t,i){let{app:r}=n,o=gr(r),s={next:t,error:i,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Nh(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),CN(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>CN(n))}function RN(n,e){let t=gr(n),i=t.tokenObservers.filter(r=>r.next!==e);i.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function CN(n){let{app:e}=n,t=gr(e),i=t.tokenRefresher;i||(i=tz(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function tz(n){let{app:e}=n;return new aI(()=>C(null,null,function*(){let t=gr(e),i;if(t.token?i=yield lI(n,!0):i=yield lI(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let t=gr(e);if(t.token){let i=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,r=t.token.expireTimeMillis-300*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},IN.RETRIAL_MIN_WAIT,IN.RETRIAL_MAX_WAIT)}function nz(n,e){let t=gr(n).tokenObservers;for(let i of t)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function Nh(n){return n.expireTimeMillis-Date.now()>0}function sI(n){return{token:Z9(X9),error:n}}var uI=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=gr(this.app);for(let t of e)RN(this.app,t.next);return Promise.resolve()}};function iz(n,e){return new uI(n,e)}function rz(n){return{getToken:e=>lI(n,e),getLimitedUseToken:()=>J9(n),addTokenListener:e=>ez(n,"INTERNAL",e),removeTokenListener:e=>RN(n.app,e)}}var oz="@firebase/app-check",sz="0.10.1";var az="app-check",SN="app-check-internal";function cz(){Cr(new Ir(az,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return iz(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(SN).initialize()})),Cr(new Ir(SN,n=>{let e=n.getProvider("app-check").getImmediate();return rz(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ht(oz,sz)}cz();var lz="app-check";var qr=class{constructor(){return zr(lz)}};var uz=["localhost","0.0.0.0","127.0.0.1"],T0e=typeof window<"u"&&uz.includes(window.location.hostname);function KN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var YN=KN,QN=new Wc("auth","Firebase",KN());var ry=new Yc("@firebase/auth");function dz(n,...e){ry.logLevel<=pi.WARN&&ry.warn(`Auth (${us}): ${n}`,...e)}function ey(n,...e){ry.logLevel<=pi.ERROR&&ry.error(`Auth (${us}): ${n}`,...e)}function Gr(n,...e){throw NI(n,...e)}function uc(n,...e){return NI(n,...e)}function XN(n,e,t){let i=Object.assign(Object.assign({},YN()),{[e]:t});return new Wc("auth","Firebase",i).create(e,{appName:n.name})}function Bo(n){return XN(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function NI(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return QN.create(n,...e)}function pe(n,e,...t){if(!n)throw NI(e,...t)}function Lo(n){let e="INTERNAL ASSERTION FAILED: "+n;throw ey(e),new Error(e)}function $s(n,e){n||Lo(e)}function pI(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function hz(){return kN()==="http:"||kN()==="https:"}function kN(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function fz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hz()||dx()||"connection"in navigator)?navigator.onLine:!0}function pz(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var dc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,$s(t>e,"Short delay should be less than long delay!"),this.isMobile=lx()||hx()}get(){return fz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function OI(n,e){$s(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var oy=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Lo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Lo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Lo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var mz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var gz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],yz=new dc(3e4,6e4);function jo(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Kr(o,s,a,c){return C(this,arguments,function*(n,e,t,i,r={}){return ZN(n,r,()=>C(null,null,function*(){let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});let h=ld(Object.assign({key:n.config.apiKey},u)).slice(1),f=yield n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:f},l);return ux()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&go(n.emulatorConfig.host)&&(y.credentials="include"),oy.fetch()(yield JN(n,n.config.apiHost,t,h),y)}))})}function ZN(n,e,t){return C(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},mz),e);try{let r=new mI(n),o=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Jg(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jg(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Jg(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw Jg(n,"user-disabled",s);let u=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw XN(n,u,l);Gr(n,u)}}catch(r){if(r instanceof as)throw r;Gr(n,"network-request-failed",{message:String(r)})}})}function $h(o,s,a,c){return C(this,arguments,function*(n,e,t,i,r={}){let l=yield Kr(n,e,t,i,r);return"mfaPendingCredential"in l&&Gr(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function JN(n,e,t,i){return C(this,null,function*(){let r=`${e}${t}?${i}`,o=n,s=o.config.emulator?OI(n.config,r):`${n.config.apiScheme}://${r}`;return gz.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function vz(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var mI=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(uc(this.auth,"network-request-failed")),yz.get())})}};function Jg(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=uc(n,e,i);return r.customData._tokenResponse=t,r}function NN(n){return n!==void 0&&n.enterprise!==void 0}var gI=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return vz(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function _z(n,e){return C(this,null,function*(){return Kr(n,"GET","/v2/recaptchaConfig",jo(n,e))})}function bz(n,e){return C(this,null,function*(){return Kr(n,"POST","/v1/accounts:delete",e)})}function sy(n,e){return C(this,null,function*(){return Kr(n,"POST","/v1/accounts:lookup",e)})}function Fh(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function FI(n,e=!1){return C(this,null,function*(){let t=rt(n),i=yield t.getIdToken(e),r=LI(i);pe(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let o=typeof r.firebase=="object"?r.firebase:void 0,s=o?.sign_in_provider;return{claims:r,token:i,authTime:Fh(dI(r.auth_time)),issuedAtTime:Fh(dI(r.iat)),expirationTime:Fh(dI(r.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function dI(n){return Number(n)*1e3}function LI(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return ey("JWT malformed, contained fewer than 3 sections"),null;try{let r=sx(t);return r?JSON.parse(r):(ey("Failed to decode base64 JWT payload"),null)}catch(r){return ey("Caught error parsing JWT payload as JSON",r?.toString()),null}}function ON(n){let e=LI(n);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function iu(n,e,t=!1){return C(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof as&&wz(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function wz({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var yI=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>C(this,null,function*(){yield this.iteration()}),t)}iteration(){return C(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Vh=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fh(this.lastLoginAt),this.creationTime=Fh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ay(n){return C(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield iu(n,sy(t,{idToken:i}));pe(r?.users.length,t,"internal-error");let o=r.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?eO(o.providerUserInfo):[],a=Ez(n.providerData,s),c=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,u=c?l:!1,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Vh(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(n,h)})}function VI(n){return C(this,null,function*(){let e=rt(n);yield ay(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Ez(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function eO(n){return n.map(e=>{var{providerId:t}=e,i=E0(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function Iz(n,e){return C(this,null,function*(){let t=yield ZN(n,{},()=>C(null,null,function*(){let i=ld({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,s=yield JN(n,r,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:i};return n.emulatorConfig&&go(n.emulatorConfig.host)&&(c.credentials="include"),oy.fetch()(s,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Cz(n,e){return C(this,null,function*(){return Kr(n,"POST","/v2/accounts:revokeToken",jo(n,e))})}var Lh=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ON(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){pe(e.length!==0,"internal-error");let t=ON(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return C(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return C(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:o}=yield Iz(e,t);this.updateTokensAndExpiration(i,r,Number(o))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:o}=t,s=new n;return i&&(pe(typeof i=="string","internal-error",{appName:e}),s.refreshToken=i),r&&(pe(typeof r=="string","internal-error",{appName:e}),s.accessToken=r),o&&(pe(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Lo("not implemented")}};function js(n,e){pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Us=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,o=E0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Vh(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return C(this,null,function*(){let t=yield iu(this,this.stsTokenManager.getToken(this.auth,e));return pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return FI(this,e)}reload(){return VI(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return C(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield ay(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return C(this,null,function*(){if(kn(this.auth.app))return Promise.reject(Bo(this.auth));let e=yield this.getIdToken();return yield iu(this,bz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,o,s,a,c,l,u;let h=(i=t.displayName)!==null&&i!==void 0?i:void 0,f=(r=t.email)!==null&&r!==void 0?r:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,b=(s=t.photoURL)!==null&&s!==void 0?s:void 0,E=(a=t.tenantId)!==null&&a!==void 0?a:void 0,I=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,R=(l=t.createdAt)!==null&&l!==void 0?l:void 0,F=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:B,emailVerified:z,isAnonymous:$,providerData:U,stsTokenManager:x}=t;pe(B&&x,e,"internal-error");let T=Lh.fromJSON(this.name,x);pe(typeof B=="string",e,"internal-error"),js(h,e.name),js(f,e.name),pe(typeof z=="boolean",e,"internal-error"),pe(typeof $=="boolean",e,"internal-error"),js(y,e.name),js(b,e.name),js(E,e.name),js(I,e.name),js(R,e.name),js(F,e.name);let D=new n({uid:B,auth:e,email:f,emailVerified:z,displayName:h,isAnonymous:$,photoURL:b,phoneNumber:y,tenantId:E,stsTokenManager:T,createdAt:R,lastLoginAt:F});return U&&Array.isArray(U)&&(D.providerData=U.map(P=>Object.assign({},P))),I&&(D._redirectEventId=I),D}static _fromIdTokenResponse(e,t,i=!1){return C(this,null,function*(){let r=new Lh;r.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield ay(o),o})}static _fromGetAccountInfoResponse(e,t,i){return C(this,null,function*(){let r=t.users[0];pe(r.localId!==void 0,"internal-error");let o=r.providerUserInfo!==void 0?eO(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!o?.length,a=new Lh;a.updateFromIdToken(i);let c=new n({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Vh(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var FN=new Map;function Vo(n){$s(n instanceof Function,"Expected a class definition");let e=FN.get(n);return e?($s(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,FN.set(n,e),e)}var Sz=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return C(this,null,function*(){return!0})}_set(t,i){return C(this,null,function*(){this.storage[t]=i})}_get(t){return C(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return C(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),vI=Sz;function ty(n,e,t){return`firebase:${n}:${e}:${t}`}var cy=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:o}=this.auth;this.fullUserKey=ty(this.userKey,r.apiKey,o),this.fullPersistenceKey=ty("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return C(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield sy(this.auth,{idToken:e}).catch(()=>{});return t?Us._fromGetAccountInfoResponse(this.auth,t,e):null}return Us._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return C(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return C(this,null,function*(){if(!t.length)return new n(Vo(vI),e,i);let r=(yield Promise.all(t.map(l=>C(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=r[0]||Vo(vI),s=ty(i,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=yield l._get(s);if(u){let h;if(typeof u=="string"){let f=yield sy(e,{idToken:u}).catch(()=>{});if(!f)break;h=yield Us._fromGetAccountInfoResponse(e,f,u)}else h=Us._fromJSON(e,u);l!==o&&(a=h),o=l;break}}catch{}let c=r.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,i):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>C(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,i))})}};function LN(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rO(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tO(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sO(e))return"Blackberry";if(aO(e))return"Webos";if(nO(e))return"Safari";if((e.includes("chrome/")||iO(e))&&!e.includes("edge/"))return"Chrome";if(oO(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function tO(n=Rn()){return/firefox\//i.test(n)}function nO(n=Rn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iO(n=Rn()){return/crios\//i.test(n)}function rO(n=Rn()){return/iemobile/i.test(n)}function oO(n=Rn()){return/android/i.test(n)}function sO(n=Rn()){return/blackberry/i.test(n)}function aO(n=Rn()){return/webos/i.test(n)}function BI(n=Rn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Tz(n=Rn()){var e;return BI(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Dz(){return fx()&&document.documentMode===10}function cO(n=Rn()){return BI(n)||oO(n)||aO(n)||sO(n)||/windows phone/i.test(n)||rO(n)}function lO(n,e=[]){let t;switch(n){case"Browser":t=LN(Rn());break;case"Worker":t=`${LN(Rn())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${us}/${i}`}var _I=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return C(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function xz(t){return C(this,arguments,function*(n,e={}){return Kr(n,"GET","/v2/passwordPolicy",jo(n,e))})}var Az=6,bI=class{constructor(e){var t,i,r,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:Az,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var wI=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ly(this),this.idTokenSubscription=new ly(this),this.beforeStateQueue=new _I(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=QN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vo(t)),this._initializationPromise=this.queue(()=>C(this,null,function*(){var i,r,o;if(!this._deleted&&(this.persistenceManager=yield cy.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return C(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return C(this,null,function*(){try{let t=yield sy(this,{idToken:e}),i=yield Us._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return C(this,null,function*(){var t;if(kn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=r?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(r=c.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(r)}catch(s){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return C(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return C(this,null,function*(){try{yield ay(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=pz()}_delete(){return C(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return C(this,null,function*(){if(kn(this.app))return Promise.reject(Bo(this));let t=e?rt(e):null;return t&&pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return C(this,null,function*(){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>C(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return C(this,null,function*(){return kn(this.app)?Promise.reject(Bo(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return kn(this.app)?Promise.reject(Bo(this)):this.queue(()=>C(this,null,function*(){yield this.assertedPersistence.setPersistence(Vo(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return C(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return C(this,null,function*(){let e=yield xz(this),t=new bI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return C(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield Cz(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return C(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return C(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Vo(e)||this._popupRedirectResolver;pe(t,this,"argument-error"),this.redirectPersistenceManager=yield cy.create(this,[Vo(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return C(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>C(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return C(this,null,function*(){if(e===this.currentUser)return this.queue(()=>C(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,i,r);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return C(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return C(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return C(this,null,function*(){var e;if(kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&dz(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Hs(n){return rt(n)}var ly=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=gx(t=>this.observer=t)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var yy={loadJS(){return C(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Mz(n){yy=n}function uO(n){return yy.loadJS(n)}function Pz(){return yy.recaptchaEnterpriseScript}function Rz(){return yy.gapiScript}function dO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var EI=class{constructor(){this.enterprise=new II}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},II=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var kz="recaptcha-enterprise",hO="NO_RECAPTCHA",CI=class{constructor(e){this.type=kz,this.auth=Hs(e)}verify(e="verify",t=!1){return C(this,null,function*(){function i(o){return C(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>C(null,null,function*(){_z(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new gI(c);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(c=>{a(c)})}))})}function r(o,s,a){let c=window.grecaptcha;NN(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(hO)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new EI().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{i(this.auth).then(a=>{if(!t&&NN(window.grecaptcha))r(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Pz();c.length!==0&&(c+=a),uO(c).then(()=>{r(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function Oh(n,e,t,i=!1,r=!1){return C(this,null,function*(){let o=new CI(n),s;if(r)s=hO;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return i?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function uy(n,e,t,i,r){return C(this,null,function*(){var o,s;if(r==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Oh(n,e,t,t==="getOobCode");return i(n,a)}else return i(n,e).catch(a=>C(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield Oh(n,e,t,t==="getOobCode");return i(n,c)}else return Promise.reject(a)}));else if(r==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield Oh(n,e,t);return i(n,a).catch(c=>C(null,null,function*(){var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let u=yield Oh(n,e,t,!1,!0);return i(n,u)}return Promise.reject(c)}))}else{let a=yield Oh(n,e,t,!1,!0);return i(n,a)}else return Promise.reject(r+" provider is not supported.")})}function jI(n,e){let t=ls(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),o=t.getOptions();if(cs(o,e??{}))return r;Gr(r,"already-initialized")}return t.initialize({options:e})}function Nz(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Vo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function UI(n,e,t){let i=Hs(n);pe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,o=fO(e),{host:s,port:a}=Oz(e),c=a===null?"":`:${a}`,l={url:`${o}//${s}${c}/`},u=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){pe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),pe(cs(l,i.config.emulator)&&cs(u,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=l,i.emulatorConfig=u,i.settings.appVerificationDisabledForTesting=!0,go(s)?(zc(`${o}//${s}${c}`),qc("Auth",!0)):r||Fz()}function fO(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Oz(n){let e=fO(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let o=r[1];return{host:o,port:VN(i.substr(o.length+1))}}else{let[o,s]=i.split(":");return{host:o,port:VN(s)}}}function VN(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Fz(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Bh=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Lo("not implemented")}_getIdTokenResponse(e){return Lo("not implemented")}_linkToIdToken(e,t){return Lo("not implemented")}_getReauthenticationResolver(e){return Lo("not implemented")}};function Lz(n,e){return C(this,null,function*(){return Kr(n,"POST","/v1/accounts:update",e)})}function Vz(n,e){return C(this,null,function*(){return Kr(n,"POST","/v1/accounts:signUp",e)})}function Bz(n,e){return C(this,null,function*(){return $h(n,"POST","/v1/accounts:signInWithPassword",jo(n,e))})}function jz(n,e){return C(this,null,function*(){return Kr(n,"POST","/v1/accounts:sendOobCode",jo(n,e))})}function Uz(n,e){return C(this,null,function*(){return jz(n,e)})}function $z(n,e){return C(this,null,function*(){return $h(n,"POST","/v1/accounts:signInWithEmailLink",jo(n,e))})}function Hz(n,e){return C(this,null,function*(){return $h(n,"POST","/v1/accounts:signInWithEmailLink",jo(n,e))})}var jh=class n extends Bh{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new n(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return C(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uy(e,t,"signInWithPassword",Bz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return $z(e,{email:this._email,oobCode:this._password});default:Gr(e,"internal-error")}})}_linkToIdToken(e,t){return C(this,null,function*(){switch(this.signInMethod){case"password":let i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uy(e,i,"signUpPassword",Vz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Hz(e,{idToken:t,email:this._email,oobCode:this._password});default:Gr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function hI(n,e){return C(this,null,function*(){return $h(n,"POST","/v1/accounts:signInWithIdp",jo(n,e))})}function zz(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qz(n){let e=Gc(Kc(n)).link,t=e?Gc(Kc(e)).deep_link_id:null,i=Gc(Kc(n)).deep_link_id;return(i?Gc(Kc(i)).link:null)||i||t||e||n}var dy=class n{constructor(e){var t,i,r,o,s,a;let c=Gc(Kc(e)),l=(t=c.apiKey)!==null&&t!==void 0?t:null,u=(i=c.oobCode)!==null&&i!==void 0?i:null,h=zz((r=c.mode)!==null&&r!==void 0?r:null);pe(l&&u&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=u,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=qz(e);try{return new n(t)}catch{return null}}};var vy=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,i){return jh._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){let r=dy.parseLink(i);return pe(r,"argument-error"),jh._fromEmailAndCode(t,r.code,r.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),hy=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var SI=class extends hy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function Wz(n,e){return C(this,null,function*(){return $h(n,"POST","/v1/accounts:signUp",jo(n,e))})}var ru=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return C(this,null,function*(){let o=yield Us._fromIdTokenResponse(e,i,r),s=BN(i);return new n({user:o,providerId:s,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return C(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=BN(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function BN(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var TI=class n extends as{constructor(e,t,i,r){var o;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function pO(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?TI._fromErrorAndOperation(n,o,e,i):o})}function Gz(n,e,t=!1){return C(this,null,function*(){let i=yield iu(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return ru._forOperation(n,"link",i)})}function mO(n,e,t=!1){return C(this,null,function*(){let{auth:i}=n;if(kn(i.app))return Promise.reject(Bo(i));let r="reauthenticate";try{let o=yield iu(n,pO(i,r,e,n),t);pe(o.idToken,i,"internal-error");let s=LI(o.idToken);pe(s,i,"internal-error");let{sub:a}=s;return pe(n.uid===a,i,"user-mismatch"),ru._forOperation(n,r,o)}catch(o){throw o?.code==="auth/user-not-found"&&Gr(i,"user-mismatch"),o}})}function gO(n,e,t=!1){return C(this,null,function*(){if(kn(n.app))return Promise.reject(Bo(n));let i="signIn",r=yield pO(n,i,e),o=yield ru._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(o.user)),o})}function $I(n,e){return C(this,null,function*(){return gO(Hs(n),e)})}function HI(n,e){return C(this,null,function*(){return mO(rt(n),e)})}function Kz(n,e,t){var i;pe(((i=t.url)===null||i===void 0?void 0:i.length)>0,n,"invalid-continue-uri"),pe(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),pe(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(pe(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(pe(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function yO(n){return C(this,null,function*(){let e=Hs(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function zI(n,e,t){return C(this,null,function*(){let i=Hs(n),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Kz(i,r,t),yield uy(i,r,"getOobCode",Uz,"EMAIL_PASSWORD_PROVIDER")})}function qI(n,e,t){return C(this,null,function*(){if(kn(n.app))return Promise.reject(Bo(n));let i=Hs(n),s=yield uy(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Wz,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&yO(n),c}),a=yield ru._fromIdTokenResponse(i,"signIn",s);return yield i._updateCurrentUser(a.user),a})}function WI(n,e,t){return kn(n.app)?Promise.reject(Bo(n)):$I(rt(n),vy.credential(e,t)).catch(i=>C(null,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&yO(n),i}))}function GI(n,e){return Yz(rt(n),null,e)}function Yz(n,e,t){return C(this,null,function*(){let{auth:i}=n,o={idToken:yield n.getIdToken(),returnSecureToken:!0};e&&(o.email=e),t&&(o.password=t);let s=yield iu(n,Lz(i,o));yield n._updateTokensIfNecessary(s,!0)})}function _y(n,e,t,i){return rt(n).onIdTokenChanged(e,t,i)}function KI(n,e,t){return rt(n).beforeAuthStateChanged(e,t)}function by(n,e,t,i){return rt(n).onAuthStateChanged(e,t,i)}function YI(n){return rt(n).signOut()}var fy="__sak";var py=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(fy,"1"),this.storage.removeItem(fy),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Qz=1e3,Xz=10,Zz=(()=>{class n extends py{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cO(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),o=this.localCache[i];r!==o&&t(i,o,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let r=t.key;i?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);Dz()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,Xz):o()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let o of Array.from(r))o(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},Qz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return C(this,null,function*(){yield ss(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return C(this,null,function*(){let i=yield ss(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return C(this,null,function*(){yield ss(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),vO=Zz;var Jz=(()=>{class n extends py{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),QI=Jz;function e7(n){return Promise.all(n.map(e=>C(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var t7=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(o=>o.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return C(this,null,function*(){let i=t,{eventId:r,eventType:o,data:s}=i.data,a=this.handlersMap[o];if(!a?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:o});let c=Array.from(a).map(u=>C(this,null,function*(){return u(i.origin,s)})),l=yield e7(c);i.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:l})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function _O(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var DI=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return C(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=_O("",20);r.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},i);s={messageChannel:r,onMessage(h){let f=h;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(f.data.response);break;default:clearTimeout(u),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Wr(){return window}function n7(n){Wr().location.href=n}function bO(){return typeof Wr().WorkerGlobalScope<"u"&&typeof Wr().importScripts=="function"}function i7(){return C(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function r7(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function o7(){return bO()?self:null}var wO="firebaseLocalStorageDb",s7=1,my="firebaseLocalStorage",EO="fbase_key",hc=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function wy(n,e){return n.transaction([my],e?"readwrite":"readonly").objectStore(my)}function a7(){let n=indexedDB.deleteDatabase(wO);return new hc(n).toPromise()}function xI(){let n=indexedDB.open(wO,s7);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(my,{keyPath:EO})}catch(r){t(r)}}),n.addEventListener("success",()=>C(null,null,function*(){let i=n.result;i.objectStoreNames.contains(my)?e(i):(i.close(),yield a7(),e(yield xI()))}))})}function jN(n,e,t){return C(this,null,function*(){let i=wy(n,!0).put({[EO]:e,value:t});return new hc(i).toPromise()})}function c7(n,e){return C(this,null,function*(){let t=wy(n,!1).get(e),i=yield new hc(t).toPromise();return i===void 0?null:i.value})}function UN(n,e){let t=wy(n,!0).delete(e);return new hc(t).toPromise()}var l7=800,u7=3,d7=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return C(this,null,function*(){return this.db?this.db:(this.db=yield xI(),this.db)})}_withRetries(t){return C(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>u7)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return C(this,null,function*(){return bO()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return C(this,null,function*(){this.receiver=t7._getInstance(o7()),this.receiver._subscribe("keyChanged",(t,i)=>C(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>C(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return C(this,null,function*(){var t,i;if(this.activeServiceWorker=yield i7(),!this.activeServiceWorker)return;this.sender=new DI(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return C(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||r7()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return C(this,null,function*(){try{if(!indexedDB)return!1;let t=yield xI();return yield jN(t,fy,"1"),yield UN(t,fy),!0}catch{}return!1})}_withPendingWrite(t){return C(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return C(this,null,function*(){return this._withPendingWrite(()=>C(this,null,function*(){return yield this._withRetries(r=>jN(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return C(this,null,function*(){let i=yield this._withRetries(r=>c7(r,t));return this.localCache[t]=i,i})}_remove(t){return C(this,null,function*(){return this._withPendingWrite(()=>C(this,null,function*(){return yield this._withRetries(i=>UN(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return C(this,null,function*(){let t=yield this._withRetries(o=>{let s=wy(o,!1).getAll();return new hc(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),i.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),i.push(o));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let o of Array.from(r))o(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>C(this,null,function*(){return this._poll()}),l7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),IO=d7;var N0e=dO("rcb"),O0e=new dc(3e4,6e4);function h7(n,e){return e?Vo(e):(pe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Uh=class extends Bh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hI(e,this._buildIdpRequest())}_linkToIdToken(e,t){return hI(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return hI(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function f7(n){return gO(n.auth,new Uh(n),n.bypassAuthState)}function p7(n){let{auth:e,user:t}=n;return pe(t,e,"internal-error"),mO(t,new Uh(n),n.bypassAuthState)}function m7(n){return C(this,null,function*(){let{auth:e,user:t}=n;return pe(t,e,"internal-error"),Gz(t,new Uh(n),n.bypassAuthState)})}var AI=class{constructor(e,t,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>C(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return C(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return f7;case"linkViaPopup":case"linkViaRedirect":return m7;case"reauthViaPopup":case"reauthViaRedirect":return p7;default:Gr(this.auth,"internal-error")}}resolve(e){$s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var F0e=new dc(2e3,1e4);var g7="pendingRedirect",ny=new Map,MI=class n extends AI{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return C(this,null,function*(){let e=ny.get(this.auth._key());if(!e){try{let i=(yield y7(this.resolver,this.auth))?yield ss(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}ny.set(this.auth._key(),e)}return this.bypassAuthState||ny.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return C(this,null,function*(){if(e.type==="signInViaRedirect")return ss(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,ss(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return C(this,null,function*(){})}cleanUp(){}};function y7(n,e){return C(this,null,function*(){let t=b7(e),i=_7(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function v7(n,e){ny.set(n._key(),e)}function _7(n){return Vo(n._redirectPersistence)}function b7(n){return ty(g7,n.config.apiKey,n.name)}function w7(n,e,t=!1){return C(this,null,function*(){if(kn(n.app))return Promise.reject(Bo(n));let i=Hs(n),r=h7(i,e),s=yield new MI(i,r,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield i._persistUserIfCurrent(s.user),yield i._setRedirectUser(null,e)),s})}var E7=600*1e3,PI=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!I7(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!CO(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(uc(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=E7&&this.cachedEventUids.clear(),this.cachedEventUids.has($N(e))}saveEventToCache(e){this.cachedEventUids.add($N(e)),this.lastProcessedEventTime=Date.now()}};function $N(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function CO({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function I7(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CO(n);default:return!1}}function C7(t){return C(this,arguments,function*(n,e={}){return Kr(n,"GET","/v1/projects",e)})}var S7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,T7=/^https?/;function D7(n){return C(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield C7(n);for(let t of e)try{if(x7(t))return}catch{}Gr(n,"unauthorized-domain")})}function x7(n){let e=pI(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===i}if(!T7.test(t))return!1;if(S7.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var A7=new dc(3e4,6e4);function HN(){let n=Wr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function M7(n){return new Promise((e,t)=>{var i,r,o;function s(){HN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{HN(),t(uc(n,"network-request-failed"))},timeout:A7.get()})}if(!((r=(i=Wr().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=Wr().gapi)===null||o===void 0)&&o.load)s();else{let a=dO("iframefcb");return Wr()[a]=()=>{gapi.load?s():t(uc(n,"network-request-failed"))},uO(`${Rz()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw iy=null,e})}var iy=null;function P7(n){return iy=iy||M7(n),iy}var R7=new dc(5e3,15e3),k7="__/auth/iframe",N7="emulator/auth/iframe",O7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},F7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function L7(n){let e=n.config;pe(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?OI(e,N7):`https://${n.config.authDomain}/${k7}`,i={apiKey:e.apiKey,appName:n.name,v:us},r=F7.get(n.config.apiHost);r&&(i.eid=r);let o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${ld(i).slice(1)}`}function V7(n){return C(this,null,function*(){let e=yield P7(n),t=Wr().gapi;return pe(t,n,"internal-error"),e.open({where:document.body,url:L7(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:O7,dontclear:!0},i=>new Promise((r,o)=>C(null,null,function*(){yield i.restyle({setHideOnLeave:!1});let s=uc(n,"network-request-failed"),a=Wr().setTimeout(()=>{o(s)},R7.get());function c(){Wr().clearTimeout(a),r(i)}i.ping(c).then(c,()=>{o(s)})})))})}var B7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},j7=500,U7=600,$7="_blank",H7="http://localhost",gy=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function z7(n,e,t,i=j7,r=U7){let o=Math.max((window.screen.availHeight-r)/2,0).toString(),s=Math.max((window.screen.availWidth-i)/2,0).toString(),a="",c=Object.assign(Object.assign({},B7),{width:i.toString(),height:r.toString(),top:o,left:s}),l=Rn().toLowerCase();t&&(a=iO(l)?$7:t),tO(l)&&(e=e||H7,c.scrollbars="yes");let u=Object.entries(c).reduce((f,[y,b])=>`${f}${y}=${b},`,"");if(Tz(l)&&a!=="_self")return q7(e||"",a),new gy(null);let h=window.open(e||"",a,u);pe(h,n,"popup-blocked");try{h.focus()}catch{}return new gy(h)}function q7(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var W7="__/auth/handler",G7="emulator/auth/handler",K7=encodeURIComponent("fac");function zN(n,e,t,i,r,o){return C(this,null,function*(){pe(n.config.authDomain,n,"auth-domain-config-required"),pe(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:us,eventId:r};if(e instanceof hy){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",mx(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,h]of Object.entries(o||{}))s[u]=h}if(e instanceof SI){let u=e.getScopes().filter(h=>h!=="");u.length>0&&(s.scopes=u.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield n._getAppCheckToken(),l=c?`#${K7}=${encodeURIComponent(c)}`:"";return`${Y7(n)}?${ld(a).slice(1)}${l}`})}function Y7({config:n}){return n.emulator?OI(n,G7):`https://${n.authDomain}/${W7}`}var fI="webStorageSupport",RI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QI,this._completeRedirectFn=w7,this._overrideRedirectResult=v7}_openPopup(e,t,i,r){return C(this,null,function*(){var o;$s((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield zN(e,t,i,pI(),r);return z7(e,s,_O())})}_openRedirect(e,t,i,r){return C(this,null,function*(){yield this._originValidation(e);let o=yield zN(e,t,i,pI(),r);return n7(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:o}=this.eventManagers[t];return r?Promise.resolve(r):($s(o,"If manager is not set, promise should be"),o)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return C(this,null,function*(){let t=yield V7(e),i=new PI(e);return t.register("authEvent",r=>(pe(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(fI,{type:fI},r=>{var o;let s=(o=r?.[0])===null||o===void 0?void 0:o[fI];s!==void 0&&t(!!s),Gr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=D7(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return cO()||nO()||BI()}},SO=RI;var qN="@firebase/auth",WN="1.10.8";var kI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return C(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Q7(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function X7(n){Cr(new Ir("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=i.options;pe(s&&!s.includes(":"),"invalid-api-key",{appName:i.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lO(n)},l=new wI(i,r,o,c);return Nz(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Cr(new Ir("auth-internal",e=>{let t=Hs(e.getProvider("auth").getImmediate());return(i=>new kI(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ht(qN,WN,Q7(n)),ht(qN,WN,"esm2017")}var Z7=300,J7=e0("authIdTokenMaxAge")||Z7,GN=null,eq=n=>e=>C(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>J7)return;let r=t?.token;GN!==r&&(GN=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function XI(n=Sr()){let e=ls(n,"auth");if(e.isInitialized())return e.getImmediate();let t=jI(n,{popupRedirectResolver:SO,persistence:[IO,vO,QI]}),i=e0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(i,location.origin);if(location.origin===o.origin){let s=eq(o.toString());KI(t,s,()=>s(t.currentUser)),_y(t,a=>s(a))}}let r=ax("auth");return r&&UI(t,`http://${r}`),t}function tq(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Mz({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let o=uc("internal-error");o.customData=r,t(o)},i.type="text/javascript",i.charset="UTF-8",tq().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});X7("Browser");function Ey(n){return new ye(function(e){var t=by(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var DO="auth",Di=class{constructor(e){return e}},Uo=class{constructor(){return zr(DO)}};var ZI=new ae("angularfire2.auth-instances");function Bq(n,e){let t=Fo(DO,n,e);return t&&new Di(t)}function jq(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Di(i)}}var Uq={provide:Uo,deps:[[new Mt,ZI]]},$q={provide:Di,useFactory:Bq,deps:[[new Mt,ZI],Ti]};function xO(n,...e){return ht("angularfire",Gi.full,"auth"),bn([$q,Uq,{provide:ZI,useFactory:jq(n),multi:!0,deps:[He,ft,Ki,mr,[new Mt,qr],...e]}])}var AO=Le(Ey,!0);var MO=Le(qI,!0,2);var PO=Le(XI,!0);var RO=Le(HI,!0,2);var Iy=Le(zI,!0,2);var kO=Le(WI,!0,2);var JI=Le(YI,!0,2);var NO=Le(GI,!0,2);var OO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},FO={};var $o,tC;(function(){var n;function e(x,T){function D(){}D.prototype=T.prototype,x.D=T.prototype,x.prototype=new D,x.prototype.constructor=x,x.C=function(P,N,O){for(var M=Array(arguments.length-2),At=2;At<arguments.length;At++)M[At-2]=arguments[At];return T.prototype[N].apply(P,M)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(x,T,D){D||(D=0);var P=Array(16);if(typeof T=="string")for(var N=0;16>N;++N)P[N]=T.charCodeAt(D++)|T.charCodeAt(D++)<<8|T.charCodeAt(D++)<<16|T.charCodeAt(D++)<<24;else for(N=0;16>N;++N)P[N]=T[D++]|T[D++]<<8|T[D++]<<16|T[D++]<<24;T=x.g[0],D=x.g[1],N=x.g[2];var O=x.g[3],M=T+(O^D&(N^O))+P[0]+3614090360&4294967295;T=D+(M<<7&4294967295|M>>>25),M=O+(N^T&(D^N))+P[1]+3905402710&4294967295,O=T+(M<<12&4294967295|M>>>20),M=N+(D^O&(T^D))+P[2]+606105819&4294967295,N=O+(M<<17&4294967295|M>>>15),M=D+(T^N&(O^T))+P[3]+3250441966&4294967295,D=N+(M<<22&4294967295|M>>>10),M=T+(O^D&(N^O))+P[4]+4118548399&4294967295,T=D+(M<<7&4294967295|M>>>25),M=O+(N^T&(D^N))+P[5]+1200080426&4294967295,O=T+(M<<12&4294967295|M>>>20),M=N+(D^O&(T^D))+P[6]+2821735955&4294967295,N=O+(M<<17&4294967295|M>>>15),M=D+(T^N&(O^T))+P[7]+4249261313&4294967295,D=N+(M<<22&4294967295|M>>>10),M=T+(O^D&(N^O))+P[8]+1770035416&4294967295,T=D+(M<<7&4294967295|M>>>25),M=O+(N^T&(D^N))+P[9]+2336552879&4294967295,O=T+(M<<12&4294967295|M>>>20),M=N+(D^O&(T^D))+P[10]+4294925233&4294967295,N=O+(M<<17&4294967295|M>>>15),M=D+(T^N&(O^T))+P[11]+2304563134&4294967295,D=N+(M<<22&4294967295|M>>>10),M=T+(O^D&(N^O))+P[12]+1804603682&4294967295,T=D+(M<<7&4294967295|M>>>25),M=O+(N^T&(D^N))+P[13]+4254626195&4294967295,O=T+(M<<12&4294967295|M>>>20),M=N+(D^O&(T^D))+P[14]+2792965006&4294967295,N=O+(M<<17&4294967295|M>>>15),M=D+(T^N&(O^T))+P[15]+1236535329&4294967295,D=N+(M<<22&4294967295|M>>>10),M=T+(N^O&(D^N))+P[1]+4129170786&4294967295,T=D+(M<<5&4294967295|M>>>27),M=O+(D^N&(T^D))+P[6]+3225465664&4294967295,O=T+(M<<9&4294967295|M>>>23),M=N+(T^D&(O^T))+P[11]+643717713&4294967295,N=O+(M<<14&4294967295|M>>>18),M=D+(O^T&(N^O))+P[0]+3921069994&4294967295,D=N+(M<<20&4294967295|M>>>12),M=T+(N^O&(D^N))+P[5]+3593408605&4294967295,T=D+(M<<5&4294967295|M>>>27),M=O+(D^N&(T^D))+P[10]+38016083&4294967295,O=T+(M<<9&4294967295|M>>>23),M=N+(T^D&(O^T))+P[15]+3634488961&4294967295,N=O+(M<<14&4294967295|M>>>18),M=D+(O^T&(N^O))+P[4]+3889429448&4294967295,D=N+(M<<20&4294967295|M>>>12),M=T+(N^O&(D^N))+P[9]+568446438&4294967295,T=D+(M<<5&4294967295|M>>>27),M=O+(D^N&(T^D))+P[14]+3275163606&4294967295,O=T+(M<<9&4294967295|M>>>23),M=N+(T^D&(O^T))+P[3]+4107603335&4294967295,N=O+(M<<14&4294967295|M>>>18),M=D+(O^T&(N^O))+P[8]+1163531501&4294967295,D=N+(M<<20&4294967295|M>>>12),M=T+(N^O&(D^N))+P[13]+2850285829&4294967295,T=D+(M<<5&4294967295|M>>>27),M=O+(D^N&(T^D))+P[2]+4243563512&4294967295,O=T+(M<<9&4294967295|M>>>23),M=N+(T^D&(O^T))+P[7]+1735328473&4294967295,N=O+(M<<14&4294967295|M>>>18),M=D+(O^T&(N^O))+P[12]+2368359562&4294967295,D=N+(M<<20&4294967295|M>>>12),M=T+(D^N^O)+P[5]+4294588738&4294967295,T=D+(M<<4&4294967295|M>>>28),M=O+(T^D^N)+P[8]+2272392833&4294967295,O=T+(M<<11&4294967295|M>>>21),M=N+(O^T^D)+P[11]+1839030562&4294967295,N=O+(M<<16&4294967295|M>>>16),M=D+(N^O^T)+P[14]+4259657740&4294967295,D=N+(M<<23&4294967295|M>>>9),M=T+(D^N^O)+P[1]+2763975236&4294967295,T=D+(M<<4&4294967295|M>>>28),M=O+(T^D^N)+P[4]+1272893353&4294967295,O=T+(M<<11&4294967295|M>>>21),M=N+(O^T^D)+P[7]+4139469664&4294967295,N=O+(M<<16&4294967295|M>>>16),M=D+(N^O^T)+P[10]+3200236656&4294967295,D=N+(M<<23&4294967295|M>>>9),M=T+(D^N^O)+P[13]+681279174&4294967295,T=D+(M<<4&4294967295|M>>>28),M=O+(T^D^N)+P[0]+3936430074&4294967295,O=T+(M<<11&4294967295|M>>>21),M=N+(O^T^D)+P[3]+3572445317&4294967295,N=O+(M<<16&4294967295|M>>>16),M=D+(N^O^T)+P[6]+76029189&4294967295,D=N+(M<<23&4294967295|M>>>9),M=T+(D^N^O)+P[9]+3654602809&4294967295,T=D+(M<<4&4294967295|M>>>28),M=O+(T^D^N)+P[12]+3873151461&4294967295,O=T+(M<<11&4294967295|M>>>21),M=N+(O^T^D)+P[15]+530742520&4294967295,N=O+(M<<16&4294967295|M>>>16),M=D+(N^O^T)+P[2]+3299628645&4294967295,D=N+(M<<23&4294967295|M>>>9),M=T+(N^(D|~O))+P[0]+4096336452&4294967295,T=D+(M<<6&4294967295|M>>>26),M=O+(D^(T|~N))+P[7]+1126891415&4294967295,O=T+(M<<10&4294967295|M>>>22),M=N+(T^(O|~D))+P[14]+2878612391&4294967295,N=O+(M<<15&4294967295|M>>>17),M=D+(O^(N|~T))+P[5]+4237533241&4294967295,D=N+(M<<21&4294967295|M>>>11),M=T+(N^(D|~O))+P[12]+1700485571&4294967295,T=D+(M<<6&4294967295|M>>>26),M=O+(D^(T|~N))+P[3]+2399980690&4294967295,O=T+(M<<10&4294967295|M>>>22),M=N+(T^(O|~D))+P[10]+4293915773&4294967295,N=O+(M<<15&4294967295|M>>>17),M=D+(O^(N|~T))+P[1]+2240044497&4294967295,D=N+(M<<21&4294967295|M>>>11),M=T+(N^(D|~O))+P[8]+1873313359&4294967295,T=D+(M<<6&4294967295|M>>>26),M=O+(D^(T|~N))+P[15]+4264355552&4294967295,O=T+(M<<10&4294967295|M>>>22),M=N+(T^(O|~D))+P[6]+2734768916&4294967295,N=O+(M<<15&4294967295|M>>>17),M=D+(O^(N|~T))+P[13]+1309151649&4294967295,D=N+(M<<21&4294967295|M>>>11),M=T+(N^(D|~O))+P[4]+4149444226&4294967295,T=D+(M<<6&4294967295|M>>>26),M=O+(D^(T|~N))+P[11]+3174756917&4294967295,O=T+(M<<10&4294967295|M>>>22),M=N+(T^(O|~D))+P[2]+718787259&4294967295,N=O+(M<<15&4294967295|M>>>17),M=D+(O^(N|~T))+P[9]+3951481745&4294967295,x.g[0]=x.g[0]+T&4294967295,x.g[1]=x.g[1]+(N+(M<<21&4294967295|M>>>11))&4294967295,x.g[2]=x.g[2]+N&4294967295,x.g[3]=x.g[3]+O&4294967295}i.prototype.u=function(x,T){T===void 0&&(T=x.length);for(var D=T-this.blockSize,P=this.B,N=this.h,O=0;O<T;){if(N==0)for(;O<=D;)r(this,x,O),O+=this.blockSize;if(typeof x=="string"){for(;O<T;)if(P[N++]=x.charCodeAt(O++),N==this.blockSize){r(this,P),N=0;break}}else for(;O<T;)if(P[N++]=x[O++],N==this.blockSize){r(this,P),N=0;break}}this.h=N,this.o+=T},i.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var T=1;T<x.length-8;++T)x[T]=0;var D=8*this.o;for(T=x.length-8;T<x.length;++T)x[T]=D&255,D/=256;for(this.u(x),x=Array(16),T=D=0;4>T;++T)for(var P=0;32>P;P+=8)x[D++]=this.g[T]>>>P&255;return x};function o(x,T){var D=a;return Object.prototype.hasOwnProperty.call(D,x)?D[x]:D[x]=T(x)}function s(x,T){this.h=T;for(var D=[],P=!0,N=x.length-1;0<=N;N--){var O=x[N]|0;P&&O==T||(D[N]=O,P=!1)}this.g=D}var a={};function c(x){return-128<=x&&128>x?o(x,function(T){return new s([T|0],0>T?-1:0)}):new s([x|0],0>x?-1:0)}function l(x){if(isNaN(x)||!isFinite(x))return h;if(0>x)return I(l(-x));for(var T=[],D=1,P=0;x>=D;P++)T[P]=x/D|0,D*=4294967296;return new s(T,0)}function u(x,T){if(x.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(x.charAt(0)=="-")return I(u(x.substring(1),T));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=l(Math.pow(T,8)),P=h,N=0;N<x.length;N+=8){var O=Math.min(8,x.length-N),M=parseInt(x.substring(N,N+O),T);8>O?(O=l(Math.pow(T,O)),P=P.j(O).add(l(M))):(P=P.j(D),P=P.add(l(M)))}return P}var h=c(0),f=c(1),y=c(16777216);n=s.prototype,n.m=function(){if(E(this))return-I(this).m();for(var x=0,T=1,D=0;D<this.g.length;D++){var P=this.i(D);x+=(0<=P?P:4294967296+P)*T,T*=4294967296}return x},n.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(b(this))return"0";if(E(this))return"-"+I(this).toString(x);for(var T=l(Math.pow(x,6)),D=this,P="";;){var N=z(D,T).g;D=R(D,N.j(T));var O=((0<D.g.length?D.g[0]:D.h)>>>0).toString(x);if(D=N,b(D))return O+P;for(;6>O.length;)O="0"+O;P=O+P}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function b(x){if(x.h!=0)return!1;for(var T=0;T<x.g.length;T++)if(x.g[T]!=0)return!1;return!0}function E(x){return x.h==-1}n.l=function(x){return x=R(this,x),E(x)?-1:b(x)?0:1};function I(x){for(var T=x.g.length,D=[],P=0;P<T;P++)D[P]=~x.g[P];return new s(D,~x.h).add(f)}n.abs=function(){return E(this)?I(this):this},n.add=function(x){for(var T=Math.max(this.g.length,x.g.length),D=[],P=0,N=0;N<=T;N++){var O=P+(this.i(N)&65535)+(x.i(N)&65535),M=(O>>>16)+(this.i(N)>>>16)+(x.i(N)>>>16);P=M>>>16,O&=65535,M&=65535,D[N]=M<<16|O}return new s(D,D[D.length-1]&-2147483648?-1:0)};function R(x,T){return x.add(I(T))}n.j=function(x){if(b(this)||b(x))return h;if(E(this))return E(x)?I(this).j(I(x)):I(I(this).j(x));if(E(x))return I(this.j(I(x)));if(0>this.l(y)&&0>x.l(y))return l(this.m()*x.m());for(var T=this.g.length+x.g.length,D=[],P=0;P<2*T;P++)D[P]=0;for(P=0;P<this.g.length;P++)for(var N=0;N<x.g.length;N++){var O=this.i(P)>>>16,M=this.i(P)&65535,At=x.i(N)>>>16,Ue=x.i(N)&65535;D[2*P+2*N]+=M*Ue,F(D,2*P+2*N),D[2*P+2*N+1]+=O*Ue,F(D,2*P+2*N+1),D[2*P+2*N+1]+=M*At,F(D,2*P+2*N+1),D[2*P+2*N+2]+=O*At,F(D,2*P+2*N+2)}for(P=0;P<T;P++)D[P]=D[2*P+1]<<16|D[2*P];for(P=T;P<2*T;P++)D[P]=0;return new s(D,0)};function F(x,T){for(;(x[T]&65535)!=x[T];)x[T+1]+=x[T]>>>16,x[T]&=65535,T++}function B(x,T){this.g=x,this.h=T}function z(x,T){if(b(T))throw Error("division by zero");if(b(x))return new B(h,h);if(E(x))return T=z(I(x),T),new B(I(T.g),I(T.h));if(E(T))return T=z(x,I(T)),new B(I(T.g),T.h);if(30<x.g.length){if(E(x)||E(T))throw Error("slowDivide_ only works with positive integers.");for(var D=f,P=T;0>=P.l(x);)D=$(D),P=$(P);var N=U(D,1),O=U(P,1);for(P=U(P,2),D=U(D,2);!b(P);){var M=O.add(P);0>=M.l(x)&&(N=N.add(D),O=M),P=U(P,1),D=U(D,1)}return T=R(x,N.j(T)),new B(N,T)}for(N=h;0<=x.l(T);){for(D=Math.max(1,Math.floor(x.m()/T.m())),P=Math.ceil(Math.log(D)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),O=l(D),M=O.j(T);E(M)||0<M.l(x);)D-=P,O=l(D),M=O.j(T);b(O)&&(O=f),N=N.add(O),x=R(x,M)}return new B(N,x)}n.A=function(x){return z(this,x).h},n.and=function(x){for(var T=Math.max(this.g.length,x.g.length),D=[],P=0;P<T;P++)D[P]=this.i(P)&x.i(P);return new s(D,this.h&x.h)},n.or=function(x){for(var T=Math.max(this.g.length,x.g.length),D=[],P=0;P<T;P++)D[P]=this.i(P)|x.i(P);return new s(D,this.h|x.h)},n.xor=function(x){for(var T=Math.max(this.g.length,x.g.length),D=[],P=0;P<T;P++)D[P]=this.i(P)^x.i(P);return new s(D,this.h^x.h)};function $(x){for(var T=x.g.length+1,D=[],P=0;P<T;P++)D[P]=x.i(P)<<1|x.i(P-1)>>>31;return new s(D,x.h)}function U(x,T){var D=T>>5;T%=32;for(var P=x.g.length-D,N=[],O=0;O<P;O++)N[O]=0<T?x.i(O+D)>>>T|x.i(O+D+1)<<32-T:x.i(O+D);return new s(N,x.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,tC=FO.Md5=i,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=u,$o=FO.Integer=s}).apply(typeof OO<"u"?OO:typeof self<"u"?self:typeof window<"u"?window:{});var Cy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ho={};var nC,Hq,ou,iC,Hh,Sy,rC,oC,sC;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,_){return d==Array.prototype||d==Object.prototype||(d[g]=_.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cy=="object"&&Cy];for(var g=0;g<d.length;++g){var _=d[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function r(d,g){if(g)e:{var _=i;d=d.split(".");for(var S=0;S<d.length-1;S++){var V=d[S];if(!(V in _))break e;_=_[V]}d=d[d.length-1],S=_[d],g=g(S),g!=S&&g!=null&&e(_,d,{configurable:!0,writable:!0,value:g})}}function o(d,g){d instanceof String&&(d+="");var _=0,S=!1,V={next:function(){if(!S&&_<d.length){var j=_++;return{value:g(j,d[j]),done:!1}}return S=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}r("Array.prototype.values",function(d){return d||function(){return o(this,function(g,_){return _})}});var s=s||{},a=this||self;function c(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function l(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function u(d,g,_){return d.call.apply(d.bind,arguments)}function h(d,g,_){if(!d)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,S),d.apply(g,V)}}return function(){return d.apply(g,arguments)}}function f(d,g,_){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,f.apply(null,arguments)}function y(d,g){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),d.apply(this,S)}}function b(d,g){function _(){}_.prototype=g.prototype,d.aa=g.prototype,d.prototype=new _,d.prototype.constructor=d,d.Qb=function(S,V,j){for(var ee=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)ee[ct-2]=arguments[ct];return g.prototype[V].apply(S,ee)}}function E(d){let g=d.length;if(0<g){let _=Array(g);for(let S=0;S<g;S++)_[S]=d[S];return _}return[]}function I(d,g){for(let _=1;_<arguments.length;_++){let S=arguments[_];if(c(S)){let V=d.length||0,j=S.length||0;d.length=V+j;for(let ee=0;ee<j;ee++)d[V+ee]=S[ee]}else d.push(S)}}class R{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function F(d){return/^[\s\xa0]*$/.test(d)}function B(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function z(d){return z[" "](d),d}z[" "]=function(){};var $=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function U(d,g,_){for(let S in d)g.call(_,d[S],S,d)}function x(d,g){for(let _ in d)g.call(void 0,d[_],_,d)}function T(d){let g={};for(let _ in d)g[_]=d[_];return g}let D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(d,g){let _,S;for(let V=1;V<arguments.length;V++){S=arguments[V];for(_ in S)d[_]=S[_];for(let j=0;j<D.length;j++)_=D[j],Object.prototype.hasOwnProperty.call(S,_)&&(d[_]=S[_])}}function N(d){var g=1;d=d.split(":");let _=[];for(;0<g&&d.length;)_.push(d.shift()),g--;return d.length&&_.push(d.join(":")),_}function O(d){a.setTimeout(()=>{throw d},0)}function M(){var d=qt;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class At{constructor(){this.h=this.g=null}add(g,_){let S=Ue.get();S.set(g,_),this.h?this.h.next=S:this.g=S,this.h=S}}var Ue=new R(()=>new dt,d=>d.reset());class dt{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let at,mn=!1,qt=new At,uo=()=>{let d=a.Promise.resolve(void 0);at=()=>{d.then(Bc)}};var Bc=()=>{for(var d;d=M();){try{d.h.call(d.g)}catch(_){O(_)}var g=Ue;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}mn=!1};function Kn(){this.s=this.s,this.C=this.C}Kn.prototype.s=!1,Kn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Kn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function kt(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}kt.prototype.h=function(){this.defaultPrevented=!0};var ho=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let _=()=>{};a.addEventListener("test",_,g),a.removeEventListener("test",_,g)}catch{}return d})();function nr(d,g){if(kt.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var _=this.type=d.type,S=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if($){e:{try{z(g.nodeName);var V=!0;break e}catch{}V=!1}V||(g=null)}}else _=="mouseover"?g=d.fromElement:_=="mouseout"&&(g=d.toElement);this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:fo[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&nr.aa.h.call(this)}}b(nr,kt);var fo={2:"touch",3:"pen",4:"mouse"};nr.prototype.h=function(){nr.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ku="closure_listenable_"+(1e6*Math.random()|0),lj=0;function uj(d,g,_,S,V){this.listener=d,this.proxy=null,this.src=g,this.type=_,this.capture=!!S,this.ha=V,this.key=++lj,this.da=this.fa=!1}function Nf(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Of(d){this.src=d,this.g={},this.h=0}Of.prototype.add=function(d,g,_,S,V){var j=d.toString();d=this.g[j],d||(d=this.g[j]=[],this.h++);var ee=P_(d,g,S,V);return-1<ee?(g=d[ee],_||(g.fa=!1)):(g=new uj(g,this.src,j,!!S,V),g.fa=_,d.push(g)),g};function M_(d,g){var _=g.type;if(_ in d.g){var S=d.g[_],V=Array.prototype.indexOf.call(S,g,void 0),j;(j=0<=V)&&Array.prototype.splice.call(S,V,1),j&&(Nf(g),d.g[_].length==0&&(delete d.g[_],d.h--))}}function P_(d,g,_,S){for(var V=0;V<d.length;++V){var j=d[V];if(!j.da&&j.listener==g&&j.capture==!!_&&j.ha==S)return V}return-1}var R_="closure_lm_"+(1e6*Math.random()|0),k_={};function rD(d,g,_,S,V){if(S&&S.once)return sD(d,g,_,S,V);if(Array.isArray(g)){for(var j=0;j<g.length;j++)rD(d,g[j],_,S,V);return null}return _=L_(_),d&&d[Ku]?d.K(g,_,l(S)?!!S.capture:!!S,V):oD(d,g,_,!1,S,V)}function oD(d,g,_,S,V,j){if(!g)throw Error("Invalid event type");var ee=l(V)?!!V.capture:!!V,ct=O_(d);if(ct||(d[R_]=ct=new Of(d)),_=ct.add(g,_,S,ee,j),_.proxy)return _;if(S=dj(),_.proxy=S,S.src=d,S.listener=_,d.addEventListener)ho||(V=ee),V===void 0&&(V=!1),d.addEventListener(g.toString(),S,V);else if(d.attachEvent)d.attachEvent(cD(g.toString()),S);else if(d.addListener&&d.removeListener)d.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function dj(){function d(_){return g.call(d.src,d.listener,_)}let g=hj;return d}function sD(d,g,_,S,V){if(Array.isArray(g)){for(var j=0;j<g.length;j++)sD(d,g[j],_,S,V);return null}return _=L_(_),d&&d[Ku]?d.L(g,_,l(S)?!!S.capture:!!S,V):oD(d,g,_,!0,S,V)}function aD(d,g,_,S,V){if(Array.isArray(g))for(var j=0;j<g.length;j++)aD(d,g[j],_,S,V);else S=l(S)?!!S.capture:!!S,_=L_(_),d&&d[Ku]?(d=d.i,g=String(g).toString(),g in d.g&&(j=d.g[g],_=P_(j,_,S,V),-1<_&&(Nf(j[_]),Array.prototype.splice.call(j,_,1),j.length==0&&(delete d.g[g],d.h--)))):d&&(d=O_(d))&&(g=d.g[g.toString()],d=-1,g&&(d=P_(g,_,S,V)),(_=-1<d?g[d]:null)&&N_(_))}function N_(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[Ku])M_(g.i,d);else{var _=d.type,S=d.proxy;g.removeEventListener?g.removeEventListener(_,S,d.capture):g.detachEvent?g.detachEvent(cD(_),S):g.addListener&&g.removeListener&&g.removeListener(S),(_=O_(g))?(M_(_,d),_.h==0&&(_.src=null,g[R_]=null)):Nf(d)}}}function cD(d){return d in k_?k_[d]:k_[d]="on"+d}function hj(d,g){if(d.da)d=!0;else{g=new nr(g,this);var _=d.listener,S=d.ha||d.src;d.fa&&N_(d),d=_.call(S,g)}return d}function O_(d){return d=d[R_],d instanceof Of?d:null}var F_="__closure_events_fn_"+(1e9*Math.random()>>>0);function L_(d){return typeof d=="function"?d:(d[F_]||(d[F_]=function(g){return d.handleEvent(g)}),d[F_])}function An(){Kn.call(this),this.i=new Of(this),this.M=this,this.F=null}b(An,Kn),An.prototype[Ku]=!0,An.prototype.removeEventListener=function(d,g,_,S){aD(this,d,g,_,S)};function Yn(d,g){var _,S=d.F;if(S)for(_=[];S;S=S.F)_.push(S);if(d=d.M,S=g.type||g,typeof g=="string")g=new kt(g,d);else if(g instanceof kt)g.target=g.target||d;else{var V=g;g=new kt(S,d),P(g,V)}if(V=!0,_)for(var j=_.length-1;0<=j;j--){var ee=g.g=_[j];V=Ff(ee,S,!0,g)&&V}if(ee=g.g=d,V=Ff(ee,S,!0,g)&&V,V=Ff(ee,S,!1,g)&&V,_)for(j=0;j<_.length;j++)ee=g.g=_[j],V=Ff(ee,S,!1,g)&&V}An.prototype.N=function(){if(An.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var _=d.g[g],S=0;S<_.length;S++)Nf(_[S]);delete d.g[g],d.h--}}this.F=null},An.prototype.K=function(d,g,_,S){return this.i.add(String(d),g,!1,_,S)},An.prototype.L=function(d,g,_,S){return this.i.add(String(d),g,!0,_,S)};function Ff(d,g,_,S){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var V=!0,j=0;j<g.length;++j){var ee=g[j];if(ee&&!ee.da&&ee.capture==_){var ct=ee.listener,gn=ee.ha||ee.src;ee.fa&&M_(d.i,ee),V=ct.call(gn,S)!==!1&&V}}return V&&!S.defaultPrevented}function lD(d,g,_){if(typeof d=="function")_&&(d=f(d,_));else if(d&&typeof d.handleEvent=="function")d=f(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(d,g||0)}function uD(d){d.g=lD(()=>{d.g=null,d.i&&(d.i=!1,uD(d))},d.l);let g=d.h;d.h=null,d.m.apply(null,g)}class fj extends Kn{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:uD(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yu(d){Kn.call(this),this.h=d,this.g={}}b(Yu,Kn);var dD=[];function hD(d){U(d.g,function(g,_){this.g.hasOwnProperty(_)&&N_(g)},d),d.g={}}Yu.prototype.N=function(){Yu.aa.N.call(this),hD(this)},Yu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var V_=a.JSON.stringify,pj=a.JSON.parse,mj=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function B_(){}B_.prototype.h=null;function fD(d){return d.h||(d.h=d.i())}function pD(){}var Qu={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function j_(){kt.call(this,"d")}b(j_,kt);function U_(){kt.call(this,"c")}b(U_,kt);var va={},mD=null;function Lf(){return mD=mD||new An}va.La="serverreachability";function gD(d){kt.call(this,va.La,d)}b(gD,kt);function Xu(d){let g=Lf();Yn(g,new gD(g))}va.STAT_EVENT="statevent";function yD(d,g){kt.call(this,va.STAT_EVENT,d),this.stat=g}b(yD,kt);function Qn(d){let g=Lf();Yn(g,new yD(g,d))}va.Ma="timingevent";function vD(d,g){kt.call(this,va.Ma,d),this.size=g}b(vD,kt);function Zu(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},g)}function Ju(){this.g=!0}Ju.prototype.xa=function(){this.g=!1};function gj(d,g,_,S,V,j){d.info(function(){if(d.g)if(j)for(var ee="",ct=j.split("&"),gn=0;gn<ct.length;gn++){var Ge=ct[gn].split("=");if(1<Ge.length){var Mn=Ge[0];Ge=Ge[1];var Pn=Mn.split("_");ee=2<=Pn.length&&Pn[1]=="type"?ee+(Mn+"="+Ge+"&"):ee+(Mn+"=redacted&")}}else ee=null;else ee=j;return"XMLHTTP REQ ("+S+") [attempt "+V+"]: "+g+`
`+_+`
`+ee})}function yj(d,g,_,S,V,j,ee){d.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+V+"]: "+g+`
`+_+`
`+j+" "+ee})}function jc(d,g,_,S){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+_j(d,_)+(S?" "+S:"")})}function vj(d,g){d.info(function(){return"TIMEOUT: "+g})}Ju.prototype.info=function(){};function _j(d,g){if(!d.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(d=0;d<_.length;d++)if(Array.isArray(_[d])){var S=_[d];if(!(2>S.length)){var V=S[1];if(Array.isArray(V)&&!(1>V.length)){var j=V[0];if(j!="noop"&&j!="stop"&&j!="close")for(var ee=1;ee<V.length;ee++)V[ee]=""}}}}return V_(_)}catch{return g}}var Vf={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_D={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$_;function Bf(){}b(Bf,B_),Bf.prototype.g=function(){return new XMLHttpRequest},Bf.prototype.i=function(){return{}},$_=new Bf;function is(d,g,_,S){this.j=d,this.i=g,this.l=_,this.R=S||1,this.U=new Yu(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bD}function bD(){this.i=null,this.g="",this.h=!1}var wD={},H_={};function z_(d,g,_){d.L=1,d.v=Hf(po(g)),d.m=_,d.P=!0,ED(d,null)}function ED(d,g){d.F=Date.now(),jf(d),d.A=po(d.v);var _=d.A,S=d.R;Array.isArray(S)||(S=[String(S)]),FD(_.i,"t",S),d.C=0,_=d.j.J,d.h=new bD,d.g=ex(d.j,_?g:null,!d.m),0<d.O&&(d.M=new fj(f(d.Y,d,d.g),d.O)),g=d.U,_=d.g,S=d.ca;var V="readystatechange";Array.isArray(V)||(V&&(dD[0]=V.toString()),V=dD);for(var j=0;j<V.length;j++){var ee=rD(_,V[j],S||g.handleEvent,!1,g.h||g);if(!ee)break;g.g[ee.key]=ee}g=d.H?T(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),Xu(),gj(d.i,d.u,d.A,d.l,d.R,d.m)}is.prototype.ca=function(d){d=d.target;let g=this.M;g&&mo(d)==3?g.j():this.Y(d)},is.prototype.Y=function(d){try{if(d==this.g)e:{let Pn=mo(this.g);var g=this.g.Ba();let Hc=this.g.Z();if(!(3>Pn)&&(Pn!=3||this.g&&(this.h.h||this.g.oa()||HD(this.g)))){this.J||Pn!=4||g==7||(g==8||0>=Hc?Xu(3):Xu(2)),q_(this);var _=this.g.Z();this.X=_;t:if(ID(this)){var S=HD(this.g);d="";var V=S.length,j=mo(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_a(this),ed(this);var ee="";break t}this.h.i=new a.TextDecoder}for(g=0;g<V;g++)this.h.h=!0,d+=this.h.i.decode(S[g],{stream:!(j&&g==V-1)});S.length=0,this.h.g+=d,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=_==200,yj(this.i,this.u,this.A,this.l,this.R,Pn,_),this.o){if(this.T&&!this.K){t:{if(this.g){var ct,gn=this.g;if((ct=gn.g?gn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(ct)){var Ge=ct;break t}}Ge=null}if(_=Ge)jc(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,W_(this,_);else{this.o=!1,this.s=3,Qn(12),_a(this),ed(this);break e}}if(this.P){_=!0;let ir;for(;!this.J&&this.C<ee.length;)if(ir=bj(this,ee),ir==H_){Pn==4&&(this.s=4,Qn(14),_=!1),jc(this.i,this.l,null,"[Incomplete Response]");break}else if(ir==wD){this.s=4,Qn(15),jc(this.i,this.l,ee,"[Invalid Chunk]"),_=!1;break}else jc(this.i,this.l,ir,null),W_(this,ir);if(ID(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pn!=4||ee.length!=0||this.h.h||(this.s=1,Qn(16),_=!1),this.o=this.o&&_,!_)jc(this.i,this.l,ee,"[Invalid Chunked Response]"),_a(this),ed(this);else if(0<ee.length&&!this.W){this.W=!0;var Mn=this.j;Mn.g==this&&Mn.ba&&!Mn.M&&(Mn.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),Z_(Mn),Mn.M=!0,Qn(11))}}else jc(this.i,this.l,ee,null),W_(this,ee);Pn==4&&_a(this),this.o&&!this.J&&(Pn==4?QD(this.j,this):(this.o=!1,jf(this)))}else Lj(this.g),_==400&&0<ee.indexOf("Unknown SID")?(this.s=3,Qn(12)):(this.s=0,Qn(13)),_a(this),ed(this)}}}catch{}finally{}};function ID(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function bj(d,g){var _=d.C,S=g.indexOf(`
`,_);return S==-1?H_:(_=Number(g.substring(_,S)),isNaN(_)?wD:(S+=1,S+_>g.length?H_:(g=g.slice(S,S+_),d.C=S+_,g)))}is.prototype.cancel=function(){this.J=!0,_a(this)};function jf(d){d.S=Date.now()+d.I,CD(d,d.I)}function CD(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Zu(f(d.ba,d),g)}function q_(d){d.B&&(a.clearTimeout(d.B),d.B=null)}is.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(vj(this.i,this.A),this.L!=2&&(Xu(),Qn(17)),_a(this),this.s=2,ed(this)):CD(this,this.S-d)};function ed(d){d.j.G==0||d.J||QD(d.j,d)}function _a(d){q_(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,hD(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function W_(d,g){try{var _=d.j;if(_.G!=0&&(_.g==d||G_(_.h,d))){if(!d.K&&G_(_.h,d)&&_.G==3){try{var S=_.Da.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var V=S;if(V[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<d.F)Kf(_),Wf(_);else break e;X_(_),Qn(18)}}else _.za=V[1],0<_.za-_.T&&37500>V[2]&&_.F&&_.v==0&&!_.C&&(_.C=Zu(f(_.Za,_),6e3));if(1>=DD(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else wa(_,11)}else if((d.K||_.g==d)&&Kf(_),!F(g))for(V=_.Da.g.parse(g),g=0;g<V.length;g++){let Ge=V[g];if(_.T=Ge[0],Ge=Ge[1],_.G==2)if(Ge[0]=="c"){_.K=Ge[1],_.ia=Ge[2];let Mn=Ge[3];Mn!=null&&(_.la=Mn,_.j.info("VER="+_.la));let Pn=Ge[4];Pn!=null&&(_.Aa=Pn,_.j.info("SVER="+_.Aa));let Hc=Ge[5];Hc!=null&&typeof Hc=="number"&&0<Hc&&(S=1.5*Hc,_.L=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;let ir=d.g;if(ir){let Qf=ir.g?ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qf){var j=S.h;j.g||Qf.indexOf("spdy")==-1&&Qf.indexOf("quic")==-1&&Qf.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(K_(j,j.h),j.h=null))}if(S.D){let J_=ir.g?ir.g.getResponseHeader("X-HTTP-Session-Id"):null;J_&&(S.ya=J_,Et(S.I,S.D,J_))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-d.F,_.j.info("Handshake RTT: "+_.R+"ms")),S=_;var ee=d;if(S.qa=JD(S,S.J?S.ia:null,S.W),ee.K){xD(S.h,ee);var ct=ee,gn=S.L;gn&&(ct.I=gn),ct.B&&(q_(ct),jf(ct)),S.g=ee}else KD(S);0<_.i.length&&Gf(_)}else Ge[0]!="stop"&&Ge[0]!="close"||wa(_,7);else _.G==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?wa(_,7):Q_(_):Ge[0]!="noop"&&_.l&&_.l.ta(Ge),_.v=0)}}Xu(4)}catch{}}var wj=class{constructor(d,g){this.g=d,this.map=g}};function SD(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function TD(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function DD(d){return d.h?1:d.g?d.g.size:0}function G_(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function K_(d,g){d.g?d.g.add(g):d.h=g}function xD(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}SD.prototype.cancel=function(){if(this.i=AD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function AD(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(let _ of d.g.values())g=g.concat(_.D);return g}return E(d.i)}function Ej(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var g=[],_=d.length,S=0;S<_;S++)g.push(d[S]);return g}g=[],_=0;for(S in d)g[_++]=d[S];return g}function Ij(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var g=[];d=d.length;for(var _=0;_<d;_++)g.push(_);return g}g=[],_=0;for(let S in d)g[_++]=S;return g}}}function MD(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var _=Ij(d),S=Ej(d),V=S.length,j=0;j<V;j++)g.call(void 0,S[j],_&&_[j],d)}var PD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cj(d,g){if(d){d=d.split("&");for(var _=0;_<d.length;_++){var S=d[_].indexOf("="),V=null;if(0<=S){var j=d[_].substring(0,S);V=d[_].substring(S+1)}else j=d[_];g(j,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function ba(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof ba){this.h=d.h,Uf(this,d.j),this.o=d.o,this.g=d.g,$f(this,d.s),this.l=d.l;var g=d.i,_=new id;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),RD(this,_),this.m=d.m}else d&&(g=String(d).match(PD))?(this.h=!1,Uf(this,g[1]||"",!0),this.o=td(g[2]||""),this.g=td(g[3]||"",!0),$f(this,g[4]),this.l=td(g[5]||"",!0),RD(this,g[6]||"",!0),this.m=td(g[7]||"")):(this.h=!1,this.i=new id(null,this.h))}ba.prototype.toString=function(){var d=[],g=this.j;g&&d.push(nd(g,kD,!0),":");var _=this.g;return(_||g=="file")&&(d.push("//"),(g=this.o)&&d.push(nd(g,kD,!0),"@"),d.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&d.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&d.push("/"),d.push(nd(_,_.charAt(0)=="/"?Dj:Tj,!0))),(_=this.i.toString())&&d.push("?",_),(_=this.m)&&d.push("#",nd(_,Aj)),d.join("")};function po(d){return new ba(d)}function Uf(d,g,_){d.j=_?td(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function $f(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function RD(d,g,_){g instanceof id?(d.i=g,Mj(d.i,d.h)):(_||(g=nd(g,xj)),d.i=new id(g,d.h))}function Et(d,g,_){d.i.set(g,_)}function Hf(d){return Et(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function td(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function nd(d,g,_){return typeof d=="string"?(d=encodeURI(d).replace(g,Sj),_&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Sj(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var kD=/[#\/\?@]/g,Tj=/[#\?:]/g,Dj=/[#\?]/g,xj=/[#\?@]/g,Aj=/#/g;function id(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function rs(d){d.g||(d.g=new Map,d.h=0,d.i&&Cj(d.i,function(g,_){d.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}n=id.prototype,n.add=function(d,g){rs(this),this.i=null,d=Uc(this,d);var _=this.g.get(d);return _||this.g.set(d,_=[]),_.push(g),this.h+=1,this};function ND(d,g){rs(d),g=Uc(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function OD(d,g){return rs(d),g=Uc(d,g),d.g.has(g)}n.forEach=function(d,g){rs(this),this.g.forEach(function(_,S){_.forEach(function(V){d.call(g,V,S,this)},this)},this)},n.na=function(){rs(this);let d=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let S=0;S<g.length;S++){let V=d[S];for(let j=0;j<V.length;j++)_.push(g[S])}return _},n.V=function(d){rs(this);let g=[];if(typeof d=="string")OD(this,d)&&(g=g.concat(this.g.get(Uc(this,d))));else{d=Array.from(this.g.values());for(let _=0;_<d.length;_++)g=g.concat(d[_])}return g},n.set=function(d,g){return rs(this),this.i=null,d=Uc(this,d),OD(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},n.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function FD(d,g,_){ND(d,g),0<_.length&&(d.i=null,d.g.set(Uc(d,g),E(_)),d.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var S=g[_];let j=encodeURIComponent(String(S)),ee=this.V(S);for(S=0;S<ee.length;S++){var V=j;ee[S]!==""&&(V+="="+encodeURIComponent(String(ee[S]))),d.push(V)}}return this.i=d.join("&")};function Uc(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function Mj(d,g){g&&!d.j&&(rs(d),d.i=null,d.g.forEach(function(_,S){var V=S.toLowerCase();S!=V&&(ND(this,S),FD(this,V,_))},d)),d.j=g}function Pj(d,g){let _=new Ju;if(a.Image){let S=new Image;S.onload=y(os,_,"TestLoadImage: loaded",!0,g,S),S.onerror=y(os,_,"TestLoadImage: error",!1,g,S),S.onabort=y(os,_,"TestLoadImage: abort",!1,g,S),S.ontimeout=y(os,_,"TestLoadImage: timeout",!1,g,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=d}else g(!1)}function Rj(d,g){let _=new Ju,S=new AbortController,V=setTimeout(()=>{S.abort(),os(_,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:S.signal}).then(j=>{clearTimeout(V),j.ok?os(_,"TestPingServer: ok",!0,g):os(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(V),os(_,"TestPingServer: error",!1,g)})}function os(d,g,_,S,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),S(_)}catch{}}function kj(){this.g=new mj}function Nj(d,g,_){let S=_||"";try{MD(d,function(V,j){let ee=V;l(V)&&(ee=V_(V)),g.push(S+j+"="+encodeURIComponent(ee))})}catch(V){throw g.push(S+"type="+encodeURIComponent("_badmap")),V}}function rd(d){this.l=d.Ub||null,this.j=d.eb||!1}b(rd,B_),rd.prototype.g=function(){return new zf(this.l,this.j)},rd.prototype.i=(function(d){return function(){return d}})({});function zf(d,g){An.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(zf,An),n=zf.prototype,n.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,sd(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,od(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,sd(this)),this.g&&(this.readyState=3,sd(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;LD(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function LD(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?od(this):sd(this),this.readyState==3&&LD(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,od(this))},n.Qa=function(d){this.g&&(this.response=d,od(this))},n.ga=function(){this.g&&od(this)};function od(d){d.readyState=4,d.l=null,d.j=null,d.v=null,sd(d)}n.setRequestHeader=function(d,g){this.u.append(d,g)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,d.push(_[0]+": "+_[1]),_=g.next();return d.join(`\r
`)};function sd(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(zf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function VD(d){let g="";return U(d,function(_,S){g+=S,g+=":",g+=_,g+=`\r
`}),g}function Y_(d,g,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=VD(_),typeof d=="string"?_!=null&&encodeURIComponent(String(_)):Et(d,g,_))}function Nt(d){An.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Nt,An);var Oj=/^https?$/i,Fj=["POST","PUT"];n=Nt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,g,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$_.g(),this.v=this.o?fD(this.o):fD($_),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(j){BD(this,j);return}if(d=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var V in S)_.set(V,S[V]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(let j of S.keys())_.set(j,S.get(j));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(j=>j.toLowerCase()=="content-type"),V=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Fj,g,void 0))||S||V||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[j,ee]of _)this.g.setRequestHeader(j,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$D(this),this.u=!0,this.g.send(d),this.u=!1}catch(j){BD(this,j)}};function BD(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,jD(d),qf(d)}function jD(d){d.A||(d.A=!0,Yn(d,"complete"),Yn(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Yn(this,"complete"),Yn(this,"abort"),qf(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qf(this,!0)),Nt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?UD(this):this.bb())},n.bb=function(){UD(this)};function UD(d){if(d.h&&typeof s<"u"&&(!d.v[1]||mo(d)!=4||d.Z()!=2)){if(d.u&&mo(d)==4)lD(d.Ea,0,d);else if(Yn(d,"readystatechange"),mo(d)==4){d.h=!1;try{let ee=d.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var S;if(S=ee===0){var V=String(d.D).match(PD)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),S=!Oj.test(V?V.toLowerCase():"")}_=S}if(_)Yn(d,"complete"),Yn(d,"success");else{d.m=6;try{var j=2<mo(d)?d.g.statusText:""}catch{j=""}d.l=j+" ["+d.Z()+"]",jD(d)}}finally{qf(d)}}}}function qf(d,g){if(d.g){$D(d);let _=d.g,S=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||Yn(d,"ready");try{_.onreadystatechange=S}catch{}}}function $D(d){d.I&&(a.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function mo(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<mo(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),pj(g)}};function HD(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Lj(d){let g={};d=(d.g&&2<=mo(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<d.length;S++){if(F(d[S]))continue;var _=N(d[S]);let V=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();let j=g[V]||[];g[V]=j,j.push(_)}x(g,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ad(d,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[d]||g}function zD(d){this.Aa=0,this.i=[],this.j=new Ju,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ad("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ad("baseRetryDelayMs",5e3,d),this.cb=ad("retryDelaySeedMs",1e4,d),this.Wa=ad("forwardChannelMaxRetries",2,d),this.wa=ad("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new SD(d&&d.concurrentRequestLimit),this.Da=new kj,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=zD.prototype,n.la=8,n.G=1,n.connect=function(d,g,_,S){Qn(0),this.W=d,this.H=g||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.I=JD(this,null,this.W),Gf(this)};function Q_(d){if(qD(d),d.G==3){var g=d.U++,_=po(d.I);if(Et(_,"SID",d.K),Et(_,"RID",g),Et(_,"TYPE","terminate"),cd(d,_),g=new is(d,d.j,g),g.L=2,g.v=Hf(po(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&a.Image&&(new Image().src=g.v,_=!0),_||(g.g=ex(g.j,null),g.g.ea(g.v)),g.F=Date.now(),jf(g)}ZD(d)}function Wf(d){d.g&&(Z_(d),d.g.cancel(),d.g=null)}function qD(d){Wf(d),d.u&&(a.clearTimeout(d.u),d.u=null),Kf(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function Gf(d){if(!TD(d.h)&&!d.s){d.s=!0;var g=d.Ga;at||uo(),mn||(at(),mn=!0),qt.add(g,d),d.B=0}}function Vj(d,g){return DD(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Zu(f(d.Ga,d,g),XD(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let V=new is(this,this.j,d),j=this.o;if(this.S&&(j?(j=T(j),P(j,this.S)):j=this.S),this.m!==null||this.O||(V.H=j,j=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=GD(this,V,g),_=po(this.I),Et(_,"RID",d),Et(_,"CVER",22),this.D&&Et(_,"X-HTTP-Session-Id",this.D),cd(this,_),j&&(this.O?g="headers="+encodeURIComponent(String(VD(j)))+"&"+g:this.m&&Y_(_,this.m,j)),K_(this.h,V),this.Ua&&Et(_,"TYPE","init"),this.P?(Et(_,"$req",g),Et(_,"SID","null"),V.T=!0,z_(V,_,null)):z_(V,_,g),this.G=2}}else this.G==3&&(d?WD(this,d):this.i.length==0||TD(this.h)||WD(this))};function WD(d,g){var _;g?_=g.l:_=d.U++;let S=po(d.I);Et(S,"SID",d.K),Et(S,"RID",_),Et(S,"AID",d.T),cd(d,S),d.m&&d.o&&Y_(S,d.m,d.o),_=new is(d,d.j,_,d.B+1),d.m===null&&(_.H=d.o),g&&(d.i=g.D.concat(d.i)),g=GD(d,_,1e3),_.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),K_(d.h,_),z_(_,S,g)}function cd(d,g){d.H&&U(d.H,function(_,S){Et(g,S,_)}),d.l&&MD({},function(_,S){Et(g,S,_)})}function GD(d,g,_){_=Math.min(d.i.length,_);var S=d.l?f(d.l.Na,d.l,d):null;e:{var V=d.i;let j=-1;for(;;){let ee=["count="+_];j==-1?0<_?(j=V[0].g,ee.push("ofs="+j)):j=0:ee.push("ofs="+j);let ct=!0;for(let gn=0;gn<_;gn++){let Ge=V[gn].g,Mn=V[gn].map;if(Ge-=j,0>Ge)j=Math.max(0,V[gn].g-100),ct=!1;else try{Nj(Mn,ee,"req"+Ge+"_")}catch{S&&S(Mn)}}if(ct){S=ee.join("&");break e}}}return d=d.i.splice(0,_),g.D=d,S}function KD(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;at||uo(),mn||(at(),mn=!0),qt.add(g,d),d.v=0}}function X_(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Zu(f(d.Fa,d),XD(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,YD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Zu(f(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qn(10),Wf(this),YD(this))};function Z_(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function YD(d){d.g=new is(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=po(d.qa);Et(g,"RID","rpc"),Et(g,"SID",d.K),Et(g,"AID",d.T),Et(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&Et(g,"TO",d.ja),Et(g,"TYPE","xmlhttp"),cd(d,g),d.m&&d.o&&Y_(g,d.m,d.o),d.L&&(d.g.I=d.L);var _=d.g;d=d.ia,_.L=1,_.v=Hf(po(g)),_.m=null,_.P=!0,ED(_,d)}n.Za=function(){this.C!=null&&(this.C=null,Wf(this),X_(this),Qn(19))};function Kf(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function QD(d,g){var _=null;if(d.g==g){Kf(d),Z_(d),d.g=null;var S=2}else if(G_(d.h,g))_=g.D,xD(d.h,g),S=1;else return;if(d.G!=0){if(g.o)if(S==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var V=d.B;S=Lf(),Yn(S,new vD(S,_)),Gf(d)}else KD(d);else if(V=g.s,V==3||V==0&&0<g.X||!(S==1&&Vj(d,g)||S==2&&X_(d)))switch(_&&0<_.length&&(g=d.h,g.i=g.i.concat(_)),V){case 1:wa(d,5);break;case 4:wa(d,10);break;case 3:wa(d,6);break;default:wa(d,2)}}}function XD(d,g){let _=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(_*=2),_*g}function wa(d,g){if(d.j.info("Error code "+g),g==2){var _=f(d.fb,d),S=d.Xa;let V=!S;S=new ba(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Uf(S,"https"),Hf(S),V?Pj(S.toString(),_):Rj(S.toString(),_)}else Qn(2);d.G=0,d.l&&d.l.sa(g),ZD(d),qD(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Qn(2)):(this.j.info("Failed to ping google.com"),Qn(1))};function ZD(d){if(d.G=0,d.ka=[],d.l){let g=AD(d.h);(g.length!=0||d.i.length!=0)&&(I(d.ka,g),I(d.ka,d.i),d.h.i.length=0,E(d.i),d.i.length=0),d.l.ra()}}function JD(d,g,_){var S=_ instanceof ba?po(_):new ba(_);if(S.g!="")g&&(S.g=g+"."+S.g),$f(S,S.s);else{var V=a.location;S=V.protocol,g=g?g+"."+V.hostname:V.hostname,V=+V.port;var j=new ba(null);S&&Uf(j,S),g&&(j.g=g),V&&$f(j,V),_&&(j.l=_),S=j}return _=d.D,g=d.ya,_&&g&&Et(S,_,g),Et(S,"VER",d.la),cd(d,S),S}function ex(d,g,_){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new Nt(new rd({eb:_})):new Nt(d.pa),g.Ha(d.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function tx(){}n=tx.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Yf(){}Yf.prototype.g=function(d,g){return new fi(d,g)};function fi(d,g){An.call(this),this.g=new zD(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!F(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!F(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new $c(this)}b(fi,An),fi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fi.prototype.close=function(){Q_(this.g)},fi.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var _={};_.__data__=d,d=_}else this.u&&(_={},_.__data__=V_(d),d=_);g.i.push(new wj(g.Ya++,d)),g.G==3&&Gf(g)},fi.prototype.N=function(){this.g.l=null,delete this.j,Q_(this.g),delete this.g,fi.aa.N.call(this)};function nx(d){j_.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(let _ in g){d=_;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}b(nx,j_);function ix(){U_.call(this),this.status=1}b(ix,U_);function $c(d){this.g=d}b($c,tx),$c.prototype.ua=function(){Yn(this.g,"a")},$c.prototype.ta=function(d){Yn(this.g,new nx(d))},$c.prototype.sa=function(d){Yn(this.g,new ix)},$c.prototype.ra=function(){Yn(this.g,"b")},Yf.prototype.createWebChannel=Yf.prototype.g,fi.prototype.send=fi.prototype.o,fi.prototype.open=fi.prototype.m,fi.prototype.close=fi.prototype.close,sC=Ho.createWebChannelTransport=function(){return new Yf},oC=Ho.getStatEventTarget=function(){return Lf()},rC=Ho.Event=va,Sy=Ho.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vf.NO_ERROR=0,Vf.TIMEOUT=8,Vf.HTTP_ERROR=6,Hh=Ho.ErrorCode=Vf,_D.COMPLETE="complete",iC=Ho.EventType=_D,pD.EventType=Qu,Qu.OPEN="a",Qu.CLOSE="b",Qu.ERROR="c",Qu.MESSAGE="d",An.prototype.listen=An.prototype.K,ou=Ho.WebChannel=pD,Hq=Ho.FetchXmlHttpFactory=rd,Nt.prototype.listenOnce=Nt.prototype.L,Nt.prototype.getLastError=Nt.prototype.Ka,Nt.prototype.getLastErrorCode=Nt.prototype.Ba,Nt.prototype.getStatus=Nt.prototype.Z,Nt.prototype.getResponseJson=Nt.prototype.Oa,Nt.prototype.getResponseText=Nt.prototype.oa,Nt.prototype.send=Nt.prototype.ea,Nt.prototype.setWithCredentials=Nt.prototype.Ha,nC=Ho.XhrIo=Nt}).apply(typeof Cy<"u"?Cy:typeof self<"u"?self:typeof window<"u"?window:{});var LO="@firebase/firestore",VO="4.8.0";var hn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");var Cu="11.10.0";var vc=new Yc("@firebase/firestore");function su(){return vc.logLevel}function oe(n,...e){if(vc.logLevel<=pi.DEBUG){let t=e.map(ZS);vc.debug(`Firestore (${Cu}): ${n}`,...t)}}function zo(n,...e){if(vc.logLevel<=pi.ERROR){let t=e.map(ZS);vc.error(`Firestore (${Cu}): ${n}`,...t)}}function Ks(n,...e){if(vc.logLevel<=pi.WARN){let t=e.map(ZS);vc.warn(`Firestore (${Cu}): ${n}`,...t)}}function ZS(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ve(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,M2(n,i,t)}function M2(n,e,t){let i=`FIRESTORE (${Cu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw zo(i),new Error(i)}function Je(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||M2(e,r,i)}function xe(n,e){return n}var G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ne=class extends as{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Yr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Ry=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},dC=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(hn.UNAUTHENTICATED))}shutdown(){}},hC=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},fC=class{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Je(this.o===void 0,42304);let i=this.i,r=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve(),o=new Yr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Yr,e.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>C(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},a=c=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Yr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Je(typeof i.accessToken=="string",31837,{l:i}),new Ry(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string",2055,{h:e}),new hn(e)}},pC=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},mC=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new pC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ky=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},gC=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Je(this.o===void 0,3512);let i=o=>{o.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,oe("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?r(o):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ky(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ky(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function zq(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}function P2(){return new TextEncoder}var Yh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),i="";for(;i.length<20;){let r=zq(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<t&&(i+=e.charAt(r[o]%62))}return i}};function ke(n,e){return n<e?-1:n>e?1:0}function yC(n,e){let t=0;for(;t<n.length&&t<e.length;){let i=n.codePointAt(t),r=e.codePointAt(t);if(i!==r){if(i<128&&r<128)return ke(i,r);{let o=P2(),s=qq(o.encode(BO(n,t)),o.encode(BO(e,t)));return s!==0?s:ke(i,r)}}t+=i>65535?2:1}return ke(n.length,e.length)}function BO(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function qq(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ke(n[t],e[t]);return ke(n.length,e.length)}function fu(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var jO="__name__",Ny=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&ve(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ve(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let o=n.compareSegments(e.get(r),t.get(r));if(o!==0)return o}return ke(e.length,t.length)}static compareSegments(e,t){let i=n.isNumericId(e),r=n.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?n.extractNumericId(e).compare(n.extractNumericId(t)):yC(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $o.fromString(e.substring(4,e.length-2))}},xt=class n extends Ny{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new ne(G.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},Wq=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ai=class n extends Ny{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return Wq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jO}static keyField(){return new n([jO])}static fromServerFormat(e){let t=[],i="",r=0,o=()=>{if(i.length===0)throw new ne(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},s=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new ne(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ne(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(s=!s,r++):a!=="."||s?(i+=a,r++):(o(),r++)}if(o(),s)throw new ne(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var me=class n{constructor(e){this.path=e}static fromPath(e){return new n(xt.fromString(e))}static fromName(e){return new n(xt.fromString(e).popFirst(5))}static empty(){return new n(xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return xt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new xt(e.slice()))}};function R2(n,e,t){if(!t)throw new ne(G.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Gq(n,e,t,i){if(e===!0&&i===!0)throw new ne(G.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function UO(n){if(!me.isDocumentKey(n))throw new ne(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function $O(n){if(me.isDocumentKey(n))throw new ne(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function k2(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function pv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ve(12329,{type:typeof n})}function Xi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ne(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=pv(n);throw new ne(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function tn(n,e){let t={typeString:n};return e&&(t.value=e),t}function cf(n,e){if(!k2(n))throw new ne(G.INVALID_ARGUMENT,"JSON must be an object");let t;for(let i in e)if(e[i]){let r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}let s=n[i];if(r&&typeof s!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${i}' field to equal '${o.value}'`;break}}if(t)throw new ne(G.INVALID_ARGUMENT,t);return!0}var HO=-62135596800,zO=1e6,Vt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*zO);return new n(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ne(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ne(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<HO)throw new ne(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zO}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(cf(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-HO;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Vt._jsonSchemaVersion="firestore/timestamp/1.0",Vt._jsonSchema={type:tn("string",Vt._jsonSchemaVersion),seconds:tn("number"),nanoseconds:tn("number")};var Me=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Vt(0,0))}static max(){return new n(new Vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Qh=-1,vC=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};vC.UNKNOWN_ID=-1;function Kq(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Me.fromTimestamp(i===1e9?new Vt(t+1,0):new Vt(t,i));return new _c(r,me.empty(),e)}function Yq(n){return new _c(n.readTime,n.key,Qh)}var _c=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(Me.min(),me.empty(),Qh)}static max(){return new n(Me.max(),me.empty(),Qh)}};function Qq(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=me.comparator(n.documentKey,e.documentKey),t!==0?t:ke(n.largestBatchId,e.largestBatchId))}var Xq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",_C=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Su(n){return C(this,null,function*(){if(n.code!==G.FAILED_PRECONDITION||n.message!==Xq)throw n;oe("LocalStore","Unexpectedly lost primary lease")})}var X=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,o=0,s=!1;e.forEach(a=>{++r,a.next(()=>{++o,s&&o===r&&t()},c=>i(c))}),s=!0,o===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,o)=>{i.push(t.call(this,r,o))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(u=>{s[l]=u,++a,a===o&&i(s)},u=>r(u))}})}static doWhile(e,t){return new n((i,r)=>{let o=()=>{e()===!0?t().next(()=>{o()},r):i()};o()})}};function Zq(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Tu(n){return n.name==="IndexedDbTransactionError"}var JS=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this._e(r),this.ae=r=>i.writeSequenceNumber(r))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),eT=-1;function mv(n){return n==null}function Xh(n){return n===0&&1/n==-1/0}function Jq(n){return typeof n=="number"&&Number.isInteger(n)&&!Xh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var N2="";function eW(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=qO(e)),e=tW(n.get(t),e);return qO(e)}function tW(n,e){let t=e,i=n.length;for(let r=0;r<i;r++){let o=n.charAt(r);switch(o){case"\0":t+="";break;case N2:t+="";break;default:t+=o}}return t}function qO(n){return n+N2+""}var nW="remoteDocuments",O2="owner";var F2="mutationQueues";var L2="mutations";var V2="documentMutations",iW="remoteDocumentsV14";var B2="remoteDocumentGlobal";var j2="targets";var U2="targetDocuments";var $2="targetGlobal",H2="collectionParents";var z2="clientMetadata";var q2="bundles";var W2="namedQueries";var rW="indexConfiguration";var oW="indexState";var sW="indexEntries";var G2="documentOverlays";var aW="globals";var cW=[F2,L2,V2,nW,j2,O2,$2,U2,z2,B2,H2,q2,W2],Ube=[...cW,G2],lW=[F2,L2,V2,iW,j2,O2,$2,U2,z2,B2,H2,q2,W2,G2],uW=lW,dW=[...uW,rW,oW,sW];var $be=[...dW,aW];function WO(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function na(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function K2(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Bt=class n{constructor(e,t){this.comparator=e,this.root=t||Qr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uu(this.root,e,this.comparator,!1)}getReverseIterator(){return new uu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uu(this.root,e,this.comparator,!0)}},uu=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Qr=class n{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,o){return new n(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,i),null):o===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}};Qr.EMPTY=null,Qr.RED=!0,Qr.BLACK=!1;Qr.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,t,i,r,o){return this}insert(e,t,i){return new Qr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var fn=class n{constructor(e){this.comparator=e,this.data=new Bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Oy(this.data.getIterator())}getIteratorFrom(e){return new Oy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Oy=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Qi=class n{constructor(e){this.fields=e,e.sort(Ai.comparator)}static empty(){return new n([])}unionWith(e){let t=new fn(Ai.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fu(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var Fy=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var zn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Fy("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};zn.EMPTY_BYTE_STRING=new zn("");var hW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qo(n){if(Je(!!n,39018),typeof n=="string"){let e=0,t=hW.exec(n);if(Je(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Dt(n.seconds),nanos:Dt(n.nanos)}}function Dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Wo(n){return typeof n=="string"?zn.fromBase64String(n):zn.fromUint8Array(n)}var Y2="server_timestamp",Q2="__type__",X2="__previous_value__",Z2="__local_write_time__";function tT(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Q2])===null||t===void 0?void 0:t.stringValue)===Y2}function gv(n){let e=n.mapValue.fields[X2];return tT(e)?gv(e):e}function Zh(n){let e=qo(n.mapValue.fields[Z2].timestampValue);return new Vt(e.seconds,e.nanos)}var bC=class{constructor(e,t,i,r,o,s,a,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=u}},Ly="(default)",Vy=class n{constructor(e,t){this.projectId=e,this.database=t||Ly}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Ly}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var nT="__type__",J2="__max__",Ty={mapValue:{fields:{__type__:{stringValue:J2}}}},iT="__vector__",pu="value";function Ys(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tT(n)?4:tF(n)?9007199254740991:eF(n)?10:11:ve(28295,{value:n})}function eo(n,e){if(n===e)return!0;let t=Ys(n);if(t!==Ys(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zh(n).isEqual(Zh(e));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let s=qo(r.timestampValue),a=qo(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,o){return Wo(r.bytesValue).isEqual(Wo(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,o){return Dt(r.geoPointValue.latitude)===Dt(o.geoPointValue.latitude)&&Dt(r.geoPointValue.longitude)===Dt(o.geoPointValue.longitude)})(n,e);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return Dt(r.integerValue)===Dt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let s=Dt(r.doubleValue),a=Dt(o.doubleValue);return s===a?Xh(s)===Xh(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return fu(n.arrayValue.values||[],e.arrayValue.values||[],eo);case 10:case 11:return(function(r,o){let s=r.mapValue.fields||{},a=o.mapValue.fields||{};if(WO(s)!==WO(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!eo(s[c],a[c])))return!1;return!0})(n,e);default:return ve(52216,{left:n})}}function Jh(n,e){return(n.values||[]).find(t=>eo(t,e))!==void 0}function mu(n,e){if(n===e)return 0;let t=Ys(n),i=Ys(e);if(t!==i)return ke(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ke(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Dt(o.integerValue||o.doubleValue),c=Dt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return GO(n.timestampValue,e.timestampValue);case 4:return GO(Zh(n),Zh(e));case 5:return yC(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=Wo(o),c=Wo(s);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=ke(a[l],c[l]);if(u!==0)return u}return ke(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=ke(Dt(o.latitude),Dt(s.latitude));return a!==0?a:ke(Dt(o.longitude),Dt(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return KO(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,c,l,u;let h=o.fields||{},f=s.fields||{},y=(a=h[pu])===null||a===void 0?void 0:a.arrayValue,b=(c=f[pu])===null||c===void 0?void 0:c.arrayValue,E=ke(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((u=b?.values)===null||u===void 0?void 0:u.length)||0);return E!==0?E:KO(y,b)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Ty.mapValue&&s===Ty.mapValue)return 0;if(o===Ty.mapValue)return 1;if(s===Ty.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let h=0;h<c.length&&h<u.length;++h){let f=yC(c[h],u[h]);if(f!==0)return f;let y=mu(a[c[h]],l[u[h]]);if(y!==0)return y}return ke(c.length,u.length)})(n.mapValue,e.mapValue);default:throw ve(23264,{le:t})}}function GO(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ke(n,e);let t=qo(n),i=qo(e),r=ke(t.seconds,i.seconds);return r!==0?r:ke(t.nanos,i.nanos)}function KO(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let o=mu(t[r],i[r]);if(o)return o}return ke(t.length,i.length)}function gu(n){return wC(n)}function wC(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let i=qo(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Wo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return me.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(let o of t.values||[])r?r=!1:i+=",",i+=wC(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){let i=Object.keys(t.fields||{}).sort(),r="{",o=!0;for(let s of i)o?o=!1:r+=",",r+=`${s}:${wC(t.fields[s])}`;return r+"}"})(n.mapValue):ve(61005,{value:n})}function Ay(n){switch(Ys(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=gv(n);return e?16+Ay(e):16;case 5:return 2*n.stringValue.length;case 6:return Wo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce((r,o)=>r+Ay(o),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return na(i.fields,(o,s)=>{r+=o.length+Ay(s)}),r})(n.mapValue);default:throw ve(13486,{value:n})}}function YO(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function EC(n){return!!n&&"integerValue"in n}function rT(n){return!!n&&"arrayValue"in n}function QO(n){return!!n&&"nullValue"in n}function XO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function My(n){return!!n&&"mapValue"in n}function eF(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[nT])===null||t===void 0?void 0:t.stringValue)===iT}function qh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return na(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=qh(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=qh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function tF(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===J2}var zbe={mapValue:{fields:{[nT]:{stringValue:iT},[pu]:{arrayValue:{}}}}};var xi=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!My(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qh(t)}setAll(e){let t=Ai.emptyPath(),i={},r=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,i,r),i={},r=[],t=a.popLast()}s?i[a.lastSegment()]=qh(s):r.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,i,r)}delete(e){let t=this.field(e.popLast());My(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return eo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];My(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){na(t,(r,o)=>e[r]=o);for(let r of i)delete e[r]}clone(){return new n(qh(this.value))}};function nF(n){let e=[];return na(n.fields,(t,i)=>{let r=new Ai([t]);if(My(i)){let o=nF(i.mapValue).fields;if(o.length===0)e.push(r);else for(let s of o)e.push(r.child(s))}else e.push(r)}),new Qi(e)}var yr=class n{constructor(e,t,i,r,o,s,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Me.min(),Me.min(),Me.min(),xi.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,Me.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,Me.min(),Me.min(),xi.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Me.min(),Me.min(),xi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var yu=class{constructor(e,t){this.position=e,this.inclusive=t}};function ZO(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let o=e[r],s=n.position[r];if(o.field.isKeyField()?i=me.comparator(me.fromName(s.referenceValue),t.key):i=mu(s,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function JO(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!eo(n.position[t],e.position[t]))return!1;return!0}var bc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function fW(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var By=class{},en=class n extends By{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new CC(e,t,i):t==="array-contains"?new DC(e,i):t==="in"?new xC(e,i):t==="not-in"?new AC(e,i):t==="array-contains-any"?new MC(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new SC(e,i):new TC(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(mu(t,this.value)):t!==null&&Ys(this.value)===Ys(t)&&this.matchesComparison(mu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},vr=class n extends By{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return iF(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function iF(n){return n.op==="and"}function rF(n){return pW(n)&&iF(n)}function pW(n){for(let e of n.filters)if(e instanceof vr)return!1;return!0}function IC(n){if(n instanceof en)return n.field.canonicalString()+n.op.toString()+gu(n.value);if(rF(n))return n.filters.map(e=>IC(e)).join(",");{let e=n.filters.map(t=>IC(t)).join(",");return`${n.op}(${e})`}}function oF(n,e){return n instanceof en?(function(i,r){return r instanceof en&&i.op===r.op&&i.field.isEqual(r.field)&&eo(i.value,r.value)})(n,e):n instanceof vr?(function(i,r){return r instanceof vr&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,s,a)=>o&&oF(s,r.filters[a]),!0):!1})(n,e):void ve(19439)}function sF(n){return n instanceof en?(function(t){return`${t.field.canonicalString()} ${t.op} ${gu(t.value)}`})(n):n instanceof vr?(function(t){return t.op.toString()+" {"+t.getFilters().map(sF).join(" ,")+"}"})(n):"Filter"}var CC=class extends en{constructor(e,t,i){super(e,t,i),this.key=me.fromName(i.referenceValue)}matches(e){let t=me.comparator(e.key,this.key);return this.matchesComparison(t)}},SC=class extends en{constructor(e,t){super(e,"in",t),this.keys=aF("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},TC=class extends en{constructor(e,t){super(e,"not-in",t),this.keys=aF("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function aF(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>me.fromName(i.referenceValue))}var DC=class extends en{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return rT(t)&&Jh(t.arrayValue,this.value)}},xC=class extends en{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Jh(this.value.arrayValue,t)}},AC=class extends en{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Jh(this.value.arrayValue,t)}},MC=class extends en{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!rT(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Jh(this.value.arrayValue,i))}};var PC=class{constructor(e,t=null,i=[],r=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function e2(n,e=null,t=[],i=[],r=null,o=null,s=null){return new PC(n,e,t,i,r,o,s)}function oT(n){let e=xe(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>IC(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>(function(o){return o.field.canonicalString()+o.dir})(i)).join(","),mv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>gu(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>gu(i)).join(",")),e.Pe=t}return e.Pe}function sT(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!fW(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!oF(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!JO(n.startAt,e.startAt)&&JO(n.endAt,e.endAt)}function RC(n){return me.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Qs=class{constructor(e,t=null,i=[],r=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function mW(n,e,t,i,r,o,s,a){return new Qs(n,e,t,i,r,o,s,a)}function aT(n){return new Qs(n)}function t2(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function cF(n){return n.collectionGroup!==null}function Wh(n){let e=xe(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new fn(Ai.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new bc(o,i))}),t.has(Ai.keyField().canonicalString())||e.Te.push(new bc(Ai.keyField(),i))}return e.Te}function Xr(n){let e=xe(n);return e.Ie||(e.Ie=gW(e,Wh(n))),e.Ie}function gW(n,e){if(n.limitType==="F")return e2(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new bc(r.field,o)});let t=n.endAt?new yu(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new yu(n.startAt.position,n.startAt.inclusive):null;return e2(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function kC(n,e){let t=n.filters.concat([e]);return new Qs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function NC(n,e,t){return new Qs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function yv(n,e){return sT(Xr(n),Xr(e))&&n.limitType===e.limitType}function lF(n){return`${oT(Xr(n))}|lt:${n.limitType}`}function au(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>sF(r)).join(", ")}]`),mv(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>gu(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>gu(r)).join(",")),`Target(${i})`})(Xr(n))}; limitType=${n.limitType})`}function vv(n,e){return e.isFoundDocument()&&(function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):me.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,e)&&(function(i,r){for(let o of Wh(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(s,a,c){let l=ZO(s,a,c);return s.inclusive?l<=0:l<0})(i.startAt,Wh(i),r)||i.endAt&&!(function(s,a,c){let l=ZO(s,a,c);return s.inclusive?l>=0:l>0})(i.endAt,Wh(i),r))})(n,e)}function yW(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function uF(n){return(e,t)=>{let i=!1;for(let r of Wh(n)){let o=vW(r,e,t);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function vW(n,e,t){let i=n.field.isKeyField()?me.comparator(e.key,t.key):(function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?mu(c,l):ve(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ve(19790,{direction:n.dir})}}var Go=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){na(this.inner,(t,i)=>{for(let[r,o]of i)e(r,o)})}isEmpty(){return K2(this.inner)}size(){return this.innerSize}};var _W=new Bt(me.comparator);function Ko(){return _W}var dF=new Bt(me.comparator);function zh(...n){let e=dF;for(let t of n)e=e.insert(t.key,t);return e}function hF(n){let e=dF;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function fc(){return Gh()}function fF(){return Gh()}function Gh(){return new Go(n=>n.toString(),(n,e)=>n.isEqual(e))}var bW=new Bt(me.comparator),wW=new fn(me.comparator);function Ve(...n){let e=wW;for(let t of n)e=e.add(t);return e}var EW=new fn(ke);function IW(){return EW}function cT(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xh(e)?"-0":e}}function pF(n){return{integerValue:""+n}}function mF(n,e){return Jq(e)?pF(e):cT(n,e)}var vu=class{constructor(){this._=void 0}};function CW(n,e,t){return n instanceof wc?(function(r,o){let s={fields:{[Q2]:{stringValue:Y2},[Z2]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&tT(o)&&(o=gv(o)),o&&(s.fields[X2]=o),{mapValue:s}})(t,e):n instanceof Xs?yF(n,e):n instanceof Zs?vF(n,e):(function(r,o){let s=gF(r,o),a=n2(s)+n2(r.Ee);return EC(s)&&EC(r.Ee)?pF(a):cT(r.serializer,a)})(n,e)}function SW(n,e,t){return n instanceof Xs?yF(n,e):n instanceof Zs?vF(n,e):t}function gF(n,e){return n instanceof Ec?(function(i){return EC(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}var wc=class extends vu{},Xs=class extends vu{constructor(e){super(),this.elements=e}};function yF(n,e){let t=_F(e);for(let i of n.elements)t.some(r=>eo(r,i))||t.push(i);return{arrayValue:{values:t}}}var Zs=class extends vu{constructor(e){super(),this.elements=e}};function vF(n,e){let t=_F(e);for(let i of n.elements)t=t.filter(r=>!eo(r,i));return{arrayValue:{values:t}}}var Ec=class extends vu{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function n2(n){return Dt(n.integerValue||n.doubleValue)}function _F(n){return rT(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var _u=class{constructor(e,t){this.field=e,this.transform=t}};function TW(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof Xs&&r instanceof Xs||i instanceof Zs&&r instanceof Zs?fu(i.elements,r.elements,eo):i instanceof Ec&&r instanceof Ec?eo(i.Ee,r.Ee):i instanceof wc&&r instanceof wc})(n.transform,e.transform)}var OC=class{constructor(e,t){this.version=e,this.transformResults=t}},Zr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Py(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var bu=class{};function bF(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ef(n.key,Zr.none()):new Ic(n.key,n.data,Zr.none());{let t=n.data,i=xi.empty(),r=new fn(Ai.comparator);for(let o of e.fields)if(!r.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?i.delete(o):i.set(o,s),r=r.add(o)}return new to(n.key,i,new Qi(r.toArray()),Zr.none())}}function DW(n,e,t){n instanceof Ic?(function(r,o,s){let a=r.value.clone(),c=r2(r.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof to?(function(r,o,s){if(!Py(r.precondition,o))return void o.convertToUnknownDocument(s.version);let a=r2(r.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(wF(r)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Kh(n,e,t,i){return n instanceof Ic?(function(o,s,a,c){if(!Py(o.precondition,s))return a;let l=o.value.clone(),u=o2(o.fieldTransforms,c,s);return l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,i):n instanceof to?(function(o,s,a,c){if(!Py(o.precondition,s))return a;let l=o2(o.fieldTransforms,c,s),u=s.data;return u.setAll(wF(o)),u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))})(n,e,t,i):(function(o,s,a){return Py(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function xW(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),o=gF(i.transform,r||null);o!=null&&(t===null&&(t=xi.empty()),t.set(i.field,o))}return t||null}function i2(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&fu(i,r,(o,s)=>TW(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ic=class extends bu{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},to=class extends bu{constructor(e,t,i,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function wF(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function r2(n,e,t){let i=new Map;Je(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let r=0;r<t.length;r++){let o=n[r],s=o.transform,a=e.data.field(o.field);i.set(o.field,SW(s,a,t[r]))}return i}function o2(n,e,t){let i=new Map;for(let r of n){let o=r.transform,s=t.data.field(r.field);i.set(r.field,CW(o,s,e))}return i}var ef=class extends bu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},FC=class extends bu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var LC=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&DW(o,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=Kh(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=Kh(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=fF();return this.mutations.forEach(r=>{let o=e.get(r.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(r.key)?null:a;let c=bF(s,a);c!==null&&i.set(r.key,c),s.isValidDocument()||s.convertToNoDocument(Me.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ve())}isEqual(e){return this.batchId===e.batchId&&fu(this.mutations,e.mutations,(t,i)=>i2(t,i))&&fu(this.baseMutations,e.baseMutations,(t,i)=>i2(t,i))}},VC=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Je(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let r=(function(){return bW})(),o=e.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,i[s].version);return new n(e,t,i,r)}};var BC=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var jC=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Zt,qe;function AW(n){switch(n){case G.OK:return ve(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return ve(15467,{code:n})}}function EF(n){if(n===void 0)return zo("GRPC error has no .code"),G.UNKNOWN;switch(n){case Zt.OK:return G.OK;case Zt.CANCELLED:return G.CANCELLED;case Zt.UNKNOWN:return G.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return G.INTERNAL;case Zt.UNAVAILABLE:return G.UNAVAILABLE;case Zt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case Zt.NOT_FOUND:return G.NOT_FOUND;case Zt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case Zt.ABORTED:return G.ABORTED;case Zt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case Zt.DATA_LOSS:return G.DATA_LOSS;default:return ve(39323,{code:n})}}(qe=Zt||(Zt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";var s2=null;var MW=new $o([4294967295,4294967295],0);function a2(n){let e=P2().encode(n),t=new tC;return t.update(e),new Uint8Array(t.digest())}function c2(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new $o([t,i],0),new $o([r,o],0)]}var UC=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new pc(`Invalid padding: ${t}`);if(i<0)throw new pc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new pc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new pc(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=$o.fromNumber(this.fe)}pe(e,t,i){let r=e.add(t.multiply($o.fromNumber(i)));return r.compare(MW)===1&&(r=new $o([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=a2(e),[i,r]=c2(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(i,r,o);if(!this.ye(s))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,r,t);return i.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=a2(e),[i,r]=c2(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(i,r,o);this.we(s)}}we(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},pc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var jy=class n{constructor(e,t,i,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,tf.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(Me.min(),r,new Bt(ke),Ko(),Ve())}},tf=class n{constructor(e,t,i,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,Ve(),Ve(),Ve())}};var du=class{constructor(e,t,i,r){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=r}},Uy=class{constructor(e,t){this.targetId=e,this.De=t}},$y=class{constructor(e,t,i=zn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},Hy=class{constructor(){this.ve=0,this.Ce=l2(),this.Fe=zn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ve(),t=Ve(),i=Ve();return this.Ce.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:ve(38017,{changeType:o})}}),new tf(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=l2()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Je(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},$C=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ko(),this.je=Dy(),this.Je=Dy(),this.He=new Bt(ke)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:ve(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((i,r)=>{this.nt(r)&&t(r)})}it(e){let t=e.targetId,i=e.De.count,r=this.st(t);if(r){let o=r.target;if(RC(o))if(i===0){let s=new me(o.path);this.Xe(t,s,yr.newNoDocument(s,Me.min()))}else Je(i===1,20013,{expectedCount:i});else{let s=this.ot(t);if(s!==i){let a=this._t(e),c=a?this.ut(a,e,s):1;if(c!==0){this.rt(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}s2?.ct((function(u,h,f,y,b){var E,I,R,F,B,z;let $={localCacheCount:u,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},U=h.unchangedNames;return U&&($.bloomFilter={applied:b===0,hashCount:(E=U?.hashCount)!==null&&E!==void 0?E:0,bitmapLength:(F=(R=(I=U?.bits)===null||I===void 0?void 0:I.bitmap)===null||R===void 0?void 0:R.length)!==null&&F!==void 0?F:0,padding:(z=(B=U?.bits)===null||B===void 0?void 0:B.padding)!==null&&z!==void 0?z:0,mightContain:x=>{var T;return(T=y?.mightContain(x))!==null&&T!==void 0&&T}}),$})(s,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=t,s,a;try{s=Wo(i).toUint8Array()}catch(c){if(c instanceof Fy)return Ks("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new UC(s,r,o)}catch(c){return Ks(c instanceof pc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){let i=this.We.getRemoteKeysForTarget(t),r=0;return i.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),r++)}),r}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&RC(a.target)){let c=new me(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,yr.newNoDocument(c,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let i=Ve();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.st(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let r=new jy(e,t,this.He,this.ze,i);return this.ze=Ko(),this.je=Dy(),this.Je=Dy(),this.He=new Bt(ke),r}Ze(e,t){if(!this.nt(e))return;let i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;let r=this.tt(e);this.It(e,t)?r.qe(t,1):r.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Hy,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new fn(ke),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new fn(ke),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Hy),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Dy(){return new Bt(me.comparator)}function l2(){return new Bt(me.comparator)}var PW={asc:"ASCENDING",desc:"DESCENDING"},RW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kW={and:"AND",or:"OR"},HC=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function zC(n,e){return n.useProto3Json||mv(e)?e:{value:e}}function zy(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IF(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function NW(n,e){return zy(n,e.toTimestamp())}function Jr(n){return Je(!!n,49232),Me.fromTimestamp((function(t){let i=qo(t);return new Vt(i.seconds,i.nanos)})(n))}function lT(n,e){return qC(n,e).canonicalString()}function qC(n,e){let t=(function(r){return new xt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function CF(n){let e=xt.fromString(n);return Je(AF(e),10190,{key:e.toString()}),e}function WC(n,e){return lT(n.databaseId,e.path)}function aC(n,e){let t=CF(e);if(t.get(1)!==n.databaseId.projectId)throw new ne(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ne(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new me(TF(t))}function SF(n,e){return lT(n.databaseId,e)}function OW(n){let e=CF(n);return e.length===4?xt.emptyPath():TF(e)}function GC(n){return new xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function TF(n){return Je(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function u2(n,e,t){return{name:WC(n,e),fields:t.value.mapValue.fields}}function FW(n,e){let t;if("targetChange"in e){e.targetChange;let i=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ve(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=(function(l,u){return l.useProto3Json?(Je(u===void 0||typeof u=="string",58123),zn.fromBase64String(u||"")):(Je(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),zn.fromUint8Array(u||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let u=l.code===void 0?G.UNKNOWN:EF(l.code);return new ne(u,l.message||"")})(s);t=new $y(i,r,o,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=aC(n,i.document.name),o=Jr(i.document.updateTime),s=i.document.createTime?Jr(i.document.createTime):Me.min(),a=new xi({mapValue:{fields:i.document.fields}}),c=yr.newFoundDocument(r,o,s,a),l=i.targetIds||[],u=i.removedTargetIds||[];t=new du(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=aC(n,i.document),o=i.readTime?Jr(i.readTime):Me.min(),s=yr.newNoDocument(r,o),a=i.removedTargetIds||[];t=new du([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=aC(n,i.document),o=i.removedTargetIds||[];t=new du([],o,r,null)}else{if(!("filter"in e))return ve(11601,{At:e});{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,s=new jC(r,o),a=i.targetId;t=new Uy(a,s)}}return t}function LW(n,e){let t;if(e instanceof Ic)t={update:u2(n,e.key,e.value)};else if(e instanceof ef)t={delete:WC(n,e.key)};else if(e instanceof to)t={update:u2(n,e.key,e.data),updateMask:WW(e.fieldMask)};else{if(!(e instanceof FC))return ve(16599,{Rt:e.type});t={verify:WC(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>(function(o,s){let a=s.transform;if(a instanceof wc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Xs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Zs)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ec)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw ve(20930,{transform:s.transform})})(0,i))),e.precondition.isNone||(t.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:NW(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ve(27497)})(n,e.precondition)),t}function VW(n,e){return n&&n.length>0?(Je(e!==void 0,14353),n.map(t=>(function(r,o){let s=r.updateTime?Jr(r.updateTime):Jr(o);return s.isEqual(Me.min())&&(s=Jr(o)),new OC(s,r.transformResults||[])})(t,e))):[]}function BW(n,e){return{documents:[SF(n,e.path)]}}function jW(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=SF(n,r);let o=(function(l){if(l.length!==0)return xF(vr.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(u=>(function(f){return{field:cu(f.field),direction:HW(f.dir)}})(u))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=zC(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:r}}function UW(n){let e=OW(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){Je(i===1,65062);let u=t.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let o=[];t.where&&(o=(function(h){let f=DF(h);return f instanceof vr&&rF(f)?f.getFilters():[f]})(t.where));let s=[];t.orderBy&&(s=(function(h){return h.map(f=>(function(b){return new bc(lu(b.field),(function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(f))})(t.orderBy));let a=null;t.limit&&(a=(function(h){let f;return f=typeof h=="object"?h.value:h,mv(f)?null:f})(t.limit));let c=null;t.startAt&&(c=(function(h){let f=!!h.before,y=h.values||[];return new yu(y,f)})(t.startAt));let l=null;return t.endAt&&(l=(function(h){let f=!h.before,y=h.values||[];return new yu(y,f)})(t.endAt)),mW(e,r,s,o,a,"F",c,l)}function $W(n,e){let t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function DF(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=lu(t.unaryFilter.field);return en.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=lu(t.unaryFilter.field);return en.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=lu(t.unaryFilter.field);return en.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=lu(t.unaryFilter.field);return en.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}})(n):n.fieldFilter!==void 0?(function(t){return en.create(lu(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return vr.create(t.compositeFilter.filters.map(i=>DF(i)),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ve(1026)}})(t.compositeFilter.op))})(n):ve(30097,{filter:n})}function HW(n){return PW[n]}function zW(n){return RW[n]}function qW(n){return kW[n]}function cu(n){return{fieldPath:n.canonicalString()}}function lu(n){return Ai.fromServerFormat(n.fieldPath)}function xF(n){return n instanceof en?(function(t){if(t.op==="=="){if(XO(t.value))return{unaryFilter:{field:cu(t.field),op:"IS_NAN"}};if(QO(t.value))return{unaryFilter:{field:cu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(XO(t.value))return{unaryFilter:{field:cu(t.field),op:"IS_NOT_NAN"}};if(QO(t.value))return{unaryFilter:{field:cu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cu(t.field),op:zW(t.op),value:t.value}}})(n):n instanceof vr?(function(t){let i=t.getFilters().map(r=>xF(r));return i.length===1?i[0]:{compositeFilter:{op:qW(t.op),filters:i}}})(n):ve(54877,{filter:n})}function WW(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function AF(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var nf=class n{constructor(e,t,i,r,o=Me.min(),s=Me.min(),a=zn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var KC=class{constructor(e){this.gt=e}};function GW(n){let e=UW({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?NC(e,e.limit,"L"):e}var qy=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Dt(e.integerValue));else if("doubleValue"in e){let i=Dt(e.doubleValue);isNaN(i)?this.Ct(t,13):(this.Ct(t,15),Xh(i)?t.Ft(0):t.Ft(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ct(t,20),typeof i=="string"&&(i=qo(i)),t.Mt(`${i.seconds||""}`),t.Ft(i.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Wo(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.Ct(t,45),t.Ft(i.latitude||0),t.Ft(i.longitude||0)}else"mapValue"in e?tF(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):eF(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):ve(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let i=e.fields||{};this.Ct(t,55);for(let r of Object.keys(i))this.xt(r,t),this.Dt(i[r],t)}Lt(e,t){var i,r;let o=e.fields||{};this.Ct(t,53);let s=pu,a=((r=(i=o[s].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.Ct(t,15),t.Ft(Dt(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let i=e.values||[];this.Ct(t,50);for(let r of i)this.Dt(r,t)}Bt(e,t){this.Ct(t,37),me.fromName(e).path.forEach(i=>{this.Ct(t,60),this.$t(i,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};qy.Ut=new qy;var YC=class{constructor(){this.Dn=new QC}addToCollectionParentIndex(e,t){return this.Dn.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(_c.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(_c.min())}updateCollectionGroup(e,t,i){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}},QC=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new fn(xt.comparator),o=!r.has(i);return this.index[t]=r.add(i),o}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new fn(xt.comparator)).toArray()}};var qbe=new Uint8Array(0);var d2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},MF=41943040,Yi=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}};Yi.DEFAULT_COLLECTION_PERCENTILE=10,Yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yi.DEFAULT=new Yi(MF,Yi.DEFAULT_COLLECTION_PERCENTILE,Yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yi.DISABLED=new Yi(-1,0,0);var rf=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var h2="LruGarbageCollector",KW=1048576;function f2([n,e],[t,i]){let r=ke(n,t);return r===0?ke(e,i):r}var XC=class{constructor(e){this.Tr=e,this.buffer=new fn(f2),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let i=this.buffer.last();f2(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}},ZC=class{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){oe(h2,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>C(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Tu(t)?oe(h2,"Ignoring IndexedDB error during garbage collection: ",t):yield Su(t)}yield this.Rr(3e5)}))}},JC=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return X.resolve(JS.ue);let i=new XC(t);return this.Vr.forEachTarget(e,r=>i.Er(r.sequenceNumber)).next(()=>this.Vr.gr(e,r=>i.Er(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(d2)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),d2):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,r,o,s,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),r=this.params.maximumSequenceNumbersToCollect):r=h,s=Date.now(),this.nthSequenceNumber(e,r))).next(h=>(i=h,a=Date.now(),this.removeTargets(e,i,t))).next(h=>(o=h,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(h=>(l=Date.now(),su()<=pi.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${r} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${h} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:h})))}};function YW(n,e){return new JC(n,e)}var eS=class{constructor(){this.changes=new Go(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?X.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var tS=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var nS=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&Kh(i.mutation,r,Qi.empty(),Vt.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Ve()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Ve()){let r=fc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(o=>{let s=zh();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let i=fc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Ve()))}populateOverlays(e,t,i){let r=[];return i.forEach(o=>{t.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,i,r){let o=Ko(),s=Gh(),a=(function(){return Gh()})();return t.forEach((c,l)=>{let u=i.get(l.key);r.has(l.key)&&(u===void 0||u.mutation instanceof to)?o=o.insert(l.key,l):u!==void 0?(s.set(l.key,u.mutation.getFieldMask()),Kh(u.mutation,l,u.mutation.getFieldMask(),Vt.now())):s.set(l.key,Qi.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,u)=>s.set(l,u)),t.forEach((l,u)=>{var h;return a.set(l,new tS(u,(h=s.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){let i=Gh(),r=new Bt((s,a)=>s-a),o=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let u=i.get(c)||Qi.empty();u=a.applyToLocalView(l,u),i.set(c,u);let h=(r.get(a.batchId)||Ve()).add(c);r=r.insert(a.batchId,h)})}).next(()=>{let s=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,h=fF();u.forEach(f=>{if(!o.has(f)){let y=bF(t.get(f),i.get(f));y!==null&&h.set(f,y),o=o.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,h))}return X.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return(function(s){return me.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cF(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(o=>{let s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-o.size):X.resolve(fc()),a=Qh,c=o;return s.next(l=>X.forEach(l,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(u)?X.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{c=c.insert(u,f)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,Ve())).next(u=>({batchId:a,changes:hF(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new me(t)).next(i=>{let r=zh();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let o=t.collectionGroup,s=zh();return this.indexManager.getCollectionParents(e,o).next(a=>X.forEach(a,c=>{let l=(function(h,f){return new Qs(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,i,r).next(u=>{u.forEach((h,f)=>{s=s.insert(h,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,r))).next(s=>{o.forEach((c,l)=>{let u=l.getKey();s.get(u)===null&&(s=s.insert(u,yr.newInvalidDocument(u)))});let a=zh();return s.forEach((c,l)=>{let u=o.get(c);u!==void 0&&Kh(u.mutation,l,Qi.empty(),Vt.now()),vv(t,l)&&(a=a.insert(c,l))}),a})}};var iS=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return X.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Jr(r.createTime)}})(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(r){return{name:r.name,query:GW(r.bundledQuery),readTime:Jr(r.readTime)}})(t)),X.resolve()}};var rS=class{constructor(){this.overlays=new Bt(me.comparator),this.kr=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){let i=fc();return X.forEach(t,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,o)=>{this.wt(e,t,o)}),X.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.kr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(i)),X.resolve()}getOverlaysForCollection(e,t,i){let r=fc(),o=t.length+1,s=new me(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>i&&r.set(c.getKey(),c)}return X.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let o=new Bt((l,u)=>l-u),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>i){let u=o.get(l.largestBatchId);u===null&&(u=fc(),o=o.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=fc(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=r)););return X.resolve(a)}wt(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let s=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new BC(t,i));let o=this.kr.get(t);o===void 0&&(o=Ve(),this.kr.set(t,o)),this.kr.set(t,o.add(i.key))}};var oS=class{constructor(){this.sessionToken=zn.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}};var of=class{constructor(){this.qr=new fn(Jt.Qr),this.$r=new fn(Jt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let i=new Jt(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Wr(new Jt(e,t))}Gr(e,t){e.forEach(i=>this.removeReference(i,t))}zr(e){let t=new me(new xt([])),i=new Jt(t,e),r=new Jt(t,e+1),o=[];return this.$r.forEachInRange([i,r],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new me(new xt([])),i=new Jt(t,e),r=new Jt(t,e+1),o=Ve();return this.$r.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Jt(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},Jt=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return me.comparator(e.key,t.key)||ke(e.Hr,t.Hr)}static Ur(e,t){return ke(e.Hr,t.Hr)||me.comparator(e.key,t.key)}};var sS=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new fn(Jt.Qr)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new LC(o,t,i,r);this.mutationQueue.push(s);for(let a of r)this.Yr=this.Yr.add(new Jt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return X.resolve(s)}lookupMutationBatch(e,t){return X.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.Xr(i),o=r<0?0:r;return X.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?eT:this.er-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new Jt(t,0),r=new Jt(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([i,r],s=>{let a=this.Zr(s.Hr);o.push(a)}),X.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new fn(ke);return t.forEach(r=>{let o=new Jt(r,0),s=new Jt(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{i=i.add(a.Hr)})}),X.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,o=i;me.isDocumentKey(o)||(o=o.child(""));let s=new Jt(new me(o),0),a=new fn(ke);return this.Yr.forEachWhile(c=>{let l=c.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.Hr)),!0)},s),X.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(i=>{let r=this.Zr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){Je(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return X.forEach(t.mutations,r=>{let o=new Jt(r.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,t){let i=new Jt(t,0),r=this.Yr.firstAfterOrEqual(i);return X.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var aS=class{constructor(e){this.ni=e,this.docs=(function(){return new Bt(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),o=r?r.size:0,s=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return X.resolve(i?i.document.mutableCopy():yr.newInvalidDocument(t))}getEntries(e,t){let i=Ko();return t.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():yr.newInvalidDocument(r))}),X.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let o=Ko(),s=t.path,a=new me(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Qq(Yq(u),i)<=0||(r.has(u.key)||vv(t,u))&&(o=o.insert(u.key,u.mutableCopy()))}return X.resolve(o)}getAllFromCollectionGroup(e,t,i,r){ve(9500)}ri(e,t){return X.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new cS(this)}getSize(e){return X.resolve(this.size)}},cS=class extends eS{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(i)}),X.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var lS=class{constructor(e){this.persistence=e,this.ii=new Go(t=>oT(t),sT),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.si=0,this.oi=new of,this.targetCount=0,this._i=rf.ar()}forEachTarget(e,t){return this.ii.forEach((i,r)=>t(r)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),X.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new rf(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.hr(t),X.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,i){let r=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),X.waitFor(o).next(()=>r)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){let i=this.ii.get(t)||null;return X.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),X.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);let r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(s=>{o.push(r.markPotentiallyOrphaned(e,s))}),X.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),X.resolve()}getMatchingKeysForTargetId(e,t){let i=this.oi.Jr(t);return X.resolve(i)}containsKey(e,t){return X.resolve(this.oi.containsKey(t))}};var Wy=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new JS(0),this.ci=!1,this.ci=!0,this.li=new oS,this.referenceDelegate=e(this),this.hi=new lS(this),this.indexManager=new YC,this.remoteDocumentCache=(function(r){return new aS(r)})(i=>this.referenceDelegate.Pi(i)),this.serializer=new KC(t),this.Ti=new iS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new sS(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){oe("MemoryPersistence","Starting transaction:",e);let r=new uS(this.ui.next());return this.referenceDelegate.Ii(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ei(e,t){return X.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,t)))}},uS=class extends _C{constructor(e){super(),this.currentSequenceNumber=e}},dS=class n{constructor(e){this.persistence=e,this.Ai=new of,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw ve(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),X.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),X.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(r=>this.mi.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(o=>this.mi.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.mi,i=>{let r=me.fromPath(i);return this.fi(e,r).next(o=>{o||t.removeEntry(r,Me.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return X.or([()=>X.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Gy=class n{constructor(e,t){this.persistence=e,this.gi=new Go(i=>eW(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=YW(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return X.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}yr(e){let t=0;return this.gr(e,i=>{t++}).next(()=>t)}gr(e,t){return X.forEach(this.gi,(i,r)=>this.Sr(e,i,r).next(o=>o?X.resolve():t(r)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0,r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(i++,o.removeEntry(s,Me.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),X.resolve()}removeTarget(e,t){let i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),X.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),X.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ay(e.data.value)),t}Sr(e,t,i){return X.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let r=this.gi.get(t);return X.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var hS=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=r}static Es(e,t){let i=Ve(),r=Ve();for(let o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new n(e,t.fromCache,i,r)}};var fS=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var pS=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return px()?8:Zq(Rn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,r){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,r,i).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new fS;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,i,r){return i.documentReadCount<this.Vs?(su()<=pi.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",au(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),X.resolve()):(su()<=pi.DEBUG&&oe("QueryEngine","Query:",au(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(su()<=pi.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",au(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xr(t))):X.resolve())}ps(e,t){if(t2(t))return X.resolve(null);let i=Xr(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=NC(t,null,"F"),i=Xr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let s=Ve(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{let l=this.bs(t,a);return this.Ds(t,l,s,c.readTime)?this.ps(e,NC(t,null,"F")):this.vs(e,l,t,c)}))})))}ys(e,t,i,r){return t2(t)||r.isEqual(Me.min())?X.resolve(null):this.gs.getDocuments(e,i).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,i,r)?X.resolve(null):(su()<=pi.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),au(t)),this.vs(e,s,t,Kq(r,Qh)).next(a=>a))})}bs(e,t){let i=new fn(uF(e));return t.forEach((r,o)=>{vv(e,o)&&(i=i.add(o))}),i}Ds(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}ws(e,t,i){return su()<=pi.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",au(t)),this.gs.getDocumentsMatchingQuery(e,t,_c.min(),i)}vs(e,t,i,r){return this.gs.getDocumentsMatchingQuery(e,i,r).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var uT="LocalStore",QW=3e8,mS=class{constructor(e,t,i,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new Bt(ke),this.Ms=new Go(o=>oT(o),sT),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nS(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function XW(n,e,t,i){return new mS(n,e,t,i)}function PF(n,e){return C(this,null,function*(){let t=xe(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{let s=[],a=[],c=Ve();for(let l of r){s.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of o){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(i,c).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function ZW(n,e){let t=xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,u){let h=l.batch,f=h.keys(),y=X.resolve();return f.forEach(b=>{y=y.next(()=>u.getEntry(c,b)).next(E=>{let I=l.docVersions.get(b);Je(I!==null,48541),E.version.compareTo(I)<0&&(h.applyToRemoteDocument(E,l),E.isValidDocument()&&(E.setReadTime(l.commitVersion),u.addEntry(E)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,h))})(t,i,e,o).next(()=>o.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(a){let c=Ve();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function RF(n){let e=xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function JW(n,e){let t=xe(n),i=e.snapshotVersion,r=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});r=t.Fs;let a=[];e.targetChanges.forEach((u,h)=>{let f=r.get(h);if(!f)return;a.push(t.hi.removeMatchingKeys(o,u.removedDocuments,h).next(()=>t.hi.addMatchingKeys(o,u.addedDocuments,h)));let y=f.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?y=y.withResumeToken(zn.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):u.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(u.resumeToken,i)),r=r.insert(h,y),(function(E,I,R){return E.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=QW?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0})(f,y,u)&&a.push(t.hi.updateTargetData(o,y))});let c=Ko(),l=Ve();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(eG(o,s,e.documentUpdates).next(u=>{c=u.Ls,l=u.ks})),!i.isEqual(Me.min())){let u=t.hi.getLastRemoteSnapshotVersion(o).next(h=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,i));a.push(u)}return X.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.Fs=r,o))}function eG(n,e,t){let i=Ve(),r=Ve();return t.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let s=Ko();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(Me.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):oe(uT,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ls:s,ks:r}})}function tG(n,e){let t=xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=eT),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function nG(n,e){let t=xe(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.hi.getTargetData(i,e).next(o=>o?(r=o,X.resolve(r)):t.hi.allocateTargetId(i).next(s=>(r=new nf(e,s,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i})}function gS(n,e,t){return C(this,null,function*(){let i=xe(n),r=i.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!Tu(s))throw s;oe(uT,`Failed to update sequence numbers for target ${e}: ${s}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(r.target)})}function p2(n,e,t){let i=xe(n),r=Me.min(),o=Ve();return i.persistence.runTransaction("Execute query","readwrite",s=>(function(c,l,u){let h=xe(c),f=h.Ms.get(u);return f!==void 0?X.resolve(h.Fs.get(f)):h.hi.getTargetData(l,u)})(i,s,Xr(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>i.Cs.getDocumentsMatchingQuery(s,e,t?r:Me.min(),t?o:Ve())).next(a=>(iG(i,yW(e),a),{documents:a,qs:o})))}function iG(n,e,t){let i=n.xs.get(e)||Me.min();t.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.xs.set(e,i)}var Ky=class{constructor(){this.activeTargetIds=IW()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var yS=class{constructor(){this.Fo=new Ky,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Ky,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var vS=class{xo(e){}shutdown(){}};var m2="ConnectivityMonitor",Yy=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){oe(m2,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){oe(m2,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var xy=null;function _S(){return xy===null?xy=(function(){return 268435456+Math.round(2147483648*Math.random())})():xy++,"0x"+xy.toString(16)}var cC="RestConnection",rG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},bS=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===Ly?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,t,i,r,o){let s=_S(),a=this.Go(e,t.toUriEncodedString());oe(cC,`Sending RPC '${e}' ${s}:`,a,i);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,r,o);let{host:l}=new URL(a),u=go(l);return this.jo(e,a,c,i,u).then(h=>(oe(cC,`Received RPC '${e}' ${s}: `,h),h),h=>{throw Ks(cC,`RPC '${e}' ${s} failed with error: `,h,"url: ",a,"request:",i),h})}Jo(e,t,i,r,o,s){return this.Wo(e,t,i,r,o)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Cu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}Go(e,t){let i=rG[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}};var wS=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Hn="WebChannelConnection",ES=class extends bS{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,r,o){let s=_S();return new Promise((a,c)=>{let l=new nC;l.setWithCredentials(!0),l.listenOnce(iC.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Hh.NO_ERROR:let h=l.getResponseJson();oe(Hn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),a(h);break;case Hh.TIMEOUT:oe(Hn,`RPC '${e}' ${s} timed out`),c(new ne(G.DEADLINE_EXCEEDED,"Request time out"));break;case Hh.HTTP_ERROR:let f=l.getStatus();if(oe(Hn,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let b=y?.error;if(b&&b.status&&b.message){let E=(function(R){let F=R.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(F)>=0?F:G.UNKNOWN})(b.status);c(new ne(E,b.message))}else c(new ne(G.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new ne(G.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{oe(Hn,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(r);oe(Hn,`RPC '${e}' ${s} sending request:`,r),l.send(t,"POST",u,i,15)})}P_(e,t,i){let r=_S(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=sC(),a=oC(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,i),c.encodeInitMessageHeaders=!0;let u=o.join("");oe(Hn,`Creating RPC '${e}' stream ${r}: ${u}`,c);let h=s.createWebChannel(u,c);this.T_(h);let f=!1,y=!1,b=new wS({Ho:I=>{y?oe(Hn,`Not sending because RPC '${e}' stream ${r} is closed:`,I):(f||(oe(Hn,`Opening RPC '${e}' stream ${r} transport.`),h.open(),f=!0),oe(Hn,`RPC '${e}' stream ${r} sending:`,I),h.send(I))},Yo:()=>h.close()}),E=(I,R,F)=>{I.listen(R,B=>{try{F(B)}catch(z){setTimeout(()=>{throw z},0)}})};return E(h,ou.EventType.OPEN,()=>{y||(oe(Hn,`RPC '${e}' stream ${r} transport opened.`),b.s_())}),E(h,ou.EventType.CLOSE,()=>{y||(y=!0,oe(Hn,`RPC '${e}' stream ${r} transport closed`),b.__(),this.I_(h))}),E(h,ou.EventType.ERROR,I=>{y||(y=!0,Ks(Hn,`RPC '${e}' stream ${r} transport errored. Name:`,I.name,"Message:",I.message),b.__(new ne(G.UNAVAILABLE,"The operation could not be completed")))}),E(h,ou.EventType.MESSAGE,I=>{var R;if(!y){let F=I.data[0];Je(!!F,16349);let B=F,z=B?.error||((R=B[0])===null||R===void 0?void 0:R.error);if(z){oe(Hn,`RPC '${e}' stream ${r} received error:`,z);let $=z.status,U=(function(D){let P=Zt[D];if(P!==void 0)return EF(P)})($),x=z.message;U===void 0&&(U=G.INTERNAL,x="Unknown error status: "+$+" with message "+z.message),y=!0,b.__(new ne(U,x)),h.close()}else oe(Hn,`RPC '${e}' stream ${r} received:`,F),b.a_(F)}}),E(a,rC.STAT_EVENT,I=>{I.stat===Sy.PROXY?oe(Hn,`RPC '${e}' stream ${r} detected buffering proxy`):I.stat===Sy.NOPROXY&&oe(Hn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{b.o_()},0),b}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function lC(){return typeof document<"u"?document:null}function _v(n){return new HC(n,!0)}var Qy=class{constructor(e,t,i=1e3,r=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=r,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-i);r>0&&oe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var g2="PersistentStream",Xy=class{constructor(e,t,i,r,o,s,a,c){this.Fi=e,this.w_=i,this.S_=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Qy(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return C(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return C(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return C(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(zo(t.toString()),zo("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.b_===t&&this.W_(i,r)},i=>{e(()=>{let r=new ne(G.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)})})}W_(e,t){let i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(r=>{i(()=>this.G_(r))}),this.stream.onMessage(r=>{i(()=>++this.C_==1?this.j_(r):this.onNext(r))})}O_(){this.state=5,this.F_.g_(()=>C(this,null,function*(){this.state=0,this.start()}))}G_(e){return oe(g2,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(oe(g2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},IS=class extends Xy{constructor(e,t,i,r,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=FW(this.serializer,e),i=(function(o){if(!("targetChange"in o))return Me.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Me.min():s.readTime?Jr(s.readTime):Me.min()})(e);return this.listener.J_(t,i)}H_(e){let t={};t.database=GC(this.serializer),t.addTarget=(function(o,s){let a,c=s.target;if(a=RC(c)?{documents:BW(o,c)}:{query:jW(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=IF(o,s.resumeToken);let l=zC(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Me.min())>0){a.readTime=zy(o,s.snapshotVersion.toTimestamp());let l=zC(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let i=$W(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){let t={};t.database=GC(this.serializer),t.removeTarget=e,this.k_(t)}},CS=class extends Xy{constructor(e,t,i,r,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=VW(e.writeResults,e.commitTime),i=Jr(e.commitTime);return this.listener.ta(i,t)}na(){let e={};e.database=GC(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>LW(this.serializer,i))};this.k_(t)}};var SS=class{},TS=class extends SS{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new ne(G.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,qC(t,i),r,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(G.UNKNOWN,o.toString())})}Jo(e,t,i,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,qC(t,i),r,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ne(G.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},DS=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(zo(t),this._a=!1):oe("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Cc="RemoteStore",xS=class{constructor(e,t,i,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{i.enqueueAndForget(()=>C(this,null,function*(){Sc(this)&&(oe(Cc,"Restarting streams for network reachability change."),yield(function(c){return C(this,null,function*(){let l=xe(c);l.Ia.add(4),yield lf(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield bv(l)})})(this))}))}),this.Aa=new DS(i,r)}};function bv(n){return C(this,null,function*(){if(Sc(n))for(let e of n.da)yield e(!0)})}function lf(n){return C(this,null,function*(){for(let e of n.da)yield e(!1)})}function kF(n,e){let t=xe(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),pT(t)?fT(t):Du(t).x_()&&hT(t,e))}function dT(n,e){let t=xe(n),i=Du(t);t.Ta.delete(e),i.x_()&&NF(t,e),t.Ta.size===0&&(i.x_()?i.B_():Sc(t)&&t.Aa.set("Unknown"))}function hT(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Du(n).H_(e)}function NF(n,e){n.Ra.$e(e),Du(n).Y_(e)}function fT(n){n.Ra=new $C({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Du(n).start(),n.Aa.aa()}function pT(n){return Sc(n)&&!Du(n).M_()&&n.Ta.size>0}function Sc(n){return xe(n).Ia.size===0}function OF(n){n.Ra=void 0}function oG(n){return C(this,null,function*(){n.Aa.set("Online")})}function sG(n){return C(this,null,function*(){n.Ta.forEach((e,t)=>{hT(n,e)})})}function aG(n,e){return C(this,null,function*(){OF(n),pT(n)?(n.Aa.la(e),fT(n)):n.Aa.set("Unknown")})}function cG(n,e,t){return C(this,null,function*(){if(n.Aa.set("Online"),e instanceof $y&&e.state===2&&e.cause)try{yield(function(r,o){return C(this,null,function*(){let s=o.cause;for(let a of o.targetIds)r.Ta.has(a)&&(yield r.remoteSyncer.rejectListen(a,s),r.Ta.delete(a),r.Ra.removeTarget(a))})})(n,e)}catch(i){oe(Cc,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Zy(n,i)}else if(e instanceof du?n.Ra.Ye(e):e instanceof Uy?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Me.min()))try{let i=yield RF(n.localStore);t.compareTo(i)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=o.Ta.get(l);u&&o.Ta.set(l,u.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let u=o.Ta.get(c);if(!u)return;o.Ta.set(c,u.withResumeToken(zn.EMPTY_BYTE_STRING,u.snapshotVersion)),NF(o,c);let h=new nf(u.target,c,l,u.sequenceNumber);hT(o,h)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(i){oe(Cc,"Failed to raise snapshot:",i),yield Zy(n,i)}})}function Zy(n,e,t){return C(this,null,function*(){if(!Tu(e))throw e;n.Ia.add(1),yield lf(n),n.Aa.set("Offline"),t||(t=()=>RF(n.localStore)),n.asyncQueue.enqueueRetryable(()=>C(null,null,function*(){oe(Cc,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield bv(n)}))})}function FF(n,e){return e().catch(t=>Zy(n,t,e))}function wv(n){return C(this,null,function*(){let e=xe(n),t=Js(e),i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:eT;for(;lG(e);)try{let r=yield tG(e.localStore,i);if(r===null){e.Pa.length===0&&t.B_();break}i=r.batchId,uG(e,r)}catch(r){yield Zy(e,r)}LF(e)&&VF(e)})}function lG(n){return Sc(n)&&n.Pa.length<10}function uG(n,e){n.Pa.push(e);let t=Js(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function LF(n){return Sc(n)&&!Js(n).M_()&&n.Pa.length>0}function VF(n){Js(n).start()}function dG(n){return C(this,null,function*(){Js(n).na()})}function hG(n){return C(this,null,function*(){let e=Js(n);for(let t of n.Pa)e.X_(t.mutations)})}function fG(n,e,t){return C(this,null,function*(){let i=n.Pa.shift(),r=VC.from(i,e,t);yield FF(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield wv(n)})}function pG(n,e){return C(this,null,function*(){e&&Js(n).Z_&&(yield(function(i,r){return C(this,null,function*(){if((function(s){return AW(s)&&s!==G.ABORTED})(r.code)){let o=i.Pa.shift();Js(i).N_(),yield FF(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield wv(i)}})})(n,e)),LF(n)&&VF(n)})}function y2(n,e){return C(this,null,function*(){let t=xe(n);t.asyncQueue.verifyOperationInProgress(),oe(Cc,"RemoteStore received new credentials");let i=Sc(t);t.Ia.add(3),yield lf(t),i&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield bv(t)})}function mG(n,e){return C(this,null,function*(){let t=xe(n);e?(t.Ia.delete(2),yield bv(t)):e||(t.Ia.add(2),yield lf(t),t.Aa.set("Unknown"))})}function Du(n){return n.Va||(n.Va=(function(t,i,r){let o=xe(t);return o.ia(),new IS(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Zo:oG.bind(null,n),e_:sG.bind(null,n),n_:aG.bind(null,n),J_:cG.bind(null,n)}),n.da.push(e=>C(null,null,function*(){e?(n.Va.N_(),pT(n)?fT(n):n.Aa.set("Unknown")):(yield n.Va.stop(),OF(n))}))),n.Va}function Js(n){return n.ma||(n.ma=(function(t,i,r){let o=xe(t);return o.ia(),new CS(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:dG.bind(null,n),n_:pG.bind(null,n),ea:hG.bind(null,n),ta:fG.bind(null,n)}),n.da.push(e=>C(null,null,function*(){e?(n.ma.N_(),yield wv(n)):(yield n.ma.stop(),n.Pa.length>0&&(oe(Cc,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var AS=class n{constructor(e,t,i,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,o){let s=Date.now()+i,a=new n(e,t,s,r,o);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function mT(n,e){if(zo("AsyncQueue",`${e}: ${n}`),Tu(n))return new ne(G.UNAVAILABLE,`${e}: ${n}`);throw n}var Jy=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||me.comparator(t.key,i.key):(t,i)=>me.comparator(t.key,i.key),this.keyedMap=zh(),this.sortedSet=new Bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var ev=class{constructor(){this.fa=new Bt(me.comparator)}track(e){let t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ve(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,i)=>{e.push(i)}),e}},wu=class n{constructor(e,t,i,r,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,i,r,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Jy.emptySet(t),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var MS=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},PS=class{constructor(){this.queries=v2(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){let r=xe(t),o=r.queries;r.queries=v2(),o.forEach((s,a)=>{for(let c of a.wa)c.onError(i)})})(this,new ne(G.ABORTED,"Firestore shutting down"))}};function v2(){return new Go(n=>lF(n),yv)}function BF(n,e){return C(this,null,function*(){let t=xe(n),i=3,r=e.query,o=t.queries.get(r);o?!o.Sa()&&e.ba()&&(i=2):(o=new MS,i=e.ba()?0:1);try{switch(i){case 0:o.ya=yield t.onListen(r,!0);break;case 1:o.ya=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(s){let a=mT(s,`Initialization of query '${au(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&gT(t)})}function jF(n,e){return C(this,null,function*(){let t=xe(n),i=e.query,r=3,o=t.queries.get(i);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?r=e.ba()?0:1:!o.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function gG(n,e){let t=xe(n),i=!1;for(let r of e){let o=r.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(r)&&(i=!0);s.ya=r}}i&&gT(t)}function yG(n,e,t){let i=xe(n),r=i.queries.get(e);if(r)for(let o of r.wa)o.onError(t);i.queries.delete(e)}function gT(n){n.Da.forEach(e=>{e.next()})}var RS,_2;(_2=RS||(RS={})).Fa="default",_2.Cache="cache";var tv=class{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new wu(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=wu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==RS.Cache}};var nv=class{constructor(e){this.key=e}},iv=class{constructor(e){this.key=e}},kS=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ve(),this.mutatedKeys=Ve(),this.Xa=uF(e),this.eu=new Jy(this.Xa)}get tu(){return this.Ha}nu(e,t){let i=t?t.ru:new ev,r=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,h)=>{let f=r.get(u),y=vv(this.query,h)?h:null,b=!!f&&this.mutatedKeys.has(f.key),E=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),I=!1;f&&y?f.data.isEqual(y.data)?b!==E&&(i.track({type:3,doc:y}),I=!0):this.iu(f,y)||(i.track({type:2,doc:y}),I=!0,(c&&this.Xa(y,c)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!f&&y?(i.track({type:0,doc:y}),I=!0):f&&!y&&(i.track({type:1,doc:f}),I=!0,(c||l)&&(a=!0)),I&&(y?(s=s.add(y),o=E?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),i.track({type:1,doc:u})}return{eu:s,ru:i,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((u,h)=>(function(y,b){let E=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{At:I})}};return E(y)-E(b)})(u.type,h.type)||this.Xa(u.doc,h.doc)),this.su(i),r=r!=null&&r;let a=t&&!r?this.ou():[],c=this.Za.size===0&&this.current&&!r?1:0,l=c!==this.Ya;return this.Ya=c,s.length!==0||l?{snapshot:new wu(this.query,e.eu,o,s,e.mutatedKeys,c===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new ev,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Ve(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});let t=[];return e.forEach(i=>{this.Za.has(i)||t.push(new iv(i))}),this.Za.forEach(i=>{e.has(i)||t.push(new nv(i))}),t}uu(e){this.Ha=e.qs,this.Za=Ve();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return wu.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},yT="SyncEngine",NS=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},OS=class{constructor(e){this.key=e,this.lu=!1}},FS=class{constructor(e,t,i,r,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Go(a=>lF(a),yv),this.Tu=new Map,this.Iu=new Set,this.du=new Bt(me.comparator),this.Eu=new Map,this.Au=new of,this.Ru={},this.Vu=new Map,this.mu=rf.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function vG(n,e,t=!0){return C(this,null,function*(){let i=WF(n),r,o=i.Pu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.cu()):r=yield UF(i,e,t,!0),r})}function _G(n,e){return C(this,null,function*(){let t=WF(n);yield UF(t,e,!0,!1)})}function UF(n,e,t,i){return C(this,null,function*(){let r=yield nG(n.localStore,Xr(e)),o=r.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return i&&(a=yield bG(n,e,o,s==="current",r.resumeToken)),n.isPrimaryClient&&t&&kF(n.remoteStore,r),a})}function bG(n,e,t,i,r){return C(this,null,function*(){n.gu=(h,f,y)=>(function(E,I,R,F){return C(this,null,function*(){let B=I.view.nu(R);B.Ds&&(B=yield p2(E.localStore,I.query,!1).then(({documents:x})=>I.view.nu(x,B)));let z=F&&F.targetChanges.get(I.targetId),$=F&&F.targetMismatches.get(I.targetId)!=null,U=I.view.applyChanges(B,E.isPrimaryClient,z,$);return w2(E,I.targetId,U._u),U.snapshot})})(n,h,f,y);let o=yield p2(n.localStore,e,!0),s=new kS(e,o.qs),a=s.nu(o.documents),c=tf.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),l=s.applyChanges(a,n.isPrimaryClient,c);w2(n,t,l._u);let u=new NS(e,t,s);return n.Pu.set(e,u),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function wG(n,e,t){return C(this,null,function*(){let i=xe(n),r=i.Pu.get(e),o=i.Tu.get(r.targetId);if(o.length>1)return i.Tu.set(r.targetId,o.filter(s=>!yv(s,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield gS(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&dT(i.remoteStore,r.targetId),LS(i,r.targetId)}).catch(Su))):(LS(i,r.targetId),yield gS(i.localStore,r.targetId,!0))})}function EG(n,e){return C(this,null,function*(){let t=xe(n),i=t.Pu.get(e),r=t.Tu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),dT(t.remoteStore,i.targetId))})}function IG(n,e,t){return C(this,null,function*(){let i=MG(n);try{let r=yield(function(s,a){let c=xe(s),l=Vt.now(),u=a.reduce((y,b)=>y.add(b.key),Ve()),h,f;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=Ko(),E=Ve();return c.Os.getEntries(y,u).next(I=>{b=I,b.forEach((R,F)=>{F.isValidDocument()||(E=E.add(R))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,b)).next(I=>{h=I;let R=[];for(let F of a){let B=xW(F,h.get(F.key).overlayedDocument);B!=null&&R.push(new to(F.key,B,nF(B.value.mapValue),Zr.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,R,a)}).next(I=>{f=I;let R=I.applyToLocalDocumentSet(h,E);return c.documentOverlayCache.saveOverlays(y,I.batchId,R)})}).then(()=>({batchId:f.batchId,changes:hF(h)}))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(s,a,c){let l=s.Ru[s.currentUser.toKey()];l||(l=new Bt(ke)),l=l.insert(a,c),s.Ru[s.currentUser.toKey()]=l})(i,r.batchId,t),yield uf(i,r.changes),yield wv(i.remoteStore)}catch(r){let o=mT(r,"Failed to persist write");t.reject(o)}})}function $F(n,e){return C(this,null,function*(){let t=xe(n);try{let i=yield JW(t.localStore,e);e.targetChanges.forEach((r,o)=>{let s=t.Eu.get(o);s&&(Je(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?s.lu=!0:r.modifiedDocuments.size>0?Je(s.lu,14607):r.removedDocuments.size>0&&(Je(s.lu,42227),s.lu=!1))}),yield uf(t,i,e)}catch(i){yield Su(i)}})}function b2(n,e,t){let i=xe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&r.push(a.snapshot)}),(function(s,a){let c=xe(s);c.onlineState=a;let l=!1;c.queries.forEach((u,h)=>{for(let f of h.wa)f.va(a)&&(l=!0)}),l&&gT(c)})(i.eventManager,e),r.length&&i.hu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function CG(n,e,t){return C(this,null,function*(){let i=xe(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Eu.get(e),o=r&&r.key;if(o){let s=new Bt(me.comparator);s=s.insert(o,yr.newNoDocument(o,Me.min()));let a=Ve().add(o),c=new jy(Me.min(),new Map,new Bt(ke),s,a);yield $F(i,c),i.du=i.du.remove(o),i.Eu.delete(e),vT(i)}else yield gS(i.localStore,e,!1).then(()=>LS(i,e,t)).catch(Su)})}function SG(n,e){return C(this,null,function*(){let t=xe(n),i=e.batch.batchId;try{let r=yield ZW(t.localStore,e);zF(t,i,null),HF(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield uf(t,r)}catch(r){yield Su(r)}})}function TG(n,e,t){return C(this,null,function*(){let i=xe(n);try{let r=yield(function(s,a){let c=xe(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(h=>(Je(h!==null,37113),u=h.keys(),c.mutationQueue.removeMutationBatch(l,h))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})})(i.localStore,e);zF(i,e,t),HF(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield uf(i,r)}catch(r){yield Su(r)}})}function HF(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function zF(n,e,t){let i=xe(n),r=i.Ru[i.currentUser.toKey()];if(r){let o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),i.Ru[i.currentUser.toKey()]=r}}function LS(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(i=>{n.Au.containsKey(i)||qF(n,i)})}function qF(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(dT(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),vT(n))}function w2(n,e,t){for(let i of t)i instanceof nv?(n.Au.addReference(i.key,e),DG(n,i)):i instanceof iv?(oe(yT,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||qF(n,i.key)):ve(19791,{yu:i})}function DG(n,e){let t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(oe(yT,"New document in limbo: "+t),n.Iu.add(i),vT(n))}function vT(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new me(xt.fromString(e)),i=n.mu.next();n.Eu.set(i,new OS(t)),n.du=n.du.insert(t,i),kF(n.remoteStore,new nf(Xr(aT(t.path)),i,"TargetPurposeLimboResolution",JS.ue))}}function uf(n,e,t){return C(this,null,function*(){let i=xe(n),r=[],o=[],s=[];i.Pu.isEmpty()||(i.Pu.forEach((a,c)=>{s.push(i.gu(c,e,t).then(l=>{var u;if((l||t)&&i.isPrimaryClient){let h=l?!l.fromCache:(u=t?.targetChanges.get(c.targetId))===null||u===void 0?void 0:u.current;i.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(l){r.push(l);let h=hS.Es(c.targetId,l);o.push(h)}}))}),yield Promise.all(s),i.hu.J_(r),yield(function(c,l){return C(this,null,function*(){let u=xe(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>X.forEach(l,f=>X.forEach(f.Is,y=>u.persistence.referenceDelegate.addReference(h,f.targetId,y)).next(()=>X.forEach(f.ds,y=>u.persistence.referenceDelegate.removeReference(h,f.targetId,y)))))}catch(h){if(!Tu(h))throw h;oe(uT,"Failed to update sequence numbers: "+h)}for(let h of l){let f=h.targetId;if(!h.fromCache){let y=u.Fs.get(f),b=y.snapshotVersion,E=y.withLastLimboFreeSnapshotVersion(b);u.Fs=u.Fs.insert(f,E)}}})})(i.localStore,o))})}function xG(n,e){return C(this,null,function*(){let t=xe(n);if(!t.currentUser.isEqual(e)){oe(yT,"User change. New user:",e.toKey());let i=yield PF(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(c=>{c.reject(new ne(G.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield uf(t,i.Bs)}})}function AG(n,e){let t=xe(n),i=t.Eu.get(e);if(i&&i.lu)return Ve().add(i.key);{let r=Ve(),o=t.Tu.get(e);if(!o)return r;for(let s of o){let a=t.Pu.get(s);r=r.unionWith(a.view.tu)}return r}}function WF(n){let e=xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$F.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CG.bind(null,e),e.hu.J_=gG.bind(null,e.eventManager),e.hu.pu=yG.bind(null,e.eventManager),e}function MG(n){let e=xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TG.bind(null,e),e}var GF=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return C(this,null,function*(){this.serializer=_v(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,i){return null}Fu(t,i){return null}vu(t){return XW(this.persistence,new pS,t.initialUser,this.serializer)}Du(t){return new Wy(dS.Vi,this.serializer)}bu(t){return new yS}terminate(){return C(this,null,function*(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),VS=class extends GF{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Je(this.persistence.referenceDelegate instanceof Gy,46915);let i=this.persistence.referenceDelegate.garbageCollector;return new ZC(i,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Yi.withCacheSize(this.cacheSizeBytes):Yi.DEFAULT;return new Wy(i=>Gy.Vi(i,t),this.serializer)}};var PG=(()=>{class n{initialize(t,i){return C(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>b2(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=xG.bind(null,this.syncEngine),yield mG(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new PS})()}createDatastore(t){let i=_v(t.databaseInfo.databaseId),r=(function(s){return new ES(s)})(t.databaseInfo);return(function(s,a,c,l){return new TS(s,a,c,l)})(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return(function(r,o,s,a,c){return new xS(r,o,s,a,c)})(this.localStore,this.datastore,t.asyncQueue,i=>b2(this.syncEngine,i,0),(function(){return Yy.C()?new Yy:new vS})())}createSyncEngine(t,i){return(function(o,s,a,c,l,u,h){let f=new FS(o,s,a,c,l,u);return h&&(f.fu=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}terminate(){return C(this,null,function*(){var t,i;yield(function(o){return C(this,null,function*(){let s=xe(o);oe(Cc,"RemoteStore shutting down."),s.Ia.add(5),yield lf(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()})}}return n.provider={build:()=>new n},n})();var rv=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):zo("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var ea="FirestoreClient",BS=class{constructor(e,t,i,r,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=hn.UNAUTHENTICATED,this.clientId=Yh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,s=>C(this,null,function*(){oe(ea,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(oe(ea,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>C(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=mT(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function uC(n,e){return C(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),oe(ea,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>C(null,null,function*(){i.isEqual(r)||(yield PF(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>{Ks("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{oe("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(r=>{Ks("Terminating Firestore due to IndexedDb database deletion failed",r)})}),n._offlineComponents=e})}function E2(n,e){return C(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield RG(n);oe(ea,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>y2(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>y2(e.remoteStore,r)),n._onlineComponents=e})}function RG(n){return C(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){oe(ea,"Using user provided OfflineComponentProvider");try{yield uC(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===G.FAILED_PRECONDITION||r.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Ks("Error using user provided cache. Falling back to memory cache: "+t),yield uC(n,new GF)}}else oe(ea,"Using default OfflineComponentProvider"),yield uC(n,new VS(void 0));return n._offlineComponents})}function KF(n){return C(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(oe(ea,"Using user provided OnlineComponentProvider"),yield E2(n,n._uninitializedComponentsProvider._online)):(oe(ea,"Using default OnlineComponentProvider"),yield E2(n,new PG))),n._onlineComponents})}function kG(n){return KF(n).then(e=>e.syncEngine)}function jS(n){return C(this,null,function*(){let e=yield KF(n),t=e.eventManager;return t.onListen=vG.bind(null,e.syncEngine),t.onUnlisten=wG.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=_G.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=EG.bind(null,e.syncEngine),t})}function NG(n,e,t={}){let i=new Yr;return n.asyncQueue.enqueueAndForget(()=>C(null,null,function*(){return(function(o,s,a,c,l){let u=new rv({next:f=>{u.Ou(),s.enqueueAndForget(()=>jF(o,h)),f.fromCache&&c.source==="server"?l.reject(new ne(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(f)},error:f=>l.reject(f)}),h=new tv(a,u,{includeMetadataChanges:!0,ka:!0});return BF(o,h)})(yield jS(n),n.asyncQueue,e,t,i)})),i.promise}function YF(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var I2=new Map;var QF="firestore.googleapis.com",C2=!0,ov=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=QF,this.ssl=C2}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:C2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=MF;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<KW)throw new ne(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Gq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YF((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ne(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ne(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ne(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Eu=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ov({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ov(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new dC;switch(i.type){case"firstParty":return new mC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ne(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return C(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let i=I2.get(t);i&&(oe("ComponentProvider","Removing Datastore"),I2.delete(t),i.terminate())})(this),Promise.resolve()}};function XF(n,e,t,i={}){var r;n=Xi(n,Eu);let o=go(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&(zc(`https://${c}`),qc("Firestore",!0)),s.host!==QF&&s.host!==c&&Ks("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:i});if(!cs(l,a)&&(n._setSettings(l),i.mockUserToken)){let u,h;if(typeof i.mockUserToken=="string")u=i.mockUserToken,h=hn.MOCK_USER;else{u=cx(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new ne(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new hn(f)}n._authCredentials=new hC(new Ry(u,h))}}var ta=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},pn=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(cf(t,n._jsonSchema))return new n(e,i||null,new me(xt.fromString(t.referencePath)))}};pn._jsonSchemaVersion="firestore/documentReference/1.0",pn._jsonSchema={type:tn("string",pn._jsonSchemaVersion),referencePath:tn("string")};var zs=class n extends ta{constructor(e,t,i){super(e,t,aT(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new me(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function ZF(n,e,...t){if(n=rt(n),R2("collection","path",e),n instanceof Eu){let i=xt.fromString(e,...t);return $O(i),new zs(n,null,i)}{if(!(n instanceof pn||n instanceof zs))throw new ne(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(xt.fromString(e,...t));return $O(i),new zs(n.firestore,null,i)}}function _T(n,e,...t){if(n=rt(n),arguments.length===1&&(e=Yh.newId()),R2("doc","path",e),n instanceof Eu){let i=xt.fromString(e,...t);return UO(i),new pn(n,null,new me(i))}{if(!(n instanceof pn||n instanceof zs))throw new ne(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(xt.fromString(e,...t));return UO(i),new pn(n.firestore,n instanceof zs?n.converter:null,new me(i))}}var S2="AsyncQueue",sv=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Qy(this,"async_queue_retry"),this.oc=()=>{let i=lC();i&&oe(S2,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;let t=lC();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=lC();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Yr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return C(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Tu(e))throw e;oe(S2,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,zo("INTERNAL UNHANDLED ERROR: ",T2(i)),i}).then(i=>(this.nc=!1,i))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let r=AS.createAndSchedule(this,e,t,i,o=>this.lc(o));return this.ec.push(r),r}ac(){this.tc&&ve(47125,{hc:T2(this.tc)})}verifyOperationInProgress(){}Pc(){return C(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function T2(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function D2(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;let r=t;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1})(n,["next","error","complete"])}var no=class extends Eu{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new sv,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return C(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new sv(e),this._firestoreClient=void 0,yield e}})}};function JF(n,e){let t=typeof n=="object"?n:Sr(),i=typeof n=="string"?n:e||Ly,r=ls(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let o=Xf("firestore");o&&XF(r,...o)}return r}function bT(n){if(n._terminated)throw new ne(G.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||OG(n),n._firestoreClient}function OG(n){var e,t,i;let r=n._freezeSettings(),o=(function(a,c,l,u){return new bC(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,YF(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new BS(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var qs=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(zn.fromBase64String(e))}catch(t){throw new ne(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(zn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(cf(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};qs._jsonSchemaVersion="firestore/bytes/1.0",qs._jsonSchema={type:tn("string",qs._jsonSchemaVersion),bytes:tn("string")};var Iu=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ne(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ai(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Yo=class{constructor(e){this._methodName=e}};var Ws=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ne(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ne(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(cf(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Ws._jsonSchemaVersion="firestore/geoPoint/1.0",Ws._jsonSchema={type:tn("string",Ws._jsonSchemaVersion),latitude:tn("number"),longitude:tn("number")};var Gs=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(cf(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new ne(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Gs._jsonSchemaVersion="firestore/vectorValue/1.0",Gs._jsonSchema={type:tn("string",Gs._jsonSchemaVersion),vectorValues:tn("object")};var FG=/^__.*__$/,US=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new to(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ic(e,this.data,t,this.fieldTransforms)}},av=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new to(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function eL(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{Ec:n})}}var cv=class n{constructor(e,t,i,r,o,s){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Rc({path:i,mc:!1});return r.fc(e),r}gc(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return uv(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(eL(this.Ec)&&FG.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},$S=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||_v(e)}Dc(e,t,i,r=!1){return new cv({Ec:e,methodName:t,bc:i,path:Ai.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ev(n){let e=n._freezeSettings(),t=_v(n._databaseId);return new $S(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tL(n,e,t,i,r,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,r);wT("Data must be an object, but it was:",s,i);let a=iL(i,s),c,l;if(o.merge)c=new Qi(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let u=[];for(let h of o.mergeFields){let f=GS(e,h,t);if(!s.contains(f))throw new ne(G.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);oL(u,f)||u.push(f)}c=new Qi(u),l=s.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=s.fieldTransforms;return new US(new xi(a),c,l)}var lv=class n extends Yo{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function nL(n,e,t){return new cv({Ec:3,bc:e.settings.bc,methodName:n._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var HS=class n extends Yo{_toFieldTransform(e){return new _u(e.path,new wc)}isEqual(e){return e instanceof n}},zS=class n extends Yo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=nL(this,e,!0),i=this.vc.map(o=>Tc(o,t)),r=new Xs(i);return new _u(e.path,r)}isEqual(e){return e instanceof n&&cs(this.vc,e.vc)}},qS=class n extends Yo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=nL(this,e,!0),i=this.vc.map(o=>Tc(o,t)),r=new Zs(i);return new _u(e.path,r)}isEqual(e){return e instanceof n&&cs(this.vc,e.vc)}},WS=class n extends Yo{constructor(e,t){super(e),this.Cc=t}_toFieldTransform(e){let t=new Ec(e.serializer,mF(e.serializer,this.Cc));return new _u(e.path,t)}isEqual(e){return e instanceof n&&this.Cc===e.Cc}};function LG(n,e,t,i){let r=n.Dc(1,e,t);wT("Data must be an object, but it was:",r,i);let o=[],s=xi.empty();na(i,(c,l)=>{let u=ET(e,c,t);l=rt(l);let h=r.gc(u);if(l instanceof lv)o.push(u);else{let f=Tc(l,h);f!=null&&(o.push(u),s.set(u,f))}});let a=new Qi(o);return new av(s,a,r.fieldTransforms)}function VG(n,e,t,i,r,o){let s=n.Dc(1,e,t),a=[GS(e,i,t)],c=[r];if(o.length%2!=0)throw new ne(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<o.length;f+=2)a.push(GS(e,o[f])),c.push(o[f+1]);let l=[],u=xi.empty();for(let f=a.length-1;f>=0;--f)if(!oL(l,a[f])){let y=a[f],b=c[f];b=rt(b);let E=s.gc(y);if(b instanceof lv)l.push(y);else{let I=Tc(b,E);I!=null&&(l.push(y),u.set(y,I))}}let h=new Qi(l);return new av(u,h,s.fieldTransforms)}function BG(n,e,t,i=!1){return Tc(t,n.Dc(i?4:3,e))}function Tc(n,e){if(rL(n=rt(n)))return wT("Unsupported field value:",e,n),iL(n,e);if(n instanceof Yo)return(function(i,r){if(!eL(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,r){let o=[],s=0;for(let a of i){let c=Tc(a,r.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(n,e)}return(function(i,r){if((i=rt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return mF(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=Vt.fromDate(i);return{timestampValue:zy(r.serializer,o)}}if(i instanceof Vt){let o=new Vt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:zy(r.serializer,o)}}if(i instanceof Ws)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof qs)return{bytesValue:IF(r.serializer,i._byteString)};if(i instanceof pn){let o=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(o))throw r.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:lT(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Gs)return(function(s,a){return{mapValue:{fields:{[nT]:{stringValue:iT},[pu]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return cT(a.serializer,l)})}}}}}})(i,r);throw r.wc(`Unsupported field value: ${pv(i)}`)})(n,e)}function iL(n,e){let t={};return K2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):na(n,(i,r)=>{let o=Tc(r,e.Vc(i));o!=null&&(t[i]=o)}),{mapValue:{fields:t}}}function rL(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Vt||n instanceof Ws||n instanceof qs||n instanceof pn||n instanceof Yo||n instanceof Gs)}function wT(n,e,t){if(!rL(t)||!k2(t)){let i=pv(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function GS(n,e,t){if((e=rt(e))instanceof Iu)return e._internalPath;if(typeof e=="string")return ET(n,e);throw uv("Field path arguments must be of type string or ",n,!1,void 0,t)}var jG=new RegExp("[~\\*/\\[\\]]");function ET(n,e,t){if(e.search(jG)>=0)throw uv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Iu(...e.split("."))._internalPath}catch{throw uv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function uv(n,e,t,i,r){let o=i&&!i.isEmpty(),s=r!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${i}`),s&&(c+=` in document ${r}`),c+=")"),new ne(G.INVALID_ARGUMENT,a+n+c)}function oL(n,e){return n.some(t=>t.isEqual(e))}var dv=class{constructor(e,t,i,r,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new KS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Iv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},KS=class extends dv{data(){return super.data()}};function Iv(n,e){return typeof e=="string"?ET(n,e):e instanceof Iu?e._internalPath:e._delegate._internalPath}function sL(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ne(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var sf=class{},hv=class extends sf{};function aL(n,e,...t){let i=[];e instanceof sf&&i.push(e),i=i.concat(t),(function(o){let s=o.filter(c=>c instanceof YS).length,a=o.filter(c=>c instanceof fv).length;if(s>1||s>0&&a>0)throw new ne(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(let r of i)n=r._apply(n);return n}var fv=class n extends hv{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return uL(e._query,t),new ta(e.firestore,e.converter,kC(e._query,t))}_parse(e){let t=Ev(e.firestore);return(function(o,s,a,c,l,u,h){let f;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ne(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){A2(h,u);let b=[];for(let E of h)b.push(x2(c,o,E));f={arrayValue:{values:b}}}else f=x2(c,o,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||A2(h,u),f=BG(a,s,h,u==="in"||u==="not-in");return en.create(l,u,f)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function cL(n,e,t){let i=e,r=Iv("where",n);return fv._create(r,i,t)}var YS=class n extends sf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:vr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(r,o){let s=r,a=o.getFlattenedFilters();for(let c of a)uL(s,c),s=kC(s,c)})(e._query,t),new ta(e.firestore,e.converter,kC(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var QS=class n extends hv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(r,o,s){if(r.startAt!==null)throw new ne(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ne(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bc(o,s)})(e._query,this._field,this._direction);return new ta(e.firestore,e.converter,(function(r,o){let s=r.explicitOrderBy.concat([o]);return new Qs(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,t))}};function lL(n,e="asc"){let t=e,i=Iv("orderBy",n);return QS._create(i,t)}function x2(n,e,t){if(typeof(t=rt(t))=="string"){if(t==="")throw new ne(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cF(e)&&t.indexOf("/")!==-1)throw new ne(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(xt.fromString(t));if(!me.isDocumentKey(i))throw new ne(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return YO(n,new me(i))}if(t instanceof pn)return YO(n,t._key);throw new ne(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pv(t)}.`)}function A2(n,e){if(!Array.isArray(n)||n.length===0)throw new ne(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uL(n,e){let t=(function(r,o){for(let s of r)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ne(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var XS=class{convertValue(e,t="none"){switch(Ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return na(e,(r,o)=>{i[r]=this.convertValue(o,t)}),i}convertVectorValue(e){var t,i,r;let o=(r=(i=(t=e.fields)===null||t===void 0?void 0:t[pu].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(s=>Dt(s.doubleValue));return new Gs(o)}convertGeoPoint(e){return new Ws(Dt(e.latitude),Dt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=gv(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Zh(e));default:return null}}convertTimestamp(e){let t=qo(e);return new Vt(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=xt.fromString(e);Je(AF(i),9688,{name:e});let r=new Vy(i.get(1),i.get(3)),o=new me(i.popFirst(5));return r.isEqual(t)||zo(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function dL(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var mc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},gc=class n extends dv{constructor(e,t,i,r,o,s){super(e,t,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new hu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(Iv("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};gc._jsonSchemaVersion="firestore/documentSnapshot/1.0",gc._jsonSchema={type:tn("string",gc._jsonSchemaVersion),bundleSource:tn("string","DocumentSnapshot"),bundleName:tn("string"),bundle:tn("string")};var hu=class extends gc{data(e={}){return super.data(e)}},yc=class n{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new mc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new hu(this._firestore,this._userDataWriter,i.key,i,new mc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ne(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(a=>{let c=new hu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new mc(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new hu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new mc(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),l=-1,u=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:UG(a.type),doc:c,oldIndex:l,newIndex:u}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Yh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function UG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:n})}}yc._jsonSchemaVersion="firestore/querySnapshot/1.0",yc._jsonSchema={type:tn("string",yc._jsonSchemaVersion),bundleSource:tn("string","QuerySnapshot"),bundleName:tn("string"),bundle:tn("string")};var af=class extends XS{constructor(e){super(),this.firestore=e}convertBytes(e){return new qs(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,t)}};function hL(n){n=Xi(n,ta);let e=Xi(n.firestore,no),t=bT(e),i=new af(e);return sL(n._query),NG(t,n._query).then(r=>new yc(e,i,n,r))}function fL(n,e,t){n=Xi(n,pn);let i=Xi(n.firestore,no),r=dL(n.converter,e,t);return Cv(i,[tL(Ev(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Zr.none())])}function pL(n,e,t,...i){n=Xi(n,pn);let r=Xi(n.firestore,no),o=Ev(r),s;return s=typeof(e=rt(e))=="string"||e instanceof Iu?VG(o,"updateDoc",n._key,e,t,i):LG(o,"updateDoc",n._key,e),Cv(r,[s.toMutation(n._key,Zr.exists(!0))])}function mL(n){return Cv(Xi(n.firestore,no),[new ef(n._key,Zr.none())])}function gL(n,e){let t=Xi(n.firestore,no),i=_T(n),r=dL(n.converter,e);return Cv(t,[tL(Ev(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Zr.exists(!1))]).then(()=>i)}function IT(n,...e){var t,i,r;n=rt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||D2(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(D2(e[s])){let h=e[s];e[s]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[s+1]=(i=h.error)===null||i===void 0?void 0:i.bind(h),e[s+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}let c,l,u;if(n instanceof pn)l=Xi(n.firestore,no),u=aT(n._key.path),c={next:h=>{e[s]&&e[s]($G(l,n,h))},error:e[s+1],complete:e[s+2]};else{let h=Xi(n,ta);l=Xi(h.firestore,no),u=h._query;let f=new af(l);c={next:y=>{e[s]&&e[s](new yc(l,f,h,y))},error:e[s+1],complete:e[s+2]},sL(n._query)}return(function(f,y,b,E){let I=new rv(E),R=new tv(y,I,b);return f.asyncQueue.enqueueAndForget(()=>C(null,null,function*(){return BF(yield jS(f),R)})),()=>{I.Ou(),f.asyncQueue.enqueueAndForget(()=>C(null,null,function*(){return jF(yield jS(f),R)}))}})(bT(l),u,a,c)}function Cv(n,e){return(function(i,r){let o=new Yr;return i.asyncQueue.enqueueAndForget(()=>C(null,null,function*(){return IG(yield kG(i),r,o)})),o.promise})(bT(n),e)}function $G(n,e,t){let i=t.docs.get(e._key),r=new af(n);return new gc(n,r,e._key,i,new mc(t.hasPendingWrites,t.fromCache),e.converter)}function Mi(){return new HS("serverTimestamp")}function Dc(...n){return new zS("arrayUnion",n)}function Sv(...n){return new qS("arrayRemove",n)}function yL(n){return new WS("increment",n)}(function(e,t=!0){(function(r){Cu=r})(us),Cr(new Ir("firestore",(i,{instanceIdentifier:r,options:o})=>{let s=i.getProvider("app").getImmediate(),a=new no(new fC(i.getProvider("auth-internal")),new gC(s,i.getProvider("app-check-internal")),(function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ne(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vy(l.options.projectId,u)})(s,r),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ht(LO,VO,e),ht(LO,VO,"esm2017")})();var Tv=function(){return Tv=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Tv.apply(this,arguments)};var qG={includeMetadataChanges:!1};function CT(n,e){return e===void 0&&(e=qG),new ye(function(t){var i=IT(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:i}})}function vL(n){return CT(n,{includeMetadataChanges:!0})}function _L(n,e){return e===void 0&&(e={}),vL(n).pipe(se(function(t){return ST(t,e)}))}function ST(n,e){var t;e===void 0&&(e={});var i=n.data(e);return!n.exists()||typeof i!="object"||i===null||!e.idField?i:Tv(Tv({},i),(t={},t[e.idField]=n.id,t))}function bL(n){return CT(n,{includeMetadataChanges:!0}).pipe(se(function(e){return e.docs}))}function wL(n,e){return e===void 0&&(e={}),bL(n).pipe(se(function(t){return t.map(function(i){return ST(i,e)})}))}var lt=class{constructor(e){return e}},EL="firestore",TT=class{constructor(){return zr(EL)}};var DT=new ae("angularfire2.firestore-instances");function WG(n,e){let t=Fo(EL,n,e);return t&&new lt(t)}function GG(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new lt(i)}}var KG={provide:TT,deps:[[new Mt,DT]]},YG={provide:lt,useFactory:WG,deps:[[new Mt,DT],Ti]};function IL(n,...e){return ht("angularfire",Gi.full,"fst"),bn([YG,KG,{provide:DT,useFactory:GG(n),multi:!0,deps:[He,ft,Ki,mr,[new Mt,Uo],[new Mt,qr],...e]}])}var qn=Le(wL,!0);var Pi=Le(_L,!0);var Zi=Le(gL,!0,2);var _t=Le(ZF,!0,2);var _r=Le(mL,!0,2);var _e=Le(_T,!0,2);var xT=Le(hL,!0);var CL=Le(JF,!0);var SL=Le(yL,!0,2);var xu=Le(lL,!0,2),Ri=Le(aL,!0,2);var TL=Le(fL,!0,2);var et=Le(pL,!0,2);var io=Le(cL,!0,2);var Ru=rx(vx());var ia=class n{currentLanguage=Ct("english");language=ni(()=>this.currentLanguage());translations={"nav.home":{english:"Home",filipino:"Tahanan"},"nav.help":{english:"Help",filipino:"Tulong"},"nav.settings":{english:"Settings",filipino:"Mga Setting"},"nav.admin":{english:"Admin",filipino:"Admin"},"nav.newReport":{english:"New Report",filipino:"Bagong Ulat"},"nav.myProfile":{english:"My Profile",filipino:"Aking Profile"},"nav.logout":{english:"Logout",filipino:"Mag-logout"},"admin.reportsManagement":{english:"Reports Management",filipino:"Pamamahala ng mga Ulat"},"admin.announcements":{english:"Announcements",filipino:"Mga Pabatid"},"admin.usersControl":{english:"Users Control",filipino:"Kontrol ng mga User"},"admin.barangays":{english:"Barangays",filipino:"Mga Barangay"},"admin.analytics":{english:"Analytics",filipino:"Analytics"},"admin.goToHome":{english:"Go to Home",filipino:"Bumalik sa Tahanan"},"status.all":{english:"All",filipino:"Lahat"},"status.pending":{english:"Pending",filipino:"Naghihintay"},"status.inProgress":{english:"In Progress",filipino:"Isinasagawa"},"status.done":{english:"Done",filipino:"Tapos Na"},"type.water":{english:"Water",filipino:"Tubig"},"type.air":{english:"Air",filipino:"Hangin"},"type.land":{english:"Land",filipino:"Lupa"},"action.edit":{english:"Edit",filipino:"I-edit"},"action.delete":{english:"Delete",filipino:"Tanggalin"},"action.save":{english:"Save",filipino:"I-save"},"action.cancel":{english:"Cancel",filipino:"Kanselahin"},"action.submit":{english:"Submit",filipino:"Isumite"},"action.update":{english:"Update",filipino:"I-update"},"action.search":{english:"Search",filipino:"Maghanap"},"action.filter":{english:"Filter",filipino:"I-filter"},"action.create":{english:"Create",filipino:"Lumikha"},"action.view":{english:"View",filipino:"Tingnan"},"action.close":{english:"Close",filipino:"Isara"},"action.confirm":{english:"Confirm",filipino:"Kumpirmahin"},"label.reportedBy":{english:"Reported by",filipino:"Nag-ulat"},"label.location":{english:"Location",filipino:"Lokasyon"},"label.description":{english:"Description",filipino:"Deskripsyon"},"label.status":{english:"Status",filipino:"Katayuan"},"label.type":{english:"Type",filipino:"Uri"},"label.date":{english:"Date",filipino:"Petsa"},"label.time":{english:"Time",filipino:"Oras"},"label.image":{english:"Image",filipino:"Larawan"},"label.images":{english:"Images",filipino:"Mga Larawan"},"label.comments":{english:"Comments",filipino:"Mga Komento"},"label.upvotes":{english:"Upvotes",filipino:"Boto"},"label.posted":{english:"Posted",filipino:"Nai-post"},"label.created":{english:"Created",filipino:"Nilikha"},"settings.title":{english:"Settings",filipino:"Mga Setting"},"settings.language":{english:"Language",filipino:"Wika"},"settings.textSize":{english:"Text Size",filipino:"Laki ng Teksto"},"settings.theme":{english:"Theme",filipino:"Tema"},"settings.notifications":{english:"Notifications",filipino:"Mga Notipikasyon"},"settings.english":{english:"English",filipino:"Ingles"},"settings.filipino":{english:"Filipino",filipino:"Filipino"},"settings.small":{english:"Small",filipino:"Maliit"},"settings.medium":{english:"Medium",filipino:"Katamtaman"},"settings.large":{english:"Large",filipino:"Malaki"},"settings.light":{english:"Light",filipino:"Maliwanag"},"settings.dark":{english:"Dark",filipino:"Madilim"},"settings.changePassword":{english:"Change Password",filipino:"Palitan ang Password"},"settings.currentPassword":{english:"Current Password",filipino:"Kasalukuyang Password"},"settings.newPassword":{english:"New Password",filipino:"Bagong Password"},"settings.confirmPassword":{english:"Confirm Password",filipino:"Kumpirmahin ang Password"},"profile.title":{english:"Profile",filipino:"Profile"},"profile.fullName":{english:"Full Name",filipino:"Buong Pangalan"},"profile.email":{english:"Email",filipino:"Email"},"profile.username":{english:"Username",filipino:"Username"},"profile.contact":{english:"Contact",filipino:"Contact"},"profile.address":{english:"Address",filipino:"Address"},"profile.barangay":{english:"Barangay",filipino:"Barangay"},"profile.role":{english:"Role",filipino:"Tungkulin"},"profile.uploadPhoto":{english:"Upload Photo",filipino:"Mag-upload ng Larawan"},"help.title":{english:"Help & Support",filipino:"Tulong at Suporta"},"help.faq":{english:"Frequently Asked Questions",filipino:"Mga Madalas Itanong"},"help.contact":{english:"Contact Information",filipino:"Impormasyon sa Pakikipag-ugnayan"},"help.barangay":{english:"Barangay",filipino:"Barangay"},"help.adminEmail":{english:"Admin Email",filipino:"Admin Email"},"help.adminContact":{english:"Admin Contact",filipino:"Admin Contact"},"report.submit":{english:"Submit Report",filipino:"Magsumite ng Ulat"},"report.title":{english:"Report Pollution",filipino:"Mag-ulat ng Polusyon"},"report.selectType":{english:"Select Type",filipino:"Pumili ng Uri"},"report.selectLocation":{english:"Select Location",filipino:"Pumili ng Lokasyon"},"report.enterDescription":{english:"Enter Description",filipino:"Maglagay ng Deskripsyon"},"report.uploadImages":{english:"Upload Images",filipino:"Mag-upload ng Larawan"},"report.dateTaken":{english:"Date Taken",filipino:"Petsa ng Pagkuha"},"report.timeTaken":{english:"Time Taken",filipino:"Oras ng Pagkuha"},"message.success":{english:"Success!",filipino:"Tagumpay!"},"message.error":{english:"Error",filipino:"May Mali"},"message.loading":{english:"Loading...",filipino:"Naglo-load..."},"message.noData":{english:"No data available",filipino:"Walang available na data"},"message.confirmDelete":{english:"Are you sure you want to delete this?",filipino:"Sigurado ka bang gusto mong tanggalin ito?"},"auth.login":{english:"Login",filipino:"Mag-login"},"auth.signup":{english:"Sign Up",filipino:"Mag-sign Up"},"auth.emailOrUsername":{english:"Email or Username",filipino:"Email o Username"},"auth.password":{english:"Password",filipino:"Password"},"auth.forgotPassword":{english:"Forgot Password?",filipino:"Nakalimutan ang Password?"},"auth.dontHaveAccount":{english:"Don't have an account?",filipino:"Wala pang account?"},"auth.alreadyHaveAccount":{english:"Already have an account?",filipino:"Mayroon nang account?"},"auth.resetPassword":{english:"Reset Password",filipino:"I-reset ang Password"}};constructor(){}setLanguage(e){this.currentLanguage.set(e),document.documentElement.lang=e==="filipino"?"fil":"en"}translate(e){let t=this.translations[e];return t?t[this.currentLanguage()]:(console.warn(`Translation key not found: ${e}`),e)}t(e){return this.translate(e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};var Dv=class n{constructor(e){this.translationService=e;eg(()=>{this.translationService.language(),this.currentValue=""})}currentValue="";transform(e){return this.translationService.translate(e)}static \u0275fac=function(t){return new(t||n)(K(ia,16))};static \u0275pipe=Za({name:"translate",type:n,pure:!1})};var xc=class{constructor(e){return e}},DL="storage",MT=class{constructor(){return zr(DL)}};var PT=new ae("angularfire2.storage-instances");function QG(n,e){let t=Fo(DL,n,e);return t&&new xc(t)}function XG(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new xc(i)}}var ZG={provide:MT,deps:[[new Mt,PT]]},JG={provide:xc,useFactory:QG,deps:[[new Mt,PT],Ti]};function xL(n,...e){return ht("angularfire",Gi.full,"gcs"),bn([JG,ZG,{provide:PT,useFactory:XG(n),multi:!0,deps:[He,ft,Ki,mr,[new Mt,Uo],[new Mt,qr],...e]}])}var AL=Le(Qc,!0);var Au=Le(wx,!0);var Mu=Le(bx,!0,2);var ML=Le(_x,!0);var Ji=class n{constructor(e){this.firestore=e}storage=Au();parallelUploads=!0;addReport(e,t,i){return C(this,null,function*(){let r=_t(this.firestore,"reports"),o=t.images||[],s=[],a=o.length,c=(u,h)=>new Promise((f,y)=>{try{let b=Mu(this.storage,`reports/${e.uid}/${Date.now()}_${u.name}`);ud(b,u).on("state_changed",I=>{},I=>{y(I)},()=>C(this,null,function*(){try{let I=yield Qc(b);f(I)}catch(I){y(I)}}))}catch(b){y(b)}});if(this.parallelUploads){let u=o.map((f,y)=>c(f,y));if((yield Promise.all(u)).forEach(f=>s.push(f)),i)try{i(a,a)}catch{}}else for(let u=0;u<a;u++){let h=yield c(o[u],u);if(s.push(h),i)try{i(u+1,a)}catch{}}let l={type:t.type,location:t.location,date:t.dateTaken||new Date().toLocaleDateString(),time:t.timeTaken||new Date().toLocaleTimeString(),description:t.description,images:s,reporterId:e.uid,reporterName:e.username||e.fullName||e.email||"Anonymous",barangayId:t.barangayId||e?.barangay||null,status:"Pending",upvotes:0,approved:!1,createdAt:Mi()};yield Zi(r,l)})}saveReportWithUrls(e,t){return C(this,null,function*(){let i=_t(this.firestore,"reports"),r={type:t.type,location:t.location,date:t.dateTaken||new Date().toLocaleDateString(),time:t.timeTaken||new Date().toLocaleTimeString(),description:t.description,images:t.imageUrls||[],reporterId:e.uid,reporterName:e.username||e.fullName||e.email||"Anonymous",barangayId:t.barangayId||e?.barangay||null,status:"Pending",upvotes:0,lat:t.lat,lng:t.lng,comments:[],approved:!1,createdAt:Mi()};yield Zi(i,r)})}getAllReports(){let e=_t(this.firestore,"reports"),t=Ri(e,xu("createdAt","desc"));return qn(t,{idField:"id"})}getReportsByBarangay(e){let t=_t(this.firestore,"reports"),i=Ri(t,io("barangayId","==",e),xu("createdAt","desc"));return qn(i,{idField:"id"})}getPollutionTypes(){try{let e=_t(this.firestore,"pollutionTypes");return qn(e,{idField:"id"})}catch{return new ye(t=>{t.next([]),t.complete()})}}getLocations(){try{let e=_t(this.firestore,"locations");return qn(e,{idField:"id"})}catch{return new ye(t=>{t.next([]),t.complete()})}}getUserReports(e){let t=_t(this.firestore,"reports"),i=Ri(t,io("reporterId","==",e),xu("createdAt","desc"));return qn(i,{idField:"id"})}updateReport(e,t){return C(this,null,function*(){let i=_e(this.firestore,`reports/${e}`);yield et(i,t)})}upvoteReport(e,t){return C(this,null,function*(){let i=_e(this.firestore,`reports/${e}`);yield et(i,{upvotes:SL(1),upvotedBy:Dc(t)})})}deleteReport(e){return C(this,null,function*(){let t=_e(this.firestore,`reports/${e}`);yield _r(t)})}deleteReportWithImages(e,t){return C(this,null,function*(){if(t&&t.length>0){let{deleteObject:r,ref:o}=yield import("./chunk-WEYA5BQB.js");for(let s of t)try{let a=s.split("/o/");if(a.length>1){let c=a[1].split("?")[0],l=decodeURIComponent(c),u=o(this.storage,l);yield r(u),console.log("Deleted image from Storage:",l)}}catch(a){console.error("Failed to delete image from Storage:",s,a)}}let i=_e(this.firestore,`reports/${e}`);yield _r(i)})}addComment(e,t,i,r,o){return C(this,null,function*(){let s=_e(this.firestore,`reports/${e}`);yield et(s,{comments:Dc({userId:t,userName:i,userRole:r,text:o,createdAt:new Date})})})}static \u0275fac=function(t){return new(t||n)(le(lt))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};var Be=class n{constructor(e,t){this.auth=e;this.firestore=t;this.user$=AO(this.auth).pipe(Ke(i=>{if(i){let r=_e(this.firestore,`users/${i.uid}`);return Pi(r)}else return ce(null)}))}user$;register(e,t,i="user",r="",o,s,a,c){return C(this,null,function*(){if(c&&(yield this.checkUsernameExists(c)))throw new Error("Username already taken. Please choose a different one.");let l=yield MO(this.auth,e,t),u=_e(this.firestore,`users/${l.user.uid}`);yield TL(u,{uid:l.user.uid,email:l.user.email,username:c||"",fullName:o||"",contact:s||"",address:a||"",role:i,barangay:r,createdAt:new Date,settings:{language:"english",textSize:"medium",theme:"light",notifications:{email:!0,announcement:!0,upvote:!0}}})})}checkUsernameExists(e){return C(this,null,function*(){if(!e)return!1;let t=_t(this.firestore,"users"),i=Ri(t,io("username","==",e));return!(yield xT(i)).empty})}login(e,t){return C(this,null,function*(){let i=e;if(!e.includes("@")){let a=_t(this.firestore,"users"),c=Ri(a,io("username","==",e)),l=yield xT(c);if(l.empty)throw new Error("User not found. Please check your username or email.");if(i=l.docs[0].data().email||"",!i)throw new Error("No email associated with this username.")}let r=yield kO(this.auth,i,t),o=_e(this.firestore,`users/${r.user.uid}`);if((yield Pi(o).pipe(Qe(1)).toPromise())?.suspended===!0)throw yield JI(this.auth),new Error("Your account has been suspended. Please contact the administrator.")})}logout(){return C(this,null,function*(){yield JI(this.auth)})}resetPassword(e){return C(this,null,function*(){yield Iy(this.auth,e)})}updateSettings(e,t){return C(this,null,function*(){let i=_e(this.firestore,`users/${e}`);yield et(i,{settings:t})})}updateProfile(e,t){return C(this,null,function*(){let i=_e(this.firestore,`users/${e}`);yield et(i,t)})}getCurrentUserSync(){let e=null;return this.user$.pipe(Qe(1)).subscribe(t=>e=t),e}static \u0275fac=function(t){return new(t||n)(le(Di),le(lt))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};var ra=class n{constructor(e,t){this.firestore=e;this.auth=t}ensureCanPost(e){return C(this,null,function*(){let t=yield vn(this.auth.user$);if(!t||t.role!=="admin")throw new Error("Unauthorized: admin required");if(t.barangay&&!(e&&e===t.barangay))throw new Error("Unauthorized: cannot post announcement for this barangay")})}getAllAnnouncements(){let e=_t(this.firestore,"announcements"),t=Ri(e,xu("createdAt","desc"));return qn(t,{idField:"id"})}getAnnouncementsForBarangay(e){return this.getAllAnnouncements().pipe(se(t=>t.filter(i=>!i.barangayId||i.barangayId===e)))}createAnnouncement(e){return C(this,null,function*(){yield this.ensureCanPost(e.barangayId);let t=_t(this.firestore,"announcements"),i={title:e.title,subtitle:e.subtitle||"",description:e.description,date:e.date||null,location:e.location||"",barangayId:e.barangayId||null,createdAt:Mi()};yield Zi(t,i)})}postAnnouncement(e){return C(this,null,function*(){return this.createAnnouncement(e)})}deleteAnnouncement(e){return C(this,null,function*(){let t=_e(this.firestore,`announcements/${e}`);yield _r(t)})}static \u0275fac=function(t){return new(t||n)(le(lt),le(Be))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};var tK="type.googleapis.com/google.protobuf.Int64Value",nK="type.googleapis.com/google.protobuf.UInt64Value";function NL(n,e){let t={};for(let i in n)n.hasOwnProperty(i)&&(t[i]=e(n[i]));return t}function xv(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>xv(e));if(typeof n=="function"||typeof n=="object")return NL(n,e=>xv(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Pu(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case tK:case nK:{let e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Pu(e)):typeof n=="function"||typeof n=="object"?NL(n,e=>Pu(e)):n}var FT="functions";var PL={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},li=class n extends as{constructor(e,t,i){super(`${FT}/${e}`,t||""),this.details=i,Object.setPrototypeOf(this,n.prototype)}};function iK(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Av(n,e){let t=iK(n),i=t,r;try{let o=e&&e.error;if(o){let s=o.status;if(typeof s=="string"){if(!PL[s])return new li("internal","internal");t=PL[s],i=s}let a=o.message;typeof a=="string"&&(i=a),r=o.details,r!==void 0&&(r=Pu(r))}}catch{}return t==="ok"?null:new li(t,i,r)}var kT=class{constructor(e,t,i,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,kn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||t.get().then(o=>this.auth=o,()=>{}),this.messaging||i.get().then(o=>this.messaging=o,()=>{}),this.appCheck||r?.get().then(o=>this.appCheck=o,()=>{})}getAuthToken(){return C(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return C(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return C(this,null,function*(){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){let t=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return t.error?null:t.token}return null})}getContext(e){return C(this,null,function*(){let t=yield this.getAuthToken(),i=yield this.getMessagingToken(),r=yield this.getAppCheckToken(e);return{authToken:t,messagingToken:i,appCheckToken:r}})}};var NT="us-central1",rK=/^data: (.*?)(?:\n|$)/;function oK(n){let e=null;return{promise:new Promise((t,i)=>{e=setTimeout(()=>{i(new li("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}var OT=class{constructor(e,t,i,r,o=NT,s=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new kT(e,t,i,r),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(o);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=NT}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function sK(n,e,t){let i=go(e);n.emulatorOrigin=`http${i?"s":""}://${e}:${t}`,i&&(zc(n.emulatorOrigin),qc("Functions",!0))}function aK(n,e,t){let i=r=>lK(n,e,r,t||{});return i.stream=(r,o)=>dK(n,e,r,o),i}function cK(n,e,t,i){return C(this,null,function*(){t["Content-Type"]="application/json";let r;try{r=yield i(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let o=null;try{o=yield r.json()}catch{}return{status:r.status,json:o}})}function OL(n,e){return C(this,null,function*(){let t={},i=yield n.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(t.Authorization="Bearer "+i.authToken),i.messagingToken&&(t["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=i.appCheckToken),t})}function lK(n,e,t,i){let r=n._url(e);return uK(n,r,t,i)}function uK(n,e,t,i){return C(this,null,function*(){t=xv(t);let r={data:t},o=yield OL(n,i),s=i.timeout||7e4,a=oK(s),c=yield Promise.race([cK(e,r,o,n.fetchImpl),a.promise,n.cancelAllRequests]);if(a.cancel(),!c)throw new li("cancelled","Firebase Functions instance was deleted.");let l=Av(c.status,c.json);if(l)throw l;if(!c.json)throw new li("internal","Response is not valid JSON object.");let u=c.json.data;if(typeof u>"u"&&(u=c.json.result),typeof u>"u")throw new li("internal","Response is missing data field.");return{data:Pu(u)}})}function dK(n,e,t,i){let r=n._url(e);return hK(n,r,t,i||{})}function hK(n,e,t,i){return C(this,null,function*(){var r;t=xv(t);let o={data:t},s=yield OL(n,i);s["Content-Type"]="application/json",s.Accept="text/event-stream";let a;try{a=yield n.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:s,signal:i?.signal})}catch(y){if(y instanceof Error&&y.name==="AbortError"){let E=new li("cancelled","Request was cancelled.");return{data:Promise.reject(E),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(E)}}}}}}let b=Av(0,null);return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}let c,l,u=new Promise((y,b)=>{c=y,l=b});(r=i?.signal)===null||r===void 0||r.addEventListener("abort",()=>{let y=new li("cancelled","Request was cancelled.");l(y)});let h=a.body.getReader(),f=fK(h,c,l,i?.signal);return{stream:{[Symbol.asyncIterator](){let y=f.getReader();return{next(){return C(this,null,function*(){let{value:E,done:I}=yield y.read();return{value:E,done:I}})},return(){return C(this,null,function*(){return yield y.cancel(),{done:!0,value:void 0}})}}}},data:u}})}function fK(n,e,t,i){let r=(s,a)=>{let c=s.match(rK);if(!c)return;let l=c[1];try{let u=JSON.parse(l);if("result"in u){e(Pu(u.result));return}if("message"in u){a.enqueue(Pu(u.message));return}if("error"in u){let h=Av(0,u);a.error(h),t(h);return}}catch(u){if(u instanceof li){a.error(u),t(u);return}}},o=new TextDecoder;return new ReadableStream({start(s){let a="";return c();function c(){return C(this,null,function*(){if(i?.aborted){let l=new li("cancelled","Request was cancelled");return s.error(l),t(l),Promise.resolve()}try{let{value:l,done:u}=yield n.read();if(u){a.trim()&&r(a.trim(),s),s.close();return}if(i?.aborted){let f=new li("cancelled","Request was cancelled");s.error(f),t(f),yield n.cancel();return}a+=o.decode(l,{stream:!0});let h=a.split(`
`);a=h.pop()||"";for(let f of h)f.trim()&&r(f.trim(),s);return c()}catch(l){let u=l instanceof li?l:Av(0,null);s.error(u),t(u)}})}},cancel(){return n.cancel()}})}var RL="@firebase/functions",kL="0.12.9";var pK="auth-internal",mK="app-check-internal",gK="messaging-internal";function yK(n){let e=(t,{instanceIdentifier:i})=>{let r=t.getProvider("app").getImmediate(),o=t.getProvider(pK),s=t.getProvider(gK),a=t.getProvider(mK);return new OT(r,o,s,a,i)};Cr(new Ir(FT,e,"PUBLIC").setMultipleInstances(!0)),ht(RL,kL,n),ht(RL,kL,"esm2017")}function FL(n=Sr(),e=NT){let i=ls(rt(n),FT).getImmediate({identifier:e}),r=Xf("functions");return r&&LL(i,...r),i}function LL(n,e,t){sK(rt(n),e,t)}function VL(n,e,t){return aK(rt(n),e,t)}yK();var Ac=class{constructor(e){return e}},BL="functions",LT=class{constructor(){return zr(BL)}};var VT=new ae("angularfire2.functions-instances");function vK(n,e){let t=Fo(BL,n,e);return t&&new Ac(t)}function _K(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Ac(i)}}var bK={provide:LT,deps:[[new Mt,VT]]},wK={provide:Ac,useFactory:vK,deps:[[new Mt,VT],Ti]};function jL(n,...e){return ht("angularfire",Gi.full,"fn"),bn([wK,bK,{provide:VT,useFactory:_K(n),multi:!0,deps:[He,ft,Ki,mr,[new Mt,Uo],[new Mt,qr],...e]}])}var UL=Le(FL,!0),$L=Le(VL,!0);var oa=class n{constructor(e,t,i){this.firestore=e;this.auth=t;this.functions=i}ensureAdminFor(e,t=!1){return C(this,null,function*(){let i=yield vn(this.auth.user$);if(!i||i.role!=="admin")throw new Error("Unauthorized: admin required");let r=!i.barangay||i.barangay==="";if(t){if(!r)throw new Error("Unauthorized: main-admin required");return}if(!r&&!(e&&i.barangay===e))throw new Error("Unauthorized: admin for this barangay required")})}getAllUsers(){let e=_t(this.firestore,"users");return qn(e,{idField:"uid"})}getUsersByBarangay(e){let t=_t(this.firestore,"users"),i=Ri(t,io("barangay","==",e));return qn(i,{idField:"uid"})}updateRole(e,t){return C(this,null,function*(){let i=_e(this.firestore,`users/${e}`),r=yield vn(Pi(i)),o=r&&r.barangay||null;yield this.ensureAdminFor(o);let s=_e(this.firestore,`users/${e}`);yield et(s,{role:t})})}updateRoleByMainAdmin(e,t){return C(this,null,function*(){yield this.ensureAdminFor(null,!0);let i=_e(this.firestore,`users/${e}`);yield et(i,{role:t})})}suspendUser(e){return C(this,null,function*(){let t=_e(this.firestore,`users/${e}`),i=yield vn(Pi(t)),r=i&&i.barangay||null;yield this.ensureAdminFor(r);let o=_e(this.firestore,`users/${e}`);yield et(o,{suspended:!0})})}unsuspendUser(e){return C(this,null,function*(){let t=_e(this.firestore,`users/${e}`),i=yield vn(Pi(t)),r=i&&i.barangay||null;yield this.ensureAdminFor(r);let o=_e(this.firestore,`users/${e}`);yield et(o,{suspended:!1})})}deleteUser(e){return C(this,null,function*(){let t=$L(this.functions,"deleteUserAuth");try{let i=yield t({uid:e});console.log("User deleted:",i)}catch(i){throw console.error("Error deleting user:",i),new Error(i.message||"Failed to delete user")}})}updateSettings(e,t){return C(this,null,function*(){let i=_e(this.firestore,`users/${e}`);yield et(i,{settings:t})})}setUserBarangay(e,t){return C(this,null,function*(){yield this.ensureAdminFor(t);let i=_e(this.firestore,`users/${e}`);yield et(i,{barangay:t})})}static \u0275fac=function(t){return new(t||n)(le(lt),le(Be),le(Ac))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};var Wn=class n{constructor(e,t){this.firestore=e;this.auth=t}ensureAdminFor(e,t=!1){return C(this,null,function*(){let i=yield vn(this.auth.user$);if(!i||i.role!=="admin")throw new Error("Unauthorized: admin required");let r=!i.barangay||i.barangay==="";if(t){if(!r)throw new Error("Unauthorized: main-admin required");return}if(!r&&!(e&&i.barangay===e))throw new Error("Unauthorized: admin for this barangay required")})}createBarangay(e){return C(this,null,function*(){yield this.ensureAdminFor(null,!0);let t=_t(this.firestore,"barangays");return(yield Zi(t,{name:e.name,adminIds:e.adminId?[e.adminId]:[],streets:e.streets||[],pollutionTypes:e.pollutionTypes||[],createdAt:Mi()})).id})}deleteBarangay(e){return C(this,null,function*(){yield this.ensureAdminFor(null,!0);let t=_e(this.firestore,`barangays/${e}`);yield _r(t)})}getAllBarangays(){let e=_t(this.firestore,"barangays");return qn(e,{idField:"id"})}getBarangayById(e){let t=_e(this.firestore,`barangays/${e}`);return Pi(t)}updateBarangay(e,t){return C(this,null,function*(){let i=_e(this.firestore,`barangays/${e}`);yield et(i,t)})}addStreet(e,t){return C(this,null,function*(){let i=_e(this.firestore,`barangays/${e}`);yield et(i,{streets:Dc(t)})})}removeStreet(e,t){return C(this,null,function*(){let i=_e(this.firestore,`barangays/${e}`);yield et(i,{streets:Sv(t)})})}addPollutionType(e,t){return C(this,null,function*(){let i=_e(this.firestore,`barangays/${e}`);yield et(i,{pollutionTypes:Dc(t)})})}removePollutionType(e,t){return C(this,null,function*(){let i=_e(this.firestore,`barangays/${e}`);yield et(i,{pollutionTypes:Sv(t)})})}assignAdmin(e,t){return C(this,null,function*(){yield this.ensureAdminFor(e);let i=_e(this.firestore,`barangays/${e}`);yield et(i,{adminIds:Dc(t)})})}removeAdmin(e,t){return C(this,null,function*(){yield this.ensureAdminFor(e);let i=_e(this.firestore,`barangays/${e}`);yield et(i,{adminIds:Sv(t)})})}static \u0275fac=function(t){return new(t||n)(le(lt),le(Be))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};var HL=(n,e,t)=>({"bg-warning":n,"bg-primary":e,"bg-success":t}),zL=(n,e)=>({"bg-success":n,"bg-secondary":e}),Pv=()=>[],qL=n=>["/admin/barangay",n];function IK(n,e){n&1&&(p(0,"li",13)(1,"a",100),A(2,"i",101),v(3," Admin"),m()())}function CK(n,e){if(n&1&&A(0,"img",112),n&2){let t=L().ngIf;k("src",t.profilePictureUrl,pt)}}function SK(n,e){if(n&1&&(p(0,"div",113),v(1),m()),n&2){let t=L().ngIf;w(),ue(" ",(t.fullName||t.email||"U").charAt(0).toUpperCase()," ")}}function TK(n,e){if(n&1){let t=he();p(0,"li",102)(1,"a",103),W(2,CK,1,1,"img",104)(3,SK,2,1,"ng-template",null,0,Lt),m(),p(5,"ul",105)(6,"li")(7,"a",106),A(8,"i",107),v(9,"My Profile"),m()(),p(10,"li")(11,"a",108),A(12,"i",109),v(13,"Settings"),m()(),p(14,"li"),A(15,"hr",49),m(),p(16,"li")(17,"a",110),H("click",function(){Y(t);let r=L();return Q(r.logout())}),A(18,"i",111),v(19,"Logout"),m()()()()}if(n&2){let t=e.ngIf,i=ze(4);w(2),k("ngIf",t.profilePictureUrl)("ngIfElse",i)}}function DK(n,e){if(n&1){let t=he();p(0,"div",114)(1,"div",115)(2,"div",116),v(3),m(),p(4,"button",117),H("click",function(){let r=Y(t).$implicit,o=L();return Q(o.removeToast(r.id))}),m()()()}if(n&2){let t=e.$implicit;Ps(Rs("toast show mb-2 align-items-center text-bg-",t.type)),w(3),J(t.message)}}function xK(n,e){n&1&&v(0," Reports Management ")}function AK(n,e){if(n&1&&(p(0,"span",118),v(1),m()),n&2){let t=L(2);w(),J(t.getPendingApprovalCount())}}function MK(n,e){if(n&1&&(v(0," Submitted Reports "),mt(1,AK,2,1,"span",118)),n&2){let t=L();w(),gt(t.getPendingApprovalCount()>0?1:-1)}}function PK(n,e){n&1&&v(0," Announcements ")}function RK(n,e){n&1&&v(0," Users Control ")}function kK(n,e){n&1&&v(0," Barangays ")}function NK(n,e){n&1&&v(0," Analytics ")}function OK(n,e){if(n&1&&(p(0,"span",119),v(1),m()),n&2){let t=L();w(),J(t.getPendingApprovalCount())}}function FK(n,e){if(n&1&&(p(0,"span",119),v(1),m()),n&2){let t=L();w(),J(t.getPendingApprovalCount())}}function LK(n,e){if(n&1){let t=he();p(0,"div",143)(1,"img",145),H("click",function(){let r=Y(t).$implicit,o=L(5);return Q(o.openImageModal(r))}),m()()}if(n&2){let t=e.$implicit,i=e.index,r=L(2).$implicit;w(),k("src",t,pt)("alt",r.type+" report image "+(i+1))}}function VK(n,e){if(n&1&&(p(0,"div",143),W(1,LK,2,2,"div",144),m()),n&2){let t=L().$implicit;w(),k("ngForOf",t.images)}}function BK(n,e){n&1&&(p(0,"div"),A(1,"img",146),m())}function jK(n,e){if(n&1){let t=he();p(0,"div",74)(1,"h6",147),A(2,"i",148),v(3,"Report Location"),m(),A(4,"div",149),p(5,"button",150),H("click",function(){Y(t);let r=L().$implicit,o=L(3);return Q(o.initializeMap(r.id,r.lat,r.lng))}),A(6,"i",151),v(7,"Show Map "),m()()}if(n&2){let t=L().$implicit;w(4),k("id","admin-map-"+t.id)}}function UK(n,e){if(n&1&&A(0,"img",161),n&2){let t=e.ngIf;k("src",t,pt)}}function $K(n,e){if(n&1&&(p(0,"div",162),v(1),m()),n&2){let t=L().$implicit,i=L(5);w(),ue(" ",i.getInitials(t.userName)," ")}}function HK(n,e){if(n&1&&(p(0,"div",154)(1,"div",155),W(2,UK,1,1,"img",156)(3,$K,2,1,"ng-template",null,1,Lt),p(5,"div",157)(6,"div",158)(7,"span",159),v(8),m(),p(9,"small",129),v(10),re(11,"date"),m()(),p(12,"p",160),v(13),m()()()()),n&2){let t=e.$implicit,i=ze(4),r=L(5);w(2),k("ngIf",r.getUserProfilePicture(t.userId))("ngIfElse",i),w(6),J(t.userName),w(2),J(In(11,5,r.formatCommentDate(t.createdAt),"short")),w(3),J(t.text)}}function zK(n,e){if(n&1&&(p(0,"div",74)(1,"h6",147),A(2,"i",152),v(3),m(),W(4,HK,14,8,"div",153),m()),n&2){let t=L().$implicit;w(3),ue("Comments (",(t.comments||Lr(2,Pv)).length,")"),w(),k("ngForOf",t.comments)}}function qK(n,e){if(n&1){let t=he();p(0,"div",125)(1,"div",126)(2,"div",127)(3,"div",128)(4,"h5",86),v(5),re(6,"titlecase"),m(),p(7,"small",129),v(8),re(9,"date"),m()(),p(10,"div",130)(11,"span",131),v(12),m(),p(13,"span",132),v(14),m()()()(),p(15,"div",72)(16,"div",23)(17,"div",83),W(18,VK,2,1,"div",133)(19,BK,2,0,"div",66),m(),p(20,"div",134)(21,"p",74),v(22),m(),W(23,jK,8,1,"div",78)(24,zK,5,3,"div",78),p(25,"div",74)(26,"label",75),v(27,"Add Comment / Response"),m(),p(28,"textarea",135),Ie("ngModelChange",function(r){let o=Y(t).$implicit,s=L(3);return Se(s.commentTexts[o.id||""],r)||(s.commentTexts[o.id||""]=r),Q(r)}),m(),p(29,"button",136),H("click",function(){let r=Y(t).$implicit,o=L(3);return Q(r.id&&o.addCommentToReport(r.id))}),A(30,"i",137),v(31,"Send Comment "),m()(),p(32,"div",74)(33,"label",75),v(34,"Update Status"),m(),p(35,"select",138),H("change",function(r){let o=Y(t).$implicit,s=L(3);return Q(s.updateStatus(o,r.target.value))}),p(36,"option",139),v(37,"Pending"),m(),p(38,"option",139),v(39,"In Progress"),m(),p(40,"option",139),v(41,"Done"),m()()(),p(42,"div",140)(43,"button",141),H("click",function(){let r=Y(t).$implicit,o=L(3);return Q(o.deleteReport(r))}),A(44,"i",142),v(45,"Delete Report "),m()()()()()()}if(n&2){let t=e.$implicit,i=L(3);w(5),En("",de(6,19,t.type)," - ",t.location),w(3),En("Reported by ",t.reporterName," \u2022 ",i.formatTimestamp(t.createdAt)?In(9,21,i.formatTimestamp(t.createdAt),"short"):"just now"),w(3),k("ngClass",Jm(24,HL,t.status==="Pending",t.status==="In Progress",t.status==="Done")),w(),J(t.status),w(),k("ngClass",Zm(28,zL,t.approved===!0,t.approved===!1||!t.approved)),w(),J(t.approved?"Approved":"Pending Approval"),w(4),k("ngIf",t.images&&t.images.length),w(),k("ngIf",!t.images||!t.images.length),w(3),J(t.description),w(),k("ngIf",t.lat&&t.lng),w(),k("ngIf",(t.comments||Lr(31,Pv)).length>0),w(4),Ee("ngModel",i.commentTexts[t.id||""]),k("name","main-admin-comment-"+t.id),w(),k("disabled",!t.id),w(7),k("value","Pending"),w(2),k("value","In Progress"),w(2),k("value","Done")}}function WK(n,e){if(n&1&&(p(0,"div",121)(1,"h4",122),A(2,"i",123),v(3),p(4,"span",124),v(5),m()(),W(6,qK,46,32,"div",70),m()),n&2){let t=e.$implicit,i=L(2);w(3),ue("",t," "),w(2),J(i.reportsByBarangay[t].length),w(),k("ngForOf",i.reportsByBarangay[t])}}function GK(n,e){if(n&1&&(p(0,"div"),W(1,WK,7,3,"div",120),m()),n&2){let t=L();w(),k("ngForOf",t.reportBarangayKeys)}}function KK(n,e){n&1&&(p(0,"div",129),v(1,"No reports yet."),m())}function YK(n,e){if(n&1){let t=he();p(0,"div",143)(1,"img",145),H("click",function(){let r=Y(t).$implicit,o=L(4);return Q(o.openImageModal(r))}),m()()}if(n&2){let t=e.$implicit,i=e.index,r=L(2).$implicit;w(),k("src",t,pt)("alt",r.type+" report image "+(i+1))}}function QK(n,e){if(n&1&&(p(0,"div",143),W(1,YK,2,2,"div",144),m()),n&2){let t=L().$implicit;w(),k("ngForOf",t.images)}}function XK(n,e){n&1&&(p(0,"div"),A(1,"img",146),m())}function ZK(n,e){if(n&1){let t=he();p(0,"div",74)(1,"h6",147),A(2,"i",148),v(3,"Report Location"),m(),A(4,"div",149),p(5,"button",150),H("click",function(){Y(t);let r=L().$implicit,o=L(2);return Q(o.initializeMap(r.id,r.lat,r.lng))}),A(6,"i",151),v(7,"Show Map "),m()()}if(n&2){let t=L().$implicit;w(4),k("id","admin-map-"+t.id)}}function JK(n,e){if(n&1&&A(0,"img",161),n&2){let t=e.ngIf;k("src",t,pt)}}function eY(n,e){if(n&1&&(p(0,"div",162),v(1),m()),n&2){let t=L().$implicit,i=L(4);w(),ue(" ",i.getInitials(t.userName)," ")}}function tY(n,e){if(n&1&&(p(0,"div",154)(1,"div",155),W(2,JK,1,1,"img",156)(3,eY,2,1,"ng-template",null,2,Lt),p(5,"div",157)(6,"div",158)(7,"span",159),v(8),m(),p(9,"small",129),v(10),re(11,"date"),m()(),p(12,"p",160),v(13),m()()()()),n&2){let t=e.$implicit,i=ze(4),r=L(4);w(2),k("ngIf",r.getUserProfilePicture(t.userId))("ngIfElse",i),w(6),J(t.userName),w(2),J(In(11,5,r.formatCommentDate(t.createdAt),"short")),w(3),J(t.text)}}function nY(n,e){if(n&1&&(p(0,"div",74)(1,"h6",147),A(2,"i",152),v(3),m(),W(4,tY,14,8,"div",153),m()),n&2){let t=L().$implicit;w(3),ue("Comments (",(t.comments||Lr(2,Pv)).length,")"),w(),k("ngForOf",t.comments)}}function iY(n,e){if(n&1){let t=he();p(0,"div",125)(1,"div",126)(2,"div",127)(3,"div",128)(4,"h5",86),v(5),re(6,"titlecase"),m(),p(7,"small",129),v(8),re(9,"date"),m()(),p(10,"div",130)(11,"span",131),v(12),m(),p(13,"span",132),v(14),m()()()(),p(15,"div",72)(16,"div",23)(17,"div",83),W(18,QK,2,1,"div",133)(19,XK,2,0,"div",66),m(),p(20,"div",134)(21,"p",74),v(22),m(),W(23,ZK,8,1,"div",78)(24,nY,5,3,"div",78),p(25,"div",74)(26,"label",75),v(27,"Add Comment / Response"),m(),p(28,"textarea",135),Ie("ngModelChange",function(r){let o=Y(t).$implicit,s=L(2);return Se(s.commentTexts[o.id||""],r)||(s.commentTexts[o.id||""]=r),Q(r)}),m(),p(29,"button",136),H("click",function(){let r=Y(t).$implicit,o=L(2);return Q(r.id&&o.addCommentToReport(r.id))}),A(30,"i",137),v(31,"Send Comment "),m()(),p(32,"div",74)(33,"label",75),v(34,"Update Status"),m(),p(35,"select",138),H("change",function(r){let o=Y(t).$implicit,s=L(2);return Q(s.updateStatus(o,r.target.value))}),p(36,"option",139),v(37,"Pending"),m(),p(38,"option",139),v(39,"In Progress"),m(),p(40,"option",139),v(41,"Done"),m()()(),p(42,"div",140)(43,"button",141),H("click",function(){let r=Y(t).$implicit,o=L(2);return Q(o.deleteReport(r))}),A(44,"i",142),v(45,"Delete Report "),m()()()()()()}if(n&2){let t=e.$implicit,i=L(2);w(5),En("",de(6,19,t.type)," - ",t.location),w(3),En("Reported by ",t.reporterName," \u2022 ",i.formatTimestamp(t.createdAt)?In(9,21,i.formatTimestamp(t.createdAt),"short"):"just now"),w(3),k("ngClass",Jm(24,HL,t.status==="Pending",t.status==="In Progress",t.status==="Done")),w(),J(t.status),w(),k("ngClass",Zm(28,zL,t.approved===!0,t.approved===!1||!t.approved)),w(),J(t.approved?"Approved":"Pending Approval"),w(4),k("ngIf",t.images&&t.images.length),w(),k("ngIf",!t.images||!t.images.length),w(3),J(t.description),w(),k("ngIf",t.lat&&t.lng),w(),k("ngIf",(t.comments||Lr(31,Pv)).length>0),w(4),Ee("ngModel",i.commentTexts[t.id||""]),k("name","admin-comment-"+t.id),w(),k("disabled",!t.id),w(7),k("value","Pending"),w(2),k("value","In Progress"),w(2),k("value","Done")}}function rY(n,e){if(n&1&&(p(0,"div"),W(1,KK,2,0,"div",163)(2,iY,46,32,"div",70),m()),n&2){let t=L();w(),k("ngIf",t.reports.length===0),w(),k("ngForOf",t.filteredReports())}}function oY(n,e){n&1&&(p(0,"div",164),A(1,"i",165),v(2,"No pending reports to approve. All reports have been reviewed! "),m())}function sY(n,e){if(n&1){let t=he();p(0,"div",143)(1,"img",145),H("click",function(){let r=Y(t).$implicit,o=L(3);return Q(o.openImageModal(r))}),m()()}if(n&2){let t=e.$implicit,i=e.index,r=L(2).$implicit;w(),k("src",t,pt)("alt",r.type+" report image "+(i+1))}}function aY(n,e){if(n&1&&(p(0,"div",143),W(1,sY,2,2,"div",144),m()),n&2){let t=L().$implicit;w(),k("ngForOf",t.images)}}function cY(n,e){n&1&&(p(0,"div"),A(1,"img",146),m())}function lY(n,e){if(n&1){let t=he();p(0,"div",74)(1,"h6",147),A(2,"i",148),v(3,"Report Location"),m(),A(4,"div",149),p(5,"button",150),H("click",function(){Y(t);let r=L().$implicit,o=L();return Q(o.initializeMap(r.id,r.lat,r.lng,"task-map-"))}),A(6,"i",151),v(7,"Show Map "),m()()}if(n&2){let t=L().$implicit;w(4),k("id","task-map-"+t.id)}}function uY(n,e){if(n&1){let t=he();p(0,"div",125)(1,"div",126)(2,"div",127)(3,"div",128)(4,"h5",86),v(5),re(6,"titlecase"),m(),p(7,"small",129),v(8),re(9,"date"),m()(),p(10,"div",130)(11,"span",166),v(12,"Pending Approval"),m()()()(),p(13,"div",72)(14,"div",23)(15,"div",83),W(16,aY,2,1,"div",133)(17,cY,2,0,"div",66),m(),p(18,"div",134)(19,"p",74)(20,"strong"),v(21,"Description:"),m(),v(22),m(),p(23,"p",143)(24,"strong"),v(25,"Location:"),m(),v(26),m(),p(27,"p",143)(28,"strong"),v(29,"Date Reported:"),m(),v(30),m(),p(31,"p",74)(32,"strong"),v(33,"Barangay:"),m(),v(34),m(),W(35,lY,8,1,"div",78),p(36,"div",167)(37,"button",168),H("click",function(){let r=Y(t).$implicit,o=L();return Q(o.approveReport(r))}),A(38,"i",169),v(39,"Approve & Publish "),m(),p(40,"button",141),H("click",function(){let r=Y(t).$implicit,o=L();return Q(o.deleteReport(r))}),A(41,"i",142),v(42,"Reject & Delete "),m()()()()()()}if(n&2){let t=e.$implicit,i=L();w(5),En("",de(6,12,t.type)," - ",t.location),w(3),En("Reported by ",t.reporterName," \u2022 ",i.formatTimestamp(t.createdAt)?In(9,14,i.formatTimestamp(t.createdAt),"short"):"just now"),w(8),k("ngIf",t.images&&t.images.length),w(),k("ngIf",!t.images||!t.images.length),w(5),ue(" ",t.description),w(4),ue(" ",t.location),w(4),En(" ",t.date," at ",t.time),w(4),ue(" ",i.getBarangayName(t.barangayId)),w(),k("ngIf",t.lat&&t.lng)}}function dY(n,e){if(n&1&&(p(0,"option",171),v(1),m()),n&2){let t=e.$implicit;k("ngValue",t.id),w(),J(t.name)}}function hY(n,e){if(n&1){let t=he();p(0,"div",74)(1,"label",75),v(2,"Target Barangay"),m(),p(3,"select",170),Ie("ngModelChange",function(r){Y(t);let o=L();return Se(o.announcementModel.barangayId,r)||(o.announcementModel.barangayId=r),Q(r)}),p(4,"option",171),v(5,"All Barangays (Global)"),m(),W(6,dY,2,2,"option",172),m()()}if(n&2){let t=L();w(3),Ee("ngModel",t.announcementModel.barangayId),w(),k("ngValue",null),w(2),k("ngForOf",t.barangays)}}function fY(n,e){n&1&&(p(0,"div",74)(1,"div",164),A(2,"i",173),v(3,"This announcement will be posted to your barangay only. "),m()())}function pY(n,e){if(n&1){let t=he();p(0,"div",125)(1,"div",72)(2,"div",174)(3,"div")(4,"h5",175),v(5),m(),p(6,"p",176),v(7),m(),p(8,"small",129),v(9),re(10,"date"),m()(),p(11,"button",177),H("click",function(){let r=Y(t).$implicit,o=L(3);return Q(o.deleteAnnouncement(r))}),A(12,"i",178),m()()()()}if(n&2){let t=e.$implicit,i=L(3);w(5),J(t.title),w(2),J(t.description),w(2),En("Posted ",i.formatTimestamp(t.createdAt)?In(10,4,i.formatTimestamp(t.createdAt),"short"):"just now"," \u2022 ",t.location)}}function mY(n,e){if(n&1&&(p(0,"div",121)(1,"h5",122),A(2,"i"),v(3),p(4,"span",124),v(5),m()(),W(6,pY,13,7,"div",70),m()),n&2){let t=e.$implicit,i=L(2);w(2),Ps(Rs("fas fa-",t==="Global"?"globe":"map-marker-alt"," me-2")),w(),ue("",t," "),w(2),J(i.announcementsByBarangay[t].length),w(),k("ngForOf",i.announcementsByBarangay[t])}}function gY(n,e){if(n&1&&(p(0,"div"),W(1,mY,7,6,"div",120),m()),n&2){let t=L();w(),k("ngForOf",t.announcementBarangayKeys)}}function yY(n,e){n&1&&(p(0,"div",129),v(1,"No announcements yet."),m())}function vY(n,e){if(n&1){let t=he();p(0,"div",125)(1,"div",72)(2,"div",174)(3,"div")(4,"h5",175),v(5),m(),p(6,"p",176),v(7),m(),p(8,"small",129),v(9),re(10,"date"),m()(),p(11,"button",177),H("click",function(){let r=Y(t).$implicit,o=L(2);return Q(o.deleteAnnouncement(r))}),A(12,"i",178),m()()()()}if(n&2){let t=e.$implicit,i=L(2);w(5),J(t.title),w(2),J(t.description),w(2),En("Posted ",i.formatTimestamp(t.createdAt)?In(10,4,i.formatTimestamp(t.createdAt),"short"):"just now"," \u2022 ",t.location)}}function _Y(n,e){if(n&1&&(p(0,"div"),W(1,yY,2,0,"div",163)(2,vY,13,7,"div",70),m()),n&2){let t=L();w(),k("ngIf",t.announcements.length===0),w(),k("ngForOf",t.announcements)}}function bY(n,e){n&1&&(p(0,"div",129),v(1,"No barangays yet."),m())}function wY(n,e){if(n&1&&(p(0,"span")(1,"span",190),v(2),m()()),n&2){let t=e.$implicit;w(2),J(t.username||t.email)}}function EY(n,e){if(n&1&&(Ja(0),W(1,wY,3,1,"span",189),ec()),n&2){let t=L().$implicit,i=L(2);w(),k("ngForOf",i.getBarangayAdmins(t.id||""))}}function IY(n,e){n&1&&(p(0,"span",129),v(1,"No admins"),m())}function CY(n,e){if(n&1){let t=he();p(0,"div",125)(1,"div",72)(2,"div",182)(3,"div",183)(4,"h5",176),v(5),m(),p(6,"small",129),v(7),m(),p(8,"div",184)(9,"strong"),v(10,"Admins: "),m(),W(11,EY,2,1,"ng-container",185)(12,IY,2,0,"ng-template",null,4,Lt),m()(),p(14,"div",183)(15,"div",186)(16,"a",187),v(17,"Open"),m(),p(18,"button",188),H("click",function(){let r=Y(t).$implicit,o=L(2);return Q(o.openBarangayAnalytics(r.id||""))}),v(19,"Analytics"),m(),p(20,"button",141),H("click",function(){let r=Y(t).$implicit,o=L(2);return Q(o.removeBarangay(r.id||""))}),v(21,"Delete"),m()()()()()()}if(n&2){let t=e.$implicit,i=ze(13),r=L(2);w(5),J(t.name),w(2),En("Streets: ",t.streets.length||0," \u2022 Types: ",t.pollutionTypes.length||0),w(4),k("ngIf",r.getBarangayAdmins(t.id||"").length>0)("ngIfElse",i),w(5),k("routerLink",Ll(6,qL,t.id))}}function SY(n,e){if(n&1){let t=he();p(0,"div")(1,"div",71)(2,"div",72)(3,"div",179)(4,"div",180),A(5,"input",181,3),m(),p(7,"div",180)(8,"button",168),H("click",function(){Y(t);let r=ze(6),o=L();return Q(o.createBarangay(r.value))}),v(9,"Create Barangay"),m()()()()(),p(10,"h4",60),v(11,"Existing Barangays"),m(),W(12,bY,2,0,"div",163)(13,CY,22,8,"div",70),m()}if(n&2){let t=L();w(12),k("ngIf",t.barangays.length===0),w(),k("ngForOf",t.barangays)}}function TY(n,e){if(n&1){let t=he();p(0,"div",121)(1,"div",125)(2,"div",191)(3,"h4",86),A(4,"i",123),v(5),m()(),p(6,"div",72)(7,"div",182)(8,"div",192)(9,"div",193)(10,"div",194)(11,"h3",195),v(12),m(),p(13,"p",196),v(14,"Streets"),m()()()(),p(15,"div",192)(16,"div",193)(17,"div",194)(18,"h3",197),v(19),m(),p(20,"p",196),v(21,"Pollution Types"),m()()()()(),p(22,"div",198)(23,"a",199),A(24,"i",200),v(25,"Manage Barangay "),m(),p(26,"button",65),H("click",function(){let r=Y(t).$implicit,o=L(2);return Q(o.openBarangayAnalytics(r.id||""))}),A(27,"i",48),v(28,"View Analytics "),m()()()()()}if(n&2){let t=e.$implicit;w(5),J(t.name),w(7),J(t.streets.length||0),w(7),J(t.pollutionTypes.length||0),w(4),k("routerLink",Ll(4,qL,t.id))}}function DY(n,e){if(n&1&&(p(0,"div"),W(1,TY,29,6,"div",120),m()),n&2){let t=L();w(),k("ngForOf",t.barangays)}}function xY(n,e){n&1&&(p(0,"div",164),A(1,"i",173),v(2,"No barangay assigned to your account. "),m())}function AY(n,e){if(n&1){let t=he();p(0,"button",208),H("click",function(){Y(t);let r=L().$implicit,o=L(3);return Q(o.changeUserRole(r,r.role==="admin"?"user":"admin"))}),v(1,"Toggle Role"),m()}}function MY(n,e){if(n&1){let t=he();p(0,"tr")(1,"td"),v(2),m(),p(3,"td"),v(4),m(),p(5,"td")(6,"span",204),v(7),re(8,"titlecase"),m()(),p(9,"td"),v(10),re(11,"date"),m(),p(12,"td"),W(13,AY,2,0,"button",205),p(14,"button",206),H("click",function(){let r=Y(t).$implicit,o=L(3);return Q(o.toggleSuspendUser(r))}),v(15),m(),p(16,"button",207),H("click",function(){let r=Y(t).$implicit,o=L(3);return Q(o.deleteUserAction(r))}),A(17,"i",178),m()()()}if(n&2){let t=e.$implicit,i=L(3);w(2),J(t.fullName||t.email||"Unknown"),w(2),J(t.email),w(2),Re("bg-success",t.role==="admin")("bg-primary",t.role==="user"),w(),ue(" ",de(8,15,t.role)," "),w(3),J(In(11,17,i.toDate(t.createdAt),"mediumDate")),w(3),k("ngIf",i.isMainAdmin),w(),Re("btn-outline-warning",t.suspended)("btn-outline-danger",!t.suspended),k("title",t.suspended?"Unsuspend this user":"Suspend this user"),w(),ue(" ",t.suspended?"Unsuspend":"Suspend"," ")}}function PY(n,e){if(n&1&&(p(0,"div",121)(1,"h4",122),A(2,"i",123),v(3),p(4,"span",124),v(5),m()(),p(6,"div",201)(7,"table",202)(8,"thead",203)(9,"tr")(10,"th"),v(11,"Name"),m(),p(12,"th"),v(13,"Email"),m(),p(14,"th"),v(15,"Role"),m(),p(16,"th"),v(17,"Joined"),m(),p(18,"th"),v(19,"Actions"),m()()(),p(20,"tbody"),W(21,MY,18,20,"tr",189),m()()()()),n&2){let t=e.$implicit,i=L(2);w(3),ue("",t," "),w(2),J(i.usersByBarangay[t].length),w(16),k("ngForOf",i.usersByBarangay[t])}}function RY(n,e){if(n&1&&(p(0,"div"),W(1,PY,22,3,"div",120),m()),n&2){let t=L();w(),k("ngForOf",t.barangayKeys)}}function kY(n,e){if(n&1){let t=he();p(0,"tr")(1,"td"),v(2),m(),p(3,"td"),v(4),m(),p(5,"td"),v(6),m(),p(7,"td")(8,"span",204),v(9),re(10,"titlecase"),m()(),p(11,"td"),v(12),re(13,"date"),m(),p(14,"td")(15,"button",206),H("click",function(){let r=Y(t).$implicit,o=L(2);return Q(o.toggleSuspendUser(r))}),v(16),m(),p(17,"button",207),H("click",function(){let r=Y(t).$implicit,o=L(2);return Q(o.deleteUserAction(r))}),A(18,"i",178),m()()()}if(n&2){let t=e.$implicit,i=L(2);w(2),J(t.fullName||t.email||"Unknown"),w(2),J(t.email),w(2),J(i.getBarangayName(t.barangay)),w(2),Re("bg-success",t.role==="admin")("bg-primary",t.role==="user"),w(),ue(" ",de(10,15,t.role)," "),w(3),J(In(13,17,i.toDate(t.createdAt),"mediumDate")),w(3),Re("btn-outline-warning",t.suspended)("btn-outline-danger",!t.suspended),k("title",t.suspended?"Unsuspend this user":"Suspend this user"),w(),ue(" ",t.suspended?"Unsuspend":"Suspend"," ")}}function NY(n,e){if(n&1&&(p(0,"div")(1,"div",201)(2,"table",202)(3,"thead",203)(4,"tr")(5,"th"),v(6,"Name"),m(),p(7,"th"),v(8,"Email"),m(),p(9,"th"),v(10,"Barangay"),m(),p(11,"th"),v(12,"Role"),m(),p(13,"th"),v(14,"Joined"),m(),p(15,"th"),v(16,"Actions"),m()()(),p(17,"tbody"),W(18,kY,19,20,"tr",189),m()()()()),n&2){let t=L();w(18),k("ngForOf",t.users)}}function OY(n,e){if(n&1){let t=he();p(0,"div",209),H("click",function(){Y(t);let r=L();return Q(r.closeImageModal())}),p(1,"div",210)(2,"div",211)(3,"div",212)(4,"button",213),H("click",function(){Y(t);let r=L();return Q(r.closeImageModal())}),m(),A(5,"img",214),m()()()()}if(n&2){let t=L();w(5),k("src",t.selectedImage,pt)}}var Mv=class n{constructor(e,t,i,r,o,s,a){this.reportsService=e;this.announcementsService=t;this.firestore=i;this.usersService=r;this.barangaysService=o;this.auth=s;this.router=a;this.user$=this.auth.user$}activeTab="reports";reports=[];announcements=[];users=[];barangays=[];user$;filterStatus="all";responseText={};commentTexts={};maps={};selectedImage=null;announcementModel={title:"",subtitle:"",description:"",barangayId:void 0};toasts=[];nextToastId=1;confirmVisible=!1;confirmMessage="";confirmResolve=null;showToast(e,t="info"){let i=this.nextToastId++;this.toasts.push({id:i,message:e,type:t}),setTimeout(()=>this.toasts=this.toasts.filter(r=>r.id!==i),4e3)}removeToast(e){this.toasts=this.toasts.filter(t=>t.id!==e)}showConfirm(e){return this.confirmMessage=e,this.confirmVisible=!0,new Promise(t=>{this.confirmResolve=t})}onConfirmAnswer(e){this.confirmVisible=!1,this.confirmResolve&&this.confirmResolve(e),this.confirmResolve=null}goHome(){this.router.navigate(["/home"])}ngOnInit(){this.loadReports(),this.loadAnnouncements(),this.loadUsers(),this.loadBarangays(),this.auth.user$.pipe(Qe(1)).subscribe(e=>{this.isMainAdmin=!!e&&e.role==="admin"&&(!e.barangay||e.barangay==="")})}isMainAdmin=!1;setTab(e){this.activeTab=e}loadReports(){this.auth.user$.pipe(Qe(1)).subscribe(e=>{e?.role==="admin"&&(!e.barangay||e.barangay==="")?this.reportsService.getAllReports().subscribe(i=>{this.reports=i}):e?.barangay&&this.reportsService.getReportsByBarangay(e.barangay).subscribe(i=>{this.reports=i})})}filteredReports(){let e=this.reports.filter(t=>t.approved===!0);return this.filterStatus==="all"?e:e.filter(t=>t.status===this.filterStatus)}getPendingReports(){return this.reports.filter(e=>e.approved===!1||e.approved===void 0||e.approved===null)}getPendingApprovalCount(){return this.getPendingReports().length}updateStatus(e,t){return C(this,null,function*(){if(e.id)try{yield this.reportsService.updateReport(e.id,{status:t});let i=this.reports.findIndex(r=>r.id===e.id);i>=0&&(this.reports[i].status=t),this.showToast(`Report status updated to ${t}`,"success")}catch(i){console.error("Failed to update status",i),this.showToast("Failed to update status","danger")}})}sendResponse(e,t){return C(this,null,function*(){if(!e.id)return;let i={text:t,date:new Date().toISOString()};yield this.reportsService.updateReport(e.id,{adminResponse:i});let r=this.reports.findIndex(o=>o.id===e.id);r>=0&&(this.reports[r].adminResponse=i),this.responseText[e.id]=""})}deleteReport(e){return C(this,null,function*(){if(!(!e.id||!(yield this.showConfirm("Are you sure you want to delete this report? This will also delete all associated images."))))try{yield this.reportsService.deleteReportWithImages(e.id,e.images||[]),this.reports=this.reports.filter(i=>i.id!==e.id),this.showToast("Report and images deleted successfully","success")}catch(i){console.error("Failed to delete report",i),this.showToast("Failed to delete report: "+(i?.message||""),"danger")}})}approveReport(e){return C(this,null,function*(){if(e.id)try{yield this.reportsService.updateReport(e.id,{approved:!0}),e.approved=!0,this.showToast("Report approved and will now appear on home page","success")}catch(t){console.error("Failed to approve report",t),this.showToast("Failed to approve report: "+(t?.message||""),"danger")}})}unapproveReport(e){return C(this,null,function*(){if(e.id)try{yield this.reportsService.updateReport(e.id,{approved:!1}),e.approved=!1,this.showToast("Report unapproved and hidden from home page","success")}catch(t){console.error("Failed to unapprove report",t),this.showToast("Failed to unapprove report: "+(t?.message||""),"danger")}})}loadAnnouncements(){this.auth.user$.pipe(Qe(1)).subscribe(e=>{e?.role==="admin"&&(!e.barangay||e.barangay==="")?this.announcementsService.getAllAnnouncements().subscribe(i=>{this.announcements=i}):e?.barangay&&this.announcementsService.getAnnouncementsForBarangay(e.barangay).subscribe(i=>{this.announcements=i})})}loadBarangays(){this.auth.user$.pipe(Qe(1)).subscribe(e=>{e?.role==="admin"&&(!e.barangay||e.barangay==="")?this.barangaysService.getAllBarangays().subscribe(i=>{this.barangays=i}):e?.barangay&&this.barangaysService.getAllBarangays().subscribe(i=>{this.barangays=i.filter(r=>r.id===e.barangay)})})}createBarangay(e){return C(this,null,function*(){if(!e||!e.trim()){this.showToast("Provide barangay name","warning");return}try{yield this.barangaysService.createBarangay({name:e.trim()}),this.loadBarangays(),this.showToast("Barangay created","success")}catch(t){console.error("Failed to create barangay",t),this.showToast("Failed to create barangay","danger")}})}assignAdminToBarangay(e,t){return C(this,null,function*(){if(!(!e||!t))try{yield this.usersService.updateRole(t,"admin"),yield this.usersService.setUserBarangay(t,e),yield this.barangaysService.assignAdmin(e,t),this.showToast("Assigned admin to barangay","success"),this.loadUsers(),this.loadBarangays()}catch(i){console.error("Failed to assign admin",i),this.showToast("Failed to assign admin: "+(i?.message||""),"danger")}})}unassignAdminFromBarangay(e,t){return C(this,null,function*(){if(confirm("Remove admin privileges from this user?"))try{yield this.barangaysService.removeAdmin(e,t),yield this.usersService.updateRole(t,"user"),yield this.usersService.setUserBarangay(t,null),alert("Admin removed"),this.loadUsers(),this.loadBarangays()}catch(i){console.error("Failed to remove admin",i),alert("Failed to remove admin")}})}removeBarangay(e){return C(this,null,function*(){if(yield this.showConfirm("Delete this barangay? This action cannot be undone."))try{yield this.barangaysService.deleteBarangay(e),this.loadBarangays(),this.showToast("Barangay deleted","success")}catch(i){console.error("Failed to delete barangay",i),this.showToast("Failed to delete barangay: "+(i?.message||""),"danger")}})}openBarangayAnalytics(e){e&&this.router.navigate(["/admin/barangay",e,"analytics"])}get assignableUsers(){return(this.users||[]).filter(e=>!e.role||e.role!=="admin")}getUserEmail(e){let t=(this.users||[]).find(i=>i.uid===e);return t&&(t.username||t.email)||e}getBarangayAdmins(e){return e?(this.users||[]).filter(t=>t.role==="admin"&&t.barangay===e):[]}syncBarangayAdmins(e){return C(this,null,function*(){if(e)try{let t=this.getBarangayAdmins(e),i=this.barangays.find(a=>a.id===e);if(!i)return;let r=i.adminIds||[],s=t.map(a=>a.uid).filter(a=>!r.includes(a));for(let a of s)yield this.barangaysService.assignAdmin(e,a);s.length>0?(this.showToast(`Synced ${s.length} admin(s) to barangay`,"success"),this.loadBarangays()):this.showToast("Barangay admins already in sync","info")}catch(t){console.error("Failed to sync admins",t),this.showToast("Failed to sync admins: "+(t?.message||""),"danger")}})}getBarangayName(e){if(!e)return"Admin";let t=this.barangays.find(i=>i.id===e);return t?t.name:e}postAnnouncement(e){return C(this,null,function*(){if(!e.title||!e.description){this.showToast("Title and description required","warning");return}try{let t=yield vn(this.auth.user$),r=t?.role==="admin"&&(!t.barangay||t.barangay==="")?e.barangayId||null:t?.barangay||null;yield this.announcementsService.postAnnouncement({title:e.title,subtitle:e.subtitle||"",description:e.description,location:e.location||"",date:new Date,createdAt:new Date,barangayId:r}),this.announcementModel={title:"",subtitle:"",description:"",barangayId:void 0},this.loadAnnouncements(),this.showToast("Announcement posted","success")}catch(t){console.error("Failed to post announcement",t),this.showToast("Failed to post announcement: "+(t?.message||""),"danger")}})}loadUsers(){this.auth.user$.pipe(Qe(1)).subscribe(e=>{e?.role==="admin"&&(!e.barangay||e.barangay==="")?this.usersService.getAllUsers().subscribe(i=>{this.users=i}):e?.barangay&&this.usersService.getUsersByBarangay(e.barangay).subscribe(i=>{this.users=i})})}changeUserRole(e,t){return C(this,null,function*(){if(e?.uid){if(!this.isMainAdmin){this.showToast("Only main admin can change user roles","danger");return}try{if(t==="admin"){if(!e.barangay){this.showToast("User must be assigned to a barangay first. Please assign them to a barangay in the user details.","warning");return}let i=this.getBarangayAdmins(e.barangay);if(i.length>0&&!i.some(r=>r.uid===e.uid)){if(!(yield this.showConfirm(`${e.barangay} already has an admin (${i[0].username||i[0].email}). Only 1 admin per barangay is allowed. Replace with ${e.username||e.email}?`)))return;for(let o of i)yield this.usersService.updateRoleByMainAdmin(o.uid,"user"),yield this.barangaysService.removeAdmin(e.barangay,o.uid)}yield this.usersService.updateRoleByMainAdmin(e.uid,"admin"),yield this.barangaysService.assignAdmin(e.barangay,e.uid),e.role="admin",this.showToast(`${e.username||e.email} is now admin of ${e.barangay}`,"success"),this.loadUsers(),this.loadBarangays()}else e.barangay&&(yield this.barangaysService.removeAdmin(e.barangay,e.uid)),yield this.usersService.updateRoleByMainAdmin(e.uid,"user"),e.role="user",this.showToast(`${e.username||e.email} is now a regular user`,"success"),this.loadUsers(),this.loadBarangays()}catch(i){console.error("Failed to update role",i),this.showToast("Failed to update role: "+(i?.message||""),"danger")}}})}toggleSuspendUser(e){return C(this,null,function*(){if(!e?.uid)return;let t=e.suspended===!0,i=t?"unsuspend":"suspend",r=yield vn(this.auth.user$);if(r?.uid===e.uid){this.showToast(`You cannot ${i} yourself`,"danger");return}if(!this.isMainAdmin){if(e.barangay!==r?.barangay){this.showToast("You can only manage users in your barangay","danger");return}if(e.role==="admin"){this.showToast("Barangay admins cannot manage other admins","danger");return}}if(yield this.showConfirm(`Are you sure you want to ${i} ${e.email}?`))try{t?(yield this.usersService.unsuspendUser(e.uid),e.suspended=!1,this.showToast("User unsuspended successfully","success")):(yield this.usersService.suspendUser(e.uid),e.suspended=!0,this.showToast("User suspended successfully","success"))}catch(s){console.error(`Failed to ${i} user`,s),this.showToast(`Failed to ${i} user: `+(s?.message||""),"danger")}})}deleteUserAction(e){return C(this,null,function*(){if(!e?.uid)return;let t=yield vn(this.auth.user$);if(t?.uid===e.uid){this.showToast("You cannot delete yourself","danger");return}if(!this.isMainAdmin){if(e.barangay!==t?.barangay){this.showToast("You can only delete users in your barangay","danger");return}if(e.role==="admin"){this.showToast("Barangay admins cannot delete other admins","danger");return}}if(yield this.showConfirm(`\u26A0\uFE0F PERMANENTLY DELETE ${e.email}? This action cannot be undone!`))try{yield this.usersService.deleteUser(e.uid),this.users=this.users.filter(r=>r.uid!==e.uid),this.showToast("User deleted successfully","success")}catch(r){console.error("Failed to delete user",r),this.showToast("Failed to delete user: "+(r?.message||""),"danger")}})}deleteAnnouncement(e){return C(this,null,function*(){if(e?.id)try{let t=_e(this.firestore,`announcements/${e.id}`);yield _r(t),this.announcements=this.announcements.filter(i=>i.id!==e.id)}catch(t){console.error("Failed to delete announcement",t),alert("Failed to delete announcement")}})}get totalReports(){return this.reports?.length||0}get pendingCount(){return this.reports?.filter(e=>e.status==="Pending").length||0}get inProgressCount(){return this.reports?.filter(e=>e.status==="In Progress").length||0}get doneCount(){return this.reports?.filter(e=>e.status==="Done").length||0}get usersByBarangay(){let e={};return this.users.forEach(t=>{let i="Admin";if(t.barangay){let r=this.barangays.find(o=>o.id===t.barangay);i=r?r.name:t.barangay}e[i]||(e[i]=[]),e[i].push(t)}),e}get barangayKeys(){return Object.keys(this.usersByBarangay).sort((e,t)=>e==="Admin"?-1:t==="Admin"?1:e.localeCompare(t))}get announcementsByBarangay(){let e={};return this.announcements.forEach(t=>{let i="Global";if(t.barangayId){let r=this.barangays.find(o=>o.id===t.barangayId);i=r?r.name:t.barangayId}e[i]||(e[i]=[]),e[i].push(t)}),e}get announcementBarangayKeys(){return Object.keys(this.announcementsByBarangay).sort((e,t)=>e==="Global"?-1:t==="Global"?1:e.localeCompare(t))}get reportsByBarangay(){let e={};return this.filteredReports().forEach(i=>{let r="No Barangay";if(i.barangayId){let o=this.barangays.find(s=>s.id===i.barangayId);r=o?o.name:i.barangayId}e[r]||(e[r]=[]),e[r].push(i)}),e}get reportBarangayKeys(){return Object.keys(this.reportsByBarangay).sort()}toDate(e){return e?e.toDate&&typeof e.toDate=="function"?e.toDate():e instanceof Date?e:new Date(e):null}logout(){return C(this,null,function*(){try{yield this.auth.logout(),yield this.router.navigate(["/login"])}catch(e){console.error("Logout failed",e)}})}ngAfterViewInit(){}initializeMap(e,t,i,r="admin-map-"){let o=`${r}${e}`;this.maps[o]&&(this.maps[o].remove(),delete this.maps[o]),setTimeout(()=>{if(!document.getElementById(o))return;let a=Ru.map(o).setView([t,i],15);Ru.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xA9 OpenStreetMap contributors"}).addTo(a),Ru.marker([t,i]).addTo(a).bindPopup("Report Location").openPopup(),this.maps[o]=a,setTimeout(()=>a.invalidateSize(),100)},100)}addCommentToReport(e){return C(this,null,function*(){if(!e){alert("Invalid report ID"),console.error("Report ID is missing");return}let t=yield vn(this.user$.pipe(Qe(1)));if(!t||t.role!=="admin"){alert("Only admins can add comments");return}let i=this.commentTexts[e]?.trim();if(!i){alert("Please enter a comment");return}try{console.log("Adding comment to report:",e),yield this.reportsService.addComment(e,t.uid,t.username||t.email||"Admin",t.role,i),this.commentTexts[e]="",yield this.loadReports(),alert("Comment added successfully")}catch(r){console.error("Failed to add comment",r),alert("Failed to add comment: "+r.message)}})}formatCommentDate(e){return e?typeof e.toDate=="function"?e.toDate():e instanceof Date?e:new Date(e):new Date}formatTimestamp(e){return e?typeof e.toDate=="function"?e.toDate():e instanceof Date?e:e.seconds?new Date(e.seconds*1e3):new Date(e):null}getInitials(e){return e?e.split(" ").map(t=>t[0]).join("").toUpperCase():""}getUserProfilePicture(e){return this.users.find(i=>i.uid===e)?.profilePictureUrl||null}openImageModal(e){this.selectedImage=e}closeImageModal(){this.selectedImage=null}static \u0275fac=function(t){return new(t||n)(K(Ji),K(ra),K(lt),K(oa),K(Wn),K(Be),K(je))};static \u0275cmp=it({type:n,selectors:[["app-admin-dashboard"]],decls:235,vars:97,consts:[["adminUserIcon",""],["commentAvatar",""],["barangayCommentAvatar",""],["newBarangay",""],["noAdmins",""],[1,"navbar","navbar-expand-lg","navbar-light","bg-white","shadow-sm","sticky-top"],[1,"container-fluid"],["routerLink","/home",1,"navbar-brand","fw-bold","text-success"],[1,"fas","fa-leaf","me-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","title","Toggle navigation menu","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto","align-items-center"],[1,"nav-item"],["routerLink","/home",1,"nav-link"],[1,"fas","fa-home","me-1"],["routerLink","/settings",1,"nav-link"],[1,"fas","fa-cog","me-1"],["class","nav-item",4,"ngIf"],[1,"nav-item","ms-lg-3"],["routerLink","/submit-report",1,"btn","btn-success"],[1,"fas","fa-plus","me-1"],["class","nav-item dropdown ms-lg-2 d-none d-lg-block",4,"ngIf"],[1,"row"],[1,"toast-container","top-right"],["role","alert",3,"class",4,"ngFor","ngForOf"],["tabindex","-1",1,"modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close dialog",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"col-12","d-md-none","mb-3"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-success","w-100","dropdown-toggle"],[1,"fas","fa-bars","me-2"],[1,"dropdown-menu","w-100"],["href","#",1,"dropdown-item",3,"click"],[1,"fas","fa-file-alt","me-2"],[1,"fas","fa-clipboard-list","me-2"],["class","badge bg-danger ms-2",4,"ngIf"],[1,"fas","fa-bullhorn","me-2"],[1,"fas","fa-users","me-2"],[1,"fas","fa-city","me-2"],[1,"fas","fa-chart-bar","me-2"],[1,"dropdown-divider"],["href","#",1,"dropdown-item","text-success",3,"click"],[1,"fas","fa-home","me-2"],[1,"col-md-3","col-lg-2","d-none","d-md-block","bg-light","sidebar"],[1,"position-sticky","pt-3"],[1,"nav","flex-column"],["href","#",1,"nav-link",3,"click"],[1,"nav-item","mt-3"],["href","#",1,"nav-link","text-success",3,"click"],[1,"col-12","col-md-9","ms-sm-auto","col-lg-10","px-3","px-md-4"],[3,"hidden"],[1,"fw-bold","mb-3"],[1,"btn-group","mb-4","w-100"],[1,"btn","btn-outline-success",3,"click"],[1,"btn","btn-outline-warning",3,"click"],[1,"btn","btn-outline-primary",3,"click"],[1,"btn","btn-outline-secondary",3,"click"],[4,"ngIf"],[1,"fw-bold","mb-4"],[1,"text-muted","mb-4"],["class","alert alert-info",4,"ngIf"],["class","card mb-3",4,"ngFor","ngForOf"],[1,"card","mb-4"],[1,"card-body"],[3,"ngSubmit"],[1,"mb-3"],[1,"form-label","fw-medium"],["name","title","required","","title","Announcement title","placeholder","Title",1,"form-control",3,"ngModelChange","ngModel"],["name","subtitle","title","Subtitle","placeholder","Enter subtitle",1,"form-control",3,"ngModelChange","ngModel"],["class","mb-3",4,"ngIf"],["rows","5","name","description","required","","title","Description","placeholder","Enter announcement description",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-success"],[1,"fas","fa-bullhorn","me-1"],[1,"row","mb-4"],[1,"col-md-3"],[1,"card","bg-primary","text-white"],[1,"fw-bold"],[1,"mb-0"],[1,"card","bg-warning","text-white"],[1,"card","bg-info","text-white"],[1,"card","bg-success","text-white"],[1,"mobile-bottom-nav","d-md-none"],["routerLink","/home","routerLinkActive","active",1,"mobile-nav-item"],[1,"fas","fa-home"],["routerLink","/submit-report",1,"mobile-nav-item"],[1,"fas","fa-plus-circle"],["routerLink","/admin",1,"mobile-nav-item","active"],[1,"fas","fa-shield-alt"],["routerLink","/profile","routerLinkActive","active",1,"mobile-nav-item"],[1,"fas","fa-user"],["class","modal d-block","style","background-color: rgba(0,0,0,0.9);",3,"click",4,"ngIf"],["routerLink","/admin",1,"nav-link","active"],[1,"fas","fa-shield-alt","me-1"],[1,"nav-item","dropdown","ms-lg-2","d-none","d-lg-block"],["data-bs-toggle","dropdown","title","User menu","aria-label","User menu",1,"nav-link","dropdown-toggle","d-flex","align-items-center"],["alt","Profile","class","rounded-circle","style","width: 32px; height: 32px; object-fit: cover; border: 2px solid #198754;",3,"src",4,"ngIf","ngIfElse"],[1,"dropdown-menu","dropdown-menu-end"],["routerLink","/profile",1,"dropdown-item"],[1,"fas","fa-user","me-2"],["routerLink","/settings",1,"dropdown-item"],[1,"fas","fa-cog","me-2"],[1,"dropdown-item","text-danger",3,"click"],[1,"fas","fa-sign-out-alt","me-2"],["alt","Profile",1,"rounded-circle",2,"width","32px","height","32px","object-fit","cover","border","2px solid #198754",3,"src"],[1,"rounded-circle","bg-success","text-white","d-flex","align-items-center","justify-content-center",2,"width","32px","height","32px","font-size","0.9rem"],["role","alert"],[1,"d-flex"],[1,"toast-body"],["type","button","aria-label","Close toast",1,"btn-close","btn-close-white","me-2","m-auto",3,"click"],[1,"badge","bg-danger","ms-1"],[1,"badge","bg-danger","ms-2"],["class","mb-4",4,"ngFor","ngForOf"],[1,"mb-4"],[1,"fw-semibold","mb-3"],[1,"fas","fa-map-marker-alt","me-2"],[1,"badge","bg-secondary","ms-2"],[1,"card","mb-3"],[1,"card-header","bg-white"],[1,"row","align-items-center"],[1,"col-md-8"],[1,"text-muted"],[1,"col-md-4","text-md-end"],[1,"badge",3,"ngClass"],[1,"badge","ms-2",3,"ngClass"],["class","mb-2",4,"ngIf"],[1,"col-md-9"],["rows","2","placeholder","Add a comment or response to this report...",1,"form-control",3,"ngModelChange","ngModel","name"],[1,"btn","btn-sm","btn-primary","mt-2",3,"click","disabled"],[1,"fas","fa-paper-plane","me-1"],["title","Update status",1,"form-select",3,"change"],[3,"value"],[1,"d-flex","gap-2"],[1,"btn","btn-outline-danger",3,"click"],[1,"fas","fa-trash","me-1"],[1,"mb-2"],["class","mb-2",4,"ngFor","ngForOf"],["title","Click to view full size",1,"img-fluid","rounded",2,"cursor","pointer","width","100%","object-fit","cover",3,"click","src","alt"],["src","https://placehold.co/300x200/e8f5e9/2e7d32?text=No+Image","alt","No image",1,"img-fluid","rounded"],[1,"fw-semibold","mb-2"],[1,"fas","fa-map-marked-alt","me-2"],[2,"height","250px","border-radius","8px","border","1px solid #dee2e6","background-color","#f8f9fa",3,"id"],[1,"btn","btn-sm","btn-outline-primary","mt-2",3,"click"],[1,"fas","fa-map","me-1"],[1,"fas","fa-comments","me-2"],["class","mb-2 p-2 bg-light rounded",4,"ngFor","ngForOf"],[1,"mb-2","p-2","bg-light","rounded"],[1,"d-flex","align-items-start"],["alt","Commenter","class","rounded-circle me-2","style","width: 28px; height: 28px; object-fit: cover; border: 2px solid #0d6efd;",3,"src",4,"ngIf","ngIfElse"],[1,"flex-grow-1"],[1,"d-flex","align-items-center"],[1,"fw-semibold","small","me-2"],[1,"mb-0","small"],["alt","Commenter",1,"rounded-circle","me-2",2,"width","28px","height","28px","object-fit","cover","border","2px solid #0d6efd",3,"src"],[1,"rounded-circle","bg-primary","text-white","d-flex","align-items-center","justify-content-center","me-2",2,"width","28px","height","28px","font-size","0.7rem"],["class","text-muted",4,"ngIf"],[1,"alert","alert-info"],[1,"fas","fa-check-circle","me-2"],[1,"badge","bg-warning"],[1,"d-flex","gap-2","mt-3"],[1,"btn","btn-success",3,"click"],[1,"fas","fa-check","me-1"],["name","barangayId","title","Target barangay",1,"form-select",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"fas","fa-info-circle","me-2"],[1,"d-flex","justify-content-between","align-items-start"],[1,"fw-semibold"],[1,"mb-1"],["title","Delete announcement",1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"fas","fa-trash"],[1,"row","g-2","align-items-center"],[1,"col-md-6"],["placeholder","New barangay name","title","New barangay name",1,"form-control"],[1,"row","g-3"],[1,"col-12"],[1,"mt-2"],[4,"ngIf","ngIfElse"],[1,"d-flex","flex-wrap","gap-2"],["title","Open barangay admin",1,"btn","btn-outline-primary",3,"routerLink"],["title","Barangay analytics",1,"btn","btn-outline-secondary",3,"click"],[4,"ngFor","ngForOf"],[1,"badge","bg-secondary","me-1"],[1,"card-header","bg-primary","text-white"],[1,"col-6","col-md-4",2,"max-width","50% !important","flex","0 0 50% !important"],[1,"card","bg-light"],[1,"card-body","text-center"],[1,"fw-bold","text-primary"],[1,"mb-0","text-muted"],[1,"fw-bold","text-success"],[1,"mt-3"],[1,"btn","btn-primary","me-2","mb-2",3,"routerLink"],[1,"fas","fa-edit","me-2"],[1,"table-responsive"],[1,"table","table-hover"],[1,"table-light"],[1,"badge"],["class","btn btn-sm btn-outline-primary me-1","title","Toggle between admin and user role",3,"click",4,"ngIf"],[1,"btn","btn-sm","me-1",3,"click","title"],["title","Permanently delete this user",1,"btn","btn-sm","btn-danger",3,"click"],["title","Toggle between admin and user role",1,"btn","btn-sm","btn-outline-primary","me-1",3,"click"],[1,"modal","d-block",2,"background-color","rgba(0,0,0,0.9)",3,"click"],[1,"modal-dialog","modal-dialog-centered","modal-xl"],[1,"modal-content","bg-transparent","border-0"],[1,"modal-body","text-center","p-0"],["type","button","title","Close",1,"btn-close","btn-close-white","position-absolute","top-0","end-0","m-3",2,"z-index","1050",3,"click"],["alt","Full size image",1,"img-fluid",2,"max-height","90vh",3,"src"]],template:function(t,i){if(t&1&&(p(0,"nav",5)(1,"div",6)(2,"a",7),A(3,"i",8),v(4,"Pollution Report "),m(),p(5,"button",9),A(6,"span",10),m(),p(7,"div",11)(8,"ul",12)(9,"li",13)(10,"a",14),A(11,"i",15),v(12," Home"),m()(),p(13,"li",13)(14,"a",16),A(15,"i",17),v(16," Settings"),m()(),W(17,IK,4,0,"li",18),re(18,"async"),p(19,"li",19)(20,"a",20),A(21,"i",21),v(22," New Report"),m()(),W(23,TK,20,2,"li",22),re(24,"async"),m()()()(),p(25,"div",6)(26,"div",23)(27,"div",24),W(28,DK,5,4,"div",25),m(),p(29,"div",26)(30,"div",27)(31,"div",28)(32,"div",29)(33,"h5",30),v(34,"Confirm"),m(),p(35,"button",31),H("click",function(){return i.onConfirmAnswer(!1)}),m()(),p(36,"div",32)(37,"p"),v(38),m()(),p(39,"div",33)(40,"button",34),H("click",function(){return i.onConfirmAnswer(!1)}),v(41,"Cancel"),m(),p(42,"button",35),H("click",function(){return i.onConfirmAnswer(!0)}),v(43,"Yes"),m()()()()(),p(44,"div",36)(45,"div",37)(46,"button",38),A(47,"i",39),mt(48,xK,1,0),mt(49,MK,2,1),mt(50,PK,1,0),mt(51,RK,1,0),mt(52,kK,1,0),mt(53,NK,1,0),m(),p(54,"ul",40)(55,"li")(56,"a",41),H("click",function(o){return o.preventDefault(),i.setTab("reports")}),A(57,"i",42),v(58,"Reports Management "),m()(),p(59,"li")(60,"a",41),H("click",function(o){return o.preventDefault(),i.setTab("tasks")}),A(61,"i",43),v(62,"Submitted Reports "),W(63,OK,2,1,"span",44),m()(),p(64,"li")(65,"a",41),H("click",function(o){return o.preventDefault(),i.setTab("announcements")}),A(66,"i",45),v(67,"Announcements "),m()(),p(68,"li")(69,"a",41),H("click",function(o){return o.preventDefault(),i.setTab("users")}),A(70,"i",46),v(71,"Users Control "),m()(),p(72,"li")(73,"a",41),H("click",function(o){return o.preventDefault(),i.setTab("barangays")}),A(74,"i",47),v(75,"Barangays "),m()(),p(76,"li")(77,"a",41),H("click",function(o){return o.preventDefault(),i.setTab("analytics")}),A(78,"i",48),v(79,"Analytics "),m()(),p(80,"li"),A(81,"hr",49),m(),p(82,"li")(83,"a",50),H("click",function(o){return o.preventDefault(),i.goHome()}),A(84,"i",51),v(85,"Go to Home "),m()()()()(),p(86,"nav",52)(87,"div",53)(88,"ul",54)(89,"li",13)(90,"a",55),H("click",function(o){return o.preventDefault(),i.setTab("reports")}),A(91,"i",42),v(92),re(93,"translate"),m()(),p(94,"li",13)(95,"a",55),H("click",function(o){return o.preventDefault(),i.setTab("tasks")}),A(96,"i",43),v(97,"Submitted Reports "),W(98,FK,2,1,"span",44),m()(),p(99,"li",13)(100,"a",55),H("click",function(o){return o.preventDefault(),i.setTab("announcements")}),A(101,"i",45),v(102),re(103,"translate"),m()(),p(104,"li",13)(105,"a",55),H("click",function(o){return o.preventDefault(),i.setTab("users")}),A(106,"i",46),v(107),re(108,"translate"),m()(),p(109,"li",13)(110,"a",55),H("click",function(o){return o.preventDefault(),i.setTab("barangays")}),A(111,"i",47),v(112),re(113,"translate"),m()(),p(114,"li",13)(115,"a",55),H("click",function(o){return o.preventDefault(),i.setTab("analytics")}),A(116,"i",48),v(117),re(118,"translate"),m()(),p(119,"li",56)(120,"a",57),H("click",function(o){return o.preventDefault(),i.goHome()}),A(121,"i",51),v(122),re(123,"translate"),m()()()()(),p(124,"main",58),A(125,"br"),p(126,"section",59)(127,"h2",60),v(128,"Reports Management"),m(),p(129,"div",61)(130,"button",62),H("click",function(){return i.filterStatus="all"}),v(131,"All"),m(),p(132,"button",63),H("click",function(){return i.filterStatus="Pending"}),v(133,"Pending"),m(),p(134,"button",64),H("click",function(){return i.filterStatus="In Progress"}),v(135,"In Progress"),m(),p(136,"button",65),H("click",function(){return i.filterStatus="Done"}),v(137,"Done"),m()(),W(138,GK,2,1,"div",66)(139,rY,3,2,"div",66),m(),p(140,"section",59)(141,"h2",67),v(142,"Submitted Reports"),m(),p(143,"p",68),v(144,"Review and approve submitted reports before they appear on the home page."),m(),W(145,oY,3,0,"div",69)(146,uY,43,17,"div",70),m(),p(147,"section",59)(148,"h2",67),v(149,"Create Announcement"),m(),p(150,"div",71)(151,"div",72)(152,"form",73),H("ngSubmit",function(){return i.postAnnouncement(i.announcementModel)}),p(153,"div",74)(154,"label",75),v(155,"Announcement Title"),m(),p(156,"input",76),Ie("ngModelChange",function(o){return Se(i.announcementModel.title,o)||(i.announcementModel.title=o),o}),m()(),p(157,"div",74)(158,"label",75),v(159,"Subtitle"),m(),p(160,"input",77),Ie("ngModelChange",function(o){return Se(i.announcementModel.subtitle,o)||(i.announcementModel.subtitle=o),o}),m()(),W(161,hY,7,3,"div",78)(162,fY,4,0,"div",78),p(163,"div",74)(164,"label",75),v(165,"Description"),m(),p(166,"textarea",79),Ie("ngModelChange",function(o){return Se(i.announcementModel.description,o)||(i.announcementModel.description=o),o}),m()(),p(167,"button",80),A(168,"i",81),v(169,"Post Announcement "),m()()()(),p(170,"h4",60),v(171,"Recent Announcements"),m(),W(172,gY,2,1,"div",66)(173,_Y,3,2,"div",66),m(),p(174,"section",59)(175,"h2",67),v(176,"Barangays Management"),m(),W(177,SY,14,2,"div",66)(178,DY,2,1,"div",66)(179,xY,3,0,"div",69),m(),p(180,"section",59)(181,"h2",67),v(182,"Users Management"),m(),W(183,RY,2,1,"div",66)(184,NY,19,1,"div",66),m(),p(185,"section",59)(186,"h2",67),v(187,"Analytics Overview"),m(),p(188,"div",82)(189,"div",83)(190,"div",84)(191,"div",72)(192,"h3",85),v(193),m(),p(194,"p",86),v(195,"Total Reports"),m()()()(),p(196,"div",83)(197,"div",87)(198,"div",72)(199,"h3",85),v(200),m(),p(201,"p",86),v(202,"Pending"),m()()()(),p(203,"div",83)(204,"div",88)(205,"div",72)(206,"h3",85),v(207),m(),p(208,"p",86),v(209,"In Progress"),m()()()(),p(210,"div",83)(211,"div",89)(212,"div",72)(213,"h3",85),v(214),m(),p(215,"p",86),v(216,"Resolved"),m()()()()()()()()(),p(217,"nav",90)(218,"a",91),A(219,"i",92),p(220,"span"),v(221,"Home"),m()(),p(222,"a",93),A(223,"i",94),p(224,"span"),v(225,"Report"),m()(),p(226,"a",95),A(227,"i",96),p(228,"span"),v(229,"Admin"),m()(),p(230,"a",97),A(231,"i",98),p(232,"span"),v(233,"Account"),m()()(),W(234,OY,6,1,"div",99)),t&2){let r;w(17),k("ngIf",((r=de(18,81,i.user$))==null?null:r.role)==="admin"),w(6),k("ngIf",de(24,83,i.user$)),w(5),k("ngForOf",i.toasts),w(),Mo("display",i.confirmVisible?"block":"none"),Re("show",i.confirmVisible),w(9),J(i.confirmMessage),w(10),gt(i.activeTab==="reports"?48:-1),w(),gt(i.activeTab==="tasks"?49:-1),w(),gt(i.activeTab==="announcements"?50:-1),w(),gt(i.activeTab==="users"?51:-1),w(),gt(i.activeTab==="barangays"?52:-1),w(),gt(i.activeTab==="analytics"?53:-1),w(3),Re("active",i.activeTab==="reports"),w(4),Re("active",i.activeTab==="tasks"),w(3),k("ngIf",i.getPendingApprovalCount()>0),w(2),Re("active",i.activeTab==="announcements"),w(4),Re("active",i.activeTab==="users"),w(4),Re("active",i.activeTab==="barangays"),w(4),Re("active",i.activeTab==="analytics"),w(13),Re("active",i.activeTab==="reports"),w(2),ue("",de(93,85,"admin.reportsManagement")," "),w(3),Re("active",i.activeTab==="tasks"),w(3),k("ngIf",i.getPendingApprovalCount()>0),w(2),Re("active",i.activeTab==="announcements"),w(2),ue("",de(103,87,"admin.announcements")," "),w(3),Re("active",i.activeTab==="users"),w(2),ue("",de(108,89,"admin.usersControl")," "),w(3),Re("active",i.activeTab==="barangays"),w(2),ue("",de(113,91,"admin.barangays")," "),w(3),Re("active",i.activeTab==="analytics"),w(2),ue("",de(118,93,"admin.analytics")," "),w(5),ue("",de(123,95,"admin.goToHome")," "),w(4),k("hidden",i.activeTab!=="reports"),w(4),Re("active",i.filterStatus==="all"),w(2),Re("active",i.filterStatus==="Pending"),w(2),Re("active",i.filterStatus==="In Progress"),w(2),Re("active",i.filterStatus==="Done"),w(2),k("ngIf",i.isMainAdmin),w(),k("ngIf",!i.isMainAdmin),w(),k("hidden",i.activeTab!=="tasks"),w(5),k("ngIf",i.getPendingReports().length===0),w(),k("ngForOf",i.getPendingReports()),w(),k("hidden",i.activeTab!=="announcements"),w(9),Ee("ngModel",i.announcementModel.title),w(4),Ee("ngModel",i.announcementModel.subtitle),w(),k("ngIf",i.isMainAdmin),w(),k("ngIf",!i.isMainAdmin),w(4),Ee("ngModel",i.announcementModel.description),w(6),k("ngIf",i.isMainAdmin),w(),k("ngIf",!i.isMainAdmin),w(),k("hidden",i.activeTab!=="barangays"),w(3),k("ngIf",i.isMainAdmin),w(),k("ngIf",!i.isMainAdmin&&i.barangays.length>0),w(),k("ngIf",!i.isMainAdmin&&i.barangays.length===0),w(),k("hidden",i.activeTab!=="users"),w(3),k("ngIf",i.isMainAdmin),w(),k("ngIf",!i.isMainAdmin),w(),k("hidden",i.activeTab!=="analytics"),w(8),J(i.reports.length),w(7),J(i.pendingCount),w(7),J(i.inProgressCount),w(7),J(i.doneCount),w(20),k("ngIf",i.selectedImage)}},dependencies:[vt,nc,jn,Pt,Xt,qi,$r,Hr,Un,Wi,$n,zi,Si,Sn,Ci,Qt,Cn,ko,ic,Dv],styles:[".profile-avatar[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;object-fit:cover;border:4px solid #198754;box-shadow:0 4px 12px #19875433}.profile-avatar-placeholder[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;background:linear-gradient(135deg,#198754,#20c997);color:#fff;display:inline-flex;align-items:center;justify-content:center;font-size:2.5rem;font-weight:700;box-shadow:0 4px 12px #19875433}.toast-container.top-right[_ngcontent-%COMP%]{position:fixed;top:1rem;right:1rem;z-index:2000}.toast[_ngcontent-%COMP%]{min-width:200px}.dropdown-menu[_ngcontent-%COMP%]{max-height:80vh;overflow-y:auto;border-radius:12px;box-shadow:0 4px 12px #00000026}.dropdown-item[_ngcontent-%COMP%]{padding:12px 20px;transition:background-color .2s ease}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.dropdown-item.active[_ngcontent-%COMP%]{background-color:#198754;color:#fff}.dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:20px;margin-right:8px}@media (max-width: 767.98px){.navbar-collapse[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]{display:none!important}.container-fluid[_ngcontent-%COMP%]{padding:0!important}.row[_ngcontent-%COMP%]{margin:0!important}.col-md-3[_ngcontent-%COMP%], .col-lg-2[_ngcontent-%COMP%], .col-md-9[_ngcontent-%COMP%], .col-lg-10[_ngcontent-%COMP%]{max-width:100%!important;flex:0 0 100%!important;padding:0!important}.card-body[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap!important}.col-6[_ngcontent-%COMP%]{max-width:50%!important;flex:0 0 50%!important}main[_ngcontent-%COMP%]{padding:0!important;margin:0!important;width:100%!important;min-height:calc(100vh - 120px)}body[_ngcontent-%COMP%]:not(.dark-mode)   main[_ngcontent-%COMP%]{background:#f5f7fa}section[_ngcontent-%COMP%]{padding:1rem!important;width:100%;box-sizing:border-box}.navbar[_ngcontent-%COMP%]{padding:.875rem 1rem;box-shadow:0 2px 8px #0000000f;margin:0}body[_ngcontent-%COMP%]:not(.dark-mode)   .navbar[_ngcontent-%COMP%]{background:#fff}.navbar-brand[_ngcontent-%COMP%]{font-size:1rem;font-weight:700}.dropdown[_ngcontent-%COMP%]{width:100%}.dropdown[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{width:100%;text-align:left;background:linear-gradient(135deg,#198754,#20c997);border:none;color:#fff;padding:1rem 1.25rem;border-radius:12px;box-shadow:0 2px 12px #19875426;font-weight:600;font-size:.95rem}.dropdown-menu[_ngcontent-%COMP%]{width:100%;border-radius:12px;padding:.5rem;margin-top:.5rem}.dropdown-item[_ngcontent-%COMP%]{border-radius:8px;padding:.75rem 1rem;font-size:.9rem}.card[_ngcontent-%COMP%]{border-radius:16px;margin-bottom:1rem;box-shadow:0 2px 12px #0000000f;overflow:hidden}.card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#198754,#20c997);color:#fff;padding:1rem 1.25rem;font-weight:600}.card-body[_ngcontent-%COMP%]{padding:1.25rem}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-size:1.375rem;font-weight:700;margin-bottom:1rem}h4[_ngcontent-%COMP%]{font-size:1.05rem;font-weight:600}p[_ngcontent-%COMP%]{font-size:.9rem}.btn[_ngcontent-%COMP%]{font-size:.875rem;padding:.625rem 1.125rem;border-radius:10px}.btn-sm[_ngcontent-%COMP%]{padding:.5rem .875rem;font-size:.8rem}.btn-group[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;gap:0;width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none;margin-bottom:.5rem}.btn-group[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1 1 0;min-width:70px;font-size:.75rem;padding:.625rem .5rem;border-radius:10px!important;margin:0!important;white-space:nowrap;text-align:center}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-left:.375rem!important}.btn-outline-success.active[_ngcontent-%COMP%]{background-color:#198754;border-color:#198754;color:#fff}.btn-outline-warning.active[_ngcontent-%COMP%]{background-color:#ffc107;border-color:#ffc107;color:#000}.btn-outline-primary.active[_ngcontent-%COMP%]{background-color:#0d6efd;border-color:#0d6efd;color:#fff}.btn-outline-secondary.active[_ngcontent-%COMP%]{background-color:#6c757d;border-color:#6c757d;color:#fff}.table-responsive[_ngcontent-%COMP%]{border-radius:12px;overflow-x:auto;background:#fff;box-shadow:0 2px 12px #0000000f;margin:.5rem 0;width:100%}.table[_ngcontent-%COMP%]{font-size:.85rem;min-width:600px;width:100%}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:.8rem;padding:.875rem .75rem;white-space:nowrap;background:#f8f9fa;font-weight:600}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.875rem .75rem;white-space:nowrap}.table[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.4rem .75rem;font-size:.75rem}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{font-size:.9rem;padding:.75rem 1rem;border-radius:10px}.form-label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600}textarea.form-control[_ngcontent-%COMP%]{min-height:120px}.col-12[_ngcontent-%COMP%]{width:100%;padding-left:.5rem;padding-right:.5rem}.g-3[_ngcontent-%COMP%]{--bs-gutter-x: .75rem;--bs-gutter-y: .75rem}img[_ngcontent-%COMP%]{max-width:100%;height:auto}}@media (max-width: 767.98px){body.dark-mode[_ngcontent-%COMP%]{background:#1a1a1a!important}body.dark-mode[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{background:#1a1a1a!important}body.dark-mode[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]{background:#2d2d2d!important;border-bottom-color:#3d3d3d}body.dark-mode[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]{color:#4ade80}body.dark-mode[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#22c55e,#10b981)}body.dark-mode[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{background:#2d2d2d;border-color:#3d3d3d}body.dark-mode[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{color:#e4e4e4}body.dark-mode[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#3d3d3d}body.dark-mode[_ngcontent-%COMP%]   .dropdown-item.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#22c55e,#10b981);color:#fff}body.dark-mode[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#2d2d2d!important;border-color:#3d3d3d}body.dark-mode[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#22c55e,#10b981)}body.dark-mode[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{color:#e4e4e4}body.dark-mode[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#f5f5f5!important}body.dark-mode[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{color:#a8a8a8!important}body.dark-mode[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#f5f5f5}body.dark-mode[_ngcontent-%COMP%]   .btn-outline-success[_ngcontent-%COMP%]{border-color:#22c55e;color:#22c55e}body.dark-mode[_ngcontent-%COMP%]   .btn-outline-success.active[_ngcontent-%COMP%]{background-color:#22c55e;color:#000}body.dark-mode[_ngcontent-%COMP%]   .btn-outline-warning[_ngcontent-%COMP%]{border-color:#f59e0b;color:#f59e0b}body.dark-mode[_ngcontent-%COMP%]   .btn-outline-warning.active[_ngcontent-%COMP%]{background-color:#f59e0b;color:#000}body.dark-mode[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]{border-color:#3b82f6;color:#60a5fa}body.dark-mode[_ngcontent-%COMP%]   .btn-outline-primary.active[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}body.dark-mode[_ngcontent-%COMP%]   .btn-outline-secondary[_ngcontent-%COMP%]{border-color:#6b7280;color:#9ca3af}body.dark-mode[_ngcontent-%COMP%]   .btn-outline-secondary.active[_ngcontent-%COMP%]{background-color:#6b7280;color:#fff}body.dark-mode[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{background:#2d2d2d!important}body.dark-mode[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{color:#e4e4e4}body.dark-mode[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#242424;color:#f5f5f5;border-color:#3d3d3d}body.dark-mode[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-color:#3d3d3d}body.dark-mode[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#333}body.dark-mode[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#e4e4e4;border-color:#3d3d3d}body.dark-mode[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{background:#2d2d2d;border-color:#444;color:#e8e8e8}body.dark-mode[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, body.dark-mode[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus{background:#2d2d2d;border-color:#22c55e;color:#e8e8e8}body.dark-mode[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:#e8e8e8}body.dark-mode[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{background:#242424;border-color:#444;color:#e8e8e8}body.dark-mode[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{background:#2d2d2d;border-color:#3d3d3d;color:#e4e4e4}body.dark-mode[_ngcontent-%COMP%]   .badge.bg-warning[_ngcontent-%COMP%]{background-color:#f59e0b!important;color:#000!important}body.dark-mode[_ngcontent-%COMP%]   .badge.bg-primary[_ngcontent-%COMP%]{background-color:#3b82f6!important;color:#fff!important}body.dark-mode[_ngcontent-%COMP%]   .badge.bg-success[_ngcontent-%COMP%]{background-color:#22c55e!important;color:#000!important}body.dark-mode[_ngcontent-%COMP%]   .badge.bg-danger[_ngcontent-%COMP%]{background-color:#dc2626!important;color:#fff!important}body.dark-mode[_ngcontent-%COMP%]   .badge.bg-secondary[_ngcontent-%COMP%]{background-color:#6b7280!important;color:#fff!important}}body.dark-mode[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{background-color:#1a1a1a;border-right:1px solid #2d2d2d}body.dark-mode[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#fff;border-left:3px solid transparent;font-weight:500;padding:.75rem 1.25rem;transition:all .2s ease;opacity:1}body.dark-mode[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;opacity:1}body.dark-mode[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{background-color:#2a2a2a;color:#fff;border-left-color:#4ade80;opacity:1}body.dark-mode[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#4ade80;opacity:1}body.dark-mode[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background-color:#1f4d2f;color:#fff;border-left-color:#4ade80;font-weight:600;opacity:1}body.dark-mode[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#4ade80;opacity:1}body.dark-mode[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .nav-link.text-success[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .nav-link.text-success[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#4ade80!important;opacity:1}body.dark-mode[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .nav-link.text-success[_ngcontent-%COMP%]:hover{color:#fff!important}body.dark-mode[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]   .nav-link.text-success[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#4ade80!important}body.dark-mode[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{color:#e4e4e4}body.dark-mode[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#f5f5f5!important;font-weight:600;margin-bottom:1.5rem;letter-spacing:-.02em}body.dark-mode[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#e8e8e8!important;font-weight:600}body.dark-mode[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#d0d0d0}body.dark-mode[_ngcontent-%COMP%]   .btn-outline-success[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .btn-outline-warning[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .btn-outline-secondary[_ngcontent-%COMP%]{color:#e8e8e8;border-color:#555}body.dark-mode[_ngcontent-%COMP%]   .btn-outline-success[_ngcontent-%COMP%]:hover{background-color:#22c55e;border-color:#22c55e;color:#000}body.dark-mode[_ngcontent-%COMP%]   .btn-outline-warning[_ngcontent-%COMP%]:hover{background-color:#f59e0b;border-color:#f59e0b;color:#000}body.dark-mode[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:#3b82f6;border-color:#3b82f6;color:#fff}body.dark-mode[_ngcontent-%COMP%]   .btn-outline-secondary[_ngcontent-%COMP%]:hover{background-color:#6b7280;border-color:#6b7280;color:#fff}body.dark-mode[_ngcontent-%COMP%]   .btn-outline-success.active[_ngcontent-%COMP%]{background-color:#22c55e;border-color:#22c55e;color:#000}body.dark-mode[_ngcontent-%COMP%]   .btn-outline-warning.active[_ngcontent-%COMP%]{background-color:#f59e0b;border-color:#f59e0b;color:#000}body.dark-mode[_ngcontent-%COMP%]   .btn-outline-primary.active[_ngcontent-%COMP%]{background-color:#3b82f6;border-color:#3b82f6;color:#fff}body.dark-mode[_ngcontent-%COMP%]   .btn-outline-secondary.active[_ngcontent-%COMP%]{background-color:#6b7280;border-color:#6b7280;color:#fff}body.dark-mode[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > .card[_ngcontent-%COMP%]{background-color:#1d1d1d;border-color:#2d2d2d;color:#e4e4e4;transition:transform .2s ease,box-shadow .2s ease}body.dark-mode[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > .card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0006}body.dark-mode[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .display-4[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .h5[_ngcontent-%COMP%]{color:#f5f5f5!important;font-weight:700}body.dark-mode[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{color:#a8a8a8!important}body.dark-mode[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{color:#e4e4e4;background-color:transparent;border-collapse:separate;border-spacing:0}body.dark-mode[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#242424;color:#f5f5f5}body.dark-mode[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-color:#2d2d2d;color:#f5f5f5;font-weight:600;padding:1rem 1.25rem;letter-spacing:.02em;text-transform:uppercase;font-size:.75rem}body.dark-mode[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid #2d2d2d;transition:background-color .15s ease}body.dark-mode[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f8f8}body.dark-mode[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#fff}body.dark-mode[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n):hover{background-color:#f8f8f8}body.dark-mode[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-color:#2d2d2d;color:#1a1a1a;padding:1rem 1.25rem;vertical-align:middle;font-size:.95rem}body.dark-mode[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#000;font-weight:600}body.dark-mode[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.875rem;font-weight:500;border-width:1.5px;transition:all .2s ease}body.dark-mode[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]{color:#60a5fa;border-color:#3b82f6}body.dark-mode[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:#3b82f6;color:#000}body.dark-mode[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]{color:#f87171;border-color:#dc2626}body.dark-mode[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]:hover{background-color:#dc2626;color:#fff}body.dark-mode[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-left:.5rem}body.dark-mode[_ngcontent-%COMP%]   .badge.bg-warning[_ngcontent-%COMP%]{background-color:#f59e0b!important;color:#000!important;font-weight:600}body.dark-mode[_ngcontent-%COMP%]   .badge.bg-primary[_ngcontent-%COMP%]{background-color:#3b82f6!important;color:#fff!important;font-weight:600}body.dark-mode[_ngcontent-%COMP%]   .badge.bg-success[_ngcontent-%COMP%]{background-color:#22c55e!important;color:#000!important;font-weight:600}body.dark-mode[_ngcontent-%COMP%]   .badge.bg-secondary[_ngcontent-%COMP%]{background-color:#6b7280!important;color:#fff!important;font-weight:600}body.dark-mode[_ngcontent-%COMP%]   .badge.bg-danger[_ngcontent-%COMP%]{background-color:#dc2626!important;color:#fff!important;font-weight:600}body.dark-mode[_ngcontent-%COMP%]   .badge.bg-info[_ngcontent-%COMP%]{background-color:#06b6d4!important;color:#000!important;font-weight:600}body.dark-mode[_ngcontent-%COMP%]   .text-warning[_ngcontent-%COMP%]{color:#fbbf24!important}body.dark-mode[_ngcontent-%COMP%]   .text-primary[_ngcontent-%COMP%]{color:#60a5fa!important}body.dark-mode[_ngcontent-%COMP%]   .text-success[_ngcontent-%COMP%]{color:#4ade80!important}body.dark-mode[_ngcontent-%COMP%]   .text-danger[_ngcontent-%COMP%]{color:#f87171!important}body.dark-mode[_ngcontent-%COMP%]   .text-secondary[_ngcontent-%COMP%]{color:#9ca3af!important}body.dark-mode[_ngcontent-%COMP%]   .border-start[_ngcontent-%COMP%]{border-left-color:#444!important}body.dark-mode[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]{border-color:#333!important}body.dark-mode[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{background-color:#151515;color:#e4e4e4}body.dark-mode[_ngcontent-%COMP%]   section[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   section[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]{color:#f5f5f5!important;font-weight:600;padding-bottom:.75rem;border-bottom:2px solid #2d2d2d;margin-bottom:1.5rem}body.dark-mode[_ngcontent-%COMP%]   section[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   section[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3faf60;margin-right:.5rem}body.dark-mode[_ngcontent-%COMP%]   section[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   section[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{background-color:#2d2d2d!important;color:#e4e4e4!important;font-weight:600;padding:.35rem .65rem;margin-left:.5rem}body.dark-mode[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%]{background-color:#2a2a2a;border-color:#444;color:#e8e8e8}body.dark-mode[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e8e8e8}body.dark-mode[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#f0f0f0}body.dark-mode[_ngcontent-%COMP%]   .card.bg-white[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card-header.bg-white[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card.bg-white[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card.bg-white[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card.bg-white[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card.bg-white[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card.bg-white[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1a1a1a!important}body.dark-mode[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-color:#444;opacity:.3}body.dark-mode[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]{background-color:#2a2a2a;color:#e8e8e8;border:2px solid #444}body.dark-mode[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{background-color:#1e1e1e;border-color:#333;color:#e8e8e8}body.dark-mode[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:hover{background-color:#2a2a2a}body.dark-mode[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}body.dark-mode[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#1e1e1e}body.dark-mode[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#444;border-radius:6px}body.dark-mode[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}"]})};var ku=rx(vx());var jT=()=>[];function FY(n,e){n&1&&(p(0,"li",12)(1,"a",51),A(2,"i",52),v(3," Help"),m()())}function LY(n,e){n&1&&(p(0,"li",12)(1,"a",53),A(2,"i",54),v(3," Admin"),m()())}function VY(n,e){if(n&1&&A(0,"img",66),n&2){let t=L().ngIf;k("src",t.profilePictureUrl,pt)}}function BY(n,e){if(n&1&&(p(0,"div",67),v(1),m()),n&2){let t=L().ngIf;w(),ue(" ",(t.fullName||t.email||"U").charAt(0).toUpperCase()," ")}}function jY(n,e){if(n&1){let t=he();p(0,"li",55)(1,"a",56),W(2,VY,1,1,"img",57)(3,BY,2,1,"ng-template",null,1,Lt),m(),p(5,"ul",58)(6,"li")(7,"a",59),A(8,"i",60),v(9,"My Profile"),m()(),p(10,"li")(11,"a",61),A(12,"i",62),v(13,"Settings"),m()(),p(14,"li"),A(15,"hr",63),m(),p(16,"li")(17,"a",64),H("click",function(){Y(t);let r=L();return Q(r.logout())}),A(18,"i",65),v(19,"Logout"),m()()()()}if(n&2){let t=e.ngIf,i=ze(4);w(2),k("ngIf",t.profilePictureUrl)("ngIfElse",i)}}function UY(n,e){if(n&1){let t=he();p(0,"div",68)(1,"input",69),H("input",function(r){Y(t);let o=L();return Q(o.updateDate(r.target.value))}),m()()}if(n&2){let t=L();w(),k("value",t.selectedDate())}}function $Y(n,e){if(n&1&&(p(0,"div",24)(1,"div",70)(2,"div",71)(3,"div",72)(4,"div",26),A(5,"i",73),p(6,"h3",74),v(7),m(),p(8,"p",75),v(9,"Total Reports"),m()()()(),p(10,"div",71)(11,"div",72)(12,"div",26),A(13,"i",76),p(14,"h3",74),v(15),m(),p(16,"p",75),v(17,"Pending"),m()()()(),p(18,"div",77)(19,"div",72)(20,"div",26),A(21,"i",78),p(22,"h3",74),v(23),m(),p(24,"p",75),v(25,"Resolved"),m()()()()()()),n&2){let t=L();w(7),J(t.totalReports()),w(8),J(t.pendingReports()),w(8),J(t.resolvedReports())}}function HY(n,e){if(n&1&&(p(0,"div",80)(1,"div",81),A(2,"i",82),p(3,"div")(4,"h5",83),A(5,"i",84),v(6),m(),p(7,"h6",85),v(8),m(),p(9,"p",86),v(10),m(),p(11,"small",87),v(12),re(13,"date"),m()()()()),n&2){let t=L().ngIf,i=L();w(6),ue(" ",t[0].title),w(2),J(t[0].subtitle),w(2),J(t[0].description),w(2),En("Posted ",i.formatTimestamp(t[0].createdAt)?In(13,5,i.formatTimestamp(t[0].createdAt),"short"):"just now"," \u2022 ",t[0].location)}}function zY(n,e){if(n&1&&(Ja(0),W(1,HY,14,8,"div",79),ec()),n&2){let t=e.ngIf;w(),k("ngIf",t.length>0)}}function qY(n,e){if(n&1&&A(0,"img",109),n&2){let t=L().$implicit;k("src",t.reporterProfilePic,pt)}}function WY(n,e){if(n&1&&(p(0,"div",110),v(1),m()),n&2){let t=L().$implicit,i=L(2);w(),ue(" ",i.getInitials(t.reporterName)," ")}}function GY(n,e){if(n&1){let t=he();p(0,"div")(1,"img",113),H("click",function(){let r=Y(t).$implicit,o=L(4);return Q(o.openImageModal(r))}),m()()}if(n&2){let t=e.$implicit,i=e.index,r=L(2).$implicit;Ps(r.images.length===1?"col-12":"col-6"),w(),k("src",t,pt)("alt",r.type+" report image "+(i+1))}}function KY(n,e){if(n&1&&(p(0,"div",97)(1,"div",111),W(2,GY,2,4,"div",112),m()()),n&2){let t=L().$implicit;w(2),k("ngForOf",t.images)}}function YY(n,e){if(n&1){let t=he();p(0,"div",114)(1,"h6",115),A(2,"i",116),v(3,"Report Location"),m(),A(4,"div",117),p(5,"button",118),H("click",function(){Y(t);let r=L().$implicit,o=L(2);return Q(o.initializeMap(r.id,r.lat,r.lng))}),A(6,"i",119),v(7,"Show Map "),m()()}if(n&2){let t=L().$implicit;w(4),k("id","map-"+t.id)}}function QY(n,e){n&1&&(p(0,"div",114)(1,"small",87),A(2,"i",120),v(3,"This report was submitted before map tracking was enabled."),m()())}function XY(n,e){if(n&1&&A(0,"img",132),n&2){let t=e.ngIf;k("src",t,pt)}}function ZY(n,e){if(n&1&&(p(0,"div",133),v(1),m()),n&2){let t=L().$implicit,i=L(4);w(),ue(" ",i.getInitials(t.userName)," ")}}function JY(n,e){n&1&&(p(0,"span",134),v(1,"Admin"),m())}function eQ(n,e){if(n&1&&(p(0,"div",124)(1,"div",125),W(2,XY,1,1,"img",126)(3,ZY,2,1,"ng-template",null,3,Lt),p(5,"div",92)(6,"div",127)(7,"span",128),v(8),m(),W(9,JY,2,0,"span",129),p(10,"small",130),v(11),re(12,"date"),m()(),p(13,"p",131),v(14),m()()()()),n&2){let t=e.$implicit,i=ze(4),r=L(4);w(2),k("ngIf",r.getUserProfilePicture(t.userId))("ngIfElse",i),w(6),J(t.userName),w(),k("ngIf",t.userRole==="admin"),w(2),J(In(12,6,r.formatCommentDate(t.createdAt),"short")),w(3),J(t.text)}}function tQ(n,e){if(n&1&&(p(0,"div",114)(1,"h6",121),A(2,"i",122),v(3,"Comments"),m(),W(4,eQ,15,9,"div",123),m()),n&2){let t=L().$implicit;w(4),k("ngForOf",t.comments)}}function nQ(n,e){if(n&1){let t=he();p(0,"div",114)(1,"h6",115),A(2,"i",135),v(3,"Add Comment"),m(),p(4,"div",30)(5,"textarea",136),H("input",function(r){Y(t);let o=L().$implicit,s=L(2);return Q(s.updateCommentText(o.id,r.target.value))}),m()(),p(6,"button",137),H("click",function(){Y(t);let r=L().$implicit,o=L(2);return Q(o.addComment(r.id))}),A(7,"i",138),v(8,"Submit Comment "),m()()}if(n&2){let t=L().$implicit,i=L(2);w(5),k("value",i.commentTexts()[t.id]||"")("name","comment-"+t.id)}}function iQ(n,e){if(n&1&&(p(0,"div",139)(1,"div",125),A(2,"i",140),p(3,"div")(4,"h6",141),v(5,"Barangay Admin Response"),m(),p(6,"p",142),v(7),m(),p(8,"small",87),v(9),m()()()()),n&2){let t=L().$implicit;w(7),J(t.adminResponse.text),w(2),ue("Responded ",t.adminResponse.date)}}function rQ(n,e){if(n&1){let t=he();p(0,"div",89)(1,"div",26)(2,"div",90),W(3,qY,1,1,"img",91)(4,WY,2,1,"ng-template",null,2,Lt),p(6,"div",92)(7,"h6",93),v(8),m(),p(9,"small",87),v(10),re(11,"date"),m()(),p(12,"span",94),v(13),re(14,"titlecase"),m()(),W(15,KY,3,1,"div",95),p(16,"p",96),v(17),m(),p(18,"div",97)(19,"small",87),A(20,"i",98),v(21),m(),p(22,"small",99),A(23,"i",100),v(24),m()(),p(25,"div",101)(26,"button",102),H("click",function(){let r=Y(t).$implicit,o=L(2);return Q(o.upvote(r))}),A(27,"i",103),v(28),m(),p(29,"span",104),A(30,"i",105),v(31),m(),p(32,"span",106),v(33),m()(),W(34,YY,8,1,"div",107)(35,QY,4,0,"div",107)(36,tQ,5,1,"div",107)(37,nQ,9,2,"div",107)(38,iQ,10,2,"div",108),m()()}if(n&2){let t,i,r=e.$implicit,o=ze(5),s=L(2);w(3),k("ngIf",r.reporterProfilePic)("ngIfElse",o),w(5),J(r.reporterName),w(2),En("",r.location," \u2022 ",s.formatTimestamp(r.createdAt)?In(11,20,s.formatTimestamp(r.createdAt),"short"):"just now"),w(3),J(de(14,23,r.type)),w(2),k("ngIf",r.images&&r.images.length),w(2),J(r.description),w(4),ue("",r.location," "),w(3),En("",r.date," ",r.time," "),w(2),k("disabled",((t=s.user())==null?null:t.role)==="admin"||(r.upvotedBy||Lr(25,jT)).includes(((t=s.user())==null?null:t.uid)||"")),w(2),ue("",r.upvotes," Upvotes "),w(3),ue("",(r.comments||Lr(26,jT)).length," Comments"),w(2),J(r.status),w(),k("ngIf",r.lat&&r.lng),w(),k("ngIf",!r.lat||!r.lng),w(),k("ngIf",(r.comments||Lr(27,jT)).length>0),w(),k("ngIf",((i=s.user())==null?null:i.role)==="admin"),w(),k("ngIf",r.adminResponse)}}function oQ(n,e){if(n&1&&(Ja(0),W(1,rQ,39,28,"div",88),ec()),n&2){let t=L();w(),k("ngForOf",t.filteredReports())}}function sQ(n,e){n&1&&(p(0,"p",143),v(1,"No reports found."),m())}function aQ(n,e){if(n&1){let t=he();p(0,"div",144),H("click",function(){Y(t);let r=L();return Q(r.closeImageModal())}),p(1,"div",145)(2,"div",146)(3,"div",147)(4,"button",148),H("click",function(){Y(t);let r=L();return Q(r.closeImageModal())}),m(),A(5,"img",149),m()()()()}if(n&2){let t=L();w(5),k("src",t.selectedImage(),pt)}}function cQ(n,e){n&1&&(p(0,"a",47),A(1,"i",150),p(2,"span"),v(3,"Help"),m()())}function lQ(n,e){n&1&&(p(0,"a",48),A(1,"i",151),p(2,"span"),v(3,"Admin"),m()())}var Rv=class n{constructor(e,t,i,r,o){this.authService=e;this.reportsService=t;this.announcementsService=i;this.usersService=r;this.router=o;this.user$=this.authService.user$,this.user=iI(this.authService.user$,{initialValue:null}),this.baseReports$=this.getEnrichedReports(),this.reports=iI(this.baseReports$,{initialValue:[]}),this.announcements$=this.user$.pipe(Ke(s=>s?s.role==="admin"&&(!s.barangay||s.barangay==="")?this.announcementsService.getAllAnnouncements():this.announcementsService.getAnnouncementsForBarangay(s?.barangay||null):ce([])))}searchTerm=Ct("");selectedFilter=Ct("Latest");selectedDate=Ct("");commentTexts=Ct({});selectedImage=Ct(null);user;user$;announcements$;baseReports$;reports;usersMap=new Map;filteredReports=ni(()=>{let e=this.reports(),t=this.searchTerm().toLowerCase(),i=this.selectedFilter(),r=this.selectedDate(),o=e;if(t&&(o=o.filter(s=>s.description.toLowerCase().includes(t)||s.location.toLowerCase().includes(t))),i==="Yesterday"){let s=new Date;s.setDate(s.getDate()-1),s.setHours(0,0,0,0),o=o.filter(a=>{let c=a.createdAt instanceof Date?a.createdAt:new Date(a.createdAt);return c.setHours(0,0,0,0),c.getTime()===s.getTime()})}if(i==="Select Date"&&r){let s=new Date(r);s.setHours(0,0,0,0),o=o.filter(a=>{let c=a.createdAt instanceof Date?a.createdAt:new Date(a.createdAt);return c.setHours(0,0,0,0),c.getTime()===s.getTime()})}return i==="Trending"&&(o=[...o].sort((s,a)=>(a.upvotes||0)-(s.upvotes||0))),o});totalReports=ni(()=>this.reports().length);pendingReports=ni(()=>this.reports().filter(e=>e.status==="Pending").length);resolvedReports=ni(()=>this.reports().filter(e=>e.status==="Done").length);maps={};getEnrichedReports(){return this.user$.pipe(Ke(e=>e?(e.role==="admin"&&(!e.barangay||e.barangay==="")?this.reportsService.getAllReports():e.barangay?this.reportsService.getReportsByBarangay(e.barangay):ce([])).pipe(se(o=>o.filter(s=>s.approved===!0))).pipe(Ke(o=>{if(o.length===0)return ce([]);let s=new Set;return o.forEach(a=>{a.reporterId&&s.add(a.reporterId),(a.comments||[]).forEach(c=>{c.userId&&s.add(c.userId)})}),this.usersService.getAllUsers().pipe(se(a=>{let c=new Map(a.map(l=>[l.uid,l]));return this.usersMap=c,o.map(l=>{let u=Array.isArray(l.images)?l.images:[],h;l.createdAt&&typeof l.createdAt.toDate=="function"?h=l.createdAt.toDate():l.createdAt instanceof Date?h=l.createdAt:h=new Date(l.createdAt);let f=c.get(l.reporterId),y=f?f.username||f.fullName||f.email||"Anonymous":l.reporterName||"Anonymous",b=f?.profilePictureUrl||null;return fe(Z({},l),{images:u,reporterName:y,reporterProfilePic:b,createdAt:h})})}))})):ce([])))}onSearch(){this.selectedFilter.set("Latest")}updateSearchTerm(e){this.searchTerm.set(e)}updateFilter(e){this.selectedFilter.set(e)}updateDate(e){this.selectedDate.set(e)}upvote(e){return C(this,null,function*(){if(!e.id)return;let t=this.user();if(!t)return;if(t.role==="admin"){alert("Admins cannot upvote reports");return}if((e.upvotedBy||[]).includes(t.uid)){alert("You have already upvoted this report");return}try{yield this.reportsService.upvoteReport(e.id,t.uid)}catch(r){console.error("Failed to upvote",r)}})}logout(){return C(this,null,function*(){try{yield this.authService.logout(),yield this.router.navigate(["/login"])}catch(e){console.error("Logout failed",e)}})}getInitials(e){return e?e.split(" ").map(t=>t[0]).join("").toUpperCase():""}getUserProfilePicture(e){return this.usersMap.get(e)?.profilePictureUrl||null}ngAfterViewInit(){}initializeMap(e,t,i){this.maps[e]&&(this.maps[e].remove(),delete this.maps[e]),setTimeout(()=>{if(!document.getElementById(`map-${e}`))return;let o=ku.map(`map-${e}`).setView([t,i],15);ku.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xA9 OpenStreetMap contributors"}).addTo(o),ku.marker([t,i]).addTo(o).bindPopup("Report Location").openPopup(),this.maps[e]=o,setTimeout(()=>o.invalidateSize(),100)},100)}addComment(e){return C(this,null,function*(){let t=this.user();if(!t||t.role!=="admin"){alert("Only admins can add comments");return}let i=this.commentTexts(),r=i[e]?.trim();if(!r){alert("Please enter a comment");return}try{yield this.reportsService.addComment(e,t.uid,t.username||t.fullName||t.email||"Admin",t.role,r);let o=Z({},i);delete o[e],this.commentTexts.set(o),alert("Comment added successfully")}catch(o){console.error("Failed to add comment",o),alert("Failed to add comment")}})}updateCommentText(e,t){let i=fe(Z({},this.commentTexts()),{[e]:t});this.commentTexts.set(i)}formatCommentDate(e){return e?typeof e.toDate=="function"?e.toDate():e instanceof Date?e:new Date(e):new Date}formatTimestamp(e){return e?typeof e.toDate=="function"?e.toDate():e instanceof Date?e:e.seconds?new Date(e.seconds*1e3):new Date(e):null}openImageModal(e){this.selectedImage.set(e)}closeImageModal(){this.selectedImage.set(null)}static \u0275fac=function(t){return new(t||n)(K(Be),K(Ji),K(ra),K(oa),K(je))};static \u0275cmp=it({type:n,selectors:[["app-home"]],decls:78,vars:32,consts:[["noReports",""],["userIcon",""],["reporterAvatar",""],["commentAvatar",""],[1,"navbar","navbar-expand-lg","navbar-light","bg-white","shadow-sm","sticky-top"],[1,"container-fluid"],["routerLink","/home",1,"navbar-brand","fw-bold","text-success"],[1,"fas","fa-leaf","me-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","title","Toggle navigation menu","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto","align-items-center"],[1,"nav-item"],["routerLink","/home",1,"nav-link"],[1,"fas","fa-home","me-1"],["routerLink","/settings",1,"nav-link"],[1,"fas","fa-cog","me-1"],["class","nav-item",4,"ngIf"],[1,"nav-item","ms-lg-3"],["routerLink","/submit-report",1,"btn","btn-success"],[1,"fas","fa-plus","me-1"],["class","nav-item dropdown ms-lg-2",4,"ngIf"],[1,"container","mt-4"],[1,"row"],[1,"col-12","mb-4"],[1,"card","border-0","shadow-sm"],[1,"card-body"],[1,"row","g-3","align-items-end"],[1,"col-md-6"],[1,"form-label","fw-medium"],[1,"input-group"],["type","text","placeholder","Search by location or description...",1,"form-control",3,"input","value"],["title","Search reports",1,"btn","btn-success",3,"click"],[1,"fas","fa-search"],["role","group",1,"btn-group","w-100"],[1,"btn","btn-outline-success",3,"click"],["class","mt-2",4,"ngIf"],["class","col-12 mb-4",4,"ngIf"],[1,"col-lg-8","mx-auto"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["class","modal d-block","style","background-color: rgba(0,0,0,0.9);",3,"click",4,"ngIf"],[1,"mobile-bottom-nav","d-md-none"],["routerLink","/home","routerLinkActive","active",1,"mobile-nav-item"],[1,"fas","fa-home"],["routerLink","/submit-report",1,"mobile-nav-item"],[1,"fas","fa-plus-circle"],["routerLink","/help","routerLinkActive","active",1,"mobile-nav-item"],["routerLink","/admin","routerLinkActive","active",1,"mobile-nav-item"],["routerLink","/profile","routerLinkActive","active",1,"mobile-nav-item"],[1,"fas","fa-user"],["routerLink","/help",1,"nav-link"],[1,"fas","fa-question-circle","me-1"],["routerLink","/admin",1,"nav-link"],[1,"fas","fa-shield-alt","me-1"],[1,"nav-item","dropdown","ms-lg-2"],["data-bs-toggle","dropdown",1,"nav-link","dropdown-toggle","d-flex","align-items-center"],["alt","Profile","class","rounded-circle","style","width: 32px; height: 32px; object-fit: cover; border: 2px solid #198754;",3,"src",4,"ngIf","ngIfElse"],[1,"dropdown-menu","dropdown-menu-end"],["routerLink","/profile",1,"dropdown-item"],[1,"fas","fa-user","me-2"],["routerLink","/settings",1,"dropdown-item"],[1,"fas","fa-cog","me-2"],[1,"dropdown-divider"],[1,"dropdown-item","text-danger",3,"click"],[1,"fas","fa-sign-out-alt","me-2"],["alt","Profile",1,"rounded-circle",2,"width","32px","height","32px","object-fit","cover","border","2px solid #198754",3,"src"],[1,"rounded-circle","bg-success","text-white","d-flex","align-items-center","justify-content-center",2,"width","32px","height","32px","font-size","0.9rem"],[1,"mt-2"],["type","date","placeholder","Select date to filter",1,"form-control",3,"input","value"],[1,"row","g-3"],[1,"col-6","col-md-4"],[1,"card","border-0","shadow-sm","text-center"],[1,"fas","fa-file-alt","text-primary","fa-2x","mb-2"],[1,"fw-bold","mb-0"],[1,"text-muted","mb-0","small"],[1,"fas","fa-clock","text-warning","fa-2x","mb-2"],[1,"col-12","col-md-4"],[1,"fas","fa-check-circle","text-success","fa-2x","mb-2"],["class","card border-0 shadow-sm mb-4 border-start border-4 border-info",4,"ngIf"],[1,"card","border-0","shadow-sm","mb-4","border-start","border-4","border-info"],[1,"card-body","d-flex","align-items-start"],[1,"fas","fa-bullhorn","text-info","fa-2x","me-3"],[1,"card-title","fw-bold","mb-2"],[1,"fas","fa-star","text-warning","me-1"],[1,"fw-semibold"],[1,"card-text","text-muted","mb-2"],[1,"text-muted"],["class","card border-0 shadow-sm mb-4",4,"ngFor","ngForOf"],[1,"card","border-0","shadow-sm","mb-4"],[1,"d-flex","align-items-center","mb-3"],["alt","Reporter","class","rounded-circle me-2","style","width: 40px; height: 40px; object-fit: cover; border: 2px solid #198754;",3,"src",4,"ngIf","ngIfElse"],[1,"flex-grow-1"],[1,"mb-0","fw-semibold"],[1,"badge","bg-danger"],["class","mb-3",4,"ngIf"],[1,"card-text"],[1,"mb-3"],[1,"fas","fa-map-marker-alt","me-1"],[1,"text-muted","ms-3"],[1,"fas","fa-calendar","me-1"],[1,"d-flex","align-items-center","gap-3","border-top","pt-3"],[1,"btn","btn-sm","btn-outline-success",3,"click","disabled"],[1,"fas","fa-arrow-up","me-1"],[1,"text-muted","small"],[1,"fas","fa-comment","me-1"],[1,"badge","bg-warning","text-dark","ms-auto"],["class","mt-3",4,"ngIf"],["class","mt-3 p-3 bg-light rounded",4,"ngIf"],["alt","Reporter",1,"rounded-circle","me-2",2,"width","40px","height","40px","object-fit","cover","border","2px solid #198754",3,"src"],[1,"rounded-circle","bg-success","text-white","d-flex","align-items-center","justify-content-center","me-2",2,"width","40px","height","40px","font-size","1rem"],[1,"row","g-2"],[3,"class",4,"ngFor","ngForOf"],["title","Click to view full size",1,"img-fluid","rounded",2,"cursor","pointer","width","100%","object-fit","cover","max-height","300px",3,"click","src","alt"],[1,"mt-3"],[1,"fw-semibold","mb-2"],[1,"fas","fa-map-marked-alt","me-2"],[2,"height","300px","border-radius","8px","border","1px solid #dee2e6","background-color","#f8f9fa",3,"id"],[1,"btn","btn-sm","btn-outline-primary","mt-2",3,"click"],[1,"fas","fa-map","me-1"],[1,"fas","fa-info-circle","me-1"],[1,"fw-semibold","mb-3"],[1,"fas","fa-comments","me-2"],["class","mb-3 p-3 bg-light rounded",4,"ngFor","ngForOf"],[1,"mb-3","p-3","bg-light","rounded"],[1,"d-flex","align-items-start"],["alt","Commenter","class","rounded-circle me-2","style","width: 32px; height: 32px; object-fit: cover; border: 2px solid #0d6efd;",3,"src",4,"ngIf","ngIfElse"],[1,"d-flex","align-items-center","mb-1"],[1,"fw-semibold","me-2"],["class","badge bg-primary",4,"ngIf"],[1,"text-muted","ms-auto"],[1,"mb-0","small"],["alt","Commenter",1,"rounded-circle","me-2",2,"width","32px","height","32px","object-fit","cover","border","2px solid #0d6efd",3,"src"],[1,"rounded-circle","bg-primary","text-white","d-flex","align-items-center","justify-content-center","me-2",2,"width","32px","height","32px","font-size","0.8rem"],[1,"badge","bg-primary"],[1,"fas","fa-plus-circle","me-2"],["rows","2","placeholder","Enter your comment...",1,"form-control",3,"input","value","name"],[1,"btn","btn-primary","btn-sm","mt-2",3,"click"],[1,"fas","fa-paper-plane","me-1"],[1,"mt-3","p-3","bg-light","rounded"],[1,"fas","fa-user-shield","text-primary","me-2"],[1,"mb-1","fw-semibold","text-primary"],[1,"mb-1","small"],[1,"text-center","text-muted"],[1,"modal","d-block",2,"background-color","rgba(0,0,0,0.9)",3,"click"],[1,"modal-dialog","modal-dialog-centered","modal-xl"],[1,"modal-content","bg-transparent","border-0"],[1,"modal-body","text-center","p-0"],["type","button",1,"btn-close","btn-close-white","position-absolute","top-0","end-0","m-3",2,"z-index","1050",3,"click"],["alt","Full size image",1,"img-fluid",2,"max-height","90vh",3,"src"],[1,"fas","fa-question-circle"],[1,"fas","fa-shield-alt"]],template:function(t,i){if(t&1){let r=he();p(0,"nav",4)(1,"div",5)(2,"a",6),A(3,"i",7),v(4,"Pollution Report "),m(),p(5,"button",8),A(6,"span",9),m(),p(7,"div",10)(8,"ul",11)(9,"li",12)(10,"a",13),A(11,"i",14),v(12," Home"),m()(),mt(13,FY,4,0,"li",12),re(14,"async"),p(15,"li",12)(16,"a",15),A(17,"i",16),v(18," Settings"),m()(),W(19,LY,4,0,"li",17),re(20,"async"),p(21,"li",18)(22,"a",19),A(23,"i",20),v(24," New Report"),m()(),W(25,jY,20,2,"li",21),re(26,"async"),m()()()(),p(27,"div",22)(28,"div",23)(29,"div",24)(30,"div",25)(31,"div",26)(32,"div",27)(33,"div",28)(34,"label",29),v(35,"Search Reports"),m(),p(36,"div",30)(37,"input",31),H("input",function(s){return Y(r),Q(i.updateSearchTerm(s.target.value))}),m(),p(38,"button",32),H("click",function(){return Y(r),Q(i.onSearch())}),A(39,"i",33),m()()(),p(40,"div",28)(41,"label",29),v(42,"Filter By"),m(),p(43,"div",34)(44,"button",35),H("click",function(){return Y(r),Q(i.updateFilter("Latest"))}),v(45,"Latest"),m(),p(46,"button",35),H("click",function(){return Y(r),Q(i.updateFilter("Yesterday"))}),v(47,"Yesterday"),m(),p(48,"button",35),H("click",function(){return Y(r),Q(i.updateFilter("Select Date"))}),v(49,"Select Date"),m(),p(50,"button",35),H("click",function(){return Y(r),Q(i.updateFilter("Trending"))}),v(51,"Trending"),m()(),W(52,UY,2,1,"div",36),m()()()()(),W(53,$Y,26,3,"div",37),p(54,"div",38),W(55,zY,2,1,"ng-container",39),re(56,"async"),W(57,oQ,2,1,"ng-container",40)(58,sQ,2,0,"ng-template",null,0,Lt),m()()(),W(60,aQ,6,1,"div",41),p(61,"nav",42)(62,"a",43),A(63,"i",44),p(64,"span"),v(65,"Home"),m()(),p(66,"a",45),A(67,"i",46),p(68,"span"),v(69,"Report"),m()(),mt(70,cQ,4,0,"a",47),re(71,"async"),mt(72,lQ,4,0,"a",48),re(73,"async"),p(74,"a",49),A(75,"i",50),p(76,"span"),v(77,"Account"),m()()()}if(t&2){let r,o,s,a,c,l=ze(59);w(13),gt(((r=de(14,20,i.user$))==null?null:r.role)!=="admin"?13:-1),w(6),k("ngIf",((o=de(20,22,i.user$))==null?null:o.role)==="admin"),w(6),k("ngIf",de(26,24,i.user$)),w(12),k("value",i.searchTerm()),w(7),Re("active",i.selectedFilter()==="Latest"),w(2),Re("active",i.selectedFilter()==="Yesterday"),w(2),Re("active",i.selectedFilter()==="Select Date"),w(2),Re("active",i.selectedFilter()==="Trending"),w(2),k("ngIf",i.selectedFilter()==="Select Date"),w(),k("ngIf",(s=i.user())==null?null:s.barangay),w(2),k("ngIf",de(56,26,i.announcements$)),w(2),k("ngIf",i.filteredReports().length>0)("ngIfElse",l),w(3),k("ngIf",i.selectedImage()),w(10),gt(((a=de(71,28,i.user$))==null?null:a.role)!=="admin"?70:-1),w(2),gt(((c=de(73,30,i.user$))==null?null:c.role)==="admin"?72:-1)}},dependencies:[vt,jn,Pt,Xt,Qt,Cn,ko,ic],encapsulation:2,changeDetection:0})};var kv=class n{constructor(e){this.firestore=e}getUserById(e){let t=_e(this.firestore,`users/${e}`);return Pi(t)}getUsersByBarangay(e){let t=_t(this.firestore,"users"),i=Ri(t,io("barangay","==",e));return qn(i,{idField:"id"})}getAllUsers(){let e=_t(this.firestore,"users");return qn(e,{idField:"id"})}createUserDoc(e){return C(this,null,function*(){let t=_t(this.firestore,"users");if(e.uid){let i=_e(this.firestore,`users/${e.uid}`);yield et(i,fe(Z({},e),{createdAt:e.createdAt||Mi()})).catch(()=>C(this,null,function*(){yield Zi(t,fe(Z({},e),{createdAt:e.createdAt||Mi()}))}));return}yield Zi(t,fe(Z({},e),{createdAt:e.createdAt||Mi()}))})}updateUser(e,t){return C(this,null,function*(){let i=_e(this.firestore,`users/${e}`);yield et(i,t)})}deleteUser(e){return C(this,null,function*(){let t=_e(this.firestore,`users/${e}`);yield _r(t)})}setRole(e,t){return C(this,null,function*(){let i=_e(this.firestore,`users/${e}`);yield et(i,{role:t})})}static \u0275fac=function(t){return new(t||n)(le(lt))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};function dQ(n,e){n&1&&(p(0,"li",9)(1,"a",65),A(2,"i",66),v(3," Help "),m()())}function hQ(n,e){if(n&1&&A(0,"img",78),n&2){let t=L().ngIf;k("src",t.profilePictureUrl,pt)}}function fQ(n,e){if(n&1&&(p(0,"div",79),v(1),m()),n&2){let t=L().ngIf;w(),ue(" ",(t.username||t.fullName||t.email||"U").charAt(0).toUpperCase()," ")}}function pQ(n,e){if(n&1){let t=he();p(0,"li",67)(1,"a",68),W(2,hQ,1,1,"img",69)(3,fQ,2,1,"ng-template",null,0,Lt),m(),p(5,"ul",70)(6,"li")(7,"a",71),A(8,"i",72),v(9,"My Profile"),m()(),p(10,"li")(11,"a",73),A(12,"i",74),v(13,"Settings"),m()(),p(14,"li"),A(15,"hr",75),m(),p(16,"li")(17,"a",76),H("click",function(){Y(t);let r=L();return Q(r.logout())}),A(18,"i",77),v(19,"Logout"),m()()()()}if(n&2){let t=e.ngIf,i=ze(4);w(2),k("ngIf",t.profilePictureUrl)("ngIfElse",i)}}var Nv=class n{constructor(e,t,i,r){this.auth=e;this.router=t;this.usersService=i;this.barangaysService=r;this.user$=this.auth.user$}user$;barangayName$=ce("");barangayAdminEmail$=ce("barangay@admin.gov.ph");barangayAdminContact$=ce("(02) 1234-5678");ngOnInit(){this.barangayName$=this.user$.pipe(Ke(e=>e?.barangay?this.barangaysService.getAllBarangays().pipe(se(t=>{let i=t.find(r=>r.id===e.barangay);return i?i.name:e.barangay})):ce("Your Barangay"))),this.barangayAdminEmail$=this.user$.pipe(Ke(e=>{if(!e?.barangay)return ce("No admin assigned");let t=e.barangay;return this.usersService.getUsersByBarangay(t).pipe(se(i=>i.find(o=>o.role==="admin")?.email||"No admin assigned"))})),this.barangayAdminContact$=this.user$.pipe(Ke(e=>{if(!e?.barangay)return ce("No admin assigned");let t=e.barangay;return this.usersService.getUsersByBarangay(t).pipe(se(i=>i.find(o=>o.role==="admin")?.contact||"No admin assigned"))}))}logout(){return C(this,null,function*(){try{yield this.auth.logout(),yield this.router.navigate(["/login"])}catch(e){console.error("Logout failed",e),yield this.router.navigate(["/login"])}})}static \u0275fac=function(t){return new(t||n)(K(Be),K(je),K(kv),K(Wn))};static \u0275cmp=it({type:n,selectors:[["app-help-page"]],decls:210,vars:15,consts:[["userIcon",""],[1,"navbar","navbar-expand-lg","navbar-light","bg-white","shadow-sm"],[1,"container-fluid"],["routerLink","/home",1,"navbar-brand","fw-bold","text-success"],[1,"fas","fa-leaf","me-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","title","Toggle navigation menu","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto","align-items-center"],[1,"nav-item"],["routerLink","/home",1,"nav-link"],[1,"fas","fa-home","me-1"],[1,"nav-item","ms-lg-3"],["routerLink","/submit-report",1,"btn","btn-success"],[1,"fas","fa-plus","me-1"],["class","nav-item dropdown ms-lg-2",4,"ngIf"],[1,"container","py-5"],[1,"row"],[1,"col-lg-8","mx-auto"],[1,"fw-bold","mb-2"],[1,"text-muted","mb-5"],["id","helpAccordion",1,"accordion"],[1,"accordion-item"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#faq1",1,"accordion-button"],[1,"fas","fa-info-circle","text-primary","me-2"],["id","faq1","data-bs-parent","#helpAccordion",1,"accordion-collapse","collapse","show"],[1,"accordion-body"],["type","button","data-bs-toggle","collapse","data-bs-target","#faq2",1,"accordion-button","collapsed"],[1,"fas","fa-file-alt","text-success","me-2"],["id","faq2","data-bs-parent","#helpAccordion",1,"accordion-collapse","collapse"],[1,"alert","alert-info"],[1,"fas","fa-lightbulb","me-1"],["type","button","data-bs-toggle","collapse","data-bs-target","#faq3",1,"accordion-button","collapsed"],[1,"fas","fa-check-circle","text-warning","me-2"],["id","faq3","data-bs-parent","#helpAccordion",1,"accordion-collapse","collapse"],["type","button","data-bs-toggle","collapse","data-bs-target","#faq4",1,"accordion-button","collapsed"],[1,"fas","fa-arrow-up","text-danger","me-2"],["id","faq4","data-bs-parent","#helpAccordion",1,"accordion-collapse","collapse"],["type","button","data-bs-toggle","collapse","data-bs-target","#faq5",1,"accordion-button","collapsed"],[1,"fas","fa-shield-alt","text-info","me-2"],["id","faq5","data-bs-parent","#helpAccordion",1,"accordion-collapse","collapse"],["type","button","data-bs-toggle","collapse","data-bs-target","#faq6",1,"accordion-button","collapsed"],[1,"fas","fa-user-cog","text-secondary","me-2"],["id","faq6","data-bs-parent","#helpAccordion",1,"accordion-collapse","collapse"],[1,"alert","alert-warning"],[1,"fas","fa-exclamation-triangle","me-1"],[1,"card","mt-5","border-success"],[1,"card-body","text-center","p-4"],[1,"fas","fa-envelope","fa-3x","text-success","mb-3"],[1,"fw-bold"],[1,"text-muted"],[1,"d-flex","flex-column","align-items-center","gap-2"],[1,"text-success"],[1,"fas","fa-phone","text-success","me-1"],[1,"fas","fa-envelope","text-success","me-1"],[1,"mobile-bottom-nav","d-md-none"],["routerLink","/home","routerLinkActive","active",1,"mobile-nav-item"],[1,"fas","fa-home"],["routerLink","/submit-report",1,"mobile-nav-item"],[1,"fas","fa-plus-circle"],["routerLink","/help",1,"mobile-nav-item","active"],[1,"fas","fa-question-circle"],["routerLink","/profile","routerLinkActive","active",1,"mobile-nav-item"],[1,"fas","fa-user"],[1,"nav-link","active"],[1,"fas","fa-question-circle","me-1"],[1,"nav-item","dropdown","ms-lg-2"],["role","button","data-bs-toggle","dropdown","title","User menu","aria-label","User menu",1,"nav-link","dropdown-toggle","d-flex","align-items-center"],["alt","Profile","class","rounded-circle","style","width: 32px; height: 32px; object-fit: cover; border: 2px solid #198754;",3,"src",4,"ngIf","ngIfElse"],[1,"dropdown-menu","dropdown-menu-end"],["routerLink","/profile",1,"dropdown-item"],[1,"fas","fa-user","me-2"],["routerLink","/settings",1,"dropdown-item"],[1,"fas","fa-cog","me-2"],[1,"dropdown-divider"],[1,"dropdown-item","text-danger",3,"click"],[1,"fas","fa-sign-out-alt","me-2"],["alt","Profile",1,"rounded-circle",2,"width","32px","height","32px","object-fit","cover","border","2px solid #198754",3,"src"],[1,"rounded-circle","bg-success","text-white","d-flex","align-items-center","justify-content-center",2,"width","32px","height","32px","font-size","0.9rem"]],template:function(t,i){if(t&1&&(p(0,"nav",1)(1,"div",2)(2,"a",3),A(3,"i",4),v(4,"Pollution Report "),m(),p(5,"button",5),A(6,"span",6),m(),p(7,"div",7)(8,"ul",8)(9,"li",9)(10,"a",10),A(11,"i",11),v(12," Home "),m()(),mt(13,dQ,4,0,"li",9),re(14,"async"),p(15,"li",12)(16,"a",13),A(17,"i",14),v(18," New Report"),m()(),W(19,pQ,20,2,"li",15),re(20,"async"),m()()()(),p(21,"div",16)(22,"div",17)(23,"div",18)(24,"h1",19),v(25,"Help & Information"),m(),p(26,"p",20),v(27," Find answers to common questions about using the pollution reporting system "),m(),p(28,"div",21)(29,"div",22)(30,"h2",23)(31,"button",24),A(32,"i",25),p(33,"strong"),v(34,"How does the pollution reporting system work?"),m()()(),p(35,"div",26)(36,"div",27)(37,"p"),v(38,"The pollution reporting system connects citizens with barangay officials to address environmental issues:"),m(),p(39,"ol")(40,"li")(41,"strong"),v(42,"Report:"),m(),v(43," Citizens submit reports with photos, location, and description"),m(),p(44,"li")(45,"strong"),v(46,"Review:"),m(),v(47," Admins receive and review reports"),m(),p(48,"li")(49,"strong"),v(50,"Respond:"),m(),v(51," Admins update status and communicate"),m(),p(52,"li")(53,"strong"),v(54,"Resolve:"),m(),v(55," Issues are addressed and marked as resolved"),m()()()()(),p(56,"div",22)(57,"h2",23)(58,"button",28),A(59,"i",29),p(60,"strong"),v(61,"What information should I include in a report?"),m()()(),p(62,"div",30)(63,"div",27)(64,"p"),v(65,"A complete pollution report should include:"),m(),p(66,"ul")(67,"li")(68,"strong"),v(69,"Type of Pollution:"),m(),v(70," Water, Air, or Land"),m(),p(71,"li")(72,"strong"),v(73,"Location:"),m(),v(74," Address or landmark"),m(),p(75,"li")(76,"strong"),v(77,"Date & Time:"),m(),v(78," When it was seen"),m(),p(79,"li")(80,"strong"),v(81,"Photos:"),m(),v(82," Clear required images"),m(),p(83,"li")(84,"strong"),v(85,"Description:"),m(),v(86," Detailed explanation"),m()(),p(87,"div",31),A(88,"i",32),p(89,"strong"),v(90,"Tip:"),m(),v(91," More details = faster response! "),m()()()(),p(92,"div",22)(93,"h2",23)(94,"button",33),A(95,"i",34),p(96,"strong"),v(97,"How will admins resolve my report?"),m()()(),p(98,"div",35)(99,"div",27)(100,"ol")(101,"li"),v(102,"Status becomes "),p(103,"strong"),v(104,"Pending"),m()(),p(105,"li"),v(106,"Admin reviews and investigates"),m(),p(107,"li"),v(108,"Status becomes "),p(109,"strong"),v(110,"In Progress"),m()(),p(111,"li"),v(112,"Issue resolved and marked "),p(113,"strong"),v(114,"Done"),m()()()()()(),p(115,"div",22)(116,"h2",23)(117,"button",36),A(118,"i",37),p(119,"strong"),v(120,"What does upvoting do?"),m()()(),p(121,"div",38)(122,"div",27)(123,"p"),v(124,"Upvoting helps:"),m(),p(125,"ul")(126,"li"),v(127,"Prioritize community issues"),m(),p(128,"li"),v(129,"Show support"),m(),p(130,"li"),v(131,"Admins identify urgent concerns"),m()()()()(),p(132,"div",22)(133,"h2",23)(134,"button",39),A(135,"i",40),p(136,"strong"),v(137,"Is my information private?"),m()()(),p(138,"div",41)(139,"div",27)(140,"ul")(141,"li"),v(142,"Your name/photo show on reports"),m(),p(143,"li"),v(144,"Contact info visible only to admins"),m(),p(145,"li"),v(146,"You can edit info anytime"),m(),p(147,"li"),v(148,"No anonymous reporting"),m()()()()(),p(149,"div",22)(150,"h2",23)(151,"button",42),A(152,"i",43),p(153,"strong"),v(154,"I forgot my password. What should I do?"),m()()(),p(155,"div",44)(156,"div",27)(157,"ol")(158,"li"),v(159,"Go to login page"),m(),p(160,"li"),v(161,'Click "Reset password"'),m(),p(162,"li"),v(163,"Enter your email"),m(),p(164,"li"),v(165,"Check your inbox"),m(),p(166,"li"),v(167,"Reset your password"),m()(),p(168,"div",45),A(169,"i",46),v(170," Check spam folder if no email arrives. "),m()()()()(),p(171,"div",47)(172,"div",48),A(173,"i",49),p(174,"h4",50),v(175,"Still need help?"),m(),p(176,"p",51),v(177,"Contact your barangay office for additional support"),m(),p(178,"div",52)(179,"div")(180,"strong",53),v(181),re(182,"async"),m()(),p(183,"div"),A(184,"i",54),p(185,"strong"),v(186),re(187,"async"),m()(),p(188,"div"),A(189,"i",55),p(190,"strong"),v(191),re(192,"async"),m()()()()()()()(),p(193,"nav",56)(194,"a",57),A(195,"i",58),p(196,"span"),v(197,"Home"),m()(),p(198,"a",59),A(199,"i",60),p(200,"span"),v(201,"Report"),m()(),p(202,"a",61),A(203,"i",62),p(204,"span"),v(205,"Help"),m()(),p(206,"a",63),A(207,"i",64),p(208,"span"),v(209,"Account"),m()()()),t&2){let r;w(13),gt(((r=de(14,5,i.user$))==null?null:r.role)!=="admin"?13:-1),w(6),k("ngIf",de(20,7,i.user$)),w(162),J(de(182,9,i.barangayName$)),w(5),J(de(187,11,i.barangayAdminContact$)),w(5),J(de(192,13,i.barangayAdminEmail$))}},dependencies:[Qt,vt,Pt,Cn],encapsulation:2})};function mQ(n,e){if(n&1&&(p(0,"div",25),v(1),m()),n&2){let t=L();w(),J(t.errorMessage)}}var Ov=class n{constructor(e,t,i){this.auth=e;this.router=t;this.translationService=i}emailOrUsername="";password="";errorMessage="";onLogin(){return C(this,null,function*(){this.errorMessage="";try{yield this.auth.login(this.emailOrUsername,this.password),this.auth.user$.pipe(Qe(1)).subscribe(e=>{e&&(e.role==="admin"?this.router.navigate(["/admin"]):this.router.navigate(["/home"]))})}catch(e){this.errorMessage=e.message||"Login failed"}})}setLanguage(e){this.translationService.setLanguage(e)}static \u0275fac=function(t){return new(t||n)(K(Be),K(je),K(ia))};static \u0275cmp=it({type:n,selectors:[["app-login"]],decls:38,vars:7,consts:[["loginForm","ngForm"],[1,"container-fluid","min-vh-100","d-flex","align-items-center","justify-content-center","bg-light"],[1,"row","w-100"],[1,"col-md-6","col-lg-4","mx-auto"],[1,"card","shadow-lg","border-0","rounded-4"],[1,"card-body","p-5"],[1,"text-center","mb-4"],[1,"fas","fa-leaf","text-success","fa-3x","mb-3"],[1,"fw-bold","text-dark"],[1,"text-muted"],["class","alert alert-danger",4,"ngIf"],[3,"ngSubmit"],[1,"mb-3"],[1,"form-label","fw-medium"],["type","text","name","emailOrUsername","placeholder","Enter your email or username","required","",1,"form-control","form-control-lg",3,"ngModelChange","ngModel"],["type","password","name","password","placeholder","Enter your password","required","",1,"form-control","form-control-lg",3,"ngModelChange","ngModel"],[1,"mb-3","text-end"],["routerLink","/reset-password",1,"text-decoration-none","small"],["type","submit",1,"btn","btn-success","btn-lg","w-100","mb-3"],[1,"text-center"],[1,"text-muted","small"],["routerLink","/sign-up",1,"text-decoration-none","ms-1"],[1,"text-center","mt-3"],["role","group",1,"btn-group","btn-group-sm"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"alert","alert-danger"]],template:function(t,i){if(t&1){let r=he();p(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),A(6,"i",7),p(7,"h2",8),v(8,"Pollution Report"),m(),p(9,"p",9),v(10,"Barangay Environmental Monitoring"),m()(),W(11,mQ,2,1,"div",10),p(12,"form",11,0),H("ngSubmit",function(){return Y(r),Q(i.onLogin())}),p(14,"div",12)(15,"label",13),v(16,"Email / Username"),m(),p(17,"input",14),Ie("ngModelChange",function(s){return Y(r),Se(i.emailOrUsername,s)||(i.emailOrUsername=s),Q(s)}),m()(),p(18,"div",12)(19,"label",13),v(20,"Password"),m(),p(21,"input",15),Ie("ngModelChange",function(s){return Y(r),Se(i.password,s)||(i.password=s),Q(s)}),m()(),p(22,"div",16)(23,"a",17),v(24,"Reset password"),m()(),p(25,"button",18),v(26,"Log In"),m(),p(27,"div",19)(28,"span",20),v(29,"Don't have an account?"),m(),p(30,"a",21),v(31,"Sign Up"),m()()()()(),p(32,"div",22)(33,"div",23)(34,"button",24),H("click",function(){return Y(r),Q(i.setLanguage("english"))}),v(35," English "),m(),p(36,"button",24),H("click",function(){return Y(r),Q(i.setLanguage("filipino"))}),v(37," Filipino "),m()()()()()()}t&2&&(w(11),k("ngIf",i.errorMessage),w(6),Ee("ngModel",i.emailOrUsername),w(4),Ee("ngModel",i.password),w(13),Re("active",i.translationService.language()==="english"),w(2),Re("active",i.translationService.language()==="filipino"))},dependencies:[Qt,vt,Pt,Xt,qi,Un,$n,zi,Si,Sn,Ci],encapsulation:2})};function gQ(n,e){n&1&&(p(0,"li",10)(1,"a",32),A(2,"i",33),v(3," Admin"),m()())}function yQ(n,e){if(n&1&&A(0,"img",45),n&2){let t=L().ngIf;k("src",t.profilePictureUrl,pt)}}function vQ(n,e){if(n&1&&(p(0,"div",46),v(1),m()),n&2){let t=L().ngIf;w(),ue(" ",(t.fullName||t.email||"U").charAt(0).toUpperCase()," ")}}function _Q(n,e){if(n&1){let t=he();p(0,"li",34)(1,"a",35),W(2,yQ,1,1,"img",36)(3,vQ,2,1,"ng-template",null,0,Lt),m(),p(5,"ul",37)(6,"li")(7,"a",38),A(8,"i",39),v(9,"My Profile"),m()(),p(10,"li")(11,"a",40),A(12,"i",41),v(13,"Settings"),m()(),p(14,"li"),A(15,"hr",42),m(),p(16,"li")(17,"a",43),H("click",function(){Y(t);let r=L();return Q(r.logout())}),A(18,"i",44),v(19,"Logout"),m()()()()}if(n&2){let t=e.ngIf,i=ze(4);w(2),k("ngIf",t.profilePictureUrl)("ngIfElse",i)}}function bQ(n,e){if(n&1&&(p(0,"div",77),A(1,"img",78),m()),n&2){let t=L().ngIf;w(),k("src",t.profilePictureUrl,pt)}}function wQ(n,e){if(n&1&&(p(0,"div",79),v(1),m()),n&2){let t=L().ngIf;w(),ue(" ",(t.fullName||t.email||"U").charAt(0).toUpperCase()," ")}}function EQ(n,e){if(n&1){let t=he();p(0,"div",47)(1,"div",48)(2,"div",49)(3,"div",50)(4,"div",51)(5,"div",52)(6,"div",53),W(7,bQ,2,1,"div",54)(8,wQ,2,1,"ng-template",null,1,Lt),p(10,"div",55)(11,"label",56),A(12,"i",57),v(13),p(14,"input",58),H("change",function(r){Y(t);let o=L();return Q(o.onProfilePictureChange(r))}),m()()()(),p(15,"h4",59),v(16),m()(),A(17,"hr"),p(18,"div",60)(19,"div",61)(20,"strong"),A(21,"i",62),v(22,"Full Name:"),m(),p(23,"p",63),v(24),m()(),p(25,"div",61)(26,"strong"),A(27,"i",64),v(28,"Username:"),m(),p(29,"p",63),v(30),m()(),p(31,"div",61)(32,"strong"),A(33,"i",65),v(34,"Email:"),m(),p(35,"p",63),v(36),m()(),p(37,"div",61)(38,"strong"),A(39,"i",66),v(40,"Contact Number:"),m(),p(41,"p",63),v(42),m()(),p(43,"div",61)(44,"strong"),A(45,"i",67),v(46,"Barangay:"),m(),p(47,"p",63),v(48),re(49,"async"),m()(),p(50,"div",61)(51,"strong"),A(52,"i",68),v(53,"Role:"),m(),p(54,"p",63)(55,"span",69),v(56),re(57,"titlecase"),m()()(),p(58,"div",61)(59,"strong"),A(60,"i",70),v(61,"Physical Address:"),m(),p(62,"p",63),v(63),m()(),p(64,"div",61)(65,"strong"),A(66,"i",71),v(67,"Member Since:"),m(),p(68,"p",63),v(69),re(70,"date"),m()()(),A(71,"hr"),p(72,"div",72)(73,"a",73),A(74,"i",16),v(75,"Edit Settings "),m(),p(76,"a",74),A(77,"i",12),v(78,"Back to Home "),m(),p(79,"button",75),H("click",function(){Y(t);let r=L();return Q(r.logout())}),A(80,"i",76),v(81,"Logout "),m()()()()()()()}if(n&2){let t=e.ngIf,i=ze(9),r=L();w(7),k("ngIf",t.profilePictureUrl)("ngIfElse",i),w(4),Re("disabled",r.uploadingImage),w(2),ue(" ",r.uploadingImage?"Uploading...":"Change Photo"," "),w(),k("disabled",r.uploadingImage),w(2),J(t.fullName||t.username||t.email),w(8),J(t.fullName||"Not provided"),w(6),J(t.username?"@"+t.username:"Not provided"),w(6),J(t.email),w(6),J(t.contact||"Not provided"),w(6),J(de(49,19,r.barangayName$)),w(7),Re("bg-success",t.role==="admin")("bg-primary",t.role==="user"),w(),ue(" ",de(57,21,t.role)," "),w(7),J(t.address||"Not provided"),w(6),J(In(70,23,r.toDate(t.createdAt),"longDate"))}}function IQ(n,e){n&1&&(p(0,"a",28),A(1,"i",80),p(2,"span"),v(3,"Help"),m()())}function CQ(n,e){n&1&&(p(0,"a",29),A(1,"i",81),p(2,"span"),v(3,"Admin"),m()())}var Fv=class n{constructor(e,t,i,r,o){this.auth=e;this.router=t;this.barangaysService=i;this.storage=r;this.firestore=o;this.user$=this.auth.user$}user$;barangayName$=new ye;uploadingImage=!1;currentUser=null;ngOnInit(){this.barangayName$=this.user$.pipe(Ke(e=>(this.currentUser=e,e?.barangay?this.barangaysService.getAllBarangays().pipe(se(t=>{let i=t.find(r=>r.id===e.barangay);return i?i.name:e.barangay})):new ye(t=>{t.next("Admin"),t.complete()}))))}onProfilePictureChange(e){return C(this,null,function*(){let t=e.target;if(!t.files||t.files.length===0||!this.currentUser)return;let i=t.files[0];if(!i.type.startsWith("image/")){alert("Please select an image file");return}if(i.size>5*1024*1024){alert("Image size should be less than 5MB");return}try{this.uploadingImage=!0;let r=Date.now(),o=`profile-pictures/${this.currentUser.uid}_${r}`,s=Mu(this.storage,o);yield ML(s,i);let a=yield AL(s),c=_e(this.firestore,`users/${this.currentUser.uid}`);yield et(c,{profilePictureUrl:a}),this.uploadingImage=!1,alert("Profile picture updated successfully!")}catch(r){console.error("Error uploading profile picture:",r),this.uploadingImage=!1,alert("Failed to upload profile picture. Please try again.")}})}logout(){return C(this,null,function*(){try{yield this.auth.logout(),yield this.router.navigate(["/login"])}catch(e){console.error("Logout failed",e)}})}toDate(e){return e?typeof e.toDate=="function"?e.toDate():e instanceof Date?e:new Date(e):new Date}static \u0275fac=function(t){return new(t||n)(K(Be),K(je),K(Wn),K(xc),K(lt))};static \u0275cmp=it({type:n,selectors:[["app-profile"]],decls:48,vars:15,consts:[["userIcon",""],["avatarCircle",""],[1,"navbar","navbar-expand-lg","navbar-light","bg-white","shadow-sm","sticky-top"],[1,"container-fluid"],["routerLink","/home",1,"navbar-brand","fw-bold","text-success"],[1,"fas","fa-leaf","me-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","title","Toggle navigation menu","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto","align-items-center"],[1,"nav-item"],["routerLink","/home",1,"nav-link"],[1,"fas","fa-home","me-1"],["routerLink","/help",1,"nav-link"],[1,"fas","fa-question-circle","me-1"],["routerLink","/settings",1,"nav-link"],[1,"fas","fa-cog","me-1"],["class","nav-item",4,"ngIf"],[1,"nav-item","ms-lg-3"],["routerLink","/submit-report",1,"btn","btn-success"],[1,"fas","fa-plus","me-1"],["class","nav-item dropdown ms-lg-2",4,"ngIf"],["class","container mt-4",4,"ngIf"],[1,"mobile-bottom-nav","d-md-none"],["routerLink","/home","routerLinkActive","active",1,"mobile-nav-item"],[1,"fas","fa-home"],["routerLink","/submit-report",1,"mobile-nav-item"],[1,"fas","fa-plus-circle"],["routerLink","/help","routerLinkActive","active",1,"mobile-nav-item"],["routerLink","/admin","routerLinkActive","active",1,"mobile-nav-item"],["routerLink","/profile",1,"mobile-nav-item","active"],[1,"fas","fa-user"],["routerLink","/admin",1,"nav-link"],[1,"fas","fa-shield-alt","me-1"],[1,"nav-item","dropdown","ms-lg-2"],["data-bs-toggle","dropdown","title","User menu","aria-label","User menu",1,"nav-link","dropdown-toggle","d-flex","align-items-center"],["alt","Profile","class","rounded-circle","style","width: 32px; height: 32px; object-fit: cover; border: 2px solid #198754;",3,"src",4,"ngIf","ngIfElse"],[1,"dropdown-menu","dropdown-menu-end"],["routerLink","/profile",1,"dropdown-item"],[1,"fas","fa-user","me-2"],["routerLink","/settings",1,"dropdown-item"],[1,"fas","fa-cog","me-2"],[1,"dropdown-divider"],[1,"dropdown-item","text-danger",3,"click"],[1,"fas","fa-sign-out-alt","me-2"],["alt","Profile",1,"rounded-circle",2,"width","32px","height","32px","object-fit","cover","border","2px solid #198754",3,"src"],[1,"rounded-circle","bg-success","text-white","d-flex","align-items-center","justify-content-center",2,"width","32px","height","32px","font-size","0.9rem"],[1,"container","mt-4"],[1,"row","justify-content-center"],[1,"col-md-8"],[1,"card","shadow-sm"],[1,"card-body"],[1,"text-center","mb-4"],[1,"position-relative","d-inline-block"],["class","mb-3",4,"ngIf","ngIfElse"],[1,"mt-2"],[1,"btn","btn-sm","btn-outline-success"],[1,"fas","fa-camera","me-1"],["type","file","accept","image/*",1,"d-none",3,"change","disabled"],[1,"mb-1","mt-3"],[1,"row"],[1,"col-md-6","mb-3"],[1,"fas","fa-user","me-2","text-success"],[1,"ms-4","mb-0"],[1,"fas","fa-at","me-2","text-success"],[1,"fas","fa-envelope","me-2","text-success"],[1,"fas","fa-phone","me-2","text-success"],[1,"fas","fa-map-marker-alt","me-2","text-success"],[1,"fas","fa-shield-alt","me-2","text-success"],[1,"badge"],[1,"fas","fa-home","me-2","text-success"],[1,"fas","fa-calendar","me-2","text-success"],[1,"d-flex","gap-2","mt-3","flex-wrap"],["routerLink","/settings",1,"btn","btn-primary"],["routerLink","/home",1,"btn","btn-outline-secondary","d-none","d-md-inline-block"],[1,"btn","btn-danger","d-md-none",3,"click"],[1,"fas","fa-sign-out-alt","me-1"],[1,"mb-3"],["alt","Profile Picture",1,"rounded-circle",2,"width","120px","height","120px","object-fit","cover","border","3px solid #198754",3,"src"],[1,"avatar-circle","bg-success","text-white","mb-3",2,"width","120px","height","120px","font-size","48px","line-height","120px","margin","0 auto"],[1,"fas","fa-question-circle"],[1,"fas","fa-shield-alt"]],template:function(t,i){if(t&1&&(p(0,"nav",2)(1,"div",3)(2,"a",4),A(3,"i",5),v(4,"Pollution Report "),m(),p(5,"button",6),A(6,"span",7),m(),p(7,"div",8)(8,"ul",9)(9,"li",10)(10,"a",11),A(11,"i",12),v(12," Home"),m()(),p(13,"li",10)(14,"a",13),A(15,"i",14),v(16," Help"),m()(),p(17,"li",10)(18,"a",15),A(19,"i",16),v(20," Settings"),m()(),W(21,gQ,4,0,"li",17),re(22,"async"),p(23,"li",18)(24,"a",19),A(25,"i",20),v(26," New Report"),m()(),W(27,_Q,20,2,"li",21),re(28,"async"),m()()()(),W(29,EQ,82,26,"div",22),re(30,"async"),p(31,"nav",23)(32,"a",24),A(33,"i",25),p(34,"span"),v(35,"Home"),m()(),p(36,"a",26),A(37,"i",27),p(38,"span"),v(39,"Report"),m()(),mt(40,IQ,4,0,"a",28),re(41,"async"),mt(42,CQ,4,0,"a",29),re(43,"async"),p(44,"a",30),A(45,"i",31),p(46,"span"),v(47,"Account"),m()()()),t&2){let r,o,s;w(21),k("ngIf",((r=de(22,5,i.user$))==null?null:r.role)==="admin"),w(6),k("ngIf",de(28,7,i.user$)),w(2),k("ngIf",de(30,9,i.user$)),w(11),gt(((o=de(41,11,i.user$))==null?null:o.role)!=="admin"?40:-1),w(2),gt(((s=de(43,13,i.user$))==null?null:s.role)==="admin"?42:-1)}},dependencies:[Xt,vt,Pt,Qt,Cn,ko,ic],encapsulation:2})};var SQ=n=>({"is-invalid":n});function TQ(n,e){if(n&1&&(p(0,"div",23),A(1,"i",24),v(2),m()),n&2){let t=L();w(2),ue("",t.message," ")}}function DQ(n,e){if(n&1&&(p(0,"div",25),A(1,"i",26),v(2),m()),n&2){let t=L();w(2),ue("",t.errorMessage," ")}}function xQ(n,e){n&1&&(p(0,"div",27),v(1," Please enter a valid email address. "),m())}function AQ(n,e){n&1&&A(0,"span",28)}function MQ(n,e){n&1&&(p(0,"span"),v(1,"Send Reset Link"),m())}function PQ(n,e){if(n&1&&(p(0,"span"),v(1),m()),n&2){let t=L();w(),ue("Resend in ",t.cooldown,"s")}}function RQ(n,e){n&1&&(p(0,"span"),v(1,"Sending..."),m())}var Lv=class n{constructor(e,t){this.auth=e;this.firestore=t}email="";message="";errorMessage="";cooldown=60;canSend=!0;isLoading=!1;isInvalidEmail=!1;isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}logResetRequest(e,t,i){return C(this,null,function*(){try{let r=_t(this.firestore,"password_reset_logs");yield Zi(r,{email:e,requestedAt:Mi(),status:t,errorMessage:i||null})}catch(r){console.error("Failed to log reset request:",r)}})}translateFirebaseError(e){switch(e){case"auth/user-not-found":return"No account found with that email.";case"auth/invalid-email":return"Please enter a valid email.";case"auth/too-many-requests":return"Too many reset attempts. Please try again later.";case"auth/network-request-failed":return"Network error. Please check your connection.";default:return"Failed to send reset link. Please try again."}}onReset(){return C(this,null,function*(){if(!(!this.canSend||this.isLoading)){if(this.message="",this.errorMessage="",this.isInvalidEmail=!1,this.email=this.email.trim(),!this.email){this.errorMessage="Please enter your email address.",this.isInvalidEmail=!0;return}if(!this.isValidEmail(this.email)){this.errorMessage="Please enter a valid email.",this.isInvalidEmail=!0;return}this.isLoading=!0;try{console.log("Attempting to send reset email to:",this.email),yield Iy(this.auth,this.email),console.log("\u2705 Firebase sendPasswordResetEmail succeeded"),yield this.logResetRequest(this.email,"sent"),this.message="A password reset link has been sent to your email. Check your spam folder if the reset link isn't in your inbox.",this.email="",this.canSend=!1;let e=setInterval(()=>{this.cooldown--,this.cooldown<=0&&(this.canSend=!0,this.cooldown=60,clearInterval(e))},1e3)}catch(e){let t=this.translateFirebaseError(e.code||e.message);this.errorMessage=t,this.isInvalidEmail=!0,yield this.logResetRequest(this.email,"failed",e.code||e.message)}finally{this.isLoading=!1}}})}get isFormValid(){return this.email.trim().length>0&&this.isValidEmail(this.email.trim())}static \u0275fac=function(t){return new(t||n)(K(Di),K(lt))};static \u0275cmp=it({type:n,selectors:[["app-reset-password"]],decls:29,vars:13,consts:[["resetForm","ngForm"],[1,"container-fluid","min-vh-100","d-flex","align-items-center","justify-content-center"],[1,"row","w-100"],[1,"col-md-6","col-lg-4","mx-auto"],[1,"card","shadow-lg","border-0","rounded-4"],[1,"card-body","p-5"],[1,"text-center","mb-4"],[1,"fas","fa-key","text-success","fa-3x","mb-3"],[1,"fw-bold"],[1,"text-muted"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[3,"ngSubmit"],[1,"mb-3"],["for","resetEmail",1,"form-label","fw-medium"],["type","email","id","resetEmail","name","email","placeholder","your@email.com","required","",1,"form-control","form-control-lg",3,"ngModelChange","ngClass","ngModel","disabled"],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-success","btn-lg","w-100","mb-3",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],[4,"ngIf"],[1,"text-center"],["routerLink","/login",1,"text-decoration-none"],[1,"fas","fa-arrow-left","me-1"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[1,"fas","fa-check-circle","me-2"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"fas","fa-exclamation-circle","me-2"],[1,"invalid-feedback"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(t,i){if(t&1){let r=he();p(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),A(6,"i",7),p(7,"h2",8),v(8,"Reset Password"),m(),p(9,"p",9),v(10,"Enter your email to receive reset link"),m()(),W(11,TQ,3,1,"div",10)(12,DQ,3,1,"div",11),p(13,"form",12,0),H("ngSubmit",function(){return Y(r),Q(i.onReset())}),p(15,"div",13)(16,"label",14),v(17,"Email Address"),m(),p(18,"input",15),Ie("ngModelChange",function(s){return Y(r),Se(i.email,s)||(i.email=s),Q(s)}),m(),W(19,xQ,2,0,"div",16),m(),p(20,"button",17),W(21,AQ,1,0,"span",18)(22,MQ,2,0,"span",19)(23,PQ,2,1,"span",19)(24,RQ,2,0,"span",19),m(),p(25,"div",20)(26,"a",21),A(27,"i",22),v(28," Back to Login "),m()()()()()()()()}t&2&&(w(11),k("ngIf",i.message),w(),k("ngIf",i.errorMessage),w(6),k("ngClass",Ll(11,SQ,i.isInvalidEmail&&i.email.trim().length>0)),Ee("ngModel",i.email),k("disabled",i.isLoading),w(),k("ngIf",i.isInvalidEmail),w(),k("disabled",!i.canSend||i.isLoading||!i.isFormValid),w(),k("ngIf",i.isLoading),w(),k("ngIf",!i.isLoading&&i.canSend),w(),k("ngIf",!i.isLoading&&!i.canSend),w(),k("ngIf",i.isLoading))},dependencies:[Qt,Xt,qi,Un,$n,zi,Si,Sn,Ci,vt,nc,Pt],encapsulation:2})};function kQ(n,e){n&1&&(p(0,"li",9)(1,"a",88),A(2,"i",89),v(3," Help"),m()())}function NQ(n,e){n&1&&(p(0,"li",9)(1,"a",90),A(2,"i",91),v(3," Admin"),m()())}function OQ(n,e){if(n&1&&A(0,"img",103),n&2){let t=L().ngIf;k("src",t.profilePictureUrl,pt)}}function FQ(n,e){if(n&1&&(p(0,"div",104),v(1),m()),n&2){let t=L().ngIf;w(),ue(" ",(t.username||t.fullName||t.email||"U").charAt(0).toUpperCase()," ")}}function LQ(n,e){if(n&1){let t=he();p(0,"li",92)(1,"a",93),W(2,OQ,1,1,"img",94)(3,FQ,2,1,"ng-template",null,0,Lt),m(),p(5,"ul",95)(6,"li")(7,"a",96),A(8,"i",97),v(9,"My Profile"),m()(),p(10,"li")(11,"a",98),A(12,"i",99),v(13,"Settings"),m()(),p(14,"li"),A(15,"hr",100),m(),p(16,"li")(17,"a",101),H("click",function(){Y(t);let r=L();return Q(r.logout())}),A(18,"i",102),v(19,"Logout"),m()()()()}if(n&2){let t=e.ngIf,i=ze(4);w(2),k("ngIf",t.profilePictureUrl)("ngIfElse",i)}}function VQ(n,e){n&1&&A(0,"span",105)}function BQ(n,e){n&1&&A(0,"span",105)}function jQ(n,e){if(n&1){let t=he();p(0,"div",106),A(1,"i",107),v(2),p(3,"button",108),H("click",function(){Y(t);let r=L();return Q(r.passwordSuccess="")}),m()()}if(n&2){let t=L();w(2),ue("",t.passwordSuccess," ")}}function UQ(n,e){if(n&1){let t=he();p(0,"div",109),A(1,"i",110),v(2),p(3,"button",108),H("click",function(){Y(t);let r=L();return Q(r.passwordError="")}),m()()}if(n&2){let t=L();w(2),ue("",t.passwordError," ")}}function $Q(n,e){n&1&&A(0,"span",105)}function HQ(n,e){n&1&&A(0,"span",105)}function zQ(n,e){if(n&1){let t=he();p(0,"div",111)(1,"div",112)(2,"div",113),v(3),m(),p(4,"button",114),H("click",function(){let r=Y(t).$implicit,o=L();return Q(o.removeToast(r))}),m()()()}if(n&2){let t=e.$implicit;k("ngClass","text-bg-"+t.type),w(3),J(t.message)}}function qQ(n,e){n&1&&(p(0,"a",84),A(1,"i",115),p(2,"span"),v(3,"Help"),m()())}function WQ(n,e){n&1&&(p(0,"a",85),A(1,"i",116),p(2,"span"),v(3,"Admin"),m()())}var Vv=class n{constructor(e,t,i,r,o){this.authService=e;this.firebaseAuth=t;this.firestore=i;this.router=r;this.translationService=o;this.user$=this.authService.user$}user$;currentUser=null;settings={language:"english",textSize:"medium",theme:"light",notifications:{email:!0,announcement:!0,upvote:!0}};passwordForm={currentPassword:"",newPassword:"",confirmPassword:""};passwordError="";passwordSuccess="";isChangingPassword=!1;isSavingSettings=!1;toasts=[];ngOnInit(){return C(this,null,function*(){this.user$.pipe(Qe(1)).subscribe(e=>{this.currentUser=e,e?.settings?(this.settings=Z({},e.settings),this.applySettings()):this.applySettings()})})}saveSettings(){return C(this,null,function*(){if(this.isSavingSettings)return;let e=yield this.user$.pipe(Qe(1)).toPromise();if(!e){this.showToast("Please login to save settings","danger");return}this.isSavingSettings=!0;try{let t=_e(this.firestore,`users/${e.uid}`),i={settings:fe(Z({},this.settings),{updatedAt:Vt.now()})};yield et(t,i),localStorage.setItem("userSettings",JSON.stringify(this.settings)),this.applySettings(),this.showToast("Settings saved successfully!","success")}catch(t){console.error("Failed to save settings:",t),this.showToast("Failed to save settings. Please try again.","danger")}finally{this.isSavingSettings=!1}})}changePassword(){return C(this,null,function*(){if(this.passwordError="",this.passwordSuccess="",!this.passwordForm.currentPassword){this.passwordError="Please enter your current password.";return}if(!this.passwordForm.newPassword){this.passwordError="Please enter a new password.";return}if(this.passwordForm.newPassword.length<6){this.passwordError="New password must be at least 6 characters.";return}if(this.passwordForm.newPassword!==this.passwordForm.confirmPassword){this.passwordError="New passwords do not match.";return}if(this.passwordForm.currentPassword===this.passwordForm.newPassword){this.passwordError="New password must be different from current password.";return}this.isChangingPassword=!0;try{let e=this.firebaseAuth.currentUser;if(!e||!e.email)throw new Error("No authenticated user found.");let t=vy.credential(e.email,this.passwordForm.currentPassword);yield RO(e,t),yield NO(e,this.passwordForm.newPassword),this.passwordSuccess="Password updated successfully!",this.showToast("Password updated successfully!","success"),this.passwordForm={currentPassword:"",newPassword:"",confirmPassword:""}}catch(e){console.error("Password change error:",e),e.code==="auth/wrong-password"||e.code==="auth/invalid-credential"?this.passwordError="Current password is incorrect.":e.code==="auth/weak-password"?this.passwordError="New password is too weak. Use at least 6 characters.":e.code==="auth/requires-recent-login"?this.passwordError="Please logout and login again before changing password.":e.code==="auth/too-many-requests"?this.passwordError="Too many attempts. Please try again later.":this.passwordError=e.message||"Failed to update password. Please try again.",this.showToast(this.passwordError,"danger")}finally{this.isChangingPassword=!1}})}showToast(e,t){let i={message:e,type:t};this.toasts.push(i),setTimeout(()=>this.removeToast(i),4e3)}removeToast(e){this.toasts=this.toasts.filter(t=>t!==e)}logout(){return C(this,null,function*(){try{yield this.authService.logout(),yield this.router.navigate(["/login"])}catch(e){console.error("Logout failed",e)}})}applySettings(){console.log("Applying settings:",this.settings),document.documentElement.lang=this.settings.language==="filipino"?"fil":"en",this.translationService.setLanguage(this.settings.language),console.log("Language set to:",document.documentElement.lang),document.body.classList.remove("text-small","text-medium","text-large"),document.body.classList.add(`text-${this.settings.textSize}`),console.log("Text size class:",`text-${this.settings.textSize}`),this.settings.theme==="dark"?(document.body.classList.add("dark-mode"),document.body.classList.remove("theme-light","theme-dark")):(document.body.classList.remove("dark-mode","theme-dark"),document.body.classList.add("theme-light")),console.log("Theme class applied:",this.settings.theme),console.log("Body classes:",document.body.className),localStorage.setItem("userSettings",JSON.stringify(this.settings))}onThemeChange(){console.log("Theme changed to:",this.settings.theme),this.applySettings()}onLanguageChange(){console.log("Language changed to:",this.settings.language),this.applySettings()}onTextSizeChange(){console.log("Text size changed to:",this.settings.textSize),this.applySettings()}static \u0275fac=function(t){return new(t||n)(K(Be),K(Di),K(lt),K(je),K(ia))};static \u0275cmp=it({type:n,selectors:[["app-settings"]],decls:172,vars:43,consts:[["userIcon",""],[1,"navbar","navbar-expand-lg","navbar-light","bg-white","shadow-sm","sticky-top"],[1,"container-fluid"],["routerLink","/home",1,"navbar-brand","fw-bold","text-success"],[1,"fas","fa-leaf","me-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","title","Toggle navigation menu","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto","align-items-center"],[1,"nav-item"],["routerLink","/home",1,"nav-link"],[1,"fas","fa-home","me-1"],["routerLink","/settings",1,"nav-link","active"],[1,"fas","fa-cog","me-1"],["class","nav-item",4,"ngIf"],[1,"nav-item","ms-lg-3"],["routerLink","/submit-report",1,"btn","btn-success"],[1,"fas","fa-plus","me-1"],["class","nav-item dropdown ms-lg-2",4,"ngIf"],[1,"container","mt-4"],[1,"row","justify-content-center"],[1,"col-lg-10"],[1,"mb-4"],[1,"card","shadow-sm","mb-4"],[1,"card-header","bg-success","text-white"],[1,"mb-0"],[1,"fas","fa-palette","me-2"],[1,"card-body"],[3,"ngSubmit"],[1,"row"],[1,"col-md-6","mb-3"],[1,"form-label","fw-bold"],["title","Theme","name","theme",1,"form-select",3,"ngModelChange","change","ngModel"],["value","light"],["value","dark"],[1,"text-muted"],["title","Text size","name","textSize",1,"form-select",3,"ngModelChange","change","ngModel"],["value","small"],["value","medium"],["value","large"],[1,"d-flex","gap-2"],["type","submit",1,"btn","btn-success",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"card-header","bg-primary","text-white"],[1,"fas","fa-language","me-2"],[1,"mb-3"],["title","Language","name","language",1,"form-select",3,"ngModelChange","change","ngModel"],["value","english"],["value","filipino"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"card-header","bg-warning"],[1,"fas","fa-key","me-2"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],["for","currentPassword",1,"form-label","fw-bold"],["type","password","id","currentPassword","name","currentPassword","placeholder","Enter your current password","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","newPassword",1,"form-label","fw-bold"],["type","password","id","newPassword","name","newPassword","placeholder","Enter new password (min 6 characters)","minlength","6","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","confirmPassword",1,"form-label","fw-bold"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","Re-enter new password","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","submit",1,"btn","btn-warning",3,"disabled"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"card-header","bg-info","text-white"],[1,"fas","fa-bell","me-2"],[1,"form-check","mb-2"],["type","checkbox","name","notifyEmail","id","notifyEmail",1,"form-check-input",3,"ngModelChange","ngModel"],["for","notifyEmail",1,"form-check-label","fw-bold"],[1,"text-muted","ms-4"],["type","checkbox","name","notifyAnnouncement","id","notifyAnnouncement",1,"form-check-input",3,"ngModelChange","ngModel"],["for","notifyAnnouncement",1,"form-check-label","fw-bold"],[1,"form-check"],["type","checkbox","name","notifyUpvote","id","notifyUpvote",1,"form-check-input",3,"ngModelChange","ngModel"],["for","notifyUpvote",1,"form-check-label","fw-bold"],["type","submit",1,"btn","btn-info","text-white",3,"disabled"],[1,"text-center","mb-4"],["routerLink","/home",1,"btn","btn-outline-secondary"],[1,"fas","fa-arrow-left","me-2"],[1,"toast-container","top-right"],["class","toast show","role","alert",3,"ngClass",4,"ngFor","ngForOf"],[1,"mobile-bottom-nav","d-md-none"],["routerLink","/home","routerLinkActive","active",1,"mobile-nav-item"],[1,"fas","fa-home"],["routerLink","/submit-report",1,"mobile-nav-item"],[1,"fas","fa-plus-circle"],["routerLink","/help","routerLinkActive","active",1,"mobile-nav-item"],["routerLink","/admin","routerLinkActive","active",1,"mobile-nav-item"],["routerLink","/profile","routerLinkActive","active",1,"mobile-nav-item"],[1,"fas","fa-user"],["routerLink","/help",1,"nav-link"],[1,"fas","fa-question-circle","me-1"],["routerLink","/admin",1,"nav-link"],[1,"fas","fa-shield-alt","me-1"],[1,"nav-item","dropdown","ms-lg-2"],["data-bs-toggle","dropdown","title","User menu","aria-label","User menu",1,"nav-link","dropdown-toggle","d-flex","align-items-center"],["alt","Profile","class","rounded-circle","style","width: 32px; height: 32px; object-fit: cover; border: 2px solid #198754;",3,"src",4,"ngIf","ngIfElse"],[1,"dropdown-menu","dropdown-menu-end"],["routerLink","/profile",1,"dropdown-item"],[1,"fas","fa-user","me-2"],["routerLink","/settings",1,"dropdown-item"],[1,"fas","fa-cog","me-2"],[1,"dropdown-divider"],[1,"dropdown-item","text-danger",3,"click"],[1,"fas","fa-sign-out-alt","me-2"],["alt","Profile",1,"rounded-circle",2,"width","32px","height","32px","object-fit","cover","border","2px solid #198754",3,"src"],[1,"rounded-circle","bg-success","text-white","d-flex","align-items-center","justify-content-center",2,"width","32px","height","32px","font-size","0.9rem"],[1,"spinner-border","spinner-border-sm","me-2"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[1,"fas","fa-check-circle","me-2"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"fas","fa-exclamation-circle","me-2"],["role","alert",1,"toast","show",3,"ngClass"],[1,"d-flex"],[1,"toast-body"],["type","button","aria-label","Close",1,"btn-close","btn-close-white","me-2","m-auto",3,"click"],[1,"fas","fa-question-circle"],[1,"fas","fa-shield-alt"]],template:function(t,i){if(t&1&&(p(0,"nav",1)(1,"div",2)(2,"a",3),A(3,"i",4),v(4,"Pollution Report "),m(),p(5,"button",5),A(6,"span",6),m(),p(7,"div",7)(8,"ul",8)(9,"li",9)(10,"a",10),A(11,"i",11),v(12," Home"),m()(),mt(13,kQ,4,0,"li",9),re(14,"async"),p(15,"li",9)(16,"a",12),A(17,"i",13),v(18," Settings"),m()(),W(19,NQ,4,0,"li",14),re(20,"async"),p(21,"li",15)(22,"a",16),A(23,"i",17),v(24," New Report"),m()(),W(25,LQ,20,2,"li",18),re(26,"async"),m()()()(),p(27,"div",19)(28,"div",20)(29,"div",21)(30,"h2",22),v(31,"Settings"),m(),p(32,"div",23)(33,"div",24)(34,"h5",25),A(35,"i",26),v(36,"Appearance"),m()(),p(37,"div",27)(38,"form",28),H("ngSubmit",function(){return i.saveSettings()}),p(39,"div",29)(40,"div",30)(41,"label",31),v(42,"Theme"),m(),p(43,"select",32),Ie("ngModelChange",function(o){return Se(i.settings.theme,o)||(i.settings.theme=o),o}),H("change",function(){return i.onThemeChange()}),p(44,"option",33),v(45,"\u2600\uFE0F Light"),m(),p(46,"option",34),v(47,"\u{1F319} Dark"),m()(),p(48,"small",35),v(49,"Change the visual theme of the app"),m()(),p(50,"div",30)(51,"label",31),v(52,"Text Size"),m(),p(53,"select",36),Ie("ngModelChange",function(o){return Se(i.settings.textSize,o)||(i.settings.textSize=o),o}),H("change",function(){return i.onTextSizeChange()}),p(54,"option",37),v(55,"Small"),m(),p(56,"option",38),v(57,"Medium"),m(),p(58,"option",39),v(59,"Large"),m()(),p(60,"small",35),v(61,"Adjust text size for readability"),m()()(),p(62,"div",40)(63,"button",41),W(64,VQ,1,0,"span",42),v(65),m()()()()(),p(66,"div",23)(67,"div",43)(68,"h5",25),A(69,"i",44),v(70,"Language"),m()(),p(71,"div",27)(72,"form",28),H("ngSubmit",function(){return i.saveSettings()}),p(73,"div",45)(74,"label",31),v(75,"Preferred Language"),m(),p(76,"select",46),Ie("ngModelChange",function(o){return Se(i.settings.language,o)||(i.settings.language=o),o}),H("change",function(){return i.onLanguageChange()}),p(77,"option",47),v(78,"\u{1F1FA}\u{1F1F8} English"),m(),p(79,"option",48),v(80,"\u{1F1F5}\u{1F1ED} Filipino"),m()(),p(81,"small",35),v(82,"Select your preferred language"),m()(),p(83,"div",40)(84,"button",49),W(85,BQ,1,0,"span",42),v(86),m()()()()(),p(87,"div",23)(88,"div",50)(89,"h5",25),A(90,"i",51),v(91,"Change Password"),m()(),p(92,"div",27)(93,"form",28),H("ngSubmit",function(){return i.changePassword()}),W(94,jQ,4,1,"div",52)(95,UQ,4,1,"div",53),p(96,"div",45)(97,"label",54),v(98,"Current Password"),m(),p(99,"input",55),Ie("ngModelChange",function(o){return Se(i.passwordForm.currentPassword,o)||(i.passwordForm.currentPassword=o),o}),m()(),p(100,"div",45)(101,"label",56),v(102,"New Password"),m(),p(103,"input",57),Ie("ngModelChange",function(o){return Se(i.passwordForm.newPassword,o)||(i.passwordForm.newPassword=o),o}),m(),p(104,"small",35),v(105,"Must be at least 6 characters"),m()(),p(106,"div",45)(107,"label",58),v(108,"Confirm New Password"),m(),p(109,"input",59),Ie("ngModelChange",function(o){return Se(i.passwordForm.confirmPassword,o)||(i.passwordForm.confirmPassword=o),o}),m()(),p(110,"div",40)(111,"button",60),W(112,$Q,1,0,"span",42),v(113),m(),p(114,"button",61),H("click",function(){return i.passwordForm={currentPassword:"",newPassword:"",confirmPassword:""},i.passwordError="",i.passwordSuccess=""}),v(115," Clear "),m()()()()(),p(116,"div",23)(117,"div",62)(118,"h5",25),A(119,"i",63),v(120,"Notifications"),m()(),p(121,"div",27)(122,"form",28),H("ngSubmit",function(){return i.saveSettings()}),p(123,"div",45)(124,"div",64)(125,"input",65),Ie("ngModelChange",function(o){return Se(i.settings.notifications.email,o)||(i.settings.notifications.email=o),o}),m(),p(126,"label",66),v(127," Email Notifications "),m(),A(128,"br"),p(129,"small",67),v(130,"Receive updates via email"),m()(),p(131,"div",64)(132,"input",68),Ie("ngModelChange",function(o){return Se(i.settings.notifications.announcement,o)||(i.settings.notifications.announcement=o),o}),m(),p(133,"label",69),v(134," Announcement Notifications "),m(),A(135,"br"),p(136,"small",67),v(137,"Get notified about new announcements"),m()(),p(138,"div",70)(139,"input",71),Ie("ngModelChange",function(o){return Se(i.settings.notifications.upvote,o)||(i.settings.notifications.upvote=o),o}),m(),p(140,"label",72),v(141," Upvote Notifications "),m(),A(142,"br"),p(143,"small",67),v(144,"Get notified when your reports receive upvotes"),m()()(),p(145,"div",40)(146,"button",73),W(147,HQ,1,0,"span",42),v(148),m()()()()(),p(149,"div",74)(150,"a",75),A(151,"i",76),v(152,"Back to Home "),m()()()()(),p(153,"div",77),W(154,zQ,5,2,"div",78),m(),p(155,"nav",79)(156,"a",80),A(157,"i",81),p(158,"span"),v(159,"Home"),m()(),p(160,"a",82),A(161,"i",83),p(162,"span"),v(163,"Report"),m()(),mt(164,qQ,4,0,"a",84),re(165,"async"),mt(166,WQ,4,0,"a",85),re(167,"async"),p(168,"a",86),A(169,"i",87),p(170,"span"),v(171,"Account"),m()()()),t&2){let r,o,s,a;w(13),gt(((r=de(14,33,i.user$))==null?null:r.role)!=="admin"?13:-1),w(6),k("ngIf",((o=de(20,35,i.user$))==null?null:o.role)==="admin"),w(6),k("ngIf",de(26,37,i.user$)),w(18),Ee("ngModel",i.settings.theme),w(10),Ee("ngModel",i.settings.textSize),w(10),k("disabled",i.isSavingSettings),w(),k("ngIf",i.isSavingSettings),w(),ue(" ",i.isSavingSettings?"Saving...":"Save Appearance"," "),w(11),Ee("ngModel",i.settings.language),w(8),k("disabled",i.isSavingSettings),w(),k("ngIf",i.isSavingSettings),w(),ue(" ",i.isSavingSettings?"Saving...":"Save Language"," "),w(8),k("ngIf",i.passwordSuccess),w(),k("ngIf",i.passwordError),w(4),Ee("ngModel",i.passwordForm.currentPassword),k("disabled",i.isChangingPassword),w(4),Ee("ngModel",i.passwordForm.newPassword),k("disabled",i.isChangingPassword),w(6),Ee("ngModel",i.passwordForm.confirmPassword),k("disabled",i.isChangingPassword),w(2),k("disabled",i.isChangingPassword),w(),k("ngIf",i.isChangingPassword),w(),ue(" ",i.isChangingPassword?"Updating...":"Update Password"," "),w(),k("disabled",i.isChangingPassword),w(11),Ee("ngModel",i.settings.notifications.email),w(7),Ee("ngModel",i.settings.notifications.announcement),w(7),Ee("ngModel",i.settings.notifications.upvote),w(7),k("disabled",i.isSavingSettings),w(),k("ngIf",i.isSavingSettings),w(),ue(" ",i.isSavingSettings?"Saving...":"Save Notifications"," "),w(6),k("ngForOf",i.toasts),w(10),gt(((s=de(165,39,i.user$))==null?null:s.role)!=="admin"?164:-1),w(2),gt(((a=de(167,41,i.user$))==null?null:a.role)==="admin"?166:-1)}},dependencies:[Xt,qi,$r,Hr,Un,KE,Wi,$n,zi,Si,tI,Sn,Ci,vt,nc,jn,Pt,Qt,Cn],styles:[".toast-container.top-right[_ngcontent-%COMP%]{position:fixed;top:1rem;right:1rem;z-index:2000}.toast[_ngcontent-%COMP%]{min-width:200px}[_ngcontent-%COMP%]:root   body.text-small[_ngcontent-%COMP%]{font-size:14px}[_ngcontent-%COMP%]:root   body.text-medium[_ngcontent-%COMP%]{font-size:16px}[_ngcontent-%COMP%]:root   body.text-large[_ngcontent-%COMP%]{font-size:18px}body.dark-mode[_ngcontent-%COMP%]{background-color:#121212;color:#e8e8e8}body.dark-mode[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:#1e1e1e;color:#e8e8e8;border-color:#333}body.dark-mode[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{border-color:#333;color:#f0f0f0!important}body.dark-mode[_ngcontent-%COMP%]   .card-header.bg-success[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card-header.bg-primary[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card-header.bg-warning[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .card-header.bg-info[_ngcontent-%COMP%]{color:#000!important}body.dark-mode[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]{background-color:#1e1e1e!important;border-bottom:1px solid #333}body.dark-mode[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#e8e8e8!important}body.dark-mode[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]{color:#4ade80!important}body.dark-mode[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{background-color:#2a2a2a;color:#e8e8e8;border-color:#444}body.dark-mode[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, body.dark-mode[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus{background-color:#333;color:#e8e8e8;border-color:#4ade80}body.dark-mode[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#888}body.dark-mode[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   .form-check-label[_ngcontent-%COMP%]{color:#e8e8e8!important}body.dark-mode[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{color:#b0b0b0!important}body.dark-mode[_ngcontent-%COMP%]   small.text-muted[_ngcontent-%COMP%]{color:#999!important}body.dark-mode[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], body.dark-mode[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#f0f0f0!important}body.dark-mode[_ngcontent-%COMP%]   .btn-outline-secondary[_ngcontent-%COMP%]{color:#e8e8e8;border-color:#555}body.dark-mode[_ngcontent-%COMP%]   .btn-outline-secondary[_ngcontent-%COMP%]:hover{background-color:#444;border-color:#666;color:#fff}body.dark-mode[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]{background-color:#22c55e;border-color:#22c55e;color:#000}body.dark-mode[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#3b82f6;border-color:#3b82f6;color:#fff}body.dark-mode[_ngcontent-%COMP%]   .btn-warning[_ngcontent-%COMP%]{background-color:#f59e0b;border-color:#f59e0b;color:#000}body.dark-mode[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]{background-color:#06b6d4;border-color:#06b6d4;color:#000}body.dark-mode[_ngcontent-%COMP%]   .alert-success[_ngcontent-%COMP%]{background-color:#1e4d2b;color:#4ade80;border-color:#22c55e}body.dark-mode[_ngcontent-%COMP%]   .alert-danger[_ngcontent-%COMP%]{background-color:#4d1e1e;color:#f87171;border-color:#dc2626}body.dark-mode[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{background-color:#1e1e1e;border-color:#444}body.dark-mode[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{color:#e8e8e8}body.dark-mode[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#2a2a2a;color:#fff}body.dark-mode[_ngcontent-%COMP%]   .dropdown-divider[_ngcontent-%COMP%]{border-color:#444}.card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0}.alert[_ngcontent-%COMP%]{border-radius:.5rem}.alert[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.form-check-label.fw-bold[_ngcontent-%COMP%]{cursor:pointer}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem;border-width:.15em}body[_ngcontent-%COMP%], .card[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{transition:background-color .3s ease,color .3s ease,border-color .3s ease}"]})};function GQ(n,e){if(n&1&&(p(0,"div",46),v(1),m()),n&2){let t=L();w(),J(t.errorMessage)}}function KQ(n,e){if(n&1&&(p(0,"div",47),v(1),m()),n&2){let t=L();w(),J(t.successMessage)}}function YQ(n,e){n&1&&(p(0,"div",48),v(1,"Full name is required"),m())}function QQ(n,e){n&1&&(p(0,"span"),v(1,"Username is required"),m())}function XQ(n,e){n&1&&(p(0,"span"),v(1,"Username must be 3-20 characters (letters, numbers, underscores)"),m())}function ZQ(n,e){if(n&1&&(p(0,"div",48),W(1,QQ,2,0,"span",49)(2,XQ,2,0,"span",49),m()),n&2){L();let t=ze(25);w(),k("ngIf",t.errors==null?null:t.errors.required),w(),k("ngIf",t.errors==null?null:t.errors.pattern)}}function JQ(n,e){n&1&&(p(0,"div",48),v(1,"Valid email is required"),m())}function eX(n,e){n&1&&(p(0,"div",48),v(1,"Contact number is required"),m())}function tX(n,e){n&1&&(p(0,"div",48),v(1,"Physical address is required"),m())}function nX(n,e){if(n&1&&(p(0,"option",50),v(1),m()),n&2){let t=e.$implicit;k("value",t.id),w(),J(t.name)}}function iX(n,e){n&1&&(p(0,"div",48),v(1,"Please select a barangay"),m())}function rX(n,e){n&1&&(p(0,"div",48),v(1,"Password is required"),m())}function oX(n,e){n&1&&(p(0,"div",48),v(1,"Confirm password is required"),m())}var Bv=class n{constructor(e,t,i){this.auth=e;this.router=t;this.barangaysService=i;this.barangays$=this.barangaysService.getAllBarangays()}username="";fullName="";email="";contact="";address="";password="";confirmPassword="";errorMessage="";successMessage="";barangays$=null;selectedBarangay="";onSubmit(){return C(this,null,function*(){if(this.errorMessage="",this.successMessage="",this.password!==this.confirmPassword){this.errorMessage="Passwords do not match";return}if(this.username)try{if(yield this.auth.checkUsernameExists(this.username)){this.errorMessage="Username already taken. Please choose a different one.";return}}catch{this.errorMessage="Error checking username availability";return}try{yield this.auth.register(this.email,this.password,"user",this.selectedBarangay,this.fullName,this.contact,this.address,this.username),this.successMessage="Account created successfully! Redirecting to home...",setTimeout(()=>this.router.navigate(["/home"]),1500)}catch(e){this.errorMessage=e.message||"Registration failed"}})}static \u0275fac=function(t){return new(t||n)(K(Be),K(je),K(Wn))};static \u0275cmp=it({type:n,selectors:[["app-sign-up"]],decls:76,vars:22,consts:[["signupForm","ngForm"],["fullNameField","ngModel"],["usernameField","ngModel"],["emailField","ngModel"],["contactField","ngModel"],["addressField","ngModel"],["barangayField","ngModel"],["passwordField","ngModel"],["confirmPasswordField","ngModel"],[1,"container","py-5"],[1,"row"],[1,"col-md-6","col-lg-5","mx-auto"],[1,"card","shadow-lg","border-0","rounded-4"],[1,"card-body","p-5"],[1,"text-center","mb-4"],[1,"fas","fa-leaf","text-success","fa-3x","mb-3"],[1,"fw-bold"],[1,"text-muted"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[3,"ngSubmit"],[1,"mb-3"],["for","name",1,"form-label","fw-medium"],["type","text","id","name","name","fullName","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","text-danger small mt-1",4,"ngIf"],["for","username",1,"form-label","fw-medium"],["type","text","id","username","name","username","required","","pattern","^[a-zA-Z0-9_]{3,20}$",1,"form-control",3,"ngModelChange","ngModel"],["for","email",1,"form-label","fw-medium"],["type","email","id","email","name","email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","contact",1,"form-label","fw-medium"],["type","tel","id","contact","name","contact","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","address",1,"form-label","fw-medium"],["id","address","rows","2","name","address","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","barangay",1,"form-label","fw-medium"],["id","barangay","name","selectedBarangay","required","",1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","password",1,"form-label","fw-medium"],["type","password","id","password","name","password","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"mb-4"],["for","confirmPassword",1,"form-label","fw-medium"],["type","password","id","confirmPassword","name","confirmPassword","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-success","btn-lg","w-100","mb-3",3,"disabled"],[1,"text-center"],[1,"text-muted","small"],["routerLink","/login",1,"text-decoration-none","ms-1"],[1,"alert","alert-danger"],[1,"alert","alert-success"],[1,"text-danger","small","mt-1"],[4,"ngIf"],[3,"value"]],template:function(t,i){if(t&1){let r=he();p(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"div",13)(5,"div",14),A(6,"i",15),p(7,"h2",16),v(8,"Create Account"),m(),p(9,"p",17),v(10,"Join your barangay community"),m()(),W(11,GQ,2,1,"div",18)(12,KQ,2,1,"div",19),p(13,"form",20,0),H("ngSubmit",function(){return Y(r),Q(i.onSubmit())}),p(15,"div",21)(16,"label",22),v(17,"Full Name *"),m(),p(18,"input",23,1),Ie("ngModelChange",function(s){return Y(r),Se(i.fullName,s)||(i.fullName=s),Q(s)}),m(),W(20,YQ,2,0,"div",24),m(),p(21,"div",21)(22,"label",25),v(23,"Username *"),m(),p(24,"input",26,2),Ie("ngModelChange",function(s){return Y(r),Se(i.username,s)||(i.username=s),Q(s)}),m(),p(26,"small",17),v(27,"3-20 characters, letters, numbers, and underscores only"),m(),W(28,ZQ,3,2,"div",24),m(),p(29,"div",21)(30,"label",27),v(31,"Email *"),m(),p(32,"input",28,3),Ie("ngModelChange",function(s){return Y(r),Se(i.email,s)||(i.email=s),Q(s)}),m(),W(34,JQ,2,0,"div",24),m(),p(35,"div",21)(36,"label",29),v(37,"Contact Number *"),m(),p(38,"input",30,4),Ie("ngModelChange",function(s){return Y(r),Se(i.contact,s)||(i.contact=s),Q(s)}),m(),W(40,eX,2,0,"div",24),m(),p(41,"div",21)(42,"label",31),v(43,"Physical Address *"),m(),p(44,"textarea",32,5),Ie("ngModelChange",function(s){return Y(r),Se(i.address,s)||(i.address=s),Q(s)}),m(),W(46,tX,2,0,"div",24),m(),p(47,"div",21)(48,"label",33),v(49,"Select Barangay *"),m(),p(50,"select",34,6),Ie("ngModelChange",function(s){return Y(r),Se(i.selectedBarangay,s)||(i.selectedBarangay=s),Q(s)}),p(52,"option",35),v(53,"Choose a barangay..."),m(),W(54,nX,2,2,"option",36),re(55,"async"),m(),W(56,iX,2,0,"div",24),m(),p(57,"div",21)(58,"label",37),v(59,"Password *"),m(),p(60,"input",38,7),Ie("ngModelChange",function(s){return Y(r),Se(i.password,s)||(i.password=s),Q(s)}),m(),W(62,rX,2,0,"div",24),m(),p(63,"div",39)(64,"label",40),v(65,"Confirm Password *"),m(),p(66,"input",41,8),Ie("ngModelChange",function(s){return Y(r),Se(i.confirmPassword,s)||(i.confirmPassword=s),Q(s)}),m(),W(68,oX,2,0,"div",24),m(),p(69,"button",42),v(70,"Create Account"),m(),p(71,"div",43)(72,"span",44),v(73,"Already have an account?"),m(),p(74,"a",45),v(75,"Log In"),m()()()()()()()()}if(t&2){let r=ze(14),o=ze(19),s=ze(25),a=ze(33),c=ze(39),l=ze(45),u=ze(51),h=ze(61),f=ze(67);w(11),k("ngIf",i.errorMessage),w(),k("ngIf",i.successMessage),w(6),Ee("ngModel",i.fullName),w(2),k("ngIf",o.invalid&&o.touched),w(4),Ee("ngModel",i.username),w(4),k("ngIf",s.invalid&&s.touched),w(4),Ee("ngModel",i.email),w(2),k("ngIf",a.invalid&&a.touched),w(4),Ee("ngModel",i.contact),w(2),k("ngIf",c.invalid&&c.touched),w(4),Ee("ngModel",i.address),w(2),k("ngIf",l.invalid&&l.touched),w(4),Ee("ngModel",i.selectedBarangay),w(4),k("ngForOf",de(55,20,i.barangays$)),w(2),k("ngIf",u.invalid&&u.touched),w(4),Ee("ngModel",i.password),w(2),k("ngIf",h.invalid&&h.touched),w(4),Ee("ngModel",i.confirmPassword),w(2),k("ngIf",f.invalid&&f.touched),w(),k("disabled",r.invalid)}},dependencies:[Qt,vt,jn,Pt,Xt,qi,$r,Hr,Un,Wi,$n,zi,Si,nI,Sn,Ci,Cn],encapsulation:2})};function sX(n,e){n&1&&(p(0,"li",9)(1,"a",56),A(2,"i",57),v(3," Help"),m()())}function aX(n,e){n&1&&(p(0,"li",9)(1,"a",58),A(2,"i",59),v(3," Admin"),m()())}function cX(n,e){if(n&1&&A(0,"img",71),n&2){let t=L().ngIf;k("src",t.profilePictureUrl,pt)}}function lX(n,e){if(n&1&&(p(0,"div",72),v(1),m()),n&2){let t=L().ngIf;w(),ue(" ",(t.username||t.fullName||t.email||"U").charAt(0).toUpperCase()," ")}}function uX(n,e){if(n&1){let t=he();p(0,"li",60)(1,"a",61),W(2,cX,1,1,"img",62)(3,lX,2,1,"ng-template",null,0,Lt),m(),p(5,"ul",63)(6,"li")(7,"a",64),A(8,"i",65),v(9,"My Profile"),m()(),p(10,"li")(11,"a",66),A(12,"i",67),v(13,"Settings"),m()(),p(14,"li"),A(15,"hr",68),m(),p(16,"li")(17,"a",69),H("click",function(){Y(t);let r=L();return Q(r.logout())}),A(18,"i",70),v(19,"Logout"),m()()()()}if(n&2){let t=e.ngIf,i=ze(4);w(2),k("ngIf",t.profilePictureUrl)("ngIfElse",i)}}function dX(n,e){if(n&1&&(p(0,"option",73),v(1),m()),n&2){let t=e.$implicit;k("value",t.value),w(),J(t.label||t.value)}}function hX(n,e){n&1&&(p(0,"option",74),v(1,"Air"),m())}function fX(n,e){n&1&&(p(0,"option",75),v(1,"Water"),m())}function pX(n,e){n&1&&(p(0,"option",76),v(1,"Land"),m())}function mX(n,e){if(n&1&&(p(0,"option",73),v(1),m()),n&2){let t=e.$implicit;k("value",t.value),w(),J(t.label||t.value)}}function gX(n,e){if(n&1&&(p(0,"div",79)(1,"div",80),A(2,"img",81),p(3,"div",82)(4,"div",83),A(5,"div",84),m(),p(6,"div",85),v(7),m()()()()),n&2){let t=e.$implicit,i=e.index,r=L(2);w(2),k("src",t,pt),w(3),Mo("width",r.progressPerImage[i]||0,"%"),k("title",Rs("",r.progressPerImage[i]||0,"% uploaded")),w(2),ue("",r.progressPerImage[i]||0,"%")}}function yX(n,e){if(n&1&&(p(0,"div",32)(1,"div",77),W(2,gX,8,6,"div",78),m()()),n&2){let t=L();w(2),k("ngForOf",t.previews)}}function vX(n,e){if(n&1&&(p(0,"div",32)(1,"label",22),v(2,"Upload Progress"),m(),p(3,"div",86)(4,"div",87),v(5),m()(),p(6,"div",88),v(7,"Uploading images..."),m()()),n&2){let t=L();w(4),Mo("width",t.overallPercent,"%"),w(),ue("",t.overallPercent,"%")}}function _X(n,e){n&1&&(p(0,"a",52),A(1,"i",89),p(2,"span"),v(3,"Help"),m()())}function bX(n,e){n&1&&(p(0,"a",53),A(1,"i",90),p(2,"span"),v(3,"Admin"),m()())}var jv=class n{constructor(e,t,i,r){this.reportsService=e;this.auth=t;this.barangaysService=i;this.router=r;this.user$=this.auth.user$,this.pollutionTypes$=this.auth.user$.pipe(Ke(o=>o&&o.barangay?this.barangaysService.getBarangayById(o.barangay).pipe(se(s=>s&&s.pollutionTypes?s.pollutionTypes.map(a=>({value:a,label:a})):[])):ce([]))),this.locations$=this.auth.user$.pipe(Ke(o=>o&&o.barangay?this.barangaysService.getBarangayById(o.barangay).pipe(se(s=>s&&s.streets?s.streets.map(a=>{let c=typeof a=="string"?a:a.name;return{value:typeof a=="string"?a:JSON.stringify(a),label:c}}):[])):ce([])))}user$;report={type:"",location:"",description:"",images:[],dateTaken:"",timeTaken:"",lat:void 0,lng:void 0};map=null;marker=null;L=null;baguioCityCenter=[16.4023,120.596];locationCoords={"Session Road":[16.4115,120.593],"Burnham Park":[16.4115,120.5925],"Harrison Road":[16.41,120.594],"Magsaysay Avenue":[16.405,120.597],"Upper Session Road":[16.413,120.592],"Lower Session Road":[16.41,120.5935],"General Luna Road":[16.408,120.595],"Abanao Street":[16.4105,120.596],"Bonifacio Street":[16.4095,120.5945],"Km 5":[16.385,120.58],"Km 6":[16.375,120.575]};previews=[];progressTotal=0;progressUploaded=0;progressPercent=0;uploading=!1;overallPercent=0;progressPerImage=[];maxFiles=3;pollutionTypes$=null;locations$=null;logout(){return C(this,null,function*(){try{yield this.auth.logout(),yield this.router.navigate(["/login"])}catch(e){console.error("Logout failed",e)}})}ngAfterViewInit(){return C(this,null,function*(){setTimeout(()=>C(this,null,function*(){try{console.log("Attempting to initialize map...");let e=document.getElementById("map");if(console.log("Map element found:",!!e),!e){console.error("Map element #map not found in DOM");return}let t=yield import("./chunk-CT4AMH3B.js");this.L=t.default||t,console.log("Leaflet loaded:",!!this.L),console.log("Leaflet.map exists:",typeof this.L.map),this.L.Icon&&this.L.Icon.Default&&this.L.Icon.Default.prototype&&(delete this.L.Icon.Default.prototype._getIconUrl,this.L.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"})),this.map=this.L.map("map",{center:this.baguioCityCenter,zoom:14,zoomControl:!0,scrollWheelZoom:!0}),console.log("Map instance created:",!!this.map),this.L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}).addTo(this.map),setTimeout(()=>{this.map&&(this.map.invalidateSize(),console.log("Map invalidateSize called (100ms)"))},100),setTimeout(()=>{this.map&&(this.map.invalidateSize(),console.log("Map invalidateSize called (300ms)"))},300),setTimeout(()=>{this.map&&(this.map.invalidateSize(),console.log("Map invalidateSize called (500ms)"))},500),console.log("Leaflet map initialized successfully - Baguio City")}catch(e){console.error("Leaflet failed to load",e)}}),300)})}ngOnDestroy(){this.map&&this.map.remove&&(this.map.remove(),this.map=null,this.marker=null)}onFileChange(e){let t=e?.target?.files??null;this.previews.forEach(r=>URL.revokeObjectURL(r)),this.previews=[];let i=t?Array.from(t):[];this.report.images=i.slice(0,this.maxFiles),this.report.images.length&&(this.previews=this.report.images.map(r=>URL.createObjectURL(r))),this.progressPerImage=new Array(this.report.images.length).fill(0)}onDragOver(e){e.preventDefault(),e.stopPropagation()}onDrop(e){e.preventDefault(),e.stopPropagation();let t=e.dataTransfer?.files;if(!t)return;let i=Array.from(t).slice(0,this.maxFiles);this.report.images=i,this.previews.forEach(r=>URL.revokeObjectURL(r)),this.previews=this.report.images.map(r=>URL.createObjectURL(r)),this.progressPerImage=new Array(this.report.images.length).fill(0)}onLocationChange(e){if(console.log("onLocationChange called:",e),console.log("Map exists?",!!this.map),console.log("Leaflet exists?",!!this.L),!e||!this.map||!this.L){console.warn("Cannot update location: map or Leaflet not ready");return}let t;try{t=JSON.parse(e)}catch{t=e}let i,r=null;if(typeof t=="string"?(i=t,this.report.location=i):(i=t.name,this.report.location=i,t.lat!=null&&t.lng!=null&&(r=[t.lat,t.lng])),!r&&(r=this.locationCoords[i],!r)){let a=Math.random()*.01;r=[this.baguioCityCenter[0]+a,this.baguioCityCenter[1]+a],console.log(`No predefined coordinates for "${i}", using approximate location`)}let[o,s]=r;this.map.setView([o,s],17),this.marker?(this.marker.setLatLng([o,s]),console.log("Marker moved to:",o,s)):(this.marker=this.L.marker([o,s],{draggable:!0,title:"Drag me to pinpoint exact location"}).addTo(this.map),this.marker.bindPopup("<b>\u{1F4CD} Drag me!</b><br>Move to exact pollution location").openPopup(),this.marker.on("dragend",a=>{let l=a.target.getLatLng();this.report.lat=l.lat,this.report.lng=l.lng,console.log(`Marker dragged to: ${l.lat}, ${l.lng}`)}),this.marker.on("drag",a=>{let l=a.target.getLatLng();this.report.lat=l.lat,this.report.lng=l.lng}),console.log("New marker created at:",o,s)),this.report.lat=o,this.report.lng=s,console.log(`Map centered on "${i}" at [${o}, ${s}]`)}compressImage(e,t=1280,i=200,r=400){return C(this,null,function*(){let o=URL.createObjectURL(e),s=new Image;s.src=o,yield new Promise((U,x)=>{s.onload=U,s.onerror=x});let a=s.naturalWidth||s.width,c=s.naturalHeight||s.height,l=a>t?t/a:1,u=Math.round(a*l),h=Math.round(c*l),f=document.createElement("canvas");f.width=u,f.height=h;let y=f.getContext("2d");if(!y)return e;y.drawImage(s,0,0,u,h);let b=i*1024,E=r*1024,I=U=>new Promise(x=>f.toBlob(x,"image/jpeg",U)),R=.4,F=.95,B=null;for(let U=0;U<7;U++){let x=(R+F)/2,T=yield I(x);if(!T)break;let D=T.size;if(B=T,D>E)F=x;else if(D<b)R=x;else break}if(!B)return e;let z=e.name.replace(/\.[^/.]+$/,"")+".jpg",$=new File([B],z,{type:"image/jpeg"});return URL.revokeObjectURL(o),$})}submit(){return C(this,null,function*(){if(!this.report.type)return alert("Please select pollution type");if(!this.report.location||!this.report.description)return alert("Please provide location and description");if((this.report.images||[]).length===0)return alert("Please upload at least one image");this.uploading=!0;try{let e=yield vn(this.user$);if(!e)return this.uploading=!1,alert("You must be logged in to submit a report"),this.router.navigate(["/login"]);this.progressTotal=this.report.images.length,this.progressUploaded=0,this.progressPercent=0,this.progressPerImage=new Array(this.report.images.length).fill(0);let t=[];for(let a=0;a<this.report.images.length;a++){let c=yield this.compressImage(this.report.images[a]);t.push(c)}let i=Au(),r=t.length,o=[],s=(a,c)=>new Promise((l,u)=>{try{let h=`reports/${e.uid}/${Date.now()}_${a.name}`;console.log(`\u{1F525} Starting upload ${c+1}/${r}:`,h,"Size:",a.size,"bytes");let f=Mu(i,h),y=ud(f,a);console.log(`\u2705 Upload task created for file ${c+1}`),y.on("state_changed",b=>{let E=Math.round(b.bytesTransferred/(b.totalBytes||1)*100);console.log(`\u{1F4CA} File ${c+1} progress:`,E,"%",`(${b.bytesTransferred}/${b.totalBytes})`),this.progressPerImage[c]=E;let I=this.progressPerImage.reduce((R,F)=>R+F,0);this.overallPercent=Math.round(I/r)},b=>{console.error(`\u274C Upload error for file ${c+1}:`,b),u(b)},()=>C(this,null,function*(){try{let b=yield Qc(f);console.log(`\u2705 File ${c+1} uploaded successfully! URL:`,b),this.progressPerImage[c]=100;let E=this.progressPerImage.reduce((I,R)=>I+R,0);this.overallPercent=Math.round(E/r),this.progressUploaded+=1,this.progressUploaded<=r&&(this.progressPercent=Math.round(this.progressUploaded/Math.max(1,r)*100)),l(b)}catch(b){u(b)}}))}catch(h){u(h)}});for(let a=0;a<t.length;a++){let c=yield s(t[a],a);o.push(c)}yield this.reportsService.saveReportWithUrls(e,{type:this.report.type,location:this.report.location,description:this.report.description,imageUrls:o,dateTaken:this.report.dateTaken,timeTaken:this.report.timeTaken,barangayId:e.barangay,lat:this.report.lat,lng:this.report.lng}),this.report={type:"water",location:"",description:"",images:[],dateTaken:"",timeTaken:"",lat:void 0,lng:void 0},this.previews.forEach(a=>URL.revokeObjectURL(a)),this.previews=[],this.progressPerImage=[],this.uploading=!1,alert("Report submitted successfully! Your report will be reviewed and approved by an admin before it is published."),yield this.router.navigate(["/home"])}catch(e){console.error("Failed to submit report",e),this.uploading=!1,alert("Failed to submit report")}})}static \u0275fac=function(t){return new(t||n)(K(Ji),K(Be),K(Wn),K(je))};static \u0275cmp=it({type:n,selectors:[["app-submit-report"]],decls:103,vars:42,consts:[["userIcon",""],[1,"navbar","navbar-expand-lg","navbar-light","bg-white","shadow-sm","sticky-top"],[1,"container-fluid"],["routerLink","/home",1,"navbar-brand","fw-bold","text-success"],[1,"fas","fa-leaf","me-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","title","Toggle navigation menu","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto","align-items-center"],[1,"nav-item"],["routerLink","/home",1,"nav-link"],[1,"fas","fa-home","me-1"],["routerLink","/settings",1,"nav-link"],[1,"fas","fa-cog","me-1"],["class","nav-item",4,"ngIf"],[1,"nav-item","ms-lg-3"],["routerLink","/submit-report",1,"btn","btn-success"],[1,"fas","fa-plus","me-1"],["class","nav-item dropdown ms-lg-2",4,"ngIf"],[1,"container","mt-4",3,"ngSubmit"],[1,"row","g-3"],[1,"col-12","col-md-6"],[1,"form-label"],["title","Type of Pollution","name","type","required","",1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["value","air",4,"ngIf"],["value","water",4,"ngIf"],["value","land",4,"ngIf"],[1,"col-6","col-md-3"],["type","date","name","dateTaken","title","Date when photos were taken",1,"form-control",3,"ngModelChange","ngModel"],["type","time","name","timeTaken","title","Time when photos were taken",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12"],["title","Location","name","location","required","",1,"form-select",3,"ngModelChange","ngModel"],[1,"col-12","mb-3"],[1,"fas","fa-map-marker-alt","text-success","me-2"],["id","map",1,"map-display"],[1,"text-muted","d-block","mt-2"],[1,"fas","fa-info-circle","me-1"],["name","description","required","","rows","4","placeholder","Describe the pollution observed",1,"form-control",3,"ngModelChange","ngModel"],[1,"border","rounded","p-3","upload-drop",3,"dragover","drop"],[1,"mb-2"],["type","file","accept","image/*","multiple","","title","Select images to upload",3,"change","disabled"],[1,"small","text-muted","mt-2"],["class","col-12",4,"ngIf"],[1,"col-12","d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"mobile-bottom-nav","d-md-none"],["routerLink","/home","routerLinkActive","active",1,"mobile-nav-item"],[1,"fas","fa-home"],["routerLink","/submit-report",1,"mobile-nav-item","active"],[1,"fas","fa-plus-circle"],["routerLink","/help","routerLinkActive","active",1,"mobile-nav-item"],["routerLink","/admin","routerLinkActive","active",1,"mobile-nav-item"],["routerLink","/profile","routerLinkActive","active",1,"mobile-nav-item"],[1,"fas","fa-user"],["routerLink","/help",1,"nav-link"],[1,"fas","fa-question-circle","me-1"],["routerLink","/admin",1,"nav-link"],[1,"fas","fa-shield-alt","me-1"],[1,"nav-item","dropdown","ms-lg-2"],["data-bs-toggle","dropdown","title","User menu","aria-label","User menu",1,"nav-link","dropdown-toggle","d-flex","align-items-center"],["alt","Profile","class","rounded-circle","style","width: 32px; height: 32px; object-fit: cover; border: 2px solid #198754;",3,"src",4,"ngIf","ngIfElse"],[1,"dropdown-menu","dropdown-menu-end"],["routerLink","/profile",1,"dropdown-item"],[1,"fas","fa-user","me-2"],["routerLink","/settings",1,"dropdown-item"],[1,"fas","fa-cog","me-2"],[1,"dropdown-divider"],[1,"dropdown-item","text-danger",3,"click"],[1,"fas","fa-sign-out-alt","me-2"],["alt","Profile",1,"rounded-circle",2,"width","32px","height","32px","object-fit","cover","border","2px solid #198754",3,"src"],[1,"rounded-circle","bg-success","text-white","d-flex","align-items-center","justify-content-center",2,"width","32px","height","32px","font-size","0.9rem"],[3,"value"],["value","air"],["value","water"],["value","land"],[1,"row","gy-2"],["class","col-auto",4,"ngFor","ngForOf"],[1,"col-auto"],[1,"card","preview-card"],["alt","preview",1,"card-img-top","preview-img",3,"src"],[1,"card-body","p-2"],[1,"progress","small-progress"],["role","progressbar",1,"progress-bar",3,"title"],[1,"small","text-muted","text-center","mt-1"],[1,"progress","mb-1","overall-progress"],["role","progressbar","title","Overall upload progress",1,"progress-bar"],[1,"small","text-muted"],[1,"fas","fa-question-circle"],[1,"fas","fa-shield-alt"]],template:function(t,i){if(t&1&&(p(0,"nav",1)(1,"div",2)(2,"a",3),A(3,"i",4),v(4,"Pollution Report "),m(),p(5,"button",5),A(6,"span",6),m(),p(7,"div",7)(8,"ul",8)(9,"li",9)(10,"a",10),A(11,"i",11),v(12," Home"),m()(),mt(13,sX,4,0,"li",9),re(14,"async"),p(15,"li",9)(16,"a",12),A(17,"i",13),v(18," Settings"),m()(),W(19,aX,4,0,"li",14),re(20,"async"),p(21,"li",15)(22,"a",16),A(23,"i",17),v(24," New Report"),m()(),W(25,uX,20,2,"li",18),re(26,"async"),m()()()(),p(27,"form",19),H("ngSubmit",function(){return i.submit()}),p(28,"div",20)(29,"div",21)(30,"label",22),v(31,"Pollution Type"),m(),p(32,"select",23),Ie("ngModelChange",function(o){return Se(i.report.type,o)||(i.report.type=o),o}),p(33,"option",24),v(34,"Select type..."),m(),W(35,dX,2,2,"option",25),re(36,"async"),W(37,hX,2,0,"option",26),re(38,"async"),W(39,fX,2,0,"option",27),re(40,"async"),W(41,pX,2,0,"option",28),re(42,"async"),m()(),p(43,"div",29)(44,"label",22),v(45,"Date Taken"),m(),p(46,"input",30),Ie("ngModelChange",function(o){return Se(i.report.dateTaken,o)||(i.report.dateTaken=o),o}),m()(),p(47,"div",29)(48,"label",22),v(49,"Time Taken"),m(),p(50,"input",31),Ie("ngModelChange",function(o){return Se(i.report.timeTaken,o)||(i.report.timeTaken=o),o}),m()(),p(51,"div",32)(52,"label",22),v(53,"Street / Location"),m(),p(54,"select",33),Ie("ngModelChange",function(o){return Se(i.report.location,o)||(i.report.location=o),o}),H("ngModelChange",function(o){return i.onLocationChange(o)}),p(55,"option",24),v(56,"Select location..."),m(),W(57,mX,2,2,"option",25),re(58,"async"),m()(),p(59,"div",34)(60,"label",22),A(61,"i",35),v(62," Pinpoint Exact Location (Drag the marker to adjust) "),m(),A(63,"div",36),p(64,"small",37),A(65,"i",38),v(66," Select a street above, then drag the marker to the exact pollution location "),m()(),p(67,"div",32)(68,"label",22),v(69,"Description"),m(),p(70,"textarea",39),Ie("ngModelChange",function(o){return Se(i.report.description,o)||(i.report.description=o),o}),m()(),p(71,"div",32)(72,"label",22),v(73),m(),p(74,"div",40),H("dragover",function(o){return i.onDragOver(o)})("drop",function(o){return i.onDrop(o)}),p(75,"div",41),v(76,"Drag & drop images here or"),m(),p(77,"input",42),H("change",function(o){return i.onFileChange(o)}),m(),p(78,"div",43),v(79),m()()(),W(80,yX,3,1,"div",44)(81,vX,8,3,"div",44),p(82,"div",45)(83,"button",46),v(84),m()()()(),p(85,"nav",47)(86,"a",48),A(87,"i",49),p(88,"span"),v(89,"Home"),m()(),p(90,"a",50),A(91,"i",51),p(92,"span"),v(93,"Report"),m()(),mt(94,_X,4,0,"a",52),re(95,"async"),mt(96,bX,4,0,"a",53),re(97,"async"),p(98,"a",54),A(99,"i",55),p(100,"span"),v(101,"Account"),m()()(),A(102,"br")),t&2){let r,o,s,a;w(13),gt(((r=de(14,22,i.user$))==null?null:r.role)!=="admin"?13:-1),w(6),k("ngIf",((o=de(20,24,i.user$))==null?null:o.role)==="admin"),w(6),k("ngIf",de(26,26,i.user$)),w(7),Ee("ngModel",i.report.type),w(3),k("ngForOf",de(36,28,i.pollutionTypes$)),w(2),k("ngIf",!de(38,30,i.pollutionTypes$)),w(2),k("ngIf",!de(40,32,i.pollutionTypes$)),w(2),k("ngIf",!de(42,34,i.pollutionTypes$)),w(5),Ee("ngModel",i.report.dateTaken),w(4),Ee("ngModel",i.report.timeTaken),w(4),Ee("ngModel",i.report.location),w(3),k("ngForOf",de(58,36,i.locations$)),w(13),Ee("ngModel",i.report.description),w(3),ue("Upload Images (max ",i.maxFiles,")"),w(4),k("disabled",i.uploading),w(2),ue("You can upload up to ",i.maxFiles," images. Images will be compressed before upload."),w(),k("ngIf",i.previews.length),w(),k("ngIf",i.uploading),w(2),k("disabled",i.uploading),w(),J(i.uploading?"Uploading...":"Submit Report"),w(10),gt(((s=de(95,38,i.user$))==null?null:s.role)!=="admin"?94:-1),w(2),gt(((a=de(97,40,i.user$))==null?null:a.role)==="admin"?96:-1)}},dependencies:[Xt,qi,$r,Hr,Un,Wi,$n,zi,Si,Sn,Ci,vt,jn,Pt,Qt,Cn],styles:[`.preview-img{width:120px;height:80px;object-fit:cover}.upload-drop{min-height:120px}.preview-card{width:140px}.small-progress{height:8px}.overall-progress{height:18px}.map-container{height:450px;width:100%;border:2px solid #198754;border-radius:8px;margin:10px 0 20px;background-color:#f8f9fa;position:relative;z-index:1}#map,.map-display{height:450px!important;width:100%!important;border:2px solid #198754;border-radius:8px;background-color:#e5e3df;margin-bottom:20px;display:block!important;position:relative;overflow:hidden;min-height:450px!important;max-height:450px!important}#map .leaflet-container{height:450px!important;width:100%!important}
`],encapsulation:2})};var sa=()=>{let n=q(Di),e=q(je);return Ey(n).pipe(Qe(1),se(t=>t?!0:(e.navigate(["/login"]),!1)))};var hf=class n{constructor(e,t){this.authService=e;this.router=t}canActivate(){return this.authService.user$.pipe(Qe(1),se(e=>e?.role==="admin"?!0:(this.router.navigate(["/unauthorized"]),!1)))}static \u0275fac=function(t){return new(t||n)(le(Be),le(je))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};var Uv=class n{constructor(e){this.router=e}goHome(){this.router.navigate(["/home"])}static \u0275fac=function(t){return new(t||n)(K(je))};static \u0275cmp=it({type:n,selectors:[["app-unauthorized"]],decls:9,vars:0,consts:[[1,"container","mt-5","text-center"],[1,"card","unauthorized-card"],[1,"card-body"],[1,"text-danger"],[1,"text-muted"],[1,"btn","btn-primary",3,"click"]],template:function(t,i){t&1&&(Ol(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),v(4,"Access Denied"),Fl(),Ol(5,"p",4),v(6,"You do not have permission to view this page."),Fl(),Ol(7,"button",5),Qm("click",function(){return i.goHome()}),v(8,"Return to Home"),Fl()()()())},dependencies:[vt],styles:[".unauthorized-card[_ngcontent-%COMP%]{max-width:600px;margin:2rem auto}.unauthorized-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2rem}"]})};var UT=n=>{let e=q(Be),t=q(je);return e.user$.pipe(Qe(1),se(i=>{if(!i)return t.navigate(["/login"]),!1;let r=n.paramMap.get("barangayId")||null,o=i.role==="admin",s=!i.barangay,a=i.barangay&&r&&i.barangay===r;return o&&(s||a)?!0:(t.navigate(["/unauthorized"]),!1)}))};function wX(n,e){if(n&1){let t=he();p(0,"div",38)(1,"div",39)(2,"div",40),v(3),m(),p(4,"button",41),H("click",function(){let r=Y(t).$implicit,o=L(2);return Q(o.removeToast(r.id))}),m()()()}if(n&2){let t=e.$implicit;Ps(Rs("toast show mb-2 align-items-center text-bg-",t.type)),w(3),J(t.message)}}function EX(n,e){if(n&1&&(p(0,"small",45),v(1),m()),n&2){let t=L().$implicit,i=L(2);w(),ue("\u{1F4CD} ",i.getStreetCoords(t))}}function IX(n,e){if(n&1){let t=he();p(0,"li",42)(1,"div")(2,"strong"),v(3),m(),W(4,EX,2,1,"small",43),m(),p(5,"button",44),H("click",function(){let r=Y(t).$implicit,o=L(2);return Q(o.removeStreet(r))}),v(6,"Remove"),m()()}if(n&2){let t=e.$implicit,i=L(2);w(3),J(i.getStreetName(t)),w(),k("ngIf",i.getStreetCoords(t))}}function CX(n,e){if(n&1){let t=he();p(0,"li",42),v(1),p(2,"button",44),H("click",function(){let r=Y(t).$implicit,o=L(2);return Q(o.removeType(r))}),v(3,"Remove"),m()()}if(n&2){let t=e.$implicit;w(),ue(" ",t," ")}}function SX(n,e){if(n&1){let t=he();p(0,"div")(1,"div",3)(2,"h3",4),v(3),m(),p(4,"button",5),H("click",function(){Y(t);let r=L();return Q(r.router.navigate(["/admin"]))}),A(5,"i",6),v(6,"Back to Admin Dashboard "),m()(),p(7,"div",7)(8,"div",8),W(9,wX,5,4,"div",9),m(),p(10,"div",10)(11,"div",11)(12,"div",12)(13,"div",13)(14,"h5",14),v(15,"Confirm"),m(),p(16,"button",15),H("click",function(){Y(t);let r=L();return Q(r.onConfirmAnswer(!1))}),m()(),p(17,"div",16)(18,"p"),v(19),m()(),p(20,"div",17)(21,"button",18),H("click",function(){Y(t);let r=L();return Q(r.onConfirmAnswer(!1))}),v(22,"Cancel"),m(),p(23,"button",19),H("click",function(){Y(t);let r=L();return Q(r.onConfirmAnswer(!0))}),v(24,"Yes"),m()()()()(),p(25,"div",20)(26,"div",21)(27,"div",22)(28,"h5"),v(29,"Streets"),m(),p(30,"ul",23),W(31,IX,7,2,"li",24),m(),p(32,"div",25)(33,"label",26),v(34,"Street Name"),m(),p(35,"input",27),Ie("ngModelChange",function(r){Y(t);let o=L();return Se(o.newStreet,r)||(o.newStreet=r),Q(r)}),m(),p(36,"label",26),v(37,"Coordinates (optional)"),m(),p(38,"div",28)(39,"div",29)(40,"input",30),Ie("ngModelChange",function(r){Y(t);let o=L();return Se(o.newStreetLat,r)||(o.newStreetLat=r),Q(r)}),m()(),p(41,"div",29)(42,"input",31),Ie("ngModelChange",function(r){Y(t);let o=L();return Se(o.newStreetLng,r)||(o.newStreetLng=r),Q(r)}),m()()(),p(43,"small",32),v(44,"\u{1F4A1} Tip: Use "),p(45,"a",33),v(46,"OpenStreetMap"),m(),v(47," to find coordinates"),m()(),p(48,"button",34),H("click",function(){Y(t);let r=L();return Q(r.addStreet())}),v(49,"Add Street"),m()()(),p(50,"div",21)(51,"div",22)(52,"h5"),v(53,"Pollution Types"),m(),p(54,"ul",23),W(55,CX,4,1,"li",24),m(),p(56,"div",35)(57,"input",36),Ie("ngModelChange",function(r){Y(t);let o=L();return Se(o.newType,r)||(o.newType=r),Q(r)}),m(),p(58,"button",37),H("click",function(){Y(t);let r=L();return Q(r.addType())}),v(59,"Add"),m()()()()()()()}if(n&2){let t=L();w(3),ue("",t.barangay.name," \u2014 Barangay Admin"),w(6),k("ngForOf",t.toasts),w(),Mo("display",t.confirmVisible?"block":"none"),Re("show",t.confirmVisible),w(9),J(t.confirmMessage),w(12),k("ngForOf",t.barangay.streets),w(4),Ee("ngModel",t.newStreet),w(5),Ee("ngModel",t.newStreetLat),w(2),Ee("ngModel",t.newStreetLng),w(13),k("ngForOf",t.barangay.pollutionTypes),w(2),Ee("ngModel",t.newType)}}function TX(n,e){n&1&&(p(0,"p",46),v(1,"Loading barangay data..."),m())}var $v=class n{constructor(e,t,i,r,o,s,a){this.route=e;this.router=t;this.barangaysService=i;this.reportsService=r;this.usersService=o;this.announcementsService=s;this.auth=a}barangayId=null;barangay=null;reports=[];users=[];newStreet="";newStreetLat=null;newStreetLng=null;newType="";toasts=[];nextToastId=1;confirmVisible=!1;confirmMessage="";confirmResolve=null;showToast(e,t="info"){let i=this.nextToastId++;this.toasts.push({id:i,message:e,type:t}),setTimeout(()=>this.toasts=this.toasts.filter(r=>r.id!==i),4e3)}removeToast(e){this.toasts=this.toasts.filter(t=>t.id!==e)}showConfirm(e){return this.confirmMessage=e,this.confirmVisible=!0,new Promise(t=>{this.confirmResolve=t})}onConfirmAnswer(e){this.confirmVisible=!1,this.confirmResolve&&this.confirmResolve(e),this.confirmResolve=null}ngOnInit(){this.barangayId=this.route.snapshot.paramMap.get("barangayId"),this.barangayId&&(this.barangaysService.getBarangayById(this.barangayId).subscribe(e=>this.barangay=e||null),this.reportsService.getReportsByBarangay(this.barangayId).subscribe(e=>this.reports=e||[]),this.usersService.getUsersByBarangay(this.barangayId).subscribe(e=>this.users=e||[]))}addStreet(){return C(this,null,function*(){if(!this.newStreet||!this.barangayId)return;let e=this.newStreetLat!=null&&this.newStreetLng!=null?{name:this.newStreet.trim(),lat:this.newStreetLat,lng:this.newStreetLng}:this.newStreet.trim();yield this.barangaysService.addStreet(this.barangayId,e),this.newStreet="",this.newStreetLat=null,this.newStreetLng=null})}addType(){return C(this,null,function*(){!this.newType||!this.barangayId||(yield this.barangaysService.addPollutionType(this.barangayId,this.newType.trim()),this.newType="")})}removeStreet(e){return C(this,null,function*(){this.barangayId&&(yield this.barangaysService.removeStreet(this.barangayId,e))})}removeType(e){return C(this,null,function*(){this.barangayId&&(yield this.barangaysService.removePollutionType(this.barangayId,e))})}getStreetName(e){return typeof e=="string"?e:e.name}getStreetCoords(e){return typeof e=="string"?null:e.lat!=null&&e.lng!=null?`${e.lat.toFixed(6)}, ${e.lng.toFixed(6)}`:null}promoteUserToAdmin(e){return C(this,null,function*(){if(!(!this.barangayId||!e?.uid))try{yield this.usersService.updateRole(e.uid,"admin"),yield this.usersService.setUserBarangay(e.uid,this.barangayId),this.showToast("User promoted to barangay admin","success")}catch(t){console.error(t),this.showToast("Failed to promote user: "+t.message,"danger")}})}demoteAdminToUser(e){return C(this,null,function*(){if(e?.uid)try{yield this.usersService.updateRole(e.uid,"user"),this.showToast("Admin demoted to user","success")}catch(t){console.error(t),this.showToast("Failed to demote admin: "+t.message,"danger")}})}suspendUser(e){return C(this,null,function*(){if(!(!e?.uid||!(yield this.showConfirm("Suspend this user?"))))try{yield this.usersService.suspendUser(e.uid),this.showToast("User suspended","success")}catch(i){console.error(i),this.showToast("Failed to suspend user: "+i.message,"danger")}})}announcementModel={title:"",description:"",subtitle:""};postBarangayAnnouncement(){return C(this,null,function*(){if(!this.barangayId){this.showToast("Barangay not loaded","warning");return}if(!this.announcementModel.title||!this.announcementModel.description){this.showToast("Title and description required","warning");return}try{yield this.announcementsService.createAnnouncement({title:this.announcementModel.title,subtitle:this.announcementModel.subtitle||"",description:this.announcementModel.description,barangayId:this.barangayId,location:this.barangay?.name||"",date:new Date}),this.announcementModel={title:"",description:"",subtitle:""},this.showToast("Announcement posted","success")}catch(e){console.error(e),this.showToast("Failed to post announcement: "+e.message,"danger")}})}get currentUser$(){return this.auth.user$}static \u0275fac=function(t){return new(t||n)(K(Ii),K(je),K(Wn),K(Ji),K(oa),K(ra),K(Be))};static \u0275cmp=it({type:n,selectors:[["app-barangay-admin"]],decls:4,vars:2,consts:[["loading",""],[1,"container","mt-4"],[4,"ngIf","ngIfElse"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-arrow-left","me-2"],[1,"row","justify-content-center"],[1,"toast-container","top-right"],["role","alert",3,"class",4,"ngFor","ngForOf"],["tabindex","-1",1,"modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close dialog",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"col-md-8","col-lg-6"],[1,"card","mb-3"],[1,"card-body"],[1,"list-group","mb-2"],["class","list-group-item d-flex justify-content-between align-items-center",4,"ngFor","ngForOf"],[1,"mb-2"],[1,"form-label"],["placeholder","Street name","title","Street name",1,"form-control","mb-2",3,"ngModelChange","ngModel"],[1,"row","g-2"],[1,"col-6"],["type","number","step","0.000001","placeholder","Latitude","title","Latitude",1,"form-control",3,"ngModelChange","ngModel"],["type","number","step","0.000001","placeholder","Longitude","title","Longitude",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-muted","d-block","mt-1"],["href","https://www.openstreetmap.org/","target","_blank","rel","noopener"],[1,"btn","btn-primary","w-100",3,"click"],[1,"input-group"],["placeholder","Add new type","title","Add new pollution type",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click"],["role","alert"],[1,"d-flex"],[1,"toast-body"],["type","button","aria-label","Close toast",1,"btn-close","btn-close-white","me-2","m-auto",3,"click"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],["class","text-muted d-block",4,"ngIf"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"text-muted","d-block"],[1,"text-muted"]],template:function(t,i){if(t&1&&(p(0,"div",1),W(1,SX,60,13,"div",2)(2,TX,2,0,"ng-template",null,0,Lt),m()),t&2){let r=ze(3);w(),k("ngIf",i.barangay)("ngIfElse",r)}},dependencies:[vt,jn,Pt,Xt,Un,JE,$n,Sn],styles:[".container[_ngcontent-%COMP%]{max-width:1100px}.card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:.75rem}.list-group-item[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-left:.5rem}.toast-container.top-right[_ngcontent-%COMP%]{position:fixed;top:1rem;right:1rem;z-index:2000}.toast[_ngcontent-%COMP%]{min-width:200px}@media (max-width: 768px){app-barangay-admin[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%], app-barangay-admin[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{padding:0!important;margin:0!important;max-width:100%!important}app-barangay-admin[_ngcontent-%COMP%]   .col-12.col-lg-10[_ngcontent-%COMP%], app-barangay-admin[_ngcontent-%COMP%]   [class*=col-][_ngcontent-%COMP%]{max-width:100%!important;flex:0 0 100%!important;padding:0!important}app-barangay-admin[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin:0!important}app-barangay-admin[_ngcontent-%COMP%]   .mt-4[_ngcontent-%COMP%]{margin-top:0!important}app-barangay-admin[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:0;margin-bottom:.5rem}app-barangay-admin[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1rem!important}app-barangay-admin[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{padding:0!important}}"]})};function mf(n){return n+.5|0}var aa=(n,e,t)=>Math.max(Math.min(n,t),e);function ff(n){return aa(mf(n*2.55),0,255)}function ca(n){return aa(mf(n*255),0,255)}function Qo(n){return aa(mf(n/2.55)/100,0,1)}function WL(n){return aa(mf(n*100),0,100)}var er={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},HT=[..."0123456789ABCDEF"],DX=n=>HT[n&15],xX=n=>HT[(n&240)>>4]+HT[n&15],Hv=n=>(n&240)>>4===(n&15),AX=n=>Hv(n.r)&&Hv(n.g)&&Hv(n.b)&&Hv(n.a);function MX(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&er[n[1]]*17,g:255&er[n[2]]*17,b:255&er[n[3]]*17,a:e===5?er[n[4]]*17:255}:(e===7||e===9)&&(t={r:er[n[1]]<<4|er[n[2]],g:er[n[3]]<<4|er[n[4]],b:er[n[5]]<<4|er[n[6]],a:e===9?er[n[7]]<<4|er[n[8]]:255})),t}var PX=(n,e)=>n<255?e(n):"";function RX(n){var e=AX(n)?DX:xX;return n?"#"+e(n.r)+e(n.g)+e(n.b)+PX(n.a,e):void 0}var kX=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function QL(n,e,t){let i=e*Math.min(t,1-t),r=(o,s=(o+n/30)%12)=>t-i*Math.max(Math.min(s-3,9-s,1),-1);return[r(0),r(8),r(4)]}function NX(n,e,t){let i=(r,o=(r+n/60)%6)=>t-t*e*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function OX(n,e,t){let i=QL(n,1,.5),r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)i[r]*=1-e-t,i[r]+=e;return i}function FX(n,e,t,i,r){return n===r?(e-t)/i+(e<t?6:0):e===r?(t-n)/i+2:(n-e)/i+4}function zT(n){let t=n.r/255,i=n.g/255,r=n.b/255,o=Math.max(t,i,r),s=Math.min(t,i,r),a=(o+s)/2,c,l,u;return o!==s&&(u=o-s,l=a>.5?u/(2-o-s):u/(o+s),c=FX(t,i,r,u,o),c=c*60+.5),[c|0,l||0,a]}function qT(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(ca)}function WT(n,e,t){return qT(QL,n,e,t)}function LX(n,e,t){return qT(OX,n,e,t)}function VX(n,e,t){return qT(NX,n,e,t)}function XL(n){return(n%360+360)%360}function BX(n){let e=kX.exec(n),t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?ff(+e[5]):ca(+e[5]));let r=XL(+e[2]),o=+e[3]/100,s=+e[4]/100;return e[1]==="hwb"?i=LX(r,o,s):e[1]==="hsv"?i=VX(r,o,s):i=WT(r,o,s),{r:i[0],g:i[1],b:i[2],a:t}}function jX(n,e){var t=zT(n);t[0]=XL(t[0]+e),t=WT(t),n.r=t[0],n.g=t[1],n.b=t[2]}function UX(n){if(!n)return;let e=zT(n),t=e[0],i=WL(e[1]),r=WL(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${r}%, ${Qo(n.a)})`:`hsl(${t}, ${i}%, ${r}%)`}var GL={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},KL={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function $X(){let n={},e=Object.keys(KL),t=Object.keys(GL),i,r,o,s,a;for(i=0;i<e.length;i++){for(s=a=e[i],r=0;r<t.length;r++)o=t[r],a=a.replace(o,GL[o]);o=parseInt(KL[s],16),n[a]=[o>>16&255,o>>8&255,o&255]}return n}var zv;function HX(n){zv||(zv=$X(),zv.transparent=[0,0,0,0]);let e=zv[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var zX=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function qX(n){let e=zX.exec(n),t=255,i,r,o;if(e){if(e[7]!==i){let s=+e[7];t=e[8]?ff(s):aa(s*255,0,255)}return i=+e[1],r=+e[3],o=+e[5],i=255&(e[2]?ff(i):aa(i,0,255)),r=255&(e[4]?ff(r):aa(r,0,255)),o=255&(e[6]?ff(o):aa(o,0,255)),{r:i,g:r,b:o,a:t}}}function WX(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Qo(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var $T=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Nu=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function GX(n,e,t){let i=Nu(Qo(n.r)),r=Nu(Qo(n.g)),o=Nu(Qo(n.b));return{r:ca($T(i+t*(Nu(Qo(e.r))-i))),g:ca($T(r+t*(Nu(Qo(e.g))-r))),b:ca($T(o+t*(Nu(Qo(e.b))-o))),a:n.a+t*(e.a-n.a)}}function qv(n,e,t){if(n){let i=zT(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=WT(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function ZL(n,e){return n&&Object.assign(e||{},n)}function YL(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=ca(n[3]))):(e=ZL(n,{r:0,g:0,b:0,a:1}),e.a=ca(e.a)),e}function KX(n){return n.charAt(0)==="r"?qX(n):BX(n)}var pf=class n{constructor(e){if(e instanceof n)return e;let t=typeof e,i;t==="object"?i=YL(e):t==="string"&&(i=MX(e)||HX(e)||KX(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=ZL(this._rgb);return e&&(e.a=Qo(e.a)),e}set rgb(e){this._rgb=YL(e)}rgbString(){return this._valid?WX(this._rgb):void 0}hexString(){return this._valid?RX(this._rgb):void 0}hslString(){return this._valid?UX(this._rgb):void 0}mix(e,t){if(e){let i=this.rgb,r=e.rgb,o,s=t===o?.5:t,a=2*s-1,c=i.a-r.a,l=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;o=1-l,i.r=255&l*i.r+o*r.r+.5,i.g=255&l*i.g+o*r.g+.5,i.b=255&l*i.b+o*r.b+.5,i.a=s*i.a+(1-s)*r.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=GX(this._rgb,e._rgb,t)),this}clone(){return new n(this.rgb)}alpha(e){return this._rgb.a=ca(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=mf(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return qv(this._rgb,2,e),this}darken(e){return qv(this._rgb,2,-e),this}saturate(e){return qv(this._rgb,1,e),this}desaturate(e){return qv(this._rgb,1,-e),this}rotate(e){return jX(this._rgb,e),this}};function so(){}var lV=(()=>{let n=0;return()=>n++})();function Ne(n){return n==null}function bt(n){if(Array.isArray&&Array.isArray(n))return!0;let e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Oe(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Rt(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function ui(n,e){return Rt(n)?n:e}function Te(n,e){return typeof n>"u"?e:n}var uV=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,QT=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function ut(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function tt(n,e,t,i){let r,o,s;if(bt(n))if(o=n.length,i)for(r=o-1;r>=0;r--)e.call(t,n[r],r);else for(r=0;r<o;r++)e.call(t,n[r],r);else if(Oe(n))for(s=Object.keys(n),o=s.length,r=0;r<o;r++)e.call(t,n[s[r]],s[r])}function vf(n,e){let t,i,r,o;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(r=n[t],o=e[t],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function Yv(n){if(bt(n))return n.map(Yv);if(Oe(n)){let e=Object.create(null),t=Object.keys(n),i=t.length,r=0;for(;r<i;++r)e[t[r]]=Yv(n[t[r]]);return e}return n}function dV(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function YX(n,e,t,i){if(!dV(n))return;let r=e[n],o=t[n];Oe(r)&&Oe(o)?Fu(r,o,i):e[n]=Yv(o)}function Fu(n,e,t){let i=bt(e)?e:[e],r=i.length;if(!Oe(n))return n;t=t||{};let o=t.merger||YX,s;for(let a=0;a<r;++a){if(s=i[a],!Oe(s))continue;let c=Object.keys(s);for(let l=0,u=c.length;l<u;++l)o(c[l],n,s,t)}return n}function Vu(n,e){return Fu(n,e,{merger:QX})}function QX(n,e,t){if(!dV(n))return;let i=e[n],r=t[n];Oe(i)&&Oe(r)?Vu(i,r):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Yv(r))}var JL={"":n=>n,x:n=>n.x,y:n=>n.y};function XX(n){let e=n.split("."),t=[],i="";for(let r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function ZX(n){let e=XX(n);return t=>{for(let i of e){if(i==="")break;t=t&&t[i]}return t}}function Jo(n,e){return(JL[e]||(JL[e]=ZX(e)))(n)}function Jv(n){return n.charAt(0).toUpperCase()+n.slice(1)}var Bu=n=>typeof n<"u",Xo=n=>typeof n=="function",XT=(n,e)=>{if(n.size!==e.size)return!1;for(let t of n)if(!e.has(t))return!1;return!0};function hV(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var We=Math.PI,wt=2*We,JX=wt+We,Qv=Number.POSITIVE_INFINITY,eZ=We/180,jt=We/2,Pc=We/4,eV=We*2/3,Zo=Math.log10,wr=Math.sign;function ju(n,e,t){return Math.abs(n-e)<t}function ZT(n){let e=Math.round(n);n=ju(n,e,n/1e3)?e:n;let t=Math.pow(10,Math.floor(Zo(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function fV(n){let e=[],t=Math.sqrt(n),i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((r,o)=>r-o).pop(),e}function tZ(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Nc(n){return!tZ(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function pV(n,e){let t=Math.round(n);return t-e<=n&&t+e>=n}function JT(n,e,t){let i,r,o;for(i=0,r=n.length;i<r;i++)o=n[i][t],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function tr(n){return n*(We/180)}function e_(n){return n*(180/We)}function e1(n){if(!Rt(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function t1(n,e){let t=e.x-n.x,i=e.y-n.y,r=Math.sqrt(t*t+i*i),o=Math.atan2(i,t);return o<-.5*We&&(o+=wt),{angle:o,distance:r}}function Xv(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function nZ(n,e){return(n-e+JX)%wt-We}function Tn(n){return(n%wt+wt)%wt}function Uu(n,e,t,i){let r=Tn(n),o=Tn(e),s=Tn(t),a=Tn(o-r),c=Tn(s-r),l=Tn(r-o),u=Tn(r-s);return r===o||r===s||i&&o===s||a>c&&l<u}function an(n,e,t){return Math.max(e,Math.min(t,n))}function mV(n){return an(n,-32768,32767)}function ao(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function t_(n,e,t){t=t||(s=>n[s]<e);let i=n.length-1,r=0,o;for(;i-r>1;)o=r+i>>1,t(o)?r=o:i=o;return{lo:r,hi:i}}var ro=(n,e,t,i)=>t_(n,t,i?r=>{let o=n[r][e];return o<t||o===t&&n[r+1][e]===t}:r=>n[r][e]<t),gV=(n,e,t)=>t_(n,t,i=>n[i][e]>=t);function yV(n,e,t){let i=0,r=n.length;for(;i<r&&n[i]<e;)i++;for(;r>i&&n[r-1]>t;)r--;return i>0||r<n.length?n.slice(i,r):n}var vV=["push","pop","shift","splice","unshift"];function _V(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),vV.forEach(t=>{let i="_onData"+Jv(t),r=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...o){let s=r.apply(this,o);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...o)}),s}})})}function n1(n,e){let t=n._chartjs;if(!t)return;let i=t.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(vV.forEach(o=>{delete n[o]}),delete n._chartjs)}function i1(n){let e=new Set(n);return e.size===n.length?n:Array.from(e)}var r1=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function o1(n,e){let t=[],i=!1;return function(...r){t=r,i||(i=!0,r1.call(window,()=>{i=!1,n.apply(e,t)}))}}function bV(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}var n_=n=>n==="start"?"left":n==="end"?"right":"center",Dn=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,wV=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function s1(n,e,t){let i=e.length,r=0,o=i;if(n._sorted){let{iScale:s,vScale:a,_parsed:c}=n,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,u=s.axis,{min:h,max:f,minDefined:y,maxDefined:b}=s.getUserBounds();if(y){if(r=Math.min(ro(c,u,h).lo,t?i:ro(e,u,s.getPixelForValue(h)).lo),l){let E=c.slice(0,r+1).reverse().findIndex(I=>!Ne(I[a.axis]));r-=Math.max(0,E)}r=an(r,0,i-1)}if(b){let E=Math.max(ro(c,s.axis,f,!0).hi+1,t?0:ro(e,u,s.getPixelForValue(f),!0).hi+1);if(l){let I=c.slice(E-1).findIndex(R=>!Ne(R[a.axis]));E+=Math.max(0,I)}o=an(E,r,i)-r}else o=i-r}return{start:r,count:o}}function a1(n){let{xScale:e,yScale:t,_scaleRanges:i}=n,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=r,!0;let o=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,r),o}var Wv=n=>n===0||n===1,tV=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*wt/t)),nV=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*wt/t)+1,Ou={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*jt)+1,easeOutSine:n=>Math.sin(n*jt),easeInOutSine:n=>-.5*(Math.cos(We*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Wv(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Wv(n)?n:tV(n,.075,.3),easeOutElastic:n=>Wv(n)?n:nV(n,.075,.3),easeInOutElastic(n){return Wv(n)?n:n<.5?.5*tV(n*2,.1125,.45):.5+.5*nV(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Ou.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Ou.easeInBounce(n*2)*.5:Ou.easeOutBounce(n*2-1)*.5+.5};function c1(n){if(n&&typeof n=="object"){let e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function l1(n){return c1(n)?n:new pf(n)}function GT(n){return c1(n)?n:new pf(n).saturate(.5).darken(.1).hexString()}var iZ=["x","y","borderWidth","radius","tension"],rZ=["color","borderColor","backgroundColor"];function oZ(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:rZ},numbers:{type:"number",properties:iZ}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function sZ(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var iV=new Map;function aZ(n,e){e=e||{};let t=n+JSON.stringify(e),i=iV.get(t);return i||(i=new Intl.NumberFormat(n,e),iV.set(t,i)),i}function $u(n,e,t){return aZ(e,t).format(n)}var EV={values(n){return bt(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";let i=this.chart.options.locale,r,o=n;if(t.length>1){let l=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(l<1e-4||l>1e15)&&(r="scientific"),o=cZ(n,t)}let s=Zo(Math.abs(o)),a=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),c={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),$u(n,i,c)},logarithmic(n,e,t){if(n===0)return"0";let i=t[e].significand||n/Math.pow(10,Math.floor(Zo(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?EV.numeric.call(this,n,e,t):""}};function cZ(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var _f={formatters:EV};function lZ(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:_f.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var da=Object.create(null),i_=Object.create(null);function gf(n,e){if(!e)return n;let t=e.split(".");for(let i=0,r=t.length;i<r;++i){let o=t[i];n=n[o]||(n[o]=Object.create(null))}return n}function KT(n,e,t){return typeof e=="string"?Fu(gf(n,e),t):Fu(gf(n,""),e)}var YT=class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>GT(r.backgroundColor),this.hoverBorderColor=(i,r)=>GT(r.borderColor),this.hoverColor=(i,r)=>GT(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return KT(this,e,t)}get(e){return gf(this,e)}describe(e,t){return KT(i_,e,t)}override(e,t){return KT(da,e,t)}route(e,t,i,r){let o=gf(this,e),s=gf(this,i),a="_"+t;Object.defineProperties(o,{[a]:{value:o[t],writable:!0},[t]:{enumerable:!0,get(){let c=this[a],l=s[r];return Oe(c)?Object.assign({},l,c):Te(c,l)},set(c){this[a]=c}}})}apply(e){e.forEach(t=>t(this))}},St=new YT({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[oZ,sZ,lZ]);function uZ(n){return!n||Ne(n.size)||Ne(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function yf(n,e,t,i,r){let o=e[r];return o||(o=e[r]=n.measureText(r).width,t.push(r)),o>i&&(i=o),i}function IV(n,e,t,i){i=i||{};let r=i.data=i.data||{},o=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},o=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let s=0,a=t.length,c,l,u,h,f;for(c=0;c<a;c++)if(h=t[c],h!=null&&!bt(h))s=yf(n,r,o,s,h);else if(bt(h))for(l=0,u=h.length;l<u;l++)f=h[l],f!=null&&!bt(f)&&(s=yf(n,r,o,s,f));n.restore();let y=o.length/2;if(y>t.length){for(c=0;c<y;c++)delete r[o[c]];o.splice(0,y)}return s}function ha(n,e,t){let i=n.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*i)/i+r}function u1(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function r_(n,e,t,i){d1(n,e,t,i,null)}function d1(n,e,t,i,r){let o,s,a,c,l,u,h,f,y=e.pointStyle,b=e.rotation,E=e.radius,I=(b||0)*eZ;if(y&&typeof y=="object"&&(o=y.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(I),n.drawImage(y,-y.width/2,-y.height/2,y.width,y.height),n.restore();return}if(!(isNaN(E)||E<=0)){switch(n.beginPath(),y){default:r?n.ellipse(t,i,r/2,E,0,0,wt):n.arc(t,i,E,0,wt),n.closePath();break;case"triangle":u=r?r/2:E,n.moveTo(t+Math.sin(I)*u,i-Math.cos(I)*E),I+=eV,n.lineTo(t+Math.sin(I)*u,i-Math.cos(I)*E),I+=eV,n.lineTo(t+Math.sin(I)*u,i-Math.cos(I)*E),n.closePath();break;case"rectRounded":l=E*.516,c=E-l,s=Math.cos(I+Pc)*c,h=Math.cos(I+Pc)*(r?r/2-l:c),a=Math.sin(I+Pc)*c,f=Math.sin(I+Pc)*(r?r/2-l:c),n.arc(t-h,i-a,l,I-We,I-jt),n.arc(t+f,i-s,l,I-jt,I),n.arc(t+h,i+a,l,I,I+jt),n.arc(t-f,i+s,l,I+jt,I+We),n.closePath();break;case"rect":if(!b){c=Math.SQRT1_2*E,u=r?r/2:c,n.rect(t-u,i-c,2*u,2*c);break}I+=Pc;case"rectRot":h=Math.cos(I)*(r?r/2:E),s=Math.cos(I)*E,a=Math.sin(I)*E,f=Math.sin(I)*(r?r/2:E),n.moveTo(t-h,i-a),n.lineTo(t+f,i-s),n.lineTo(t+h,i+a),n.lineTo(t-f,i+s),n.closePath();break;case"crossRot":I+=Pc;case"cross":h=Math.cos(I)*(r?r/2:E),s=Math.cos(I)*E,a=Math.sin(I)*E,f=Math.sin(I)*(r?r/2:E),n.moveTo(t-h,i-a),n.lineTo(t+h,i+a),n.moveTo(t+f,i-s),n.lineTo(t-f,i+s);break;case"star":h=Math.cos(I)*(r?r/2:E),s=Math.cos(I)*E,a=Math.sin(I)*E,f=Math.sin(I)*(r?r/2:E),n.moveTo(t-h,i-a),n.lineTo(t+h,i+a),n.moveTo(t+f,i-s),n.lineTo(t-f,i+s),I+=Pc,h=Math.cos(I)*(r?r/2:E),s=Math.cos(I)*E,a=Math.sin(I)*E,f=Math.sin(I)*(r?r/2:E),n.moveTo(t-h,i-a),n.lineTo(t+h,i+a),n.moveTo(t+f,i-s),n.lineTo(t-f,i+s);break;case"line":s=r?r/2:Math.cos(I)*E,a=Math.sin(I)*E,n.moveTo(t-s,i-a),n.lineTo(t+s,i+a);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(I)*(r?r/2:E),i+Math.sin(I)*E);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function oo(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function bf(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function wf(n){n.restore()}function CV(n,e,t,i,r){if(!e)return n.lineTo(t.x,t.y);if(r==="middle"){let o=(e.x+t.x)/2;n.lineTo(o,e.y),n.lineTo(o,t.y)}else r==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function SV(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function dZ(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Ne(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function hZ(n,e,t,i,r){if(r.strikethrough||r.underline){let o=n.measureText(i),s=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,c=t-o.actualBoundingBoxAscent,l=t+o.actualBoundingBoxDescent,u=r.strikethrough?(c+l)/2:l;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(s,u),n.lineTo(a,u),n.stroke()}}function fZ(n,e){let t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function fa(n,e,t,i,r,o={}){let s=bt(e)?e:[e],a=o.strokeWidth>0&&o.strokeColor!=="",c,l;for(n.save(),n.font=r.string,dZ(n,o),c=0;c<s.length;++c)l=s[c],o.backdrop&&fZ(n,o.backdrop),a&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),Ne(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(l,t,i,o.maxWidth)),n.fillText(l,t,i,o.maxWidth),hZ(n,t,i,l,o),i+=Number(r.lineHeight);n.restore()}function Hu(n,e){let{x:t,y:i,w:r,h:o,radius:s}=e;n.arc(t+s.topLeft,i+s.topLeft,s.topLeft,1.5*We,We,!0),n.lineTo(t,i+o-s.bottomLeft),n.arc(t+s.bottomLeft,i+o-s.bottomLeft,s.bottomLeft,We,jt,!0),n.lineTo(t+r-s.bottomRight,i+o),n.arc(t+r-s.bottomRight,i+o-s.bottomRight,s.bottomRight,jt,0,!0),n.lineTo(t+r,i+s.topRight),n.arc(t+r-s.topRight,i+s.topRight,s.topRight,0,-jt,!0),n.lineTo(t+s.topLeft,i)}var pZ=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,mZ=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function gZ(n,e){let t=(""+n).match(pZ);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}var yZ=n=>+n||0;function o_(n,e){let t={},i=Oe(e),r=i?Object.keys(e):e,o=Oe(n)?i?s=>Te(n[s],n[e[s]]):s=>n[s]:()=>n;for(let s of r)t[s]=yZ(o(s));return t}function h1(n){return o_(n,{top:"y",right:"x",bottom:"y",left:"x"})}function pa(n){return o_(n,["topLeft","topRight","bottomLeft","bottomRight"])}function xn(n){let e=h1(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function nn(n,e){n=n||{},e=e||St.font;let t=Te(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=Te(n.style,e.style);i&&!(""+i).match(mZ)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);let r={family:Te(n.family,e.family),lineHeight:gZ(Te(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:Te(n.weight,e.weight),string:""};return r.string=uZ(r),r}function zu(n,e,t,i){let r=!0,o,s,a;for(o=0,s=n.length;o<s;++o)if(a=n[o],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),r=!1),t!==void 0&&bt(a)&&(a=a[t%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function TV(n,e,t){let{min:i,max:r}=n,o=QT(e,(r-i)/2),s=(a,c)=>t&&a===0?0:a+c;return{min:s(i,-Math.abs(o)),max:s(r,o)}}function es(n,e){return Object.assign(Object.create(n),e)}function s_(n,e=[""],t,i,r=()=>n[0]){let o=t||n;typeof i>"u"&&(i=AV("_fallback",n));let s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:r,override:a=>s_([a,...n],e,o,i)};return new Proxy(s,{deleteProperty(a,c){return delete a[c],delete a._keys,delete n[0][c],!0},get(a,c){return DV(a,c,()=>SZ(c,e,n,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,c){return oV(a).includes(c)},ownKeys(a){return oV(a)},set(a,c,l){let u=a._storage||(a._storage=r());return a[c]=u[c]=l,delete a._keys,!0}})}function kc(n,e,t,i){let r={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:f1(n,i),setContext:o=>kc(n,o,t,i),override:o=>kc(n.override(o),e,t,i)};return new Proxy(r,{deleteProperty(o,s){return delete o[s],delete n[s],!0},get(o,s,a){return DV(o,s,()=>_Z(o,s,a))},getOwnPropertyDescriptor(o,s){return o._descriptors.allKeys?Reflect.has(n,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,s)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,s){return Reflect.has(n,s)},ownKeys(){return Reflect.ownKeys(n)},set(o,s,a){return n[s]=a,delete o[s],!0}})}function f1(n,e={scriptable:!0,indexable:!0}){let{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=n;return{allKeys:r,scriptable:t,indexable:i,isScriptable:Xo(t)?t:()=>t,isIndexable:Xo(i)?i:()=>i}}var vZ=(n,e)=>n?n+Jv(e):e,p1=(n,e)=>Oe(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function DV(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];let i=t();return n[e]=i,i}function _Z(n,e,t){let{_proxy:i,_context:r,_subProxy:o,_descriptors:s}=n,a=i[e];return Xo(a)&&s.isScriptable(e)&&(a=bZ(e,a,n,t)),bt(a)&&a.length&&(a=wZ(e,a,n,s.isIndexable)),p1(e,a)&&(a=kc(a,r,o&&o[e],s)),a}function bZ(n,e,t,i){let{_proxy:r,_context:o,_subProxy:s,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let c=e(o,s||i);return a.delete(n),p1(n,c)&&(c=m1(r._scopes,r,n,c)),c}function wZ(n,e,t,i){let{_proxy:r,_context:o,_subProxy:s,_descriptors:a}=t;if(typeof o.index<"u"&&i(n))return e[o.index%e.length];if(Oe(e[0])){let c=e,l=r._scopes.filter(u=>u!==c);e=[];for(let u of c){let h=m1(l,r,n,u);e.push(kc(h,o,s&&s[n],a))}}return e}function xV(n,e,t){return Xo(n)?n(e,t):n}var EZ=(n,e)=>n===!0?e:typeof n=="string"?Jo(e,n):void 0;function IZ(n,e,t,i,r){for(let o of e){let s=EZ(t,o);if(s){n.add(s);let a=xV(s._fallback,t,r);if(typeof a<"u"&&a!==t&&a!==i)return a}else if(s===!1&&typeof i<"u"&&t!==i)return null}return!1}function m1(n,e,t,i){let r=e._rootScopes,o=xV(e._fallback,t,i),s=[...n,...r],a=new Set;a.add(i);let c=rV(a,s,t,o||t,i);return c===null||typeof o<"u"&&o!==t&&(c=rV(a,s,o,c,i),c===null)?!1:s_(Array.from(a),[""],r,o,()=>CZ(e,t,i))}function rV(n,e,t,i,r){for(;t;)t=IZ(n,e,t,i,r);return t}function CZ(n,e,t){let i=n._getTarget();e in i||(i[e]={});let r=i[e];return bt(r)&&Oe(t)?t:r||{}}function SZ(n,e,t,i){let r;for(let o of e)if(r=AV(vZ(o,n),t),typeof r<"u")return p1(n,r)?m1(t,i,n,r):r}function AV(n,e){for(let t of e){if(!t)continue;let i=t[n];if(typeof i<"u")return i}}function oV(n){let e=n._keys;return e||(e=n._keys=TZ(n._scopes)),e}function TZ(n){let e=new Set;for(let t of n)for(let i of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function g1(n,e,t,i){let{iScale:r}=n,{key:o="r"}=this._parsing,s=new Array(i),a,c,l,u;for(a=0,c=i;a<c;++a)l=a+t,u=e[l],s[a]={r:r.parse(Jo(u,o),l)};return s}var DZ=Number.EPSILON||1e-14,Lu=(n,e)=>e<n.length&&!n[e].skip&&n[e],MV=n=>n==="x"?"y":"x";function xZ(n,e,t,i){let r=n.skip?e:n,o=e,s=t.skip?e:t,a=Xv(o,r),c=Xv(s,o),l=a/(a+c),u=c/(a+c);l=isNaN(l)?0:l,u=isNaN(u)?0:u;let h=i*l,f=i*u;return{previous:{x:o.x-h*(s.x-r.x),y:o.y-h*(s.y-r.y)},next:{x:o.x+f*(s.x-r.x),y:o.y+f*(s.y-r.y)}}}function AZ(n,e,t){let i=n.length,r,o,s,a,c,l=Lu(n,0);for(let u=0;u<i-1;++u)if(c=l,l=Lu(n,u+1),!(!c||!l)){if(ju(e[u],0,DZ)){t[u]=t[u+1]=0;continue}r=t[u]/e[u],o=t[u+1]/e[u],a=Math.pow(r,2)+Math.pow(o,2),!(a<=9)&&(s=3/Math.sqrt(a),t[u]=r*s*e[u],t[u+1]=o*s*e[u])}}function MZ(n,e,t="x"){let i=MV(t),r=n.length,o,s,a,c=Lu(n,0);for(let l=0;l<r;++l){if(s=a,a=c,c=Lu(n,l+1),!a)continue;let u=a[t],h=a[i];s&&(o=(u-s[t])/3,a[`cp1${t}`]=u-o,a[`cp1${i}`]=h-o*e[l]),c&&(o=(c[t]-u)/3,a[`cp2${t}`]=u+o,a[`cp2${i}`]=h+o*e[l])}}function PZ(n,e="x"){let t=MV(e),i=n.length,r=Array(i).fill(0),o=Array(i),s,a,c,l=Lu(n,0);for(s=0;s<i;++s)if(a=c,c=l,l=Lu(n,s+1),!!c){if(l){let u=l[e]-c[e];r[s]=u!==0?(l[t]-c[t])/u:0}o[s]=a?l?wr(r[s-1])!==wr(r[s])?0:(r[s-1]+r[s])/2:r[s-1]:r[s]}AZ(n,r,o),MZ(n,o,e)}function Gv(n,e,t){return Math.max(Math.min(n,t),e)}function RZ(n,e){let t,i,r,o,s,a=oo(n[0],e);for(t=0,i=n.length;t<i;++t)s=o,o=a,a=t<i-1&&oo(n[t+1],e),o&&(r=n[t],s&&(r.cp1x=Gv(r.cp1x,e.left,e.right),r.cp1y=Gv(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=Gv(r.cp2x,e.left,e.right),r.cp2y=Gv(r.cp2y,e.top,e.bottom)))}function PV(n,e,t,i,r){let o,s,a,c;if(e.spanGaps&&(n=n.filter(l=>!l.skip)),e.cubicInterpolationMode==="monotone")PZ(n,r);else{let l=i?n[n.length-1]:n[0];for(o=0,s=n.length;o<s;++o)a=n[o],c=xZ(l,a,n[Math.min(o+1,s-(i?0:1))%s],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,l=a}e.capBezierPoints&&RZ(n,t)}function a_(){return typeof window<"u"&&typeof document<"u"}function c_(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Zv(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}var l_=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function kZ(n,e){return l_(n).getPropertyValue(e)}var NZ=["top","right","bottom","left"];function Rc(n,e,t){let i={};t=t?"-"+t:"";for(let r=0;r<4;r++){let o=NZ[r];i[o]=parseFloat(n[e+"-"+o+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}var OZ=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function FZ(n,e){let t=n.touches,i=t&&t.length?t[0]:n,{offsetX:r,offsetY:o}=i,s=!1,a,c;if(OZ(r,o,n.target))a=r,c=o;else{let l=e.getBoundingClientRect();a=i.clientX-l.left,c=i.clientY-l.top,s=!0}return{x:a,y:c,box:s}}function ma(n,e){if("native"in n)return n;let{canvas:t,currentDevicePixelRatio:i}=e,r=l_(t),o=r.boxSizing==="border-box",s=Rc(r,"padding"),a=Rc(r,"border","width"),{x:c,y:l,box:u}=FZ(n,t),h=s.left+(u&&a.left),f=s.top+(u&&a.top),{width:y,height:b}=e;return o&&(y-=s.width+a.width,b-=s.height+a.height),{x:Math.round((c-h)/y*t.width/i),y:Math.round((l-f)/b*t.height/i)}}function LZ(n,e,t){let i,r;if(e===void 0||t===void 0){let o=n&&c_(n);if(!o)e=n.clientWidth,t=n.clientHeight;else{let s=o.getBoundingClientRect(),a=l_(o),c=Rc(a,"border","width"),l=Rc(a,"padding");e=s.width-l.width-c.width,t=s.height-l.height-c.height,i=Zv(a.maxWidth,o,"clientWidth"),r=Zv(a.maxHeight,o,"clientHeight")}}return{width:e,height:t,maxWidth:i||Qv,maxHeight:r||Qv}}var ua=n=>Math.round(n*10)/10;function RV(n,e,t,i){let r=l_(n),o=Rc(r,"margin"),s=Zv(r.maxWidth,n,"clientWidth")||Qv,a=Zv(r.maxHeight,n,"clientHeight")||Qv,c=LZ(n,e,t),{width:l,height:u}=c;if(r.boxSizing==="content-box"){let f=Rc(r,"border","width"),y=Rc(r,"padding");l-=y.width+f.width,u-=y.height+f.height}return l=Math.max(0,l-o.width),u=Math.max(0,i?l/i:u-o.height),l=ua(Math.min(l,s,c.maxWidth)),u=ua(Math.min(u,a,c.maxHeight)),l&&!u&&(u=ua(l/2)),(e!==void 0||t!==void 0)&&i&&c.height&&u>c.height&&(u=c.height,l=ua(Math.floor(u*i))),{width:l,height:u}}function y1(n,e,t){let i=e||1,r=ua(n.height*i),o=ua(n.width*i);n.height=ua(n.height),n.width=ua(n.width);let s=n.canvas;return s.style&&(t||!s.style.height&&!s.style.width)&&(s.style.height=`${n.height}px`,s.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||s.height!==r||s.width!==o?(n.currentDevicePixelRatio=i,s.height=r,s.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}var kV=(function(){let n=!1;try{let e={get passive(){return n=!0,!1}};a_()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n})();function v1(n,e){let t=kZ(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function la(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function NV(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function OV(n,e,t,i){let r={x:n.cp2x,y:n.cp2y},o={x:e.cp1x,y:e.cp1y},s=la(n,r,t),a=la(r,o,t),c=la(o,e,t),l=la(s,a,t),u=la(a,c,t);return la(l,u,t)}var VZ=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},BZ=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Oc(n,e,t){return n?VZ(e,t):BZ()}function _1(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function b1(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function FV(n){return n==="angle"?{between:Uu,compare:nZ,normalize:Tn}:{between:ao,compare:(e,t)=>e-t,normalize:e=>e}}function sV({start:n,end:e,count:t,loop:i,style:r}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:r}}function jZ(n,e,t){let{property:i,start:r,end:o}=t,{between:s,normalize:a}=FV(i),c=e.length,{start:l,end:u,loop:h}=n,f,y;if(h){for(l+=c,u+=c,f=0,y=c;f<y&&s(a(e[l%c][i]),r,o);++f)l--,u--;l%=c,u%=c}return u<l&&(u+=c),{start:l,end:u,loop:h,style:n.style}}function w1(n,e,t){if(!t)return[n];let{property:i,start:r,end:o}=t,s=e.length,{compare:a,between:c,normalize:l}=FV(i),{start:u,end:h,loop:f,style:y}=jZ(n,e,t),b=[],E=!1,I=null,R,F,B,z=()=>c(r,B,R)&&a(r,B)!==0,$=()=>a(o,R)===0||c(o,B,R),U=()=>E||z(),x=()=>!E||$();for(let T=u,D=u;T<=h;++T)F=e[T%s],!F.skip&&(R=l(F[i]),R!==B&&(E=c(R,r,o),I===null&&U()&&(I=a(R,r)===0?T:D),I!==null&&x()&&(b.push(sV({start:I,end:T,loop:f,count:s,style:y})),I=null),D=T,B=R));return I!==null&&b.push(sV({start:I,end:h,loop:f,count:s,style:y})),b}function E1(n,e){let t=[],i=n.segments;for(let r=0;r<i.length;r++){let o=w1(i[r],n.points,e);o.length&&t.push(...o)}return t}function UZ(n,e,t,i){let r=0,o=e-1;if(t&&!i)for(;r<e&&!n[r].skip;)r++;for(;r<e&&n[r].skip;)r++;for(r%=e,t&&(o+=r);o>r&&n[o%e].skip;)o--;return o%=e,{start:r,end:o}}function $Z(n,e,t,i){let r=n.length,o=[],s=e,a=n[e],c;for(c=e+1;c<=t;++c){let l=n[c%r];l.skip||l.stop?a.skip||(i=!1,o.push({start:e%r,end:(c-1)%r,loop:i}),e=s=l.stop?c:null):(s=c,a.skip&&(e=c)),a=l}return s!==null&&o.push({start:e%r,end:s%r,loop:i}),o}function LV(n,e){let t=n.points,i=n.options.spanGaps,r=t.length;if(!r)return[];let o=!!n._loop,{start:s,end:a}=UZ(t,r,o,i);if(i===!0)return aV(n,[{start:s,end:a,loop:o}],t,e);let c=a<s?a+r:a,l=!!n._fullLoop&&s===0&&a===r-1;return aV(n,$Z(t,s,c,l),t,e)}function aV(n,e,t,i){return!i||!i.setContext||!t?e:HZ(n,e,t,i)}function HZ(n,e,t,i){let r=n._chart.getContext(),o=cV(n.options),{_datasetIndex:s,options:{spanGaps:a}}=n,c=t.length,l=[],u=o,h=e[0].start,f=h;function y(b,E,I,R){let F=a?-1:1;if(b!==E){for(b+=c;t[b%c].skip;)b-=F;for(;t[E%c].skip;)E+=F;b%c!==E%c&&(l.push({start:b%c,end:E%c,loop:I,style:R}),u=R,h=E%c)}}for(let b of e){h=a?h:b.start;let E=t[h%c],I;for(f=h+1;f<=b.end;f++){let R=t[f%c];I=cV(i.setContext(es(r,{type:"segment",p0:E,p1:R,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:s}))),zZ(I,u)&&y(h,f-1,b.loop,u),E=R,u=I}h<f-1&&y(h,f-1,b.loop,u)}return l}function cV(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function zZ(n,e){if(!e)return!1;let t=[],i=function(r,o){return c1(o)?(t.includes(o)||t.push(o),t.indexOf(o)):o};return JSON.stringify(n,i)!==JSON.stringify(e,i)}function Kv(n,e,t){return n.options.clip?n[t]:e[t]}function qZ(n,e){let{xScale:t,yScale:i}=n;return t&&i?{left:Kv(t,e,"left"),right:Kv(t,e,"right"),top:Kv(i,e,"top"),bottom:Kv(i,e,"bottom")}:e}function I1(n,e){let t=e._clip;if(t.disabled)return!1;let i=qZ(e,n.chartArea);return{left:t.left===!1?0:i.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:i.right+(t.right===!0?0:t.right),top:t.top===!1?0:i.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:i.bottom+(t.bottom===!0?0:t.bottom)}}var O1=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,r){let o=t.listeners[r],s=t.duration;o.forEach(a=>a({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(i-t.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=r1.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;let o=i.items,s=o.length-1,a=!1,c;for(;s>=0;--s)c=o[s],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(e),a=!0):(o[s]=o[o.length-1],o.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),o.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),t+=o.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){let t=this._charts,i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let i=t.items,r=i.length-1;for(;r>=0;--r)i[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},ts=new O1,VV="transparent",WZ={boolean(n,e,t){return t>.5?e:n},color(n,e,t){let i=l1(n||VV),r=i.valid&&l1(e||VV);return r&&r.valid?r.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}},F1=class{constructor(e,t,i,r){let o=t[i];r=zu([e.to,r,o,e.from]);let s=zu([e.from,o,r]);this._active=!0,this._fn=e.fn||WZ[e.type||typeof s],this._easing=Ou[e.easing]||Ou.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=s,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);let r=this._target[this._prop],o=i-this._start,s=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=zu([e.to,t,r,e.from]),this._from=zu([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t=e-this._start,i=this._duration,r=this._prop,o=this._from,s=this._loop,a=this._to,c;if(this._active=o!==a&&(s||t<i),!this._active){this._target[r]=a,this._notify(!0);return}if(t<0){this._target[r]=o;return}c=t/i%2,c=s&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(o,a,c)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){let t=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][t]()}},v_=class{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Oe(e))return;let t=Object.keys(St.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{let o=e[r];if(!Oe(o))return;let s={};for(let a of t)s[a]=o[a];(bt(o.properties)&&o.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,s)})})}_animateOptions(e,t){let i=t.options,r=KZ(e,i);if(!r)return[];let o=this._createAnimations(r,i);return i.$shared&&GZ(e.options.$animations,i).then(()=>{e.options=i},()=>{}),o}_createAnimations(e,t){let i=this._properties,r=[],o=e.$animations||(e.$animations={}),s=Object.keys(t),a=Date.now(),c;for(c=s.length-1;c>=0;--c){let l=s[c];if(l.charAt(0)==="$")continue;if(l==="options"){r.push(...this._animateOptions(e,t));continue}let u=t[l],h=o[l],f=i.get(l);if(h)if(f&&h.active()){h.update(f,u,a);continue}else h.cancel();if(!f||!f.duration){e[l]=u;continue}o[l]=h=new F1(f,e,l,u),r.push(h)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}let i=this._createAnimations(e,t);if(i.length)return ts.add(this._chart,i),!0}};function GZ(n,e){let t=[],i=Object.keys(e);for(let r=0;r<i.length;r++){let o=n[i[r]];o&&o.active()&&t.push(o.wait())}return Promise.all(t)}function KZ(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function BV(n,e){let t=n&&n.options||{},i=t.reverse,r=t.min===void 0?e:0,o=t.max===void 0?e:0;return{start:i?o:r,end:i?r:o}}function YZ(n,e,t){if(t===!1)return!1;let i=BV(n,t),r=BV(e,t);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function QZ(n){let e,t,i,r;return Oe(n)?(e=n.top,t=n.right,i=n.bottom,r=n.left):e=t=i=r=n,{top:e,right:t,bottom:i,left:r,disabled:n===!1}}function VB(n,e){let t=[],i=n._getSortedDatasetMetas(e),r,o;for(r=0,o=i.length;r<o;++r)t.push(i[r].index);return t}function jV(n,e,t,i={}){let r=n.keys,o=i.mode==="single",s,a,c,l;if(e===null)return;let u=!1;for(s=0,a=r.length;s<a;++s){if(c=+r[s],c===t){if(u=!0,i.all)continue;break}l=n.values[c],Rt(l)&&(o||e===0||wr(e)===wr(l))&&(e+=l)}return!u&&!i.all?0:e}function XZ(n,e){let{iScale:t,vScale:i}=e,r=t.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",s=Object.keys(n),a=new Array(s.length),c,l,u;for(c=0,l=s.length;c<l;++c)u=s[c],a[c]={[r]:u,[o]:n[u]};return a}function C1(n,e){let t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function ZZ(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function JZ(n){let{min:e,max:t,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function eJ(n,e,t){let i=n[e]||(n[e]={});return i[t]||(i[t]={})}function UV(n,e,t,i){for(let r of e.getMatchingVisibleMetas(i).reverse()){let o=n[r.index];if(t&&o>0||!t&&o<0)return r.index}return null}function $V(n,e){let{chart:t,_cachedMeta:i}=n,r=t._stacks||(t._stacks={}),{iScale:o,vScale:s,index:a}=i,c=o.axis,l=s.axis,u=ZZ(o,s,i),h=e.length,f;for(let y=0;y<h;++y){let b=e[y],{[c]:E,[l]:I}=b,R=b._stacks||(b._stacks={});f=R[l]=eJ(r,u,E),f[a]=I,f._top=UV(f,s,!0,i.type),f._bottom=UV(f,s,!1,i.type);let F=f._visualValues||(f._visualValues={});F[a]=I}}function S1(n,e){let t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function tJ(n,e){return es(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function nJ(n,e,t){return es(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Ef(n,e){let t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(let r of e){let o=r._stacks;if(!o||o[i]===void 0||o[i][t]===void 0)return;delete o[i][t],o[i]._visualValues!==void 0&&o[i]._visualValues[t]!==void 0&&delete o[i]._visualValues[t]}}}var T1=n=>n==="reset"||n==="none",HV=(n,e)=>e?n:Object.assign({},n),iJ=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:VB(t,!0),values:null},ya=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=C1(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Ef(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,i=this._cachedMeta,r=this.getDataset(),o=(f,y,b,E)=>f==="x"?y:f==="r"?E:b,s=i.xAxisID=Te(r.xAxisID,S1(t,"x")),a=i.yAxisID=Te(r.yAxisID,S1(t,"y")),c=i.rAxisID=Te(r.rAxisID,S1(t,"r")),l=i.indexAxis,u=i.iAxisID=o(l,s,a,c),h=i.vAxisID=o(l,a,s,c);i.xScale=this.getScaleForId(s),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(c),i.iScale=this.getScaleForId(u),i.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&n1(this._data,this),t._stacked&&Ef(t)}_dataCheck(){let t=this.getDataset(),i=t.data||(t.data=[]),r=this._data;if(Oe(i)){let o=this._cachedMeta;this._data=XZ(i,o)}else if(r!==i){if(r){n1(r,this);let o=this._cachedMeta;Ef(o),o._parsed=[]}i&&Object.isExtensible(i)&&_V(i,this),this._syncList=[],this._data=i}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let i=this._cachedMeta,r=this.getDataset(),o=!1;this._dataCheck();let s=i._stacked;i._stacked=C1(i.vScale,i),i.stack!==r.stack&&(o=!0,Ef(i),i.stack=r.stack),this._resyncElements(t),(o||s!==i._stacked)&&($V(this,i._parsed),i._stacked=C1(i.vScale,i))}configure(){let t=this.chart.config,i=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){let{_cachedMeta:r,_data:o}=this,{iScale:s,_stacked:a}=r,c=s.axis,l=t===0&&i===o.length?!0:r._sorted,u=t>0&&r._parsed[t-1],h,f,y;if(this._parsing===!1)r._parsed=o,r._sorted=!0,y=o;else{bt(o[t])?y=this.parseArrayData(r,o,t,i):Oe(o[t])?y=this.parseObjectData(r,o,t,i):y=this.parsePrimitiveData(r,o,t,i);let b=()=>f[c]===null||u&&f[c]<u[c];for(h=0;h<i;++h)r._parsed[h+t]=f=y[h],l&&(b()&&(l=!1),u=f);r._sorted=l}a&&$V(this,y)}parsePrimitiveData(t,i,r,o){let{iScale:s,vScale:a}=t,c=s.axis,l=a.axis,u=s.getLabels(),h=s===a,f=new Array(o),y,b,E;for(y=0,b=o;y<b;++y)E=y+r,f[y]={[c]:h||s.parse(u[E],E),[l]:a.parse(i[E],E)};return f}parseArrayData(t,i,r,o){let{xScale:s,yScale:a}=t,c=new Array(o),l,u,h,f;for(l=0,u=o;l<u;++l)h=l+r,f=i[h],c[l]={x:s.parse(f[0],h),y:a.parse(f[1],h)};return c}parseObjectData(t,i,r,o){let{xScale:s,yScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=new Array(o),h,f,y,b;for(h=0,f=o;h<f;++h)y=h+r,b=i[y],u[h]={x:s.parse(Jo(b,c),y),y:a.parse(Jo(b,l),y)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,r){let o=this.chart,s=this._cachedMeta,a=i[t.axis],c={keys:VB(o,!0),values:i._stacks[t.axis]._visualValues};return jV(c,a,s.index,{mode:r})}updateRangeFromParsed(t,i,r,o){let s=r[i.axis],a=s===null?NaN:s,c=o&&r._stacks[i.axis];o&&c&&(o.values=c,a=jV(o,s,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,i){let r=this._cachedMeta,o=r._parsed,s=r._sorted&&t===r.iScale,a=o.length,c=this._getOtherScale(t),l=iJ(i,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:f}=JZ(c),y,b;function E(){b=o[y];let I=b[c.axis];return!Rt(b[t.axis])||h>I||f<I}for(y=0;y<a&&!(!E()&&(this.updateRangeFromParsed(u,t,b,l),s));++y);if(s){for(y=a-1;y>=0;--y)if(!E()){this.updateRangeFromParsed(u,t,b,l);break}}return u}getAllParsedValues(t){let i=this._cachedMeta._parsed,r=[],o,s,a;for(o=0,s=i.length;o<s;++o)a=i[o][t.axis],Rt(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(t){let i=this._cachedMeta,r=i.iScale,o=i.vScale,s=this.getParsed(t);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:o?""+o.getLabelForValue(s[o.axis]):""}}_update(t){let i=this._cachedMeta;this.update(t||"default"),i._clip=QZ(Te(this.options.clip,YZ(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,i=this.chart,r=this._cachedMeta,o=r.data||[],s=i.chartArea,a=[],c=this._drawStart||0,l=this._drawCount||o.length-c,u=this.options.drawActiveElementsOnTop,h;for(r.dataset&&r.dataset.draw(t,s,c,l),h=c;h<c+l;++h){let f=o[h];f.hidden||(f.active&&u?a.push(f):f.draw(t,s))}for(h=0;h<a.length;++h)a[h].draw(t,s)}getStyle(t,i){let r=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,i,r){let o=this.getDataset(),s;if(t>=0&&t<this._cachedMeta.data.length){let a=this._cachedMeta.data[t];s=a.$context||(a.$context=nJ(this.getContext(),t,a)),s.parsed=this.getParsed(t),s.raw=o.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=tJ(this.chart.getContext(),this.index)),s.dataset=o,s.index=s.datasetIndex=this.index;return s.active=!!i,s.mode=r,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",r){let o=i==="active",s=this._cachedDataOpts,a=t+"-"+i,c=s[a],l=this.enableOptionSharing&&Bu(r);if(c)return HV(c,l);let u=this.chart.config,h=u.datasetElementScopeKeys(this._type,t),f=o?[`${t}Hover`,"hover",t,""]:[t,""],y=u.getOptionScopes(this.getDataset(),h),b=Object.keys(St.elements[t]),E=()=>this.getContext(r,o,i),I=u.resolveNamedOptions(y,b,E,f);return I.$shared&&(I.$shared=l,s[a]=Object.freeze(HV(I,l))),I}_resolveAnimations(t,i,r){let o=this.chart,s=this._cachedDataOpts,a=`animation-${i}`,c=s[a];if(c)return c;let l;if(o.options.animation!==!1){let h=this.chart.config,f=h.datasetAnimationScopeKeys(this._type,i),y=h.getOptionScopes(this.getDataset(),f);l=h.createResolver(y,this.getContext(t,r,i))}let u=new v_(o,l&&l.animations);return l&&l._cacheable&&(s[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||T1(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){let r=this.resolveDataElementOptions(t,i),o=this._sharedOptions,s=this.getSharedOptions(r),a=this.includeOptions(i,s)||s!==o;return this.updateSharedOptions(s,i,r),{sharedOptions:s,includeOptions:a}}updateElement(t,i,r,o){T1(o)?Object.assign(t,r):this._resolveAnimations(i,o).update(t,r)}updateSharedOptions(t,i,r){t&&!T1(i)&&this._resolveAnimations(void 0,i).update(t,r)}_setStyle(t,i,r,o){t.active=o;let s=this.getStyle(i,o);this._resolveAnimations(i,r,o).update(t,{options:!o&&this.getSharedOptions(s)||s})}removeHoverStyle(t,i,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,i,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let i=this._data,r=this._cachedMeta.data;for(let[c,l,u]of this._syncList)this[c](l,u);this._syncList=[];let o=r.length,s=i.length,a=Math.min(s,o);a&&this.parse(0,a),s>o?this._insertElements(o,s-o,t):s<o&&this._removeElements(s,o-s)}_insertElements(t,i,r=!0){let o=this._cachedMeta,s=o.data,a=t+i,c,l=u=>{for(u.length+=i,c=u.length-1;c>=a;c--)u[c]=u[c-i]};for(l(s),c=t;c<a;++c)s[c]=new this.dataElementType;this._parsing&&l(o._parsed),this.parse(t,i),r&&this.updateElements(s,t,i,"reset")}updateElements(t,i,r,o){}_removeElements(t,i){let r=this._cachedMeta;if(this._parsing){let o=r._parsed.splice(t,i);r._stacked&&Ef(r,o)}r.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[i,r,o]=t;this[i](r,o)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);let r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function rJ(n,e){if(!n._cache.$bar){let t=n.getMatchingVisibleMetas(e),i=[];for(let r=0,o=t.length;r<o;r++)i=i.concat(t[r].controller.getAllParsedValues(n));n._cache.$bar=i1(i.sort((r,o)=>r-o))}return n._cache.$bar}function oJ(n){let e=n.iScale,t=rJ(e,n.type),i=e._length,r,o,s,a,c=()=>{s===32767||s===-32768||(Bu(a)&&(i=Math.min(i,Math.abs(s-a)||i)),a=s)};for(r=0,o=t.length;r<o;++r)s=e.getPixelForValue(t[r]),c();for(a=void 0,r=0,o=e.ticks.length;r<o;++r)s=e.getPixelForTick(r),c();return i}function sJ(n,e,t,i){let r=t.barThickness,o,s;return Ne(r)?(o=e.min*t.categoryPercentage,s=t.barPercentage):(o=r*i,s=1),{chunk:o/i,ratio:s,start:e.pixels[n]-o/2}}function aJ(n,e,t,i){let r=e.pixels,o=r[n],s=n>0?r[n-1]:null,a=n<r.length-1?r[n+1]:null,c=t.categoryPercentage;s===null&&(s=o-(a===null?e.end-e.start:a-o)),a===null&&(a=o+o-s);let l=o-(o-Math.min(s,a))/2*c;return{chunk:Math.abs(a-s)/2*c/i,ratio:t.barPercentage,start:l}}function cJ(n,e,t,i){let r=t.parse(n[0],i),o=t.parse(n[1],i),s=Math.min(r,o),a=Math.max(r,o),c=s,l=a;Math.abs(s)>Math.abs(a)&&(c=a,l=s),e[t.axis]=l,e._custom={barStart:c,barEnd:l,start:r,end:o,min:s,max:a}}function BB(n,e,t,i){return bt(n)?cJ(n,e,t,i):e[t.axis]=t.parse(n,i),e}function zV(n,e,t,i){let r=n.iScale,o=n.vScale,s=r.getLabels(),a=r===o,c=[],l,u,h,f;for(l=t,u=t+i;l<u;++l)f=e[l],h={},h[r.axis]=a||r.parse(s[l],l),c.push(BB(f,h,o,l));return c}function D1(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function lJ(n,e,t){return n!==0?wr(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function uJ(n){let e,t,i,r,o;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(r="end",o="start"):(r="start",o="end"),{start:t,end:i,reverse:e,top:r,bottom:o}}function dJ(n,e,t,i){let r=e.borderSkipped,o={};if(!r){n.borderSkipped=o;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:s,end:a,reverse:c,top:l,bottom:u}=uJ(n);r==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?r=l:(t._bottom||0)===i?r=u:(o[qV(u,s,a,c)]=!0,r=l)),o[qV(r,s,a,c)]=!0,n.borderSkipped=o}function qV(n,e,t,i){return i?(n=hJ(n,e,t),n=WV(n,t,e)):n=WV(n,e,t),n}function hJ(n,e,t){return n===e?t:n===t?e:n}function WV(n,e,t){return n==="start"?e:n==="end"?t:n}function fJ(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}var pJ=(()=>{class n extends ya{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,i,r,o){return zV(t,i,r,o)}parseArrayData(t,i,r,o){return zV(t,i,r,o)}parseObjectData(t,i,r,o){let{iScale:s,vScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=s.axis==="x"?c:l,h=a.axis==="x"?c:l,f=[],y,b,E,I;for(y=r,b=r+o;y<b;++y)I=i[y],E={},E[s.axis]=s.parse(Jo(I,u),y),f.push(BB(Jo(I,h),E,a,y));return f}updateRangeFromParsed(t,i,r,o){super.updateRangeFromParsed(t,i,r,o);let s=r._custom;s&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let i=this._cachedMeta,{iScale:r,vScale:o}=i,s=this.getParsed(t),a=s._custom,c=D1(a)?"["+a.start+", "+a.end+"]":""+o.getLabelForValue(s[o.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,r,o){let s=o==="reset",{index:a,_cachedMeta:{vScale:c}}=this,l=c.getBasePixel(),u=c.isHorizontal(),h=this._getRuler(),{sharedOptions:f,includeOptions:y}=this._getSharedOptions(i,o);for(let b=i;b<i+r;b++){let E=this.getParsed(b),I=s||Ne(E[c.axis])?{base:l,head:l}:this._calculateBarValuePixels(b),R=this._calculateBarIndexPixels(b,h),F=(E._stacks||{})[c.axis],B={horizontal:u,base:I.base,enableBorderRadius:!F||D1(E._custom)||a===F._top||a===F._bottom,x:u?I.head:R.center,y:u?R.center:I.head,height:u?R.size:Math.abs(I.size),width:u?Math.abs(I.size):R.size};y&&(B.options=f||this.resolveDataElementOptions(b,t[b].active?"active":o));let z=B.options||t[b].options;dJ(B,z,F,a),fJ(B,z,h.ratio),this.updateElement(t[b],b,B,o)}}_getStacks(t,i){let{iScale:r}=this._cachedMeta,o=r.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),s=r.options.stacked,a=[],c=this._cachedMeta.controller.getParsed(i),l=c&&c[r.axis],u=h=>{let f=h._parsed.find(b=>b[r.axis]===l),y=f&&f[h.vScale.axis];if(Ne(y)||isNaN(y))return!0};for(let h of o)if(!(i!==void 0&&u(h))&&((s===!1||a.indexOf(h.stack)===-1||s===void 0&&h.stack===void 0)&&a.push(h.stack),h.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let t=this.chart.scales,i=this.chart.options.indexAxis;return Object.keys(t).filter(r=>t[r].axis===i).shift()}_getAxis(){let t={},i=this.getFirstScaleIdForIndexAxis();for(let r of this.chart.data.datasets)t[Te(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,i)]=!0;return Object.keys(t)}_getStackIndex(t,i,r){let o=this._getStacks(t,r),s=i!==void 0?o.indexOf(i):-1;return s===-1?o.length-1:s}_getRuler(){let t=this.options,i=this._cachedMeta,r=i.iScale,o=[],s,a;for(s=0,a=i.data.length;s<a;++s)o.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));let c=t.barThickness;return{min:c||oJ(i),pixels:o,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:i,_stacked:r,index:o},options:{base:s,minBarLength:a}}=this,c=s||0,l=this.getParsed(t),u=l._custom,h=D1(u),f=l[i.axis],y=0,b=r?this.applyStack(i,l,r):f,E,I;b!==f&&(y=b-f,b=f),h&&(f=u.barStart,b=u.barEnd-u.barStart,f!==0&&wr(f)!==wr(u.barEnd)&&(y=0),y+=f);let R=!Ne(s)&&!h?s:y,F=i.getPixelForValue(R);if(this.chart.getDataVisibility(t)?E=i.getPixelForValue(y+b):E=F,I=E-F,Math.abs(I)<a){I=lJ(I,i,c)*a,f===c&&(F-=I/2);let B=i.getPixelForDecimal(0),z=i.getPixelForDecimal(1),$=Math.min(B,z),U=Math.max(B,z);F=Math.max(Math.min(F,U),$),E=F+I,r&&!h&&(l._stacks[i.axis]._visualValues[o]=i.getValueForPixel(E)-i.getValueForPixel(F))}if(F===i.getPixelForValue(c)){let B=wr(I)*i.getLineWidthForValue(c)/2;F+=B,I-=B}return{size:I,base:F,head:E,center:E+I/2}}_calculateBarIndexPixels(t,i){let r=i.scale,o=this.options,s=o.skipNull,a=Te(o.maxBarThickness,1/0),c,l,u=this._getAxisCount();if(i.grouped){let h=s?this._getStackCount(t):i.stackCount,f=o.barThickness==="flex"?aJ(t,i,o,h*u):sJ(t,i,o,h*u),y=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,b=this._getAxis().indexOf(Te(y,this.getFirstScaleIdForIndexAxis())),E=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0)+b;c=f.start+f.chunk*E+f.chunk/2,l=Math.min(a,f.chunk*f.ratio)}else c=r.getPixelForValue(this.getParsed(t)[r.axis],t),l=Math.min(a,i.min*i.ratio);return{base:c-l/2,head:c+l/2,center:c,size:l}}draw(){let t=this._cachedMeta,i=t.vScale,r=t.data,o=r.length,s=0;for(;s<o;++s)this.getParsed(s)[i.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}return n})(),mJ=(()=>{class n extends ya{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,i,r,o){let s=super.parsePrimitiveData(t,i,r,o);for(let a=0;a<s.length;a++)s[a]._custom=this.resolveDataElementOptions(a+r).radius;return s}parseArrayData(t,i,r,o){let s=super.parseArrayData(t,i,r,o);for(let a=0;a<s.length;a++){let c=i[r+a];s[a]._custom=Te(c[2],this.resolveDataElementOptions(a+r).radius)}return s}parseObjectData(t,i,r,o){let s=super.parseObjectData(t,i,r,o);for(let a=0;a<s.length;a++){let c=i[r+a];s[a]._custom=Te(c&&c.r&&+c.r,this.resolveDataElementOptions(a+r).radius)}return s}getMaxOverflow(){let t=this._cachedMeta.data,i=0;for(let r=t.length-1;r>=0;--r)i=Math.max(i,t[r].size(this.resolveDataElementOptions(r))/2);return i>0&&i}getLabelAndValue(t){let i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:o,yScale:s}=i,a=this.getParsed(t),c=o.getLabelForValue(a.x),l=s.getLabelForValue(a.y),u=a._custom;return{label:r[t]||"",value:"("+c+", "+l+(u?", "+u:"")+")"}}update(t){let i=this._cachedMeta.data;this.updateElements(i,0,i.length,t)}updateElements(t,i,r,o){let s=o==="reset",{iScale:a,vScale:c}=this._cachedMeta,{sharedOptions:l,includeOptions:u}=this._getSharedOptions(i,o),h=a.axis,f=c.axis;for(let y=i;y<i+r;y++){let b=t[y],E=!s&&this.getParsed(y),I={},R=I[h]=s?a.getPixelForDecimal(.5):a.getPixelForValue(E[h]),F=I[f]=s?c.getBasePixel():c.getPixelForValue(E[f]);I.skip=isNaN(R)||isNaN(F),u&&(I.options=l||this.resolveDataElementOptions(y,b.active?"active":o),s&&(I.options.radius=0)),this.updateElement(b,y,I,o)}}resolveDataElementOptions(t,i){let r=this.getParsed(t),o=super.resolveDataElementOptions(t,i);o.$shared&&(o=Object.assign({},o,{$shared:!1}));let s=o.radius;return i!=="active"&&(o.radius=0),o.radius+=Te(r&&r._custom,s),o}}return n})();function gJ(n,e,t){let i=1,r=1,o=0,s=0;if(e<wt){let a=n,c=a+e,l=Math.cos(a),u=Math.sin(a),h=Math.cos(c),f=Math.sin(c),y=(B,z,$)=>Uu(B,a,c,!0)?1:Math.max(z,z*t,$,$*t),b=(B,z,$)=>Uu(B,a,c,!0)?-1:Math.min(z,z*t,$,$*t),E=y(0,l,h),I=y(jt,u,f),R=b(We,l,h),F=b(We+jt,u,f);i=(E-R)/2,r=(I-F)/2,o=-(E+R)/2,s=-(I+F)/2}return{ratioX:i,ratioY:r,offsetX:o,offsetY:s}}var nD=(()=>{class n extends ya{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let i=t.data,{labels:{pointStyle:r,textAlign:o,color:s,useBorderRadius:a,borderRadius:c}}=t.legend.options;return i.labels.length&&i.datasets.length?i.labels.map((l,u)=>{let f=t.getDatasetMeta(0).controller.getStyle(u);return{text:l,fillStyle:f.backgroundColor,fontColor:s,hidden:!t.getDataVisibility(u),lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:f.borderWidth,strokeStyle:f.borderColor,textAlign:o,pointStyle:r,borderRadius:a&&(c||f.borderRadius),index:u}}):[]}},onClick(t,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}}};constructor(t,i){super(t,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,i){let r=this.getDataset().data,o=this._cachedMeta;if(this._parsing===!1)o._parsed=r;else{let s=l=>+r[l];if(Oe(r[t])){let{key:l="value"}=this._parsing;s=u=>+Jo(r[u],l)}let a,c;for(a=t,c=t+i;a<c;++a)o._parsed[a]=s(a)}}_getRotation(){return tr(this.options.rotation-90)}_getCircumference(){return tr(this.options.circumference)}_getRotationExtents(){let t=wt,i=-wt;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){let o=this.chart.getDatasetMeta(r).controller,s=o._getRotation(),a=o._getCircumference();t=Math.min(t,s),i=Math.max(i,s+a)}return{rotation:t,circumference:i-t}}update(t){let i=this.chart,{chartArea:r}=i,o=this._cachedMeta,s=o.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,c=Math.max((Math.min(r.width,r.height)-a)/2,0),l=Math.min(uV(this.options.cutout,c),1),u=this._getRingWeight(this.index),{circumference:h,rotation:f}=this._getRotationExtents(),{ratioX:y,ratioY:b,offsetX:E,offsetY:I}=gJ(f,h,l),R=(r.width-a)/y,F=(r.height-a)/b,B=Math.max(Math.min(R,F)/2,0),z=QT(this.options.radius,B),$=Math.max(z*l,0),U=(z-$)/this._getVisibleDatasetWeightTotal();this.offsetX=E*z,this.offsetY=I*z,o.total=this.calculateTotal(),this.outerRadius=z-U*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-U*u,0),this.updateElements(s,0,s.length,t)}_circumference(t,i){let r=this.options,o=this._cachedMeta,s=this._getCircumference();return i&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||o._parsed[t]===null||o.data[t].hidden?0:this.calculateCircumference(o._parsed[t]*s/wt)}updateElements(t,i,r,o){let s=o==="reset",a=this.chart,c=a.chartArea,u=a.options.animation,h=(c.left+c.right)/2,f=(c.top+c.bottom)/2,y=s&&u.animateScale,b=y?0:this.innerRadius,E=y?0:this.outerRadius,{sharedOptions:I,includeOptions:R}=this._getSharedOptions(i,o),F=this._getRotation(),B;for(B=0;B<i;++B)F+=this._circumference(B,s);for(B=i;B<i+r;++B){let z=this._circumference(B,s),$=t[B],U={x:h+this.offsetX,y:f+this.offsetY,startAngle:F,endAngle:F+z,circumference:z,outerRadius:E,innerRadius:b};R&&(U.options=I||this.resolveDataElementOptions(B,$.active?"active":o)),F+=z,this.updateElement($,B,U,o)}}calculateTotal(){let t=this._cachedMeta,i=t.data,r=0,o;for(o=0;o<i.length;o++){let s=t._parsed[o];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(o)&&!i[o].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(t){let i=this._cachedMeta.total;return i>0&&!isNaN(t)?wt*(Math.abs(t)/i):0}getLabelAndValue(t){let i=this._cachedMeta,r=this.chart,o=r.data.labels||[],s=$u(i._parsed[t],r.options.locale);return{label:o[t]||"",value:s}}getMaxBorderWidth(t){let i=0,r=this.chart,o,s,a,c,l;if(!t){for(o=0,s=r.data.datasets.length;o<s;++o)if(r.isDatasetVisible(o)){a=r.getDatasetMeta(o),t=a.data,c=a.controller;break}}if(!t)return 0;for(o=0,s=t.length;o<s;++o)l=c.resolveDataElementOptions(o),l.borderAlign!=="inner"&&(i=Math.max(i,l.borderWidth||0,l.hoverBorderWidth||0));return i}getMaxOffset(t){let i=0;for(let r=0,o=t.length;r<o;++r){let s=this.resolveDataElementOptions(r);i=Math.max(i,s.offset||0,s.hoverOffset||0)}return i}_getRingWeightOffset(t){let i=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(i+=this._getRingWeight(r));return i}_getRingWeight(t){return Math.max(Te(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n})(),yJ=(()=>{class n extends ya{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let i=this._cachedMeta,{dataset:r,data:o=[],_dataset:s}=i,a=this.chart._animationsDisabled,{start:c,count:l}=s1(i,o,a);this._drawStart=c,this._drawCount=l,a1(i)&&(c=0,l=o.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=o;let u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:u},t),this.updateElements(o,c,l,t)}updateElements(t,i,r,o){let s=o==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:h,includeOptions:f}=this._getSharedOptions(i,o),y=a.axis,b=c.axis,{spanGaps:E,segment:I}=this.options,R=Nc(E)?E:Number.POSITIVE_INFINITY,F=this.chart._animationsDisabled||s||o==="none",B=i+r,z=t.length,$=i>0&&this.getParsed(i-1);for(let U=0;U<z;++U){let x=t[U],T=F?x:{};if(U<i||U>=B){T.skip=!0;continue}let D=this.getParsed(U),P=Ne(D[b]),N=T[y]=a.getPixelForValue(D[y],U),O=T[b]=s||P?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,D,l):D[b],U);T.skip=isNaN(N)||isNaN(O)||P,T.stop=U>0&&Math.abs(D[y]-$[y])>R,I&&(T.parsed=D,T.raw=u.data[U]),f&&(T.options=h||this.resolveDataElementOptions(U,x.active?"active":o)),F||this.updateElement(x,U,T,o),$=D}}getMaxOverflow(){let t=this._cachedMeta,i=t.dataset,r=i.options&&i.options.borderWidth||0,o=t.data||[];if(!o.length)return r;let s=o[0].size(this.resolveDataElementOptions(0)),a=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(r,s,a)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return n})(),jB=(()=>{class n extends ya{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let i=t.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:r,color:o}}=t.legend.options;return i.labels.map((s,a)=>{let l=t.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:o,lineWidth:l.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,i){super(t,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let i=this._cachedMeta,r=this.chart,o=r.data.labels||[],s=$u(i._parsed[t].r,r.options.locale);return{label:o[t]||"",value:s}}parseObjectData(t,i,r,o){return g1.bind(this)(t,i,r,o)}update(t){let i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,t)}getMinMax(){let t=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((r,o)=>{let s=this.getParsed(o).r;!isNaN(s)&&this.chart.getDataVisibility(o)&&(s<i.min&&(i.min=s),s>i.max&&(i.max=s))}),i}_updateRadius(){let t=this.chart,i=t.chartArea,r=t.options,o=Math.min(i.right-i.left,i.bottom-i.top),s=Math.max(o/2,0),a=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),c=(s-a)/t.getVisibleDatasetCount();this.outerRadius=s-c*this.index,this.innerRadius=this.outerRadius-c}updateElements(t,i,r,o){let s=o==="reset",a=this.chart,l=a.options.animation,u=this._cachedMeta.rScale,h=u.xCenter,f=u.yCenter,y=u.getIndexAngle(0)-.5*We,b=y,E,I=360/this.countVisibleElements();for(E=0;E<i;++E)b+=this._computeAngle(E,o,I);for(E=i;E<i+r;E++){let R=t[E],F=b,B=b+this._computeAngle(E,o,I),z=a.getDataVisibility(E)?u.getDistanceFromCenterForValue(this.getParsed(E).r):0;b=B,s&&(l.animateScale&&(z=0),l.animateRotate&&(F=B=y));let $={x:h,y:f,innerRadius:0,outerRadius:z,startAngle:F,endAngle:B,options:this.resolveDataElementOptions(E,R.active?"active":o)};this.updateElement(R,E,$,o)}}countVisibleElements(){let t=this._cachedMeta,i=0;return t.data.forEach((r,o)=>{!isNaN(this.getParsed(o).r)&&this.chart.getDataVisibility(o)&&i++}),i}_computeAngle(t,i,r){return this.chart.getDataVisibility(t)?tr(this.resolveDataElementOptions(t,i).angle||r):0}}return n})(),vJ=(()=>{class n extends nD{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return n})(),_J=(()=>{class n extends ya{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){let i=this._cachedMeta.vScale,r=this.getParsed(t);return{label:i.getLabels()[t],value:""+i.getLabelForValue(r[i.axis])}}parseObjectData(t,i,r,o){return g1.bind(this)(t,i,r,o)}update(t){let i=this._cachedMeta,r=i.dataset,o=i.data||[],s=i.iScale.getLabels();if(r.points=o,t!=="resize"){let a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0);let c={_loop:!0,_fullLoop:s.length===o.length,options:a};this.updateElement(r,void 0,c,t)}this.updateElements(o,0,o.length,t)}updateElements(t,i,r,o){let s=this._cachedMeta.rScale,a=o==="reset";for(let c=i;c<i+r;c++){let l=t[c],u=this.resolveDataElementOptions(c,l.active?"active":o),h=s.getPointPositionForValue(c,this.getParsed(c).r),f=a?s.xCenter:h.x,y=a?s.yCenter:h.y,b={x:f,y,angle:h.angle,skip:isNaN(f)||isNaN(y),options:u};this.updateElement(l,c,b,o)}}}return n})(),bJ=(()=>{class n extends ya{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){let i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:o,yScale:s}=i,a=this.getParsed(t),c=o.getLabelForValue(a.x),l=s.getLabelForValue(a.y);return{label:r[t]||"",value:"("+c+", "+l+")"}}update(t){let i=this._cachedMeta,{data:r=[]}=i,o=this.chart._animationsDisabled,{start:s,count:a}=s1(i,r,o);if(this._drawStart=s,this._drawCount=a,a1(i)&&(s=0,a=r.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:c,_dataset:l}=i;c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!l._decimated,c.points=r;let u=this.resolveDatasetElementOptions(t);u.segment=this.options.segment,this.updateElement(c,void 0,{animated:!o,options:u},t)}else this.datasetElementType&&(delete i.dataset,this.datasetElementType=!1);this.updateElements(r,s,a,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,i,r,o){let s=o==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:u}=this._cachedMeta,h=this.resolveDataElementOptions(i,o),f=this.getSharedOptions(h),y=this.includeOptions(o,f),b=a.axis,E=c.axis,{spanGaps:I,segment:R}=this.options,F=Nc(I)?I:Number.POSITIVE_INFINITY,B=this.chart._animationsDisabled||s||o==="none",z=i>0&&this.getParsed(i-1);for(let $=i;$<i+r;++$){let U=t[$],x=this.getParsed($),T=B?U:{},D=Ne(x[E]),P=T[b]=a.getPixelForValue(x[b],$),N=T[E]=s||D?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,x,l):x[E],$);T.skip=isNaN(P)||isNaN(N)||D,T.stop=$>0&&Math.abs(x[b]-z[b])>F,R&&(T.parsed=x,T.raw=u.data[$]),y&&(T.options=f||this.resolveDataElementOptions($,U.active?"active":o)),B||this.updateElement(U,$,T,o),z=x}this.updateSharedOptions(f,o,h)}getMaxOverflow(){let t=this._cachedMeta,i=t.data||[];if(!this.options.showLine){let c=0;for(let l=i.length-1;l>=0;--l)c=Math.max(c,i[l].size(this.resolveDataElementOptions(l))/2);return c>0&&c}let r=t.dataset,o=r.options&&r.options.borderWidth||0;if(!i.length)return o;let s=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(o,s,a)/2}}return n})(),wJ=Object.freeze({__proto__:null,BarController:pJ,BubbleController:mJ,DoughnutController:nD,LineController:yJ,PieController:vJ,PolarAreaController:jB,RadarController:_J,ScatterController:bJ});function Fc(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var L1=class n{static override(e){Object.assign(n.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Fc()}parse(){return Fc()}format(){return Fc()}add(){return Fc()}diff(){return Fc()}startOf(){return Fc()}endOf(){return Fc()}},EJ={_date:L1};function IJ(n,e,t,i){let{controller:r,data:o,_sorted:s}=n,a=r._cachedMeta.iScale,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&s&&o.length){let l=a._reversePixels?gV:ro;if(i){if(r._sharedOptions){let u=o[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){let f=l(o,e,t-h),y=l(o,e,t+h);return{lo:f.lo,hi:y.hi}}}}else{let u=l(o,e,t);if(c){let{vScale:h}=r._cachedMeta,{_parsed:f}=n,y=f.slice(0,u.lo+1).reverse().findIndex(E=>!Ne(E[h.axis]));u.lo-=Math.max(0,y);let b=f.slice(u.hi).findIndex(E=>!Ne(E[h.axis]));u.hi+=Math.max(0,b)}return u}}return{lo:0,hi:o.length-1}}function Rf(n,e,t,i,r){let o=n.getSortedVisibleDatasetMetas(),s=t[e];for(let a=0,c=o.length;a<c;++a){let{index:l,data:u}=o[a],{lo:h,hi:f}=IJ(o[a],e,s,r);for(let y=h;y<=f;++y){let b=u[y];b.skip||i(b,l,y)}}}function CJ(n){let e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,r){let o=e?Math.abs(i.x-r.x):0,s=t?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(s,2))}}function x1(n,e,t,i,r){let o=[];return!r&&!n.isPointInArea(e)||Rf(n,t,e,function(a,c,l){!r&&!oo(a,n.chartArea,0)||a.inRange(e.x,e.y,i)&&o.push({element:a,datasetIndex:c,index:l})},!0),o}function SJ(n,e,t,i){let r=[];function o(s,a,c){let{startAngle:l,endAngle:u}=s.getProps(["startAngle","endAngle"],i),{angle:h}=t1(s,{x:e.x,y:e.y});Uu(h,l,u)&&r.push({element:s,datasetIndex:a,index:c})}return Rf(n,t,e,o),r}function TJ(n,e,t,i,r,o){let s=[],a=CJ(t),c=Number.POSITIVE_INFINITY;function l(u,h,f){let y=u.inRange(e.x,e.y,r);if(i&&!y)return;let b=u.getCenterPoint(r);if(!(!!o||n.isPointInArea(b))&&!y)return;let I=a(e,b);I<c?(s=[{element:u,datasetIndex:h,index:f}],c=I):I===c&&s.push({element:u,datasetIndex:h,index:f})}return Rf(n,t,e,l),s}function A1(n,e,t,i,r,o){return!o&&!n.isPointInArea(e)?[]:t==="r"&&!i?SJ(n,e,t,r):TJ(n,e,t,i,r,o)}function GV(n,e,t,i,r){let o=[],s=t==="x"?"inXRange":"inYRange",a=!1;return Rf(n,t,e,(c,l,u)=>{c[s]&&c[s](e[t],r)&&(o.push({element:c,datasetIndex:l,index:u}),a=a||c.inRange(e.x,e.y,r))}),i&&!a?[]:o}var DJ={evaluateInteractionItems:Rf,modes:{index(n,e,t,i){let r=ma(e,n),o=t.axis||"x",s=t.includeInvisible||!1,a=t.intersect?x1(n,r,o,i,s):A1(n,r,o,!1,i,s),c=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(l=>{let u=a[0].index,h=l.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:l.index,index:u})}),c):[]},dataset(n,e,t,i){let r=ma(e,n),o=t.axis||"xy",s=t.includeInvisible||!1,a=t.intersect?x1(n,r,o,i,s):A1(n,r,o,!1,i,s);if(a.length>0){let c=a[0].datasetIndex,l=n.getDatasetMeta(c).data;a=[];for(let u=0;u<l.length;++u)a.push({element:l[u],datasetIndex:c,index:u})}return a},point(n,e,t,i){let r=ma(e,n),o=t.axis||"xy",s=t.includeInvisible||!1;return x1(n,r,o,i,s)},nearest(n,e,t,i){let r=ma(e,n),o=t.axis||"xy",s=t.includeInvisible||!1;return A1(n,r,o,t.intersect,i,s)},x(n,e,t,i){let r=ma(e,n);return GV(n,r,"x",t.intersect,i)},y(n,e,t,i){let r=ma(e,n);return GV(n,r,"y",t.intersect,i)}}},UB=["left","top","right","bottom"];function If(n,e){return n.filter(t=>t.pos===e)}function KV(n,e){return n.filter(t=>UB.indexOf(t.pos)===-1&&t.box.axis===e)}function Cf(n,e){return n.sort((t,i)=>{let r=e?i:t,o=e?t:i;return r.weight===o.weight?r.index-o.index:r.weight-o.weight})}function xJ(n){let e=[],t,i,r,o,s,a;for(t=0,i=(n||[]).length;t<i;++t)r=n[t],{position:o,options:{stack:s,stackWeight:a=1}}=r,e.push({index:t,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:s&&o+s,stackWeight:a});return e}function AJ(n){let e={};for(let t of n){let{stack:i,pos:r,stackWeight:o}=t;if(!i||!UB.includes(r))continue;let s=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=o}return e}function MJ(n,e){let t=AJ(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e,o,s,a;for(o=0,s=n.length;o<s;++o){a=n[o];let{fullSize:c}=a.box,l=t[a.stack],u=l&&a.stackWeight/l.weight;a.horizontal?(a.width=u?u*i:c&&e.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:c&&e.availableHeight)}return t}function PJ(n){let e=xJ(n),t=Cf(e.filter(l=>l.box.fullSize),!0),i=Cf(If(e,"left"),!0),r=Cf(If(e,"right")),o=Cf(If(e,"top"),!0),s=Cf(If(e,"bottom")),a=KV(e,"x"),c=KV(e,"y");return{fullSize:t,leftAndTop:i.concat(o),rightAndBottom:r.concat(c).concat(s).concat(a),chartArea:If(e,"chartArea"),vertical:i.concat(r).concat(c),horizontal:o.concat(s).concat(a)}}function YV(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function $B(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function RJ(n,e,t,i){let{pos:r,box:o}=t,s=n.maxPadding;if(!Oe(r)){t.size&&(n[r]-=t.size);let h=i[t.stack]||{size:0,count:1};h.size=Math.max(h.size,t.horizontal?o.height:o.width),t.size=h.size/h.count,n[r]+=t.size}o.getPadding&&$B(s,o.getPadding());let a=Math.max(0,e.outerWidth-YV(s,n,"left","right")),c=Math.max(0,e.outerHeight-YV(s,n,"top","bottom")),l=a!==n.w,u=c!==n.h;return n.w=a,n.h=c,t.horizontal?{same:l,other:u}:{same:u,other:l}}function kJ(n){let e=n.maxPadding;function t(i){let r=Math.max(e[i]-n[i],0);return n[i]+=r,r}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function NJ(n,e){let t=e.maxPadding;function i(r){let o={left:0,top:0,right:0,bottom:0};return r.forEach(s=>{o[s]=Math.max(e[s],t[s])}),o}return i(n?["left","right"]:["top","bottom"])}function Df(n,e,t,i){let r=[],o,s,a,c,l,u;for(o=0,s=n.length,l=0;o<s;++o){a=n[o],c=a.box,c.update(a.width||e.w,a.height||e.h,NJ(a.horizontal,e));let{same:h,other:f}=RJ(e,t,a,i);l|=h&&r.length,u=u||f,c.fullSize||r.push(a)}return l&&Df(r,e,t,i)||u}function u_(n,e,t,i,r){n.top=t,n.left=e,n.right=e+i,n.bottom=t+r,n.width=i,n.height=r}function QV(n,e,t,i){let r=t.padding,{x:o,y:s}=e;for(let a of n){let c=a.box,l=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/l.weight||1;if(a.horizontal){let h=e.w*u,f=l.size||c.height;Bu(l.start)&&(s=l.start),c.fullSize?u_(c,r.left,s,t.outerWidth-r.right-r.left,f):u_(c,e.left+l.placed,s,h,f),l.start=s,l.placed+=h,s=c.bottom}else{let h=e.h*u,f=l.size||c.width;Bu(l.start)&&(o=l.start),c.fullSize?u_(c,o,r.top,f,t.outerHeight-r.bottom-r.top):u_(c,o,e.top+l.placed,f,h),l.start=o,l.placed+=h,o=c.right}}e.x=o,e.y=s}var Gn={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){let t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;let r=xn(n.options.layout.padding),o=Math.max(e-r.width,0),s=Math.max(t-r.height,0),a=PJ(n.boxes),c=a.vertical,l=a.horizontal;tt(n.boxes,E=>{typeof E.beforeLayout=="function"&&E.beforeLayout()});let u=c.reduce((E,I)=>I.box.options&&I.box.options.display===!1?E:E+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:o,availableHeight:s,vBoxMaxWidth:o/2/u,hBoxMaxHeight:s/2}),f=Object.assign({},r);$B(f,xn(i));let y=Object.assign({maxPadding:f,w:o,h:s,x:r.left,y:r.top},r),b=MJ(c.concat(l),h);Df(a.fullSize,y,h,b),Df(c,y,h,b),Df(l,y,h,b)&&Df(c,y,h,b),kJ(y),QV(a.leftAndTop,y,h,b),y.x+=y.w,y.y+=y.h,QV(a.rightAndBottom,y,h,b),n.chartArea={left:y.left,top:y.top,right:y.left+y.w,bottom:y.top+y.h,height:y.h,width:y.w},tt(a.chartArea,E=>{let I=E.box;Object.assign(I,n.chartArea),I.update(y.w,y.h,{left:0,top:0,right:0,bottom:0})})}},__=class{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,r){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):i)}}isAttached(e){return!0}updateConfig(e){}},V1=class extends __{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},g_="$chartjs",OJ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},XV=n=>n===null||n==="";function FJ(n,e){let t=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[g_]={initial:{height:i,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",XV(r)){let o=v1(n,"width");o!==void 0&&(n.width=o)}if(XV(i))if(n.style.height==="")n.height=n.width/(e||2);else{let o=v1(n,"height");o!==void 0&&(n.height=o)}return n}var HB=kV?{passive:!0}:!1;function LJ(n,e,t){n&&n.addEventListener(e,t,HB)}function VJ(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,HB)}function BJ(n,e){let t=OJ[n.type]||n.type,{x:i,y:r}=ma(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function b_(n,e){for(let t of n)if(t===e||t.contains(e))return!0}function jJ(n,e,t){let i=n.canvas,r=new MutationObserver(o=>{let s=!1;for(let a of o)s=s||b_(a.addedNodes,i),s=s&&!b_(a.removedNodes,i);s&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function UJ(n,e,t){let i=n.canvas,r=new MutationObserver(o=>{let s=!1;for(let a of o)s=s||b_(a.removedNodes,i),s=s&&!b_(a.addedNodes,i);s&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}var Af=new Map,ZV=0;function zB(){let n=window.devicePixelRatio;n!==ZV&&(ZV=n,Af.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function $J(n,e){Af.size||window.addEventListener("resize",zB),Af.set(n,e)}function HJ(n){Af.delete(n),Af.size||window.removeEventListener("resize",zB)}function zJ(n,e,t){let i=n.canvas,r=i&&c_(i);if(!r)return;let o=o1((a,c)=>{let l=r.clientWidth;t(a,c),l<r.clientWidth&&t()},window),s=new ResizeObserver(a=>{let c=a[0],l=c.contentRect.width,u=c.contentRect.height;l===0&&u===0||o(l,u)});return s.observe(r),$J(n,o),s}function M1(n,e,t){t&&t.disconnect(),e==="resize"&&HJ(n)}function qJ(n,e,t){let i=n.canvas,r=o1(o=>{n.ctx!==null&&t(BJ(o,n))},n);return LJ(i,e,r),r}var B1=class extends __{acquireContext(e,t){let i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(FJ(e,t),i):null}releaseContext(e){let t=e.canvas;if(!t[g_])return!1;let i=t[g_].initial;["height","width"].forEach(o=>{let s=i[o];Ne(s)?t.removeAttribute(o):t.setAttribute(o,s)});let r=i.style||{};return Object.keys(r).forEach(o=>{t.style[o]=r[o]}),t.width=t.width,delete t[g_],!0}addEventListener(e,t,i){this.removeEventListener(e,t);let r=e.$proxies||(e.$proxies={}),s={attach:jJ,detach:UJ,resize:zJ}[t]||qJ;r[t]=s(e,t,i)}removeEventListener(e,t){let i=e.$proxies||(e.$proxies={}),r=i[t];if(!r)return;({attach:M1,detach:M1,resize:M1}[t]||VJ)(e,t,r),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,r){return RV(e,t,i,r)}isAttached(e){let t=e&&c_(e);return!!(t&&t.isConnected)}};function WJ(n){return!a_()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?V1:B1}var Er=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return Nc(this.x)&&Nc(this.y)}getProps(e,t){let i=this.$animations;if(!t||!i)return this;let r={};return e.forEach(o=>{r[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),r}};function GJ(n,e){let t=n.options.ticks,i=KJ(n),r=Math.min(t.maxTicksLimit||i,i),o=t.major.enabled?QJ(e):[],s=o.length,a=o[0],c=o[s-1],l=[];if(s>r)return XJ(e,l,o,s/r),l;let u=YJ(o,e,r);if(s>0){let h,f,y=s>1?Math.round((c-a)/(s-1)):null;for(d_(e,l,u,Ne(y)?0:a-y,a),h=0,f=s-1;h<f;h++)d_(e,l,u,o[h],o[h+1]);return d_(e,l,u,c,Ne(y)?e.length:c+y),l}return d_(e,l,u),l}function KJ(n){let e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),r=n._maxLength/t;return Math.floor(Math.min(i,r))}function YJ(n,e,t){let i=ZJ(n),r=e.length/t;if(!i)return Math.max(r,1);let o=fV(i);for(let s=0,a=o.length-1;s<a;s++){let c=o[s];if(c>r)return c}return Math.max(r,1)}function QJ(n){let e=[],t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function XJ(n,e,t,i){let r=0,o=t[0],s;for(i=Math.ceil(i),s=0;s<n.length;s++)s===o&&(e.push(n[s]),r++,o=t[r*i])}function d_(n,e,t,i,r){let o=Te(i,0),s=Math.min(Te(r,n.length),n.length),a=0,c,l,u;for(t=Math.ceil(t),r&&(c=r-i,t=c/Math.floor(c/t)),u=o;u<0;)a++,u=Math.round(o+a*t);for(l=Math.max(o,0);l<s;l++)l===u&&(e.push(n[l]),a++,u=Math.round(o+a*t))}function ZJ(n){let e=n.length,t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}var JJ=n=>n==="left"?"right":n==="right"?"left":n,JV=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,eB=(n,e)=>Math.min(e||n,n);function tB(n,e){let t=[],i=n.length/e,r=n.length,o=0;for(;o<r;o+=i)t.push(n[Math.floor(o)]);return t}function eee(n,e,t){let i=n.ticks.length,r=Math.min(e,i-1),o=n._startPixel,s=n._endPixel,a=1e-6,c=n.getPixelForTick(r),l;if(!(t&&(i===1?l=Math.max(c-o,s-c):e===0?l=(n.getPixelForTick(1)-c)/2:l=(c-n.getPixelForTick(r-1))/2,c+=r<e?l:-l,c<o-a||c>s+a)))return c}function tee(n,e){tt(n,t=>{let i=t.gc,r=i.length/2,o;if(r>e){for(o=0;o<r;++o)delete t.data[i[o]];i.splice(0,r)}})}function Sf(n){return n.drawTicks?n.tickLength:0}function nB(n,e){if(!n.display)return 0;let t=nn(n.font,e),i=xn(n.padding);return(bt(n.text)?n.text.length:1)*t.lineHeight+i.height}function nee(n,e){return es(n,{scale:e,type:"scale"})}function iee(n,e,t){return es(n,{tick:t,index:e,type:"tick"})}function ree(n,e,t){let i=n_(n);return(t&&e!=="right"||!t&&e==="right")&&(i=JJ(i)),i}function oee(n,e,t,i){let{top:r,left:o,bottom:s,right:a,chart:c}=n,{chartArea:l,scales:u}=c,h=0,f,y,b,E=s-r,I=a-o;if(n.isHorizontal()){if(y=Dn(i,o,a),Oe(t)){let R=Object.keys(t)[0],F=t[R];b=u[R].getPixelForValue(F)+E-e}else t==="center"?b=(l.bottom+l.top)/2+E-e:b=JV(n,t,e);f=a-o}else{if(Oe(t)){let R=Object.keys(t)[0],F=t[R];y=u[R].getPixelForValue(F)-I+e}else t==="center"?y=(l.left+l.right)/2-I+e:y=JV(n,t,e);b=Dn(i,s,r),h=t==="left"?-jt:jt}return{titleX:y,titleY:b,maxWidth:f,rotation:h}}var Vc=class n extends Er{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:r}=this;return e=ui(e,Number.POSITIVE_INFINITY),t=ui(t,Number.NEGATIVE_INFINITY),i=ui(i,Number.POSITIVE_INFINITY),r=ui(r,Number.NEGATIVE_INFINITY),{min:ui(e,i),max:ui(t,r),minDefined:Rt(e),maxDefined:Rt(t)}}getMinMax(e){let{min:t,max:i,minDefined:r,maxDefined:o}=this.getUserBounds(),s;if(r&&o)return{min:t,max:i};let a=this.getMatchingVisibleMetas();for(let c=0,l=a.length;c<l;++c)s=a[c].controller.getMinMax(this,e),r||(t=Math.min(t,s.min)),o||(i=Math.max(i,s.max));return t=o&&t>i?i:t,i=r&&t>i?t:i,{min:ui(t,ui(i,t)),max:ui(i,ui(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ut(this.options.beforeUpdate,[this])}update(e,t,i){let{beginAtZero:r,grace:o,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=TV(this,o,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let c=a<this.ticks.length;this._convertTicksToLabels(c?tB(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||s.source==="auto")&&(this.ticks=GJ(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ut(this.options.afterUpdate,[this])}beforeSetDimensions(){ut(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ut(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ut(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ut(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t=this.options.ticks,i,r,o;for(i=0,r=e.length;i<r;i++)o=e[i],o.label=ut(t.callback,[o.value,i,e],this)}afterTickToLabelConversion(){ut(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ut(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,t=e.ticks,i=eB(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,o=t.maxRotation,s=r,a,c,l;if(!this._isVisible()||!t.display||r>=o||i<=1||!this.isHorizontal()){this.labelRotation=r;return}let u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,y=an(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/i:y/(i-1),h+6>a&&(a=y/(i-(e.offset?.5:1)),c=this.maxHeight-Sf(e.grid)-t.padding-nB(e.title,this.chart.options.font),l=Math.sqrt(h*h+f*f),s=e_(Math.min(Math.asin(an((u.highest.height+6)/a,-1,1)),Math.asin(an(c/l,-1,1))-Math.asin(an(f/l,-1,1)))),s=Math.max(r,Math.min(o,s))),this.labelRotation=s}afterCalculateLabelRotation(){ut(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ut(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:i,title:r,grid:o}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){let c=nB(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=Sf(o)+c):(e.height=this.maxHeight,e.width=Sf(o)+c),i.display&&this.ticks.length){let{first:l,last:u,widest:h,highest:f}=this._getLabelSizes(),y=i.padding*2,b=tr(this.labelRotation),E=Math.cos(b),I=Math.sin(b);if(a){let R=i.mirror?0:I*h.width+E*f.height;e.height=Math.min(this.maxHeight,e.height+R+y)}else{let R=i.mirror?0:E*h.width+I*f.height;e.width=Math.min(this.maxWidth,e.width+R+y)}this._calculatePadding(l,u,I,E)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,r){let{ticks:{align:o,padding:s},position:a}=this.options,c=this.labelRotation!==0,l=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1),f=0,y=0;c?l?(f=r*e.width,y=i*t.height):(f=i*e.height,y=r*t.width):o==="start"?y=t.width:o==="end"?f=e.width:o!=="inner"&&(f=e.width/2,y=t.width/2),this.paddingLeft=Math.max((f-u+s)*this.width/(this.width-u),0),this.paddingRight=Math.max((y-h+s)*this.width/(this.width-h),0)}else{let u=t.height/2,h=e.height/2;o==="start"?(u=0,h=e.height):o==="end"&&(u=t.height,h=0),this.paddingTop=u+s,this.paddingBottom=h+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ut(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)Ne(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,i=this.ticks;t<i.length&&(i=tB(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){let{ctx:r,_longestTextCache:o}=this,s=[],a=[],c=Math.floor(t/eB(t,i)),l=0,u=0,h,f,y,b,E,I,R,F,B,z,$;for(h=0;h<t;h+=c){if(b=e[h].label,E=this._resolveTickFontOptions(h),r.font=I=E.string,R=o[I]=o[I]||{data:{},gc:[]},F=E.lineHeight,B=z=0,!Ne(b)&&!bt(b))B=yf(r,R.data,R.gc,B,b),z=F;else if(bt(b))for(f=0,y=b.length;f<y;++f)$=b[f],!Ne($)&&!bt($)&&(B=yf(r,R.data,R.gc,B,$),z+=F);s.push(B),a.push(z),l=Math.max(B,l),u=Math.max(z,u)}tee(o,t);let U=s.indexOf(l),x=a.indexOf(u),T=D=>({width:s[D]||0,height:a[D]||0});return{first:T(0),last:T(t-1),widest:T(U),highest:T(x),widths:s,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return mV(this._alignToPixels?ha(this.chart,t,0):t)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){let t=this.ticks||[];if(e>=0&&e<t.length){let i=t[e];return i.$context||(i.$context=iee(this.getContext(),e,i))}return this.$context||(this.$context=nee(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,t=tr(this.labelRotation),i=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),o=this._getLabelSizes(),s=e.autoSkipPadding||0,a=o?o.widest.width+s:0,c=o?o.highest.height+s:0;return this.isHorizontal()?c*i>a*r?a/i:c/r:c*r<a*i?c/i:a/r}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t=this.axis,i=this.chart,r=this.options,{grid:o,position:s,border:a}=r,c=o.offset,l=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=Sf(o),y=[],b=a.setContext(this.getContext()),E=b.display?b.width:0,I=E/2,R=function(dt){return ha(i,dt,E)},F,B,z,$,U,x,T,D,P,N,O,M;if(s==="top")F=R(this.bottom),x=this.bottom-f,D=F-I,N=R(e.top)+I,M=e.bottom;else if(s==="bottom")F=R(this.top),N=e.top,M=R(e.bottom)-I,x=F+I,D=this.top+f;else if(s==="left")F=R(this.right),U=this.right-f,T=F-I,P=R(e.left)+I,O=e.right;else if(s==="right")F=R(this.left),P=e.left,O=R(e.right)-I,U=F+I,T=this.left+f;else if(t==="x"){if(s==="center")F=R((e.top+e.bottom)/2+.5);else if(Oe(s)){let dt=Object.keys(s)[0],at=s[dt];F=R(this.chart.scales[dt].getPixelForValue(at))}N=e.top,M=e.bottom,x=F+I,D=x+f}else if(t==="y"){if(s==="center")F=R((e.left+e.right)/2);else if(Oe(s)){let dt=Object.keys(s)[0],at=s[dt];F=R(this.chart.scales[dt].getPixelForValue(at))}U=F-I,T=U-f,P=e.left,O=e.right}let At=Te(r.ticks.maxTicksLimit,h),Ue=Math.max(1,Math.ceil(h/At));for(B=0;B<h;B+=Ue){let dt=this.getContext(B),at=o.setContext(dt),mn=a.setContext(dt),qt=at.lineWidth,uo=at.color,Bc=mn.dash||[],Kn=mn.dashOffset,kt=at.tickWidth,ho=at.tickColor,nr=at.tickBorderDash||[],fo=at.tickBorderDashOffset;z=eee(this,B,c),z!==void 0&&($=ha(i,z,qt),l?U=T=P=O=$:x=D=N=M=$,y.push({tx1:U,ty1:x,tx2:T,ty2:D,x1:P,y1:N,x2:O,y2:M,width:qt,color:uo,borderDash:Bc,borderDashOffset:Kn,tickWidth:kt,tickColor:ho,tickBorderDash:nr,tickBorderDashOffset:fo}))}return this._ticksLength=h,this._borderValue=F,y}_computeLabelItems(e){let t=this.axis,i=this.options,{position:r,ticks:o}=i,s=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:l,padding:u,mirror:h}=o,f=Sf(i.grid),y=f+u,b=h?-u:y,E=-tr(this.labelRotation),I=[],R,F,B,z,$,U,x,T,D,P,N,O,M="middle";if(r==="top")U=this.bottom-b,x=this._getXAxisLabelAlignment();else if(r==="bottom")U=this.top+b,x=this._getXAxisLabelAlignment();else if(r==="left"){let Ue=this._getYAxisLabelAlignment(f);x=Ue.textAlign,$=Ue.x}else if(r==="right"){let Ue=this._getYAxisLabelAlignment(f);x=Ue.textAlign,$=Ue.x}else if(t==="x"){if(r==="center")U=(e.top+e.bottom)/2+y;else if(Oe(r)){let Ue=Object.keys(r)[0],dt=r[Ue];U=this.chart.scales[Ue].getPixelForValue(dt)+y}x=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")$=(e.left+e.right)/2-y;else if(Oe(r)){let Ue=Object.keys(r)[0],dt=r[Ue];$=this.chart.scales[Ue].getPixelForValue(dt)}x=this._getYAxisLabelAlignment(f).textAlign}t==="y"&&(c==="start"?M="top":c==="end"&&(M="bottom"));let At=this._getLabelSizes();for(R=0,F=a.length;R<F;++R){B=a[R],z=B.label;let Ue=o.setContext(this.getContext(R));T=this.getPixelForTick(R)+o.labelOffset,D=this._resolveTickFontOptions(R),P=D.lineHeight,N=bt(z)?z.length:1;let dt=N/2,at=Ue.color,mn=Ue.textStrokeColor,qt=Ue.textStrokeWidth,uo=x;s?($=T,x==="inner"&&(R===F-1?uo=this.options.reverse?"left":"right":R===0?uo=this.options.reverse?"right":"left":uo="center"),r==="top"?l==="near"||E!==0?O=-N*P+P/2:l==="center"?O=-At.highest.height/2-dt*P+P:O=-At.highest.height+P/2:l==="near"||E!==0?O=P/2:l==="center"?O=At.highest.height/2-dt*P:O=At.highest.height-N*P,h&&(O*=-1),E!==0&&!Ue.showLabelBackdrop&&($+=P/2*Math.sin(E))):(U=T,O=(1-N)*P/2);let Bc;if(Ue.showLabelBackdrop){let Kn=xn(Ue.backdropPadding),kt=At.heights[R],ho=At.widths[R],nr=O-Kn.top,fo=0-Kn.left;switch(M){case"middle":nr-=kt/2;break;case"bottom":nr-=kt;break}switch(x){case"center":fo-=ho/2;break;case"right":fo-=ho;break;case"inner":R===F-1?fo-=ho:R>0&&(fo-=ho/2);break}Bc={left:fo,top:nr,width:ho+Kn.width,height:kt+Kn.height,color:Ue.backdropColor}}I.push({label:z,font:D,textOffset:O,options:{rotation:E,color:at,strokeColor:mn,strokeWidth:qt,textAlign:uo,textBaseline:M,translation:[$,U],backdrop:Bc}})}return I}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-tr(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){let{position:t,ticks:{crossAlign:i,mirror:r,padding:o}}=this.options,s=this._getLabelSizes(),a=e+o,c=s.widest.width,l,u;return t==="left"?r?(u=this.right+o,i==="near"?l="left":i==="center"?(l="center",u+=c/2):(l="right",u+=c)):(u=this.right-a,i==="near"?l="right":i==="center"?(l="center",u-=c/2):(l="left",u=this.left)):t==="right"?r?(u=this.left+o,i==="near"?l="right":i==="center"?(l="center",u-=c/2):(l="left",u-=c)):(u=this.left+a,i==="near"?l="left":i==="center"?(l="center",u+=c/2):(l="right",u=this.right)):l="right",{textAlign:l,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:i,top:r,width:o,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,r,o,s),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let r=this.ticks.findIndex(o=>o.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){let t=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),o,s,a=(c,l,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(l.x,l.y),i.stroke(),i.restore())};if(t.display)for(o=0,s=r.length;o<s;++o){let c=r[o];t.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:t,options:{border:i,grid:r}}=this,o=i.setContext(this.getContext()),s=i.display?o.width:0;if(!s)return;let a=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue,l,u,h,f;this.isHorizontal()?(l=ha(e,this.left,s)-s/2,u=ha(e,this.right,a)+a/2,h=f=c):(h=ha(e,this.top,s)-s/2,f=ha(e,this.bottom,a)+a/2,l=u=c),t.save(),t.lineWidth=o.width,t.strokeStyle=o.color,t.beginPath(),t.moveTo(l,h),t.lineTo(u,f),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;let i=this.ctx,r=this._computeLabelArea();r&&bf(i,r);let o=this.getLabelItems(e);for(let s of o){let a=s.options,c=s.font,l=s.label,u=s.textOffset;fa(i,l,0,u,c,a)}r&&wf(i)}drawTitle(){let{ctx:e,options:{position:t,title:i,reverse:r}}=this;if(!i.display)return;let o=nn(i.font),s=xn(i.padding),a=i.align,c=o.lineHeight/2;t==="bottom"||t==="center"||Oe(t)?(c+=s.bottom,bt(i.text)&&(c+=o.lineHeight*(i.text.length-1))):c+=s.top;let{titleX:l,titleY:u,maxWidth:h,rotation:f}=oee(this,c,t,a);fa(e,i.text,0,0,o,{color:i.color,maxWidth:h,rotation:f,textAlign:ree(a,t,r),textBaseline:"middle",translation:[l,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,i=Te(e.grid&&e.grid.z,-1),r=Te(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:t,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){let t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[],o,s;for(o=0,s=t.length;o<s;++o){let a=t[o];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){let t=this.options.ticks.setContext(this.getContext(e));return nn(t.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},Wu=class{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let t=Object.getPrototypeOf(e),i;cee(t)&&(i=this.register(t));let r=this.items,o=e.id,s=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in r||(r[o]=e,see(e,s,i),this.override&&St.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){let t=this.items,i=e.id,r=this.scope;i in t&&delete t[i],r&&i in St[r]&&(delete St[r][i],this.override&&delete da[i])}};function see(n,e,t){let i=Fu(Object.create(null),[t?St.get(t):{},St.get(e),n.defaults]);St.set(e,i),n.defaultRoutes&&aee(e,n.defaultRoutes),n.descriptors&&St.describe(e,n.descriptors)}function aee(n,e){Object.keys(e).forEach(t=>{let i=t.split("."),r=i.pop(),o=[n].concat(i).join("."),s=e[t].split("."),a=s.pop(),c=s.join(".");St.route(o,r,c,a)})}function cee(n){return"id"in n&&"defaults"in n}var j1=class{constructor(){this.controllers=new Wu(ya,"datasets",!0),this.elements=new Wu(Er,"elements"),this.plugins=new Wu(Object,"plugins"),this.scales=new Wu(Vc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(r=>{let o=i||this._getRegistryForType(r);i||o.isForType(r)||o===this.plugins&&r.id?this._exec(e,o,r):tt(r,s=>{let a=i||this._getRegistryForType(s);this._exec(e,a,s)})})}_exec(e,t,i){let r=Jv(e);ut(i["before"+r],[],i),t[e](i),ut(i["after"+r],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){let r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}},lo=new j1,U1=class{constructor(){this._init=void 0}notify(e,t,i,r){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;let o=r?this._descriptors(e).filter(r):this._descriptors(e),s=this._notify(o,e,t,i);return t==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),s}_notify(e,t,i,r){r=r||{};for(let o of e){let s=o.plugin,a=s[i],c=[t,r,o.options];if(ut(a,c,s)===!1&&r.cancelable)return!1}return!0}invalidate(){Ne(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let i=e&&e.config,r=Te(i.options&&i.options.plugins,{}),o=lee(i);return r===!1&&!t?[]:dee(e,o,r,t)}_notifyStateChanges(e){let t=this._oldCache||[],i=this._cache,r=(o,s)=>o.filter(a=>!s.some(c=>a.plugin.id===c.plugin.id));this._notify(r(t,i),e,"stop"),this._notify(r(i,t),e,"start")}};function lee(n){let e={},t=[],i=Object.keys(lo.plugins.items);for(let o=0;o<i.length;o++)t.push(lo.getPlugin(i[o]));let r=n.plugins||[];for(let o=0;o<r.length;o++){let s=r[o];t.indexOf(s)===-1&&(t.push(s),e[s.id]=!0)}return{plugins:t,localIds:e}}function uee(n,e){return!e&&n===!1?null:n===!0?{}:n}function dee(n,{plugins:e,localIds:t},i,r){let o=[],s=n.getContext();for(let a of e){let c=a.id,l=uee(i[c],r);l!==null&&o.push({plugin:a,options:hee(n.config,{plugin:a,local:t[c]},l,s)})}return o}function hee(n,{plugin:e,local:t},i,r){let o=n.pluginScopeKeys(e),s=n.getOptionScopes(i,o);return t&&e.defaults&&s.push(e.defaults),n.createResolver(s,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function $1(n,e){let t=St.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function fee(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function pee(n,e){return n===e?"_index_":"_value_"}function iB(n){if(n==="x"||n==="y"||n==="r")return n}function mee(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function H1(n,...e){if(iB(n))return n;for(let t of e){let i=t.axis||mee(t.position)||n.length>1&&iB(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function rB(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function gee(n,e){if(e.data&&e.data.datasets){let t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return rB(n,"x",t[0])||rB(n,"y",t[0])}return{}}function yee(n,e){let t=da[n.type]||{scales:{}},i=e.scales||{},r=$1(n.type,e),o=Object.create(null);return Object.keys(i).forEach(s=>{let a=i[s];if(!Oe(a))return console.error(`Invalid scale configuration for scale: ${s}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${s}`);let c=H1(s,a,gee(s,n),St.scales[a.type]),l=pee(c,r),u=t.scales||{};o[s]=Vu(Object.create(null),[{axis:c},a,u[c],u[l]])}),n.data.datasets.forEach(s=>{let a=s.type||n.type,c=s.indexAxis||$1(a,e),u=(da[a]||{}).scales||{};Object.keys(u).forEach(h=>{let f=fee(h,c),y=s[f+"AxisID"]||f;o[y]=o[y]||Object.create(null),Vu(o[y],[{axis:f},i[y],u[h]])})}),Object.keys(o).forEach(s=>{let a=o[s];Vu(a,[St.scales[a.type],St.scale])}),o}function qB(n){let e=n.options||(n.options={});e.plugins=Te(e.plugins,{}),e.scales=yee(n,e)}function WB(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function vee(n){return n=n||{},n.data=WB(n.data),qB(n),n}var oB=new Map,GB=new Set;function h_(n,e){let t=oB.get(n);return t||(t=e(),oB.set(n,t),GB.add(t)),t}var Tf=(n,e,t)=>{let i=Jo(e,t);i!==void 0&&n.add(i)},z1=class{constructor(e){this._config=vee(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=WB(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),qB(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return h_(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return h_(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return h_(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,i=this.type;return h_(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let i=this._scopeCache,r=i.get(e);return(!r||t)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,t,i){let{options:r,type:o}=this,s=this._cachedScopes(e,i),a=s.get(t);if(a)return a;let c=new Set;t.forEach(u=>{e&&(c.add(e),u.forEach(h=>Tf(c,e,h))),u.forEach(h=>Tf(c,r,h)),u.forEach(h=>Tf(c,da[o]||{},h)),u.forEach(h=>Tf(c,St,h)),u.forEach(h=>Tf(c,i_,h))});let l=Array.from(c);return l.length===0&&l.push(Object.create(null)),GB.has(t)&&s.set(t,l),l}chartOptionScopes(){let{options:e,type:t}=this;return[e,da[t]||{},St.datasets[t]||{},{type:t},St,i_]}resolveNamedOptions(e,t,i,r=[""]){let o={$shared:!0},{resolver:s,subPrefixes:a}=sB(this._resolverCache,e,r),c=s;if(bee(s,t)){o.$shared=!1,i=Xo(i)?i():i;let l=this.createResolver(e,i,a);c=kc(s,i,l)}for(let l of t)o[l]=c[l];return o}createResolver(e,t,i=[""],r){let{resolver:o}=sB(this._resolverCache,e,i);return Oe(t)?kc(o,t,void 0,r):o}};function sB(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));let r=t.join(),o=i.get(r);return o||(o={resolver:s_(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,o)),o}var _ee=n=>Oe(n)&&Object.getOwnPropertyNames(n).some(e=>Xo(n[e]));function bee(n,e){let{isScriptable:t,isIndexable:i}=f1(n);for(let r of e){let o=t(r),s=i(r),a=(s||o)&&n[r];if(o&&(Xo(a)||_ee(a))||s&&bt(a))return!0}return!1}var wee="4.5.1",Eee=["top","bottom","left","right","chartArea"];function aB(n,e){return n==="top"||n==="bottom"||Eee.indexOf(n)===-1&&e==="x"}function cB(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function lB(n){let e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),ut(t&&t.onComplete,[n],e)}function Iee(n){let e=n.chart,t=e.options.animation;ut(t&&t.onProgress,[n],e)}function KB(n){return a_()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var y_={},uB=n=>{let e=KB(n);return Object.values(y_).filter(t=>t.canvas===e).pop()};function Cee(n,e,t){let i=Object.keys(n);for(let r of i){let o=+r;if(o>=e){let s=n[r];delete n[r],(t>0||o>e)&&(n[o+t]=s)}}}function See(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}var C_=(()=>{class n{static defaults=St;static instances=y_;static overrides=da;static registry=lo;static version=wee;static getChart=uB;static register(...t){lo.add(...t),dB()}static unregister(...t){lo.remove(...t),dB()}constructor(t,i){let r=this.config=new z1(i),o=KB(t),s=uB(o);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");let a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||WJ(o)),this.platform.updateConfig(r);let c=this.platform.acquireContext(o,a.aspectRatio),l=c&&c.canvas,u=l&&l.height,h=l&&l.width;if(this.id=lV(),this.ctx=c,this.canvas=l,this.width=h,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new U1,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=bV(f=>this.update(f),a.resizeDelay||0),this._dataChanges=[],y_[this.id]=this,!c||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ts.listen(this,"complete",lB),ts.listen(this,"progress",Iee),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:i},width:r,height:o,_aspectRatio:s}=this;return Ne(t)?i&&s?s:o?r/o:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return lo}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():y1(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return u1(this.canvas,this.ctx),this}stop(){return ts.stop(this),this}resize(t,i){ts.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){let r=this.options,o=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(o,t,i,s),c=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,y1(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),ut(r.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let i=this.options.scales||{};tt(i,(r,o)=>{r.id=o})}buildOrUpdateScales(){let t=this.options,i=t.scales,r=this.scales,o=Object.keys(r).reduce((a,c)=>(a[c]=!1,a),{}),s=[];i&&(s=s.concat(Object.keys(i).map(a=>{let c=i[a],l=H1(a,c),u=l==="r",h=l==="x";return{options:c,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),tt(s,a=>{let c=a.options,l=c.id,u=H1(l,c),h=Te(c.type,a.dtype);(c.position===void 0||aB(c.position,u)!==aB(a.dposition))&&(c.position=a.dposition),o[l]=!0;let f=null;if(l in r&&r[l].type===h)f=r[l];else{let y=lo.getScale(h);f=new y({id:l,type:h,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(c,t)}),tt(o,(a,c)=>{a||delete r[c]}),tt(r,a=>{Gn.configure(this,a,a.options),Gn.addBox(this,a)})}_updateMetasets(){let t=this._metasets,i=this.data.datasets.length,r=t.length;if(t.sort((o,s)=>o.index-s.index),r>i){for(let o=i;o<r;++o)this._destroyDatasetMeta(o);t.splice(i,r-i)}this._sortedMetasets=t.slice(0).sort(cB("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((r,o)=>{i.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){let t=[],i=this.data.datasets,r,o;for(this._removeUnreferencedMetasets(),r=0,o=i.length;r<o;r++){let s=i[r],a=this.getDatasetMeta(r),c=s.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=c,a.indexAxis=s.indexAxis||$1(c,this.options),a.order=s.order||0,a.index=r,a.label=""+s.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{let l=lo.getController(c),{datasetElementType:u,dataElementType:h}=St.datasets[c];Object.assign(l,{dataElementType:lo.getElement(h),datasetElementType:u&&lo.getElement(u)}),a.controller=new l(this,r),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){tt(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let i=this.config;i.update();let r=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,h=this.data.datasets.length;u<h;u++){let{controller:f}=this.getDatasetMeta(u),y=!o&&s.indexOf(f)===-1;f.buildOrUpdateElements(y),a=Math.max(+f.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),o||tt(s,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(cB("z","_idx"));let{_active:c,_lastEvent:l}=this;l?this._eventHandler(l,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){tt(this.scales,t=>{Gn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,i=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!XT(i,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(let{method:r,start:o,count:s}of i){let a=r==="_removeElements"?-s:s;Cee(t,o,a)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let i=this.data.datasets.length,r=s=>new Set(t.filter(a=>a[0]===s).map((a,c)=>c+","+a.splice(1).join(","))),o=r(0);for(let s=1;s<i;s++)if(!XT(o,r(s)))return;return Array.from(o).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Gn.update(this,this.width,this.height,t);let i=this.chartArea,r=i.width<=0||i.height<=0;this._layers=[],tt(this.boxes,o=>{r&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,s)=>{o._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,r=this.data.datasets.length;i<r;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,r=this.data.datasets.length;i<r;++i)this._updateDataset(i,Xo(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){let r=this.getDatasetMeta(t),o={meta:r,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(r.controller._update(i),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ts.has(this)?this.attached&&!ts.running(this)&&ts.start(this):(this.draw(),lB({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:r,height:o}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,o)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let i=this._sortedMetasets,r=[],o,s;for(o=0,s=i.length;o<s;++o){let a=i[o];(!t||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let i=this.ctx,r={meta:t,index:t.index,cancelable:!0},o=I1(this,t);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(o&&bf(i,o),t.controller.draw(),o&&wf(i),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return oo(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,r,o){let s=DJ.modes[i];return typeof s=="function"?s(this,t,r,o):[]}getDatasetMeta(t){let i=this.data.datasets[t],r=this._metasets,o=r.filter(s=>s&&s._dataset===i).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},r.push(o)),o}getContext(){return this.$context||(this.$context=es(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let i=this.data.datasets[t];if(!i)return!1;let r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!i.hidden}setDatasetVisibility(t,i){let r=this.getDatasetMeta(t);r.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,r){let o=r?"show":"hide",s=this.getDatasetMeta(t),a=s.controller._resolveAnimations(void 0,o);Bu(i)?(s.data[i].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),a.update(s,{visible:r}),this.update(c=>c.datasetIndex===t?o:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){let i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),ts.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),u1(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete y_[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,i=this.platform,r=(s,a)=>{i.addEventListener(this,s,a),t[s]=a},o=(s,a,c)=>{s.offsetX=a,s.offsetY=c,this._eventHandler(s)};tt(this.options.events,s=>r(s,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,i=this.platform,r=(l,u)=>{i.addEventListener(this,l,u),t[l]=u},o=(l,u)=>{t[l]&&(i.removeEventListener(this,l,u),delete t[l])},s=(l,u)=>{this.canvas&&this.resize(l,u)},a,c=()=>{o("attach",c),this.attached=!0,this.resize(),r("resize",s),r("detach",a)};a=()=>{this.attached=!1,o("resize",s),this._stop(),this._resize(0,0),r("attach",c)},i.isAttached(this.canvas)?c():a()}unbindEvents(){tt(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},tt(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,r){let o=r?"set":"remove",s,a,c,l;for(i==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+o+"DatasetHoverStyle"]()),c=0,l=t.length;c<l;++c){a=t[c];let u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[o+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let i=this._active||[],r=t.map(({datasetIndex:s,index:a})=>{let c=this.getDatasetMeta(s);if(!c)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:c.data[a],index:a}});!vf(r,i)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,i))}notifyPlugins(t,i,r){return this._plugins.notify(this,t,i,r)}isPluginEnabled(t){return this._plugins._cache.filter(i=>i.plugin.id===t).length===1}_updateHoverStyles(t,i,r){let o=this.options.hover,s=(l,u)=>l.filter(h=>!u.some(f=>h.datasetIndex===f.datasetIndex&&h.index===f.index)),a=s(i,t),c=r?t:s(t,i);a.length&&this.updateHoverStyle(a,o.mode,!1),c.length&&o.mode&&this.updateHoverStyle(c,o.mode,!0)}_eventHandler(t,i){let r={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},o=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,o)===!1)return;let s=this._handleEvent(t,i,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,o),(s||r.changed)&&this.render(),this}_handleEvent(t,i,r){let{_active:o=[],options:s}=this,a=i,c=this._getActiveElements(t,o,r,a),l=hV(t),u=See(t,this._lastEvent,r,l);r&&(this._lastEvent=null,ut(s.onHover,[t,c,this],this),l&&ut(s.onClick,[t,c,this],this));let h=!vf(c,o);return(h||i)&&(this._active=c,this._updateHoverStyles(c,o,i)),this._lastEvent=u,h}_getActiveElements(t,i,r,o){if(t.type==="mouseout")return[];if(!r)return i;let s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,o)}}return n})();function dB(){return tt(C_.instances,n=>n._plugins.invalidate())}function Tee(n,e,t){let{startAngle:i,x:r,y:o,outerRadius:s,innerRadius:a,options:c}=e,{borderWidth:l,borderJoinStyle:u}=c,h=Math.min(l/s,Tn(i-t));if(n.beginPath(),n.arc(r,o,s-l/2,i+h/2,t-h/2),a>0){let f=Math.min(l/a,Tn(i-t));n.arc(r,o,a+l/2,t-f/2,i+f/2,!0)}else{let f=Math.min(l/2,s*Tn(i-t));if(u==="round")n.arc(r,o,f,t-We/2,i+We/2,!0);else if(u==="bevel"){let y=2*f*f,b=-y*Math.cos(t+We/2)+r,E=-y*Math.sin(t+We/2)+o,I=y*Math.cos(i+We/2)+r,R=y*Math.sin(i+We/2)+o;n.lineTo(b,E),n.lineTo(I,R)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function Dee(n,e,t){let{startAngle:i,pixelMargin:r,x:o,y:s,outerRadius:a,innerRadius:c}=e,l=r/a;n.beginPath(),n.arc(o,s,a,i-l,t+l),c>r?(l=r/c,n.arc(o,s,c,t+l,i-l,!0)):n.arc(o,s,r,t+jt,i-jt),n.closePath(),n.clip()}function xee(n){return o_(n,["outerStart","outerEnd","innerStart","innerEnd"])}function Aee(n,e,t,i){let r=xee(n.options.borderRadius),o=(t-e)/2,s=Math.min(o,i*e/2),a=c=>{let l=(t-Math.min(o,c))*i/2;return an(c,0,Math.min(o,l))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:an(r.innerStart,0,s),innerEnd:an(r.innerEnd,0,s)}}function qu(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function w_(n,e,t,i,r,o){let{x:s,y:a,startAngle:c,pixelMargin:l,innerRadius:u}=e,h=Math.max(e.outerRadius+i+t-l,0),f=u>0?u+i+t+l:0,y=0,b=r-c;if(i){let Ue=u>0?u-i:0,dt=h>0?h-i:0,at=(Ue+dt)/2,mn=at!==0?b*at/(at+i):b;y=(b-mn)/2}let E=Math.max(.001,b*h-t/We)/h,I=(b-E)/2,R=c+I+y,F=r-I-y,{outerStart:B,outerEnd:z,innerStart:$,innerEnd:U}=Aee(e,f,h,F-R),x=h-B,T=h-z,D=R+B/x,P=F-z/T,N=f+$,O=f+U,M=R+$/N,At=F-U/O;if(n.beginPath(),o){let Ue=(D+P)/2;if(n.arc(s,a,h,D,Ue),n.arc(s,a,h,Ue,P),z>0){let qt=qu(T,P,s,a);n.arc(qt.x,qt.y,z,P,F+jt)}let dt=qu(O,F,s,a);if(n.lineTo(dt.x,dt.y),U>0){let qt=qu(O,At,s,a);n.arc(qt.x,qt.y,U,F+jt,At+Math.PI)}let at=(F-U/f+(R+$/f))/2;if(n.arc(s,a,f,F-U/f,at,!0),n.arc(s,a,f,at,R+$/f,!0),$>0){let qt=qu(N,M,s,a);n.arc(qt.x,qt.y,$,M+Math.PI,R-jt)}let mn=qu(x,R,s,a);if(n.lineTo(mn.x,mn.y),B>0){let qt=qu(x,D,s,a);n.arc(qt.x,qt.y,B,R-jt,D)}}else{n.moveTo(s,a);let Ue=Math.cos(D)*h+s,dt=Math.sin(D)*h+a;n.lineTo(Ue,dt);let at=Math.cos(P)*h+s,mn=Math.sin(P)*h+a;n.lineTo(at,mn)}n.closePath()}function Mee(n,e,t,i,r){let{fullCircles:o,startAngle:s,circumference:a}=e,c=e.endAngle;if(o){w_(n,e,t,i,c,r);for(let l=0;l<o;++l)n.fill();isNaN(a)||(c=s+(a%wt||wt))}return w_(n,e,t,i,c,r),n.fill(),c}function Pee(n,e,t,i,r){let{fullCircles:o,startAngle:s,circumference:a,options:c}=e,{borderWidth:l,borderJoinStyle:u,borderDash:h,borderDashOffset:f,borderRadius:y}=c,b=c.borderAlign==="inner";if(!l)return;n.setLineDash(h||[]),n.lineDashOffset=f,b?(n.lineWidth=l*2,n.lineJoin=u||"round"):(n.lineWidth=l,n.lineJoin=u||"bevel");let E=e.endAngle;if(o){w_(n,e,t,i,E,r);for(let I=0;I<o;++I)n.stroke();isNaN(a)||(E=s+(a%wt||wt))}b&&Dee(n,e,E),c.selfJoin&&E-s>=We&&y===0&&u!=="miter"&&Tee(n,e,E),o||(w_(n,e,t,i,E,r),n.stroke())}var q1=class extends Er{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){let r=this.getProps(["x","y"],i),{angle:o,distance:s}=t1(r,{x:e,y:t}),{startAngle:a,endAngle:c,innerRadius:l,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),f=(this.options.spacing+this.options.borderWidth)/2,y=Te(h,c-a),b=Uu(o,a,c)&&a!==c,E=y>=wt||b,I=ao(s,l+f,u+f);return E&&I}getCenterPoint(e){let{x:t,y:i,startAngle:r,endAngle:o,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:l}=this.options,u=(r+o)/2,h=(s+a+l+c)/2;return{x:t+Math.cos(u)*h,y:i+Math.sin(u)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){let{options:t,circumference:i}=this,r=(t.offset||0)/4,o=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=i>wt?Math.floor(i/wt):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();let a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);let c=1-Math.sin(Math.min(We,i||0)),l=r*c;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,Mee(e,this,l,o,s),Pee(e,this,l,o,s),e.restore()}};function YB(n,e,t=e){n.lineCap=Te(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Te(t.borderDash,e.borderDash)),n.lineDashOffset=Te(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Te(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Te(t.borderWidth,e.borderWidth),n.strokeStyle=Te(t.borderColor,e.borderColor)}function Ree(n,e,t){n.lineTo(t.x,t.y)}function kee(n){return n.stepped?CV:n.tension||n.cubicInterpolationMode==="monotone"?SV:Ree}function QB(n,e,t={}){let i=n.length,{start:r=0,end:o=i-1}=t,{start:s,end:a}=e,c=Math.max(r,s),l=Math.min(o,a),u=r<s&&o<s||r>a&&o>a;return{count:i,start:c,loop:e.loop,ilen:l<c&&!u?i+l-c:l-c}}function Nee(n,e,t,i){let{points:r,options:o}=e,{count:s,start:a,loop:c,ilen:l}=QB(r,t,i),u=kee(o),{move:h=!0,reverse:f}=i||{},y,b,E;for(y=0;y<=l;++y)b=r[(a+(f?l-y:y))%s],!b.skip&&(h?(n.moveTo(b.x,b.y),h=!1):u(n,E,b,f,o.stepped),E=b);return c&&(b=r[(a+(f?l:0))%s],u(n,E,b,f,o.stepped)),!!c}function Oee(n,e,t,i){let r=e.points,{count:o,start:s,ilen:a}=QB(r,t,i),{move:c=!0,reverse:l}=i||{},u=0,h=0,f,y,b,E,I,R,F=z=>(s+(l?a-z:z))%o,B=()=>{E!==I&&(n.lineTo(u,I),n.lineTo(u,E),n.lineTo(u,R))};for(c&&(y=r[F(0)],n.moveTo(y.x,y.y)),f=0;f<=a;++f){if(y=r[F(f)],y.skip)continue;let z=y.x,$=y.y,U=z|0;U===b?($<E?E=$:$>I&&(I=$),u=(h*u+z)/++h):(B(),n.lineTo(z,$),b=U,h=0,E=I=$),R=$}B()}function W1(n){let e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?Oee:Nee}function Fee(n){return n.stepped?NV:n.tension||n.cubicInterpolationMode==="monotone"?OV:la}function Lee(n,e,t,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,t,i)&&r.closePath()),YB(n,e.options),n.stroke(r)}function Vee(n,e,t,i){let{segments:r,options:o}=e,s=W1(e);for(let a of r)YB(n,o,a.style),n.beginPath(),s(n,e,a,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}var Bee=typeof Path2D=="function";function jee(n,e,t,i){Bee&&!e.options.segment?Lee(n,e,t,i):Vee(n,e,t,i)}var S_=(()=>{class n extends Er{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){let r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){let o=r.spanGaps?this._loop:this._fullLoop;PV(this._points,r,t,o,i),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=LV(this,this.options.segment))}first(){let t=this.segments,i=this.points;return t.length&&i[t[0].start]}last(){let t=this.segments,i=this.points,r=t.length;return r&&i[t[r-1].end]}interpolate(t,i){let r=this.options,o=t[i],s=this.points,a=E1(this,{property:i,start:o,end:o});if(!a.length)return;let c=[],l=Fee(r),u,h;for(u=0,h=a.length;u<h;++u){let{start:f,end:y}=a[u],b=s[f],E=s[y];if(b===E){c.push(b);continue}let I=Math.abs((o-b[i])/(E[i]-b[i])),R=l(b,E,I,r.stepped);R[i]=t[i],c.push(R)}return c.length===1?c[0]:c}pathSegment(t,i,r){return W1(this)(t,this,i,r)}path(t,i,r){let o=this.segments,s=W1(this),a=this._loop;i=i||0,r=r||this.points.length-i;for(let c of o)a&=s(t,this,c,{start:i,end:i+r-1});return!!a}draw(t,i,r,o){let s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),jee(t,this,r,o),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n})();function hB(n,e,t,i){let r=n.options,{[t]:o}=n.getProps([t],i);return Math.abs(e-o)<r.radius+r.hitRadius}var Uee=(()=>{class n extends Er{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,r){let o=this.options,{x:s,y:a}=this.getProps(["x","y"],r);return Math.pow(t-s,2)+Math.pow(i-a,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(t,i){return hB(this,t,"x",i)}inYRange(t,i){return hB(this,t,"y",i)}getCenterPoint(t){let{x:i,y:r}=this.getProps(["x","y"],t);return{x:i,y:r}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);let r=i&&t.borderWidth||0;return(i+r)*2}draw(t,i){let r=this.options;this.skip||r.radius<.1||!oo(this,i,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,r_(t,r,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}return n})();function XB(n,e){let{x:t,y:i,base:r,width:o,height:s}=n.getProps(["x","y","base","width","height"],e),a,c,l,u,h;return n.horizontal?(h=s/2,a=Math.min(t,r),c=Math.max(t,r),l=i-h,u=i+h):(h=o/2,a=t-h,c=t+h,l=Math.min(i,r),u=Math.max(i,r)),{left:a,top:l,right:c,bottom:u}}function ga(n,e,t,i){return n?0:an(e,t,i)}function $ee(n,e,t){let i=n.options.borderWidth,r=n.borderSkipped,o=h1(i);return{t:ga(r.top,o.top,0,t),r:ga(r.right,o.right,0,e),b:ga(r.bottom,o.bottom,0,t),l:ga(r.left,o.left,0,e)}}function Hee(n,e,t){let{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,o=pa(r),s=Math.min(e,t),a=n.borderSkipped,c=i||Oe(r);return{topLeft:ga(!c||a.top||a.left,o.topLeft,0,s),topRight:ga(!c||a.top||a.right,o.topRight,0,s),bottomLeft:ga(!c||a.bottom||a.left,o.bottomLeft,0,s),bottomRight:ga(!c||a.bottom||a.right,o.bottomRight,0,s)}}function zee(n){let e=XB(n),t=e.right-e.left,i=e.bottom-e.top,r=$ee(n,t/2,i/2),o=Hee(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:o},inner:{x:e.left+r.l,y:e.top+r.t,w:t-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,o.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(r.b,r.r))}}}}function P1(n,e,t,i){let r=e===null,o=t===null,a=n&&!(r&&o)&&XB(n,i);return a&&(r||ao(e,a.left,a.right))&&(o||ao(t,a.top,a.bottom))}function qee(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function Wee(n,e){n.rect(e.x,e.y,e.w,e.h)}function R1(n,e,t={}){let i=n.x!==t.x?-e:0,r=n.y!==t.y?-e:0,o=(n.x+n.w!==t.x+t.w?e:0)-i,s=(n.y+n.h!==t.y+t.h?e:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+o,h:n.h+s,radius:n.radius}}var G1=class extends Er{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:t,options:{borderColor:i,backgroundColor:r}}=this,{inner:o,outer:s}=zee(this),a=qee(s.radius)?Hu:Wee;e.save(),(s.w!==o.w||s.h!==o.h)&&(e.beginPath(),a(e,R1(s,t,o)),e.clip(),a(e,R1(o,-t,s)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,R1(o,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,i){return P1(this,e,t,i)}inXRange(e,t){return P1(this,e,null,t)}inYRange(e,t){return P1(this,null,e,t)}getCenterPoint(e){let{x:t,y:i,base:r,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(t+r)/2:t,y:o?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}},Gee=Object.freeze({__proto__:null,ArcElement:q1,BarElement:G1,LineElement:S_,PointElement:Uee}),K1=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],fB=K1.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function ZB(n){return K1[n%K1.length]}function JB(n){return fB[n%fB.length]}function Kee(n,e){return n.borderColor=ZB(e),n.backgroundColor=JB(e),++e}function Yee(n,e){return n.backgroundColor=n.data.map(()=>ZB(e++)),e}function Qee(n,e){return n.backgroundColor=n.data.map(()=>JB(e++)),e}function Xee(n){let e=0;return(t,i)=>{let r=n.getDatasetMeta(i).controller;r instanceof nD?e=Yee(t,e):r instanceof jB?e=Qee(t,e):r&&(e=Kee(t,e))}}function pB(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function Zee(n){return n&&(n.borderColor||n.backgroundColor)}function Jee(){return St.borderColor!=="rgba(0,0,0,0.1)"||St.backgroundColor!=="rgba(0,0,0,0.1)"}var ete={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;let{data:{datasets:i},options:r}=n.config,{elements:o}=r,s=pB(i)||Zee(r)||o&&pB(o)||Jee();if(!t.forceOverride&&s)return;let a=Xee(n);i.forEach(a)}};function tte(n,e,t,i,r){let o=r.samples||i;if(o>=t)return n.slice(e,e+t);let s=[],a=(t-2)/(o-2),c=0,l=e+t-1,u=e,h,f,y,b,E;for(s[c++]=n[u],h=0;h<o-2;h++){let I=0,R=0,F,B=Math.floor((h+1)*a)+1+e,z=Math.min(Math.floor((h+2)*a)+1,t)+e,$=z-B;for(F=B;F<z;F++)I+=n[F].x,R+=n[F].y;I/=$,R/=$;let U=Math.floor(h*a)+1+e,x=Math.min(Math.floor((h+1)*a)+1,t)+e,{x:T,y:D}=n[u];for(y=b=-1,F=U;F<x;F++)b=.5*Math.abs((T-I)*(n[F].y-D)-(T-n[F].x)*(R-D)),b>y&&(y=b,f=n[F],E=F);s[c++]=f,u=E}return s[c++]=n[l],s}function nte(n,e,t,i){let r=0,o=0,s,a,c,l,u,h,f,y,b,E,I=[],R=e+t-1,F=n[e].x,z=n[R].x-F;for(s=e;s<e+t;++s){a=n[s],c=(a.x-F)/z*i,l=a.y;let $=c|0;if($===u)l<b?(b=l,h=s):l>E&&(E=l,f=s),r=(o*r+a.x)/++o;else{let U=s-1;if(!Ne(h)&&!Ne(f)){let x=Math.min(h,f),T=Math.max(h,f);x!==y&&x!==U&&I.push(fe(Z({},n[x]),{x:r})),T!==y&&T!==U&&I.push(fe(Z({},n[T]),{x:r}))}s>0&&U!==y&&I.push(n[U]),I.push(a),u=$,o=0,b=E=l,h=f=y=s}}return I}function ej(n){if(n._decimated){let e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function mB(n){n.data.datasets.forEach(e=>{ej(e)})}function ite(n,e){let t=e.length,i=0,r,{iScale:o}=n,{min:s,max:a,minDefined:c,maxDefined:l}=o.getUserBounds();return c&&(i=an(ro(e,o.axis,s).lo,0,t-1)),l?r=an(ro(e,o.axis,a).hi+1,i,t)-i:r=t-i,{start:i,count:r}}var rte={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){mB(n);return}let i=n.width;n.data.datasets.forEach((r,o)=>{let{_data:s,indexAxis:a}=r,c=n.getDatasetMeta(o),l=s||r.data;if(zu([a,n.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;let u=n.scales[c.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:h,count:f}=ite(c,l),y=t.threshold||4*i;if(f<=y){ej(r);return}Ne(s)&&(r._data=l,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(E){this._data=E}}));let b;switch(t.algorithm){case"lttb":b=tte(l,h,f,i,t);break;case"min-max":b=nte(l,h,f,i);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}r._decimated=b})},destroy(n){mB(n)}};function ote(n,e,t){let i=n.segments,r=n.points,o=e.points,s=[];for(let a of i){let{start:c,end:l}=a;l=T_(c,l,r);let u=Y1(t,r[c],r[l],a.loop);if(!e.segments){s.push({source:a,target:u,start:r[c],end:r[l]});continue}let h=E1(e,u);for(let f of h){let y=Y1(t,o[f.start],o[f.end],f.loop),b=w1(a,r,y);for(let E of b)s.push({source:E,target:f,start:{[t]:gB(u,y,"start",Math.max)},end:{[t]:gB(u,y,"end",Math.min)}})}}return s}function Y1(n,e,t,i){if(i)return;let r=e[n],o=t[n];return n==="angle"&&(r=Tn(r),o=Tn(o)),{property:n,start:r,end:o}}function ste(n,e){let{x:t=null,y:i=null}=n||{},r=e.points,o=[];return e.segments.forEach(({start:s,end:a})=>{a=T_(s,a,r);let c=r[s],l=r[a];i!==null?(o.push({x:c.x,y:i}),o.push({x:l.x,y:i})):t!==null&&(o.push({x:t,y:c.y}),o.push({x:t,y:l.y}))}),o}function T_(n,e,t){for(;e>n;e--){let i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function gB(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function tj(n,e){let t=[],i=!1;return bt(n)?(i=!0,t=n):t=ste(n,e),t.length?new S_({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function yB(n){return n&&n.fill!==!1}function ate(n,e,t){let r=n[e].fill,o=[e],s;if(!t)return r;for(;r!==!1&&o.indexOf(r)===-1;){if(!Rt(r))return r;if(s=n[r],!s)return!1;if(s.visible)return r;o.push(r),r=s.fill}return!1}function cte(n,e,t){let i=hte(n);if(Oe(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Rt(r)&&Math.floor(r)===r?lte(i[0],e,r,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function lte(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function ute(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:Oe(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function dte(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:Oe(n)?i=n.value:i=e.getBaseValue(),i}function hte(n){let e=n.options,t=e.fill,i=Te(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function fte(n){let{scale:e,index:t,line:i}=n,r=[],o=i.segments,s=i.points,a=pte(e,t);a.push(tj({x:null,y:e.bottom},i));for(let c=0;c<o.length;c++){let l=o[c];for(let u=l.start;u<=l.end;u++)mte(r,s[u],a)}return new S_({points:r,options:{}})}function pte(n,e){let t=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){let o=i[r];if(o.index===e)break;o.hidden||t.unshift(o.dataset)}return t}function mte(n,e,t){let i=[];for(let r=0;r<t.length;r++){let o=t[r],{first:s,last:a,point:c}=gte(o,e,"x");if(!(!c||s&&a)){if(s)i.unshift(c);else if(n.push(c),!a)break}}n.push(...i)}function gte(n,e,t){let i=n.interpolate(e,t);if(!i)return{};let r=i[t],o=n.segments,s=n.points,a=!1,c=!1;for(let l=0;l<o.length;l++){let u=o[l],h=s[u.start][t],f=s[u.end][t];if(ao(r,h,f)){a=r===h,c=r===f;break}}return{first:a,last:c,point:i}}var E_=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){let{x:r,y:o,radius:s}=this;return t=t||{start:0,end:wt},e.arc(r,o,s,t.end,t.start,!0),!i.bounds}interpolate(e){let{x:t,y:i,radius:r}=this,o=e.angle;return{x:t+Math.cos(o)*r,y:i+Math.sin(o)*r,angle:o}}};function yte(n){let{chart:e,fill:t,line:i}=n;if(Rt(t))return vte(e,t);if(t==="stack")return fte(n);if(t==="shape")return!0;let r=_te(n);return r instanceof E_?r:tj(r,i)}function vte(n,e){let t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function _te(n){return(n.scale||{}).getPointPositionForValue?wte(n):bte(n)}function bte(n){let{scale:e={},fill:t}=n,i=ute(t,e);if(Rt(i)){let r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function wte(n){let{scale:e,fill:t}=n,i=e.options,r=e.getLabels().length,o=i.reverse?e.max:e.min,s=dte(t,e,o),a=[];if(i.grid.circular){let c=e.getPointPositionForValue(0,o);return new E_({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(s)})}for(let c=0;c<r;++c)a.push(e.getPointPositionForValue(c,s));return a}function k1(n,e,t){let i=yte(e),{chart:r,index:o,line:s,scale:a,axis:c}=e,l=s.options,u=l.fill,h=l.backgroundColor,{above:f=h,below:y=h}=u||{},b=r.getDatasetMeta(o),E=I1(r,b);i&&s.points.length&&(bf(n,t),Ete(n,{line:s,target:i,above:f,below:y,area:t,scale:a,axis:c,clip:E}),wf(n))}function Ete(n,e){let{line:t,target:i,above:r,below:o,area:s,scale:a,clip:c}=e,l=t._loop?"angle":e.axis;n.save();let u=o;o!==r&&(l==="x"?(vB(n,i,s.top),N1(n,{line:t,target:i,color:r,scale:a,property:l,clip:c}),n.restore(),n.save(),vB(n,i,s.bottom)):l==="y"&&(_B(n,i,s.left),N1(n,{line:t,target:i,color:o,scale:a,property:l,clip:c}),n.restore(),n.save(),_B(n,i,s.right),u=r)),N1(n,{line:t,target:i,color:u,scale:a,property:l,clip:c}),n.restore()}function vB(n,e,t){let{segments:i,points:r}=e,o=!0,s=!1;n.beginPath();for(let a of i){let{start:c,end:l}=a,u=r[c],h=r[T_(c,l,r)];o?(n.moveTo(u.x,u.y),o=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),s=!!e.pathSegment(n,a,{move:s}),s?n.closePath():n.lineTo(h.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function _B(n,e,t){let{segments:i,points:r}=e,o=!0,s=!1;n.beginPath();for(let a of i){let{start:c,end:l}=a,u=r[c],h=r[T_(c,l,r)];o?(n.moveTo(u.x,u.y),o=!1):(n.lineTo(t,u.y),n.lineTo(u.x,u.y)),s=!!e.pathSegment(n,a,{move:s}),s?n.closePath():n.lineTo(t,h.y)}n.lineTo(t,e.first().y),n.closePath(),n.clip()}function N1(n,e){let{line:t,target:i,property:r,color:o,scale:s,clip:a}=e,c=ote(t,i,r);for(let{source:l,target:u,start:h,end:f}of c){let{style:{backgroundColor:y=o}={}}=l,b=i!==!0;n.save(),n.fillStyle=y,Ite(n,s,a,b&&Y1(r,h,f)),n.beginPath();let E=!!t.pathSegment(n,l),I;if(b){E?n.closePath():bB(n,i,f,r);let R=!!i.pathSegment(n,u,{move:E,reverse:!0});I=E&&R,I||bB(n,i,h,r)}n.closePath(),n.fill(I?"evenodd":"nonzero"),n.restore()}}function Ite(n,e,t,i){let r=e.chart.chartArea,{property:o,start:s,end:a}=i||{};if(o==="x"||o==="y"){let c,l,u,h;o==="x"?(c=s,l=r.top,u=a,h=r.bottom):(c=r.left,l=s,u=r.right,h=a),n.beginPath(),t&&(c=Math.max(c,t.left),u=Math.min(u,t.right),l=Math.max(l,t.top),h=Math.min(h,t.bottom)),n.rect(c,l,u-c,h-l),n.clip()}}function bB(n,e,t,i){let r=e.interpolate(t,i);r&&n.lineTo(r.x,r.y)}var Cte={id:"filler",afterDatasetsUpdate(n,e,t){let i=(n.data.datasets||[]).length,r=[],o,s,a,c;for(s=0;s<i;++s)o=n.getDatasetMeta(s),a=o.dataset,c=null,a&&a.options&&a instanceof S_&&(c={visible:n.isDatasetVisible(s),index:s,fill:cte(a,s,i),chart:n,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=c,r.push(c);for(s=0;s<i;++s)c=r[s],!(!c||c.fill===!1)&&(c.fill=ate(r,s,t.propagate))},beforeDraw(n,e,t){let i=t.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),o=n.chartArea;for(let s=r.length-1;s>=0;--s){let a=r[s].$filler;a&&(a.line.updateControlPoints(o,a.axis),i&&a.fill&&k1(n.ctx,a,o))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;let i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){let o=i[r].$filler;yB(o)&&k1(n.ctx,o,n.chartArea)}},beforeDatasetDraw(n,e,t){let i=e.meta.$filler;!yB(i)||t.drawTime!=="beforeDatasetDraw"||k1(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},wB=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},Ste=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index,I_=class extends Er{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=ut(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}let i=e.labels,r=nn(i.font),o=r.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=wB(i,o),l,u;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,u=this._fitRows(s,o,a,c)+10):(u=this.maxHeight,l=this._fitCols(s,r,a,c)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,r){let{ctx:o,maxWidth:s,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.lineWidths=[0],u=r+a,h=e;o.textAlign="left",o.textBaseline="middle";let f=-1,y=-u;return this.legendItems.forEach((b,E)=>{let I=i+t/2+o.measureText(b.text).width;(E===0||l[l.length-1]+I+2*a>s)&&(h+=u,l[l.length-(E>0?0:1)]=0,y+=u,f++),c[E]={left:0,top:y,row:f,width:I,height:r},l[l.length-1]+=I+a}),h}_fitCols(e,t,i,r){let{ctx:o,maxHeight:s,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.columnSizes=[],u=s-e,h=a,f=0,y=0,b=0,E=0;return this.legendItems.forEach((I,R)=>{let{itemWidth:F,itemHeight:B}=Tte(i,t,o,I,r);R>0&&y+B+2*a>u&&(h+=f+a,l.push({width:f,height:y}),b+=f+a,E++,f=y=0),c[R]={left:b,top:y,col:E,width:F,height:B},f=Math.max(f,F),y+=B+a}),h+=f,l.push({width:f,height:y}),h}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:r},rtl:o}}=this,s=Oc(o,this.left,this.width);if(this.isHorizontal()){let a=0,c=Dn(i,this.left+r,this.right-this.lineWidths[a]);for(let l of t)a!==l.row&&(a=l.row,c=Dn(i,this.left+r,this.right-this.lineWidths[a])),l.top+=this.top+e+r,l.left=s.leftForLtr(s.x(c),l.width),c+=l.width+r}else{let a=0,c=Dn(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(let l of t)l.col!==a&&(a=l.col,c=Dn(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),l.top=c,l.left+=this.left+r,l.left=s.leftForLtr(s.x(l.left),l.width),c+=l.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;bf(e,this),this._draw(),wf(e)}}_draw(){let{options:e,columnSizes:t,lineWidths:i,ctx:r}=this,{align:o,labels:s}=e,a=St.color,c=Oc(e.rtl,this.left,this.width),l=nn(s.font),{padding:u}=s,h=l.size,f=h/2,y;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;let{boxWidth:b,boxHeight:E,itemHeight:I}=wB(s,h),R=function(U,x,T){if(isNaN(b)||b<=0||isNaN(E)||E<0)return;r.save();let D=Te(T.lineWidth,1);if(r.fillStyle=Te(T.fillStyle,a),r.lineCap=Te(T.lineCap,"butt"),r.lineDashOffset=Te(T.lineDashOffset,0),r.lineJoin=Te(T.lineJoin,"miter"),r.lineWidth=D,r.strokeStyle=Te(T.strokeStyle,a),r.setLineDash(Te(T.lineDash,[])),s.usePointStyle){let P={radius:E*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:D},N=c.xPlus(U,b/2),O=x+f;d1(r,P,N,O,s.pointStyleWidth&&b)}else{let P=x+Math.max((h-E)/2,0),N=c.leftForLtr(U,b),O=pa(T.borderRadius);r.beginPath(),Object.values(O).some(M=>M!==0)?Hu(r,{x:N,y:P,w:b,h:E,radius:O}):r.rect(N,P,b,E),r.fill(),D!==0&&r.stroke()}r.restore()},F=function(U,x,T){fa(r,T.text,U,x+I/2,l,{strikethrough:T.hidden,textAlign:c.textAlign(T.textAlign)})},B=this.isHorizontal(),z=this._computeTitleHeight();B?y={x:Dn(o,this.left+u,this.right-i[0]),y:this.top+u+z,line:0}:y={x:this.left+u,y:Dn(o,this.top+z+u,this.bottom-t[0].height),line:0},_1(this.ctx,e.textDirection);let $=I+u;this.legendItems.forEach((U,x)=>{r.strokeStyle=U.fontColor,r.fillStyle=U.fontColor;let T=r.measureText(U.text).width,D=c.textAlign(U.textAlign||(U.textAlign=s.textAlign)),P=b+f+T,N=y.x,O=y.y;c.setWidth(this.width),B?x>0&&N+P+u>this.right&&(O=y.y+=$,y.line++,N=y.x=Dn(o,this.left+u,this.right-i[y.line])):x>0&&O+$>this.bottom&&(N=y.x=N+t[y.line].width+u,y.line++,O=y.y=Dn(o,this.top+z+u,this.bottom-t[y.line].height));let M=c.x(N);if(R(M,O,U),N=wV(D,N+b+f,B?N+P:this.right,e.rtl),F(c.x(N),O,U),B)y.x+=P+u;else if(typeof U.text!="string"){let At=l.lineHeight;y.y+=nj(U,At)+u}else y.y+=$}),b1(this.ctx,e.textDirection)}drawTitle(){let e=this.options,t=e.title,i=nn(t.font),r=xn(t.padding);if(!t.display)return;let o=Oc(e.rtl,this.left,this.width),s=this.ctx,a=t.position,c=i.size/2,l=r.top+c,u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+l,h=Dn(e.align,h,this.right-f);else{let b=this.columnSizes.reduce((E,I)=>Math.max(E,I.height),0);u=l+Dn(e.align,this.top,this.bottom-b-e.labels.padding-this._computeTitleHeight())}let y=Dn(a,h,h+f);s.textAlign=o.textAlign(n_(a)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=i.string,fa(s,t.text,y,u,i)}_computeTitleHeight(){let e=this.options.title,t=nn(e.font),i=xn(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,r,o;if(ao(e,this.left,this.right)&&ao(t,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(r=o[i],ao(e,r.left,r.left+r.width)&&ao(t,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){let t=this.options;if(!Ate(e.type,t))return;let i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let r=this._hoveredItem,o=Ste(r,i);r&&!o&&ut(t.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!o&&ut(t.onHover,[e,i,this],this)}else i&&ut(t.onClick,[e,i,this],this)}};function Tte(n,e,t,i,r){let o=Dte(i,n,e,t),s=xte(r,i,e.lineHeight);return{itemWidth:o,itemHeight:s}}function Dte(n,e,t,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((o,s)=>o.length>s.length?o:s)),e+t.size/2+i.measureText(r).width}function xte(n,e,t){let i=n;return typeof e.text!="string"&&(i=nj(e,t)),i}function nj(n,e){let t=n.text?n.text.length:0;return e*t}function Ate(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var Mte={id:"legend",_element:I_,start(n,e,t){let i=n.legend=new I_({ctx:n.ctx,options:t,chart:n});Gn.configure(n,i,t),Gn.addBox(n,i)},stop(n){Gn.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){let i=n.legend;Gn.configure(n,i,t),i.options=t},afterUpdate(n){let e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){let i=e.datasetIndex,r=t.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:r,color:o,useBorderRadius:s,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{let l=c.controller.getStyle(t?0:void 0),u=xn(l.borderWidth);return{text:e[c.index].label,fillStyle:l.backgroundColor,fontColor:o,hidden:!c.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:s&&(a||l.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},Mf=class extends Er{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){let i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let r=bt(i.text)?i.text.length:1;this._padding=xn(i.padding);let o=r*nn(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:t,left:i,bottom:r,right:o,options:s}=this,a=s.align,c=0,l,u,h;return this.isHorizontal()?(u=Dn(a,i,o),h=t+e,l=o-i):(s.position==="left"?(u=i+e,h=Dn(a,r,t),c=We*-.5):(u=o-e,h=Dn(a,t,r),c=We*.5),l=r-t),{titleX:u,titleY:h,maxWidth:l,rotation:c}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let i=nn(t.font),o=i.lineHeight/2+this._padding.top,{titleX:s,titleY:a,maxWidth:c,rotation:l}=this._drawArgs(o);fa(e,t.text,0,0,i,{color:t.color,maxWidth:c,rotation:l,textAlign:n_(t.align),textBaseline:"middle",translation:[s,a]})}};function Pte(n,e){let t=new Mf({ctx:n.ctx,options:e,chart:n});Gn.configure(n,t,e),Gn.addBox(n,t),n.titleBlock=t}var Rte={id:"title",_element:Mf,start(n,e,t){Pte(n,t)},stop(n){let e=n.titleBlock;Gn.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){let i=n.titleBlock;Gn.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},f_=new WeakMap,kte={id:"subtitle",start(n,e,t){let i=new Mf({ctx:n.ctx,options:t,chart:n});Gn.configure(n,i,t),Gn.addBox(n,i),f_.set(n,i)},stop(n){Gn.removeBox(n,f_.get(n)),f_.delete(n)},beforeUpdate(n,e,t){let i=f_.get(n);Gn.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},xf={average(n){if(!n.length)return!1;let e,t,i=new Set,r=0,o=0;for(e=0,t=n.length;e<t;++e){let a=n[e].element;if(a&&a.hasValue()){let c=a.tooltipPosition();i.add(c.x),r+=c.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((a,c)=>a+c)/i.size,y:r/o}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,r=Number.POSITIVE_INFINITY,o,s,a;for(o=0,s=n.length;o<s;++o){let c=n[o].element;if(c&&c.hasValue()){let l=c.getCenterPoint(),u=Xv(e,l);u<r&&(r=u,a=c)}}if(a){let c=a.tooltipPosition();t=c.x,i=c.y}return{x:t,y:i}}};function co(n,e){return e&&(bt(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function ns(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function Nte(n,e){let{element:t,datasetIndex:i,index:r}=e,o=n.getDatasetMeta(i).controller,{label:s,value:a}=o.getLabelAndValue(r);return{chart:n,label:s,parsed:o.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:a,dataset:o.getDataset(),dataIndex:r,datasetIndex:i,element:t}}function EB(n,e){let t=n.chart.ctx,{body:i,footer:r,title:o}=n,{boxWidth:s,boxHeight:a}=e,c=nn(e.bodyFont),l=nn(e.titleFont),u=nn(e.footerFont),h=o.length,f=r.length,y=i.length,b=xn(e.padding),E=b.height,I=0,R=i.reduce((z,$)=>z+$.before.length+$.lines.length+$.after.length,0);if(R+=n.beforeBody.length+n.afterBody.length,h&&(E+=h*l.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),R){let z=e.displayColors?Math.max(a,c.lineHeight):c.lineHeight;E+=y*z+(R-y)*c.lineHeight+(R-1)*e.bodySpacing}f&&(E+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let F=0,B=function(z){I=Math.max(I,t.measureText(z).width+F)};return t.save(),t.font=l.string,tt(n.title,B),t.font=c.string,tt(n.beforeBody.concat(n.afterBody),B),F=e.displayColors?s+2+e.boxPadding:0,tt(i,z=>{tt(z.before,B),tt(z.lines,B),tt(z.after,B)}),F=0,t.font=u.string,tt(n.footer,B),t.restore(),I+=b.width,{width:I,height:E}}function Ote(n,e){let{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function Fte(n,e,t,i){let{x:r,width:o}=i,s=t.caretSize+t.caretPadding;if(n==="left"&&r+o+s>e.width||n==="right"&&r-o-s<0)return!0}function Lte(n,e,t,i){let{x:r,width:o}=t,{width:s,chartArea:{left:a,right:c}}=n,l="center";return i==="center"?l=r<=(a+c)/2?"left":"right":r<=o/2?l="left":r>=s-o/2&&(l="right"),Fte(l,n,e,t)&&(l="center"),l}function IB(n,e,t){let i=t.yAlign||e.yAlign||Ote(n,t);return{xAlign:t.xAlign||e.xAlign||Lte(n,e,t,i),yAlign:i}}function Vte(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function Bte(n,e,t){let{y:i,height:r}=n;return e==="top"?i+=t:e==="bottom"?i-=r+t:i-=r/2,i}function CB(n,e,t,i){let{caretSize:r,caretPadding:o,cornerRadius:s}=n,{xAlign:a,yAlign:c}=t,l=r+o,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:y}=pa(s),b=Vte(e,a),E=Bte(e,c,l);return c==="center"?a==="left"?b+=l:a==="right"&&(b-=l):a==="left"?b-=Math.max(u,f)+r:a==="right"&&(b+=Math.max(h,y)+r),{x:an(b,0,i.width-e.width),y:an(E,0,i.height-e.height)}}function p_(n,e,t){let i=xn(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function SB(n){return co([],ns(n))}function jte(n,e,t){return es(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function TB(n,e){let t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}var ij={beforeTitle:so,title(n){if(n.length>0){let e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:so,beforeBody:so,beforeLabel:so,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");let t=n.formattedValue;return Ne(t)||(e+=t),e},labelColor(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:so,afterBody:so,beforeFooter:so,footer:so,afterFooter:so};function di(n,e,t,i){let r=n[e].call(t,i);return typeof r>"u"?ij[e].call(t,i):r}var DB=(()=>{class n extends Er{static positioners=xf;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let i=this.chart,r=this.options.setContext(this.getContext()),o=r.enabled&&i.options.animation&&r.animations,s=new v_(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=jte(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){let{callbacks:r}=i,o=di(r,"beforeTitle",this,t),s=di(r,"title",this,t),a=di(r,"afterTitle",this,t),c=[];return c=co(c,ns(o)),c=co(c,ns(s)),c=co(c,ns(a)),c}getBeforeBody(t,i){return SB(di(i.callbacks,"beforeBody",this,t))}getBody(t,i){let{callbacks:r}=i,o=[];return tt(t,s=>{let a={before:[],lines:[],after:[]},c=TB(r,s);co(a.before,ns(di(c,"beforeLabel",this,s))),co(a.lines,di(c,"label",this,s)),co(a.after,ns(di(c,"afterLabel",this,s))),o.push(a)}),o}getAfterBody(t,i){return SB(di(i.callbacks,"afterBody",this,t))}getFooter(t,i){let{callbacks:r}=i,o=di(r,"beforeFooter",this,t),s=di(r,"footer",this,t),a=di(r,"afterFooter",this,t),c=[];return c=co(c,ns(o)),c=co(c,ns(s)),c=co(c,ns(a)),c}_createItems(t){let i=this._active,r=this.chart.data,o=[],s=[],a=[],c=[],l,u;for(l=0,u=i.length;l<u;++l)c.push(Nte(this.chart,i[l]));return t.filter&&(c=c.filter((h,f,y)=>t.filter(h,f,y,r))),t.itemSort&&(c=c.sort((h,f)=>t.itemSort(h,f,r))),tt(c,h=>{let f=TB(t.callbacks,h);o.push(di(f,"labelColor",this,h)),s.push(di(f,"labelPointStyle",this,h)),a.push(di(f,"labelTextColor",this,h))}),this.labelColors=o,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=c,c}update(t,i){let r=this.options.setContext(this.getContext()),o=this._active,s,a=[];if(!o.length)this.opacity!==0&&(s={opacity:0});else{let c=xf[r.position].call(this,o,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);let l=this._size=EB(this,r),u=Object.assign({},c,l),h=IB(this.chart,r,u),f=CB(r,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:c.x,caretY:c.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,r,o){let s=this.getCaretPosition(t,r,o);i.lineTo(s.x1,s.y1),i.lineTo(s.x2,s.y2),i.lineTo(s.x3,s.y3)}getCaretPosition(t,i,r){let{xAlign:o,yAlign:s}=this,{caretSize:a,cornerRadius:c}=r,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:f}=pa(c),{x:y,y:b}=t,{width:E,height:I}=i,R,F,B,z,$,U;return s==="center"?($=b+I/2,o==="left"?(R=y,F=R-a,z=$+a,U=$-a):(R=y+E,F=R+a,z=$-a,U=$+a),B=R):(o==="left"?F=y+Math.max(l,h)+a:o==="right"?F=y+E-Math.max(u,f)-a:F=this.caretX,s==="top"?(z=b,$=z-a,R=F-a,B=F+a):(z=b+I,$=z+a,R=F+a,B=F-a),U=z),{x1:R,x2:F,x3:B,y1:z,y2:$,y3:U}}drawTitle(t,i,r){let o=this.title,s=o.length,a,c,l;if(s){let u=Oc(r.rtl,this.x,this.width);for(t.x=p_(this,r.titleAlign,r),i.textAlign=u.textAlign(r.titleAlign),i.textBaseline="middle",a=nn(r.titleFont),c=r.titleSpacing,i.fillStyle=r.titleColor,i.font=a.string,l=0;l<s;++l)i.fillText(o[l],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+c,l+1===s&&(t.y+=r.titleMarginBottom-c)}}_drawColorBox(t,i,r,o,s){let a=this.labelColors[r],c=this.labelPointStyles[r],{boxHeight:l,boxWidth:u}=s,h=nn(s.bodyFont),f=p_(this,"left",s),y=o.x(f),b=l<h.lineHeight?(h.lineHeight-l)/2:0,E=i.y+b;if(s.usePointStyle){let I={radius:Math.min(u,l)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},R=o.leftForLtr(y,u)+u/2,F=E+l/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,r_(t,I,R,F),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,r_(t,I,R,F)}else{t.lineWidth=Oe(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;let I=o.leftForLtr(y,u),R=o.leftForLtr(o.xPlus(y,1),u-2),F=pa(a.borderRadius);Object.values(F).some(B=>B!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,Hu(t,{x:I,y:E,w:u,h:l,radius:F}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),Hu(t,{x:R,y:E+1,w:u-2,h:l-2,radius:F}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(I,E,u,l),t.strokeRect(I,E,u,l),t.fillStyle=a.backgroundColor,t.fillRect(R,E+1,u-2,l-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,i,r){let{body:o}=this,{bodySpacing:s,bodyAlign:a,displayColors:c,boxHeight:l,boxWidth:u,boxPadding:h}=r,f=nn(r.bodyFont),y=f.lineHeight,b=0,E=Oc(r.rtl,this.x,this.width),I=function(D){i.fillText(D,E.x(t.x+b),t.y+y/2),t.y+=y+s},R=E.textAlign(a),F,B,z,$,U,x,T;for(i.textAlign=a,i.textBaseline="middle",i.font=f.string,t.x=p_(this,R,r),i.fillStyle=r.bodyColor,tt(this.beforeBody,I),b=c&&R!=="right"?a==="center"?u/2+h:u+2+h:0,$=0,x=o.length;$<x;++$){for(F=o[$],B=this.labelTextColors[$],i.fillStyle=B,tt(F.before,I),z=F.lines,c&&z.length&&(this._drawColorBox(i,t,$,E,r),y=Math.max(f.lineHeight,l)),U=0,T=z.length;U<T;++U)I(z[U]),y=f.lineHeight;tt(F.after,I)}b=0,y=f.lineHeight,tt(this.afterBody,I),t.y-=s}drawFooter(t,i,r){let o=this.footer,s=o.length,a,c;if(s){let l=Oc(r.rtl,this.x,this.width);for(t.x=p_(this,r.footerAlign,r),t.y+=r.footerMarginTop,i.textAlign=l.textAlign(r.footerAlign),i.textBaseline="middle",a=nn(r.footerFont),i.fillStyle=r.footerColor,i.font=a.string,c=0;c<s;++c)i.fillText(o[c],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+r.footerSpacing}}drawBackground(t,i,r,o){let{xAlign:s,yAlign:a}=this,{x:c,y:l}=t,{width:u,height:h}=r,{topLeft:f,topRight:y,bottomLeft:b,bottomRight:E}=pa(o.cornerRadius);i.fillStyle=o.backgroundColor,i.strokeStyle=o.borderColor,i.lineWidth=o.borderWidth,i.beginPath(),i.moveTo(c+f,l),a==="top"&&this.drawCaret(t,i,r,o),i.lineTo(c+u-y,l),i.quadraticCurveTo(c+u,l,c+u,l+y),a==="center"&&s==="right"&&this.drawCaret(t,i,r,o),i.lineTo(c+u,l+h-E),i.quadraticCurveTo(c+u,l+h,c+u-E,l+h),a==="bottom"&&this.drawCaret(t,i,r,o),i.lineTo(c+b,l+h),i.quadraticCurveTo(c,l+h,c,l+h-b),a==="center"&&s==="left"&&this.drawCaret(t,i,r,o),i.lineTo(c,l+f),i.quadraticCurveTo(c,l,c+f,l),i.closePath(),i.fill(),o.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){let i=this.chart,r=this.$animations,o=r&&r.x,s=r&&r.y;if(o||s){let a=xf[t.position].call(this,this._active,this._eventPosition);if(!a)return;let c=this._size=EB(this,t),l=Object.assign({},a,this._size),u=IB(i,t,l),h=CB(t,l,u,i);(o._to!==h.x||s._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){let i=this.options.setContext(this.getContext()),r=this.opacity;if(!r)return;this._updateAnimationTarget(i);let o={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;let a=xn(i.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&c&&(t.save(),t.globalAlpha=r,this.drawBackground(s,t,o,i),_1(t,i.textDirection),s.y+=a.top,this.drawTitle(s,t,i),this.drawBody(s,t,i),this.drawFooter(s,t,i),b1(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){let r=this._active,o=t.map(({datasetIndex:c,index:l})=>{let u=this.chart.getDatasetMeta(c);if(!u)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:u.data[l],index:l}}),s=!vf(r,o),a=this._positionChanged(o,i);(s||a)&&(this._active=o,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,r=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let o=this.options,s=this._active||[],a=this._getActiveElements(t,s,i,r),c=this._positionChanged(a,t),l=i||!vf(a,s)||c;return l&&(this._active=a,(o.enabled||o.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),l}_getActiveElements(t,i,r,o){let s=this.options;if(t.type==="mouseout")return[];if(!o)return i.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);let a=this.chart.getElementsAtEventForMode(t,s.mode,s,r);return s.reverse&&a.reverse(),a}_positionChanged(t,i){let{caretX:r,caretY:o,options:s}=this,a=xf[s.position].call(this,t,i);return a!==!1&&(r!==a.x||o!==a.y)}}return n})(),Ute={id:"tooltip",_element:DB,positioners:xf,afterInit(n,e,t){t&&(n.tooltip=new DB({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){let e=n.tooltip;if(e&&e._willRender()){let t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",fe(Z({},t),{cancelable:!0}))===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){let t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ij},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},$te=Object.freeze({__proto__:null,Colors:ete,Decimation:rte,Filler:Cte,Legend:Mte,SubTitle:kte,Title:Rte,Tooltip:Ute}),Hte=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function zte(n,e,t,i){let r=n.indexOf(e);if(r===-1)return Hte(n,e,t,i);let o=n.lastIndexOf(e);return r!==o?t:r}var qte=(n,e)=>n===null?null:an(Math.round(n),0,e);function xB(n){let e=this.getLabels();return n>=0&&n<e.length?e[n]:n}var Wte=(()=>{class n extends Vc{static id="category";static defaults={ticks:{callback:xB}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let i=this._addedLabels;if(i.length){let r=this.getLabels();for(let{index:o,label:s}of i)r[o]===s&&r.splice(o,1);this._addedLabels=[]}super.init(t)}parse(t,i){if(Ne(t))return null;let r=this.getLabels();return i=isFinite(i)&&r[i]===t?i:zte(r,t,Te(i,t),this._addedLabels),qte(i,r.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:r,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),i||(o=this.getLabels().length-1)),this.min=r,this.max=o}buildTicks(){let t=this.min,i=this.max,r=this.options.offset,o=[],s=this.getLabels();s=t===0&&i===s.length-1?s:s.slice(t,i+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=t;a<=i;a++)o.push({value:a});return o}getLabelForValue(t){return xB.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}return n})();function Gte(n,e){let t=[],{bounds:r,step:o,min:s,max:a,precision:c,count:l,maxTicks:u,maxDigits:h,includeBounds:f}=n,y=o||1,b=u-1,{min:E,max:I}=e,R=!Ne(s),F=!Ne(a),B=!Ne(l),z=(I-E)/(h+1),$=ZT((I-E)/b/y)*y,U,x,T,D;if($<1e-14&&!R&&!F)return[{value:E},{value:I}];D=Math.ceil(I/$)-Math.floor(E/$),D>b&&($=ZT(D*$/b/y)*y),Ne(c)||(U=Math.pow(10,c),$=Math.ceil($*U)/U),r==="ticks"?(x=Math.floor(E/$)*$,T=Math.ceil(I/$)*$):(x=E,T=I),R&&F&&o&&pV((a-s)/o,$/1e3)?(D=Math.round(Math.min((a-s)/$,u)),$=(a-s)/D,x=s,T=a):B?(x=R?s:x,T=F?a:T,D=l-1,$=(T-x)/D):(D=(T-x)/$,ju(D,Math.round(D),$/1e3)?D=Math.round(D):D=Math.ceil(D));let P=Math.max(e1($),e1(x));U=Math.pow(10,Ne(c)?P:c),x=Math.round(x*U)/U,T=Math.round(T*U)/U;let N=0;for(R&&(f&&x!==s?(t.push({value:s}),x<s&&N++,ju(Math.round((x+N*$)*U)/U,s,AB(s,z,n))&&N++):x<s&&N++);N<D;++N){let O=Math.round((x+N*$)*U)/U;if(F&&O>a)break;t.push({value:O})}return F&&f&&T!==a?t.length&&ju(t[t.length-1].value,a,AB(a,z,n))?t[t.length-1].value=a:t.push({value:a}):(!F||T===a)&&t.push({value:T}),t}function AB(n,e,{horizontal:t,minRotation:i}){let r=tr(i),o=(t?Math.sin(r):Math.cos(r))||.001,s=.75*e*(""+n).length;return Math.min(e/o,s)}var Gu=class extends Vc{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Ne(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:r,max:o}=this,s=c=>r=t?r:c,a=c=>o=i?o:c;if(e){let c=wr(r),l=wr(o);c<0&&l<0?a(0):c>0&&l>0&&s(0)}if(r===o){let c=o===0?1:Math.abs(o*.05);a(o+c),e||s(r-c)}this.min=r,this.max=o}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:t,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,t=e.ticks,i=this.getTickLimit();i=Math.max(2,i);let r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},o=this._range||this,s=Gte(r,o);return e.bounds==="ticks"&&JT(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){let e=this.ticks,t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){let r=(i-t)/Math.max(e.length-1,1)/2;t-=r,i+=r}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return $u(e,this.chart.options.locale,this.options.ticks.format)}},Q1=class extends Gu{static id="linear";static defaults={ticks:{callback:_f.formatters.numeric}};determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Rt(e)?e:0,this.max=Rt(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,i=tr(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,o.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},Pf=n=>Math.floor(Zo(n)),Lc=(n,e)=>Math.pow(10,Pf(n)+e);function MB(n){return n/Math.pow(10,Pf(n))===1}function PB(n,e,t){let i=Math.pow(10,t),r=Math.floor(n/i);return Math.ceil(e/i)-r}function Kte(n,e){let t=e-n,i=Pf(t);for(;PB(n,e,i)>10;)i++;for(;PB(n,e,i)<10;)i--;return Math.min(i,Pf(n))}function Yte(n,{min:e,max:t}){e=ui(n.min,e);let i=[],r=Pf(e),o=Kte(e,t),s=o<0?Math.pow(10,Math.abs(o)):1,a=Math.pow(10,o),c=r>o?Math.pow(10,r):0,l=Math.round((e-c)*s)/s,u=Math.floor((e-c)/a/10)*a*10,h=Math.floor((l-u)/Math.pow(10,o)),f=ui(n.min,Math.round((c+u+h*Math.pow(10,o))*s)/s);for(;f<t;)i.push({value:f,major:MB(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,s=o>=0?1:s),f=Math.round((c+u+h*Math.pow(10,o))*s)/s;let y=ui(n.max,f);return i.push({value:y,major:MB(y),significand:h}),i}var X1=class extends Vc{static id="logarithmic";static defaults={ticks:{callback:_f.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let i=Gu.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return Rt(i)&&i>0?i:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Rt(e)?Math.max(0,e):null,this.max=Rt(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Rt(this._userMin)&&(this.min=e===Lc(this.min,0)?Lc(this.min,-1):Lc(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),i=this.min,r=this.max,o=a=>i=e?i:a,s=a=>r=t?r:a;i===r&&(i<=0?(o(1),s(10)):(o(Lc(i,-1)),s(Lc(r,1)))),i<=0&&o(Lc(r,-1)),r<=0&&s(Lc(i,1)),this.min=i,this.max=r}buildTicks(){let e=this.options,t={min:this._userMin,max:this._userMax},i=Yte(t,this);return e.bounds==="ticks"&&JT(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":$u(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=Zo(e),this._valueRange=Zo(this.max)-Zo(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Zo(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}};function Z1(n){let e=n.ticks;if(e.display&&n.display){let t=xn(e.backdropPadding);return Te(e.font&&e.font.size,St.font.size)+t.height}return 0}function Qte(n,e,t){return t=bt(t)?t:[t],{w:IV(n,e.string,t),h:t.length*e.lineHeight}}function RB(n,e,t,i,r){return n===i||n===r?{start:e-t/2,end:e+t/2}:n<i||n>r?{start:e-t,end:e}:{start:e,end:e+t}}function Xte(n){let e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],r=[],o=n._pointLabels.length,s=n.options.pointLabels,a=s.centerPointLabels?We/o:0;for(let c=0;c<o;c++){let l=s.setContext(n.getPointLabelContext(c));r[c]=l.padding;let u=n.getPointPosition(c,n.drawingArea+r[c],a),h=nn(l.font),f=Qte(n.ctx,h,n._pointLabels[c]);i[c]=f;let y=Tn(n.getIndexAngle(c)+a),b=Math.round(e_(y)),E=RB(b,u.x,f.w,0,180),I=RB(b,u.y,f.h,90,270);Zte(t,e,y,E,I)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=tne(n,i,r)}function Zte(n,e,t,i,r){let o=Math.abs(Math.sin(t)),s=Math.abs(Math.cos(t)),a=0,c=0;i.start<e.l?(a=(e.l-i.start)/o,n.l=Math.min(n.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/o,n.r=Math.max(n.r,e.r+a)),r.start<e.t?(c=(e.t-r.start)/s,n.t=Math.min(n.t,e.t-c)):r.end>e.b&&(c=(r.end-e.b)/s,n.b=Math.max(n.b,e.b+c))}function Jte(n,e,t){let i=n.drawingArea,{extra:r,additionalAngle:o,padding:s,size:a}=t,c=n.getPointPosition(e,i+r+s,o),l=Math.round(e_(Tn(c.angle+jt))),u=rne(c.y,a.h,l),h=nne(l),f=ine(c.x,a.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:f,top:u,right:f+a.w,bottom:u+a.h}}function ene(n,e){if(!e)return!0;let{left:t,top:i,right:r,bottom:o}=n;return!(oo({x:t,y:i},e)||oo({x:t,y:o},e)||oo({x:r,y:i},e)||oo({x:r,y:o},e))}function tne(n,e,t){let i=[],r=n._pointLabels.length,o=n.options,{centerPointLabels:s,display:a}=o.pointLabels,c={extra:Z1(o)/2,additionalAngle:s?We/r:0},l;for(let u=0;u<r;u++){c.padding=t[u],c.size=e[u];let h=Jte(n,u,c);i.push(h),a==="auto"&&(h.visible=ene(h,l),h.visible&&(l=h))}return i}function nne(n){return n===0||n===180?"center":n<180?"left":"right"}function ine(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function rne(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function one(n,e,t){let{left:i,top:r,right:o,bottom:s}=t,{backdropColor:a}=e;if(!Ne(a)){let c=pa(e.borderRadius),l=xn(e.backdropPadding);n.fillStyle=a;let u=i-l.left,h=r-l.top,f=o-i+l.width,y=s-r+l.height;Object.values(c).some(b=>b!==0)?(n.beginPath(),Hu(n,{x:u,y:h,w:f,h:y,radius:c}),n.fill()):n.fillRect(u,h,f,y)}}function sne(n,e){let{ctx:t,options:{pointLabels:i}}=n;for(let r=e-1;r>=0;r--){let o=n._pointLabelItems[r];if(!o.visible)continue;let s=i.setContext(n.getPointLabelContext(r));one(t,s,o);let a=nn(s.font),{x:c,y:l,textAlign:u}=o;fa(t,n._pointLabels[r],c,l+a.lineHeight/2,a,{color:s.color,textAlign:u,textBaseline:"middle"})}}function rj(n,e,t,i){let{ctx:r}=n;if(t)r.arc(n.xCenter,n.yCenter,e,0,wt);else{let o=n.getPointPosition(0,e);r.moveTo(o.x,o.y);for(let s=1;s<i;s++)o=n.getPointPosition(s,e),r.lineTo(o.x,o.y)}}function ane(n,e,t,i,r){let o=n.ctx,s=e.circular,{color:a,lineWidth:c}=e;!s&&!i||!a||!c||t<0||(o.save(),o.strokeStyle=a,o.lineWidth=c,o.setLineDash(r.dash||[]),o.lineDashOffset=r.dashOffset,o.beginPath(),rj(n,t,s,i),o.closePath(),o.stroke(),o.restore())}function cne(n,e,t){return es(n,{label:t,index:e,type:"pointLabel"})}var J1=class extends Gu{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:_f.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=xn(Z1(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=Rt(e)&&!isNaN(e)?e:0,this.max=Rt(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Z1(this.options))}generateTickLabels(e){Gu.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{let r=ut(this.options.pointLabels.callback,[t,i],this);return r||r===0?r:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){let e=this.options;e.display&&e.pointLabels.display?Xte(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,r))}getIndexAngle(e){let t=wt/(this._pointLabels.length||1),i=this.options.startAngle||0;return Tn(e*t+tr(i))}getDistanceFromCenterForValue(e){if(Ne(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Ne(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){let i=t[e];return cne(this.getContext(),e,i)}}getPointPosition(e,t,i=0){let r=this.getIndexAngle(e)-jt+i;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:i,right:r,bottom:o}=this._pointLabelItems[e];return{left:t,top:i,right:r,bottom:o}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let i=this.ctx;i.save(),i.beginPath(),rj(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){let e=this.ctx,t=this.options,{angleLines:i,grid:r,border:o}=t,s=this._pointLabels.length,a,c,l;if(t.pointLabels.display&&sne(this,s),r.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);let f=this.getContext(h),y=r.setContext(f),b=o.setContext(f);ane(this,y,c,s,b)}}),i.display){for(e.save(),a=s-1;a>=0;a--){let u=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:f}=u;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;let r=this.getIndexAngle(0),o,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!t.reverse)return;let l=i.setContext(this.getContext(c)),u=nn(l.font);if(o=this.getDistanceFromCenterForValue(this.ticks[c].value),l.showLabelBackdrop){e.font=u.string,s=e.measureText(a.label).width,e.fillStyle=l.backdropColor;let h=xn(l.backdropPadding);e.fillRect(-s/2-h.left,-o-u.size/2-h.top,s+h.width,u.size+h.height)}fa(e,a.label,0,-o,u,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),e.restore()}drawTitle(){}},D_={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},hi=Object.keys(D_);function kB(n,e){return n-e}function NB(n,e){if(Ne(e))return null;let t=n._adapter,{parser:i,round:r,isoWeekday:o}=n._parseOpts,s=e;return typeof i=="function"&&(s=i(s)),Rt(s)||(s=typeof i=="string"?t.parse(s,i):t.parse(s)),s===null?null:(r&&(s=r==="week"&&(Nc(o)||o===!0)?t.startOf(s,"isoWeek",o):t.startOf(s,r)),+s)}function OB(n,e,t,i){let r=hi.length;for(let o=hi.indexOf(n);o<r-1;++o){let s=D_[hi[o]],a=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((t-e)/(a*s.size))<=i)return hi[o]}return hi[r-1]}function lne(n,e,t,i,r){for(let o=hi.length-1;o>=hi.indexOf(t);o--){let s=hi[o];if(D_[s].common&&n._adapter.diff(r,i,s)>=e-1)return s}return hi[t?hi.indexOf(t):0]}function une(n){for(let e=hi.indexOf(n)+1,t=hi.length;e<t;++e)if(D_[hi[e]].common)return hi[e]}function FB(n,e,t){if(!t)n[e]=!0;else if(t.length){let{lo:i,hi:r}=t_(t,e),o=t[i]>=e?t[i]:t[r];n[o]=!0}}function dne(n,e,t,i){let r=n._adapter,o=+r.startOf(e[0].value,i),s=e[e.length-1].value,a,c;for(a=o;a<=s;a=+r.add(a,1,i))c=t[a],c>=0&&(e[c].major=!0);return e}function LB(n,e,t){let i=[],r={},o=e.length,s,a;for(s=0;s<o;++s)a=e[s],r[a]=s,i.push({value:a,major:!1});return o===0||!t?i:dne(n,i,r,t)}var eD=(()=>{class n extends Vc{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){let r=t.time||(t.time={}),o=this._adapter=new EJ._date(t.adapters.date);o.init(i),Vu(r.displayFormats,o.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:NB(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,i=this._adapter,r=t.time.unit||"day",{min:o,max:s,minDefined:a,maxDefined:c}=this.getUserBounds();function l(u){!a&&!isNaN(u.min)&&(o=Math.min(o,u.min)),!c&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!a||!c)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),o=Rt(o)&&!isNaN(o)?o:+i.startOf(Date.now(),r),s=Rt(s)&&!isNaN(s)?s:+i.endOf(Date.now(),r)+1,this.min=Math.min(o,s-1),this.max=Math.max(o+1,s)}_getLabelBounds(){let t=this.getLabelTimestamps(),i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],r=t[t.length-1]),{min:i,max:r}}buildTicks(){let t=this.options,i=t.time,r=t.ticks,o=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);let s=this.min,a=this.max,c=yV(o,s,a);return this._unit=i.unit||(r.autoSkip?OB(i.minUnit,this.min,this.max,this._getLabelCapacity(s)):lne(this,c.length,i.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:une(this._unit),this.initOffsets(o),t.reverse&&c.reverse(),LB(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i=0,r=0,o,s;this.options.offset&&t.length&&(o=this.getDecimalForValue(t[0]),t.length===1?i=1-o:i=(this.getDecimalForValue(t[1])-o)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?r=s:r=(s-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;i=an(i,0,a),r=an(r,0,a),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){let t=this._adapter,i=this.min,r=this.max,o=this.options,s=o.time,a=s.unit||OB(s.minUnit,i,r,this._getLabelCapacity(i)),c=Te(o.ticks.stepSize,1),l=a==="week"?s.isoWeekday:!1,u=Nc(l)||l===!0,h={},f=i,y,b;if(u&&(f=+t.startOf(f,"isoWeek",l)),f=+t.startOf(f,u?"day":a),t.diff(r,i,a)>1e5*c)throw new Error(i+" and "+r+" are too far apart with stepSize of "+c+" "+a);let E=o.ticks.source==="data"&&this.getDataTimestamps();for(y=f,b=0;y<r;y=+t.add(y,c,a),b++)FB(h,y,E);return(y===r||o.bounds==="ticks"||b===1)&&FB(h,y,E),Object.keys(h).sort(kB).map(I=>+I)}getLabelForValue(t){let i=this._adapter,r=this.options.time;return r.tooltipFormat?i.format(t,r.tooltipFormat):i.format(t,r.displayFormats.datetime)}format(t,i){let o=this.options.time.displayFormats,s=this._unit,a=i||o[s];return this._adapter.format(t,a)}_tickFormatFunction(t,i,r,o){let s=this.options,a=s.ticks.callback;if(a)return ut(a,[t,i,r],this);let c=s.time.displayFormats,l=this._unit,u=this._majorUnit,h=l&&c[l],f=u&&c[u],y=r[i],b=u&&f&&y&&y.major;return this._adapter.format(t,o||(b?f:h))}generateTickLabels(t){let i,r,o;for(i=0,r=t.length;i<r;++i)o=t[i],o.label=this._tickFormatFunction(o.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let i=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+r)*i.factor)}getValueForPixel(t){let i=this._offsets,r=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){let i=this.options.ticks,r=this.ctx.measureText(t).width,o=tr(this.isHorizontal()?i.maxRotation:i.minRotation),s=Math.cos(o),a=Math.sin(o),c=this._resolveTickFontOptions(0).size;return{w:r*s+c*a,h:r*a+c*s}}_getLabelCapacity(t){let i=this.options.time,r=i.displayFormats,o=r[i.unit]||r.millisecond,s=this._tickFormatFunction(t,0,LB(this,[t],this._majorUnit),o),a=this._getLabelSize(s),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],i,r;if(t.length)return t;let o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(i=0,r=o.length;i<r;++i)t=t.concat(o[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],i,r;if(t.length)return t;let o=this.getLabels();for(i=0,r=o.length;i<r;++i)t.push(NB(this,o[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return i1(t.sort(kB))}}return n})();function m_(n,e,t){let i=0,r=n.length-1,o,s,a,c;t?(e>=n[i].pos&&e<=n[r].pos&&({lo:i,hi:r}=ro(n,"pos",e)),{pos:o,time:a}=n[i],{pos:s,time:c}=n[r]):(e>=n[i].time&&e<=n[r].time&&({lo:i,hi:r}=ro(n,"time",e)),{time:o,pos:a}=n[i],{time:s,pos:c}=n[r]);let l=s-o;return l?a+(c-a)*(e-o)/l:a}var tD=class extends eD{static id="timeseries";static defaults=eD.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=m_(t,this.min),this._tableRange=m_(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:t,max:i}=this,r=[],o=[],s,a,c,l,u;for(s=0,a=e.length;s<a;++s)l=e[s],l>=t&&l<=i&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(s=0,a=r.length;s<a;++s)u=r[s+1],c=r[s-1],l=r[s],Math.round((u+c)/2)!==l&&o.push({time:l,pos:s/(a-1)});return o}_generate(){let e=this.min,t=this.max,i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((r,o)=>r-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(m_(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return m_(this._table,i*this._tableRange+this._minPos,!0)}},hne=Object.freeze({__proto__:null,CategoryScale:Wte,LinearScale:Q1,LogarithmicScale:X1,RadialLinearScale:J1,TimeScale:eD,TimeSeriesScale:tD}),oj=[wJ,Gee,$te,hne];C_.register(...oj);var iD=C_;var fne=["barCanvas"],pne=["pieCanvas"];function mne(n,e){if(n&1&&(p(0,"option",27),v(1),m()),n&2){let t=e.$implicit;k("value",t.id),w(),J(t.name)}}function gne(n,e){if(n&1){let t=he();p(0,"div",20)(1,"div",15)(2,"div",21)(3,"div",22)(4,"label",23),v(5,"Select Barangay"),m(),p(6,"select",24),Ie("ngModelChange",function(r){Y(t);let o=L();return Se(o.selectedBarangay,r)||(o.selectedBarangay=r),Q(r)}),H("change",function(){Y(t);let r=L();return Q(r.onBarangayChange())}),p(7,"option",25),v(8,"All Barangays"),m(),W(9,mne,2,2,"option",26),re(10,"async"),m()()()()()}if(n&2){let t=L();w(6),Ee("ngModel",t.selectedBarangay),w(3),k("ngForOf",de(10,2,t.barangays$))}}function yne(n,e){if(n&1&&(p(0,"div",9)(1,"div",10)(2,"div",11)(3,"h4"),v(4),m(),p(5,"small",12),v(6),re(7,"titlecase"),m()()()()),n&2){let t=e.$implicit,i=L();w(4),J(i.countsByType[t]||0),w(2),J(de(7,2,t))}}var kf=class n{constructor(e,t,i,r,o){this.reportsService=e;this.barangaysService=t;this.auth=i;this.router=r;this.route=o}isMainAdmin=!1;barangayId=null;selectedBarangay="";barangays$;totalReports=0;countsByType={};pollutionTypes=[];last7Days=[];barCanvas;pieCanvas;barChart=null;pieChart=null;ngOnInit(){this.barangays$=this.barangaysService.getAllBarangays(),this.route.params.subscribe(e=>{let t=e.barangayId;this.auth.user$.pipe(se(i=>(this.isMainAdmin=!!i&&i.role==="admin"&&(!i.barangay||i.barangay===""),this.barangayId=t||i?.barangay||null,this.selectedBarangay=this.barangayId||"",i))).subscribe(()=>{this.loadAnalytics()})})}onBarangayChange(){this.barangayId=this.selectedBarangay||null,this.loadAnalytics()}loadAnalytics(){(this.isMainAdmin&&!this.barangayId?this.reportsService.getAllReports():this.barangayId?this.reportsService.getReportsByBarangay(this.barangayId):this.reportsService.getAllReports()).pipe(se(t=>t||[])).subscribe(t=>this.calculateMetrics(t))}goBack(){this.router.navigate(["/admin"])}calculateMetrics(e){this.totalReports=e.length;let t=new Set;e.forEach(a=>{let c=(a.type||a.pollutionType||"").toLowerCase();c&&t.add(c)}),this.pollutionTypes=Array.from(t).sort(),this.countsByType={},this.pollutionTypes.forEach(a=>{this.countsByType[a]=0});let i={},r=new Date;for(let a=6;a>=0;a--){let c=new Date;c.setDate(r.getDate()-a);let l=c.toISOString().slice(0,10);i[l]=0}e.forEach(a=>{let c=(a.type||a.pollutionType||"").toLowerCase();c&&this.countsByType.hasOwnProperty(c)&&this.countsByType[c]++;let l=null;if(a.createdAt&&typeof a.createdAt.toDate=="function"?l=a.createdAt.toDate():a.createdAt instanceof Date?l=a.createdAt:l=a.createdAt?new Date(a.createdAt):null,l){let u=l.toISOString().slice(0,10);u in i&&i[u]++}}),this.last7Days=Object.keys(i).map(a=>({label:a.slice(5),count:i[a]}));let o=this.last7Days.map(a=>a.label),s=this.last7Days.map(a=>a.count);setTimeout(()=>{try{!this.barChart&&this.barCanvas?this.barChart=new iD(this.barCanvas.nativeElement.getContext("2d"),{type:"bar",data:{labels:o,datasets:[{label:"Reports",data:s,backgroundColor:"#0d6efd"}]},options:{responsive:!0}}):this.barChart&&(this.barChart.data.labels=o,this.barChart.data.datasets[0].data=s,this.barChart.update());let a=this.pollutionTypes.map(u=>u.charAt(0).toUpperCase()+u.slice(1)),c=this.pollutionTypes.map(u=>this.countsByType[u]||0),l=["#198754","#0dcaf0","#ffc107","#dc3545","#6610f2","#fd7e14"];!this.pieChart&&this.pieCanvas?this.pieChart=new iD(this.pieCanvas.nativeElement.getContext("2d"),{type:"pie",data:{labels:a,datasets:[{data:c,backgroundColor:l.slice(0,a.length)}]},options:{responsive:!0}}):this.pieChart&&(this.pieChart.data.labels=a,this.pieChart.data.datasets[0].data=c,this.pieChart.data.datasets[0].backgroundColor=l.slice(0,a.length),this.pieChart.update())}catch(a){console.warn("Chart init failed",a)}},0)}static \u0275fac=function(t){return new(t||n)(K(Ji),K(Wn),K(Be),K(je),K(Ii))};static \u0275cmp=it({type:n,selectors:[["app-analytics"]],viewQuery:function(t,i){if(t&1&&(Xm(fne,5),Xm(pne,5)),t&2){let r;Wd(r=Gd())&&(i.barCanvas=r.first),Wd(r=Gd())&&(i.pieCanvas=r.first)}},decls:30,vars:3,consts:[["barCanvas",""],["pieCanvas",""],[1,"container","mt-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-arrow-left","me-2"],["class","card mb-3",4,"ngIf"],[1,"row","g-3"],[1,"col-md-3"],[1,"card","stat-card"],[1,"card-body","text-center"],[1,"text-muted"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"card","mt-4"],[1,"card-body"],[1,"row"],[1,"col-md-8"],[1,"col-md-4"],[1,"mb-3"],[1,"card","mb-3"],[1,"row","align-items-center"],[1,"col-md-6"],[1,"form-label","fw-medium"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,i){if(t&1){let r=he();p(0,"div",2)(1,"div",3)(2,"h3",4),v(3,"Analytics"),m(),p(4,"button",5),H("click",function(){return Y(r),Q(i.goBack())}),A(5,"i",6),v(6,"Back "),m()(),W(7,gne,11,4,"div",7),p(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"h4"),v(13),m(),p(14,"small",12),v(15,"Total Reports"),m()()()(),W(16,yne,8,4,"div",13),m(),p(17,"div",14)(18,"div",15)(19,"h5"),v(20,"Last 7 days"),m(),p(21,"div",16)(22,"div",17),A(23,"canvas",null,0),m(),p(25,"div",18)(26,"h6",19),v(27,"By Type"),m(),A(28,"canvas",null,1),m()()()()()}t&2&&(w(7),k("ngIf",i.isMainAdmin),w(6),J(i.totalReports),w(3),k("ngForOf",i.pollutionTypes))},dependencies:[vt,jn,Pt,Xt,$r,Hr,Wi,$n,Sn,Cn,ko],styles:[".stat-card[_ngcontent-%COMP%]{min-height:100px}.trend[_ngcontent-%COMP%]{height:140px}.trend-bar[_ngcontent-%COMP%]{width:12%;display:flex;flex-direction:column;justify-content:flex-end}.trend-bar[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{background:#0d6efd;width:100%;border-radius:4px 4px 0 0}.trend-bar[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-top:6px;font-size:11px}"]})};var sj=()=>{let n=q(Be),e=q(je);return n.user$.pipe(se(t=>!t||t.role!=="admin"?!0:(e.navigate(["/home"]),!1)))};var aj=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"login",component:Ov},{path:"sign-up",component:Bv},{path:"reset-password",component:Lv},{path:"home",component:Rv},{path:"help",component:Nv,canActivate:[sj]},{path:"profile",component:Fv,canActivate:[sa]},{path:"settings",component:Vv,canActivate:[sa]},{path:"submit-report",component:jv,canActivate:[sa]},{path:"admin",component:Mv,canActivate:[sa,hf]},{path:"admin/barangay/:barangayId",component:$v,canActivate:[sa,UT]},{path:"admin/analytics",component:kf,canActivate:[sa,hf]},{path:"admin/barangay/:barangayId/analytics",component:kf,canActivate:[sa,UT]},{path:"unauthorized",component:Uv},{path:"**",redirectTo:"home"}];var x_=class n{constructor(e,t){this.firestore=e;this.authService=t;this.initializeSettings()}initializeSettings(){let e=localStorage.getItem("userSettings");if(e)try{let t=JSON.parse(e);this.applyTheme(t.theme||"light"),this.applyLanguage(t.language||"english"),this.applyTextSize(t.textSize||"medium")}catch(t){console.error("Failed to parse saved settings:",t)}this.getSettings().subscribe(t=>{t&&(this.applyTheme(t.theme||"light"),this.applyLanguage(t.language||"english"),this.applyTextSize(t.textSize||"medium"),localStorage.setItem("userSettings",JSON.stringify(t)))})}getSettings(){return this.authService.user$.pipe(Ke(e=>{if(!e)return ce(null);let t=_e(this.firestore,`users/${e.uid}`);return Pi(t,{idField:"uid"})}),se(e=>e?.settings||null))}applyTheme(e){e==="dark"?(document.body.classList.add("dark-mode"),document.body.classList.remove("theme-light","theme-dark")):(document.body.classList.remove("dark-mode","theme-dark"),document.body.classList.add("theme-light"))}applyLanguage(e){document.documentElement.lang=e==="filipino"?"fil":"en"}applyTextSize(e){document.body.classList.remove("text-small","text-medium","text-large"),document.body.classList.add(`text-${e}`)}static \u0275fac=function(t){return new(t||n)(le(lt),le(Be))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};function vne(n){return()=>Promise.resolve()}var cj={providers:[wb(),Ww({eventCoalescing:!0}),zE(aj),bN(()=>EN({projectId:"local-pollution-report-app",appId:"1:511484801358:web:3de78999a872c66451ee1f",storageBucket:"local-pollution-report-app.firebasestorage.app",apiKey:"AIzaSyDo3JkHYYhZqNPaBLBHzPoywZwyRYVSBiA",authDomain:"local-pollution-report-app.firebaseapp.com",messagingSenderId:"511484801358"})),IL(()=>CL()),xO(()=>PO()),xL(()=>Au(wN())),jL(()=>UL()),{provide:Km,useFactory:vne,deps:[x_],multi:!0}]};var A_=class n{title=Ct("pollution-reporting-app");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=it({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,i){t&1&&A(0,"router-outlet")},dependencies:[Eh],encapsulation:2})};bE(A_,cj).catch(n=>console.error(n));
